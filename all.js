/*
 jquery.layout 1.3.0 - Release Candidate 29.15
 $Date: 2011-06-25 08:00:00 (Sat, 25 Jun 2011) $
 $Rev: 302915 $

 Copyright (c) 2010 
   Fabrizio Balliano (http://www.fabrizioballiano.net)
   Kevin Dalman (http://allpro.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 Changelog: http://layout.jquery-dev.net/changelog.cfm#1.3.0.rc29.15

 Docs: http://layout.jquery-dev.net/documentation.html
 Tips: http://layout.jquery-dev.net/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout
 Rangy Text Inputs, a cross-browser textarea and text input library plug-in for jQuery.

 Part of Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Depends on jQuery 1.0 or later.

 Copyright 2010, Tim Down
 Licensed under the MIT license.
 Version: 0.1.205
 Build date: 5 November 2010
*/
if(typeof YAHOO=="undefined"||!YAHOO)var YAHOO={};YAHOO.namespace=function(){var a=arguments,o=null,i,j,d;for(i=0;i<a.length;i=i+1){d=(""+a[i]).split(".");o=YAHOO;for(j=d[0]=="YAHOO"?1:0;j<d.length;j=j+1){o[d[j]]=o[d[j]]||{};o=o[d[j]]}}return o};YAHOO.log=function(msg,cat,src){var l=YAHOO.widget.Logger;if(l&&l.log)return l.log(msg,cat,src);else return false};
YAHOO.register=function(name,mainClass,data){var mods=YAHOO.env.modules,m,v,b,ls,i;if(!mods[name])mods[name]={versions:[],builds:[]};m=mods[name];v=data.version;b=data.build;ls=YAHOO.env.listeners;m.name=name;m.version=v;m.build=b;m.versions.push(v);m.builds.push(b);m.mainClass=mainClass;for(i=0;i<ls.length;i=i+1)ls[i](m);if(mainClass){mainClass.VERSION=v;mainClass.BUILD=b}else YAHOO.log("mainClass is undefined for module "+name,"warn")};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};
YAHOO.env.getVersion=function(name){return YAHOO.env.modules[name]||null};
YAHOO.env.ua=function(){var numberfy=function(s){var c=0;return parseFloat(s.replace(/\./g,function(){return c++==1?"":"."}))},nav=navigator,o={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:nav.cajaVersion,secure:false,os:null},ua=navigator&&navigator.userAgent,loc=window&&window.location,href=loc&&loc.href,m;o.secure=href&&href.toLowerCase().indexOf("https")===0;if(ua){if(/windows|win32/i.test(ua))o.os="windows";else if(/macintosh/i.test(ua))o.os="macintosh";if(/KHTML/.test(ua))o.webkit=1;
m=ua.match(/AppleWebKit\/([^\s]*)/);if(m&&m[1]){o.webkit=numberfy(m[1]);if(/ Mobile\//.test(ua))o.mobile="Apple";else{m=ua.match(/NokiaN[^\/]*/);if(m)o.mobile=m[0]}m=ua.match(/AdobeAIR\/([^\s]*)/);if(m)o.air=m[0]}if(!o.webkit){m=ua.match(/Opera[\s\/]([^\s]*)/);if(m&&m[1]){o.opera=numberfy(m[1]);m=ua.match(/Opera Mini[^;]*/);if(m)o.mobile=m[0]}else{m=ua.match(/MSIE\s([^;]*)/);if(m&&m[1])o.ie=numberfy(m[1]);else{m=ua.match(/Gecko\/([^\s]*)/);if(m){o.gecko=1;m=ua.match(/rv:([^\s\)]*)/);if(m&&m[1])o.gecko=
numberfy(m[1])}}}}}return o}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var l=YAHOO_config.listener,ls=YAHOO.env.listeners,unique=true,i;if(l){for(i=0;i<ls.length;i++)if(ls[i]==l){unique=false;break}if(unique)ls.push(l)}}})();YAHOO.lang=YAHOO.lang||{};
(function(){var L=YAHOO.lang,OP=Object.prototype,ARRAY_TOSTRING="[object Array]",FUNCTION_TOSTRING="[object Function]",OBJECT_TOSTRING="[object Object]",NOTHING=[],ADD=["toString","valueOf"],OB={isArray:function(o){return OP.toString.apply(o)===ARRAY_TOSTRING},isBoolean:function(o){return typeof o==="boolean"},isFunction:function(o){return typeof o==="function"||OP.toString.apply(o)===FUNCTION_TOSTRING},isNull:function(o){return o===null},isNumber:function(o){return typeof o==="number"&&isFinite(o)},
isObject:function(o){return o&&(typeof o==="object"||L.isFunction(o))||false},isString:function(o){return typeof o==="string"},isUndefined:function(o){return typeof o==="undefined"},_IEEnumFix:YAHOO.env.ua.ie?function(r,s){var i,fname,f;for(i=0;i<ADD.length;i=i+1){fname=ADD[i];f=s[fname];if(L.isFunction(f)&&f!=OP[fname])r[fname]=f}}:function(){},extend:function(subc,superc,overrides){if(!superc||!subc)throw new Error("extend failed, please check that "+"all dependencies are included.");var F=function(){},
i;F.prototype=superc.prototype;subc.prototype=new F;subc.prototype.constructor=subc;subc.superclass=superc.prototype;if(superc.prototype.constructor==OP.constructor)superc.prototype.constructor=superc;if(overrides){for(i in overrides)if(L.hasOwnProperty(overrides,i))subc.prototype[i]=overrides[i];L._IEEnumFix(subc.prototype,overrides)}},augmentObject:function(r,s){if(!s||!r)throw new Error("Absorb failed, verify dependencies.");var a=arguments,i,p,overrideList=a[2];if(overrideList&&overrideList!==
true)for(i=2;i<a.length;i=i+1)r[a[i]]=s[a[i]];else{for(p in s)if(overrideList||!(p in r))r[p]=s[p];L._IEEnumFix(r,s)}},augmentProto:function(r,s){if(!s||!r)throw new Error("Augment failed, verify dependencies.");var a=[r.prototype,s.prototype],i;for(i=2;i<arguments.length;i=i+1)a.push(arguments[i]);L.augmentObject.apply(this,a)},dump:function(o,d){var i,len,s=[],OBJ="{...}",FUN="f(){...}",COMMA=", ",ARROW=" => ";if(!L.isObject(o))return o+"";else if(o instanceof Date||"nodeType"in o&&"tagName"in o)return o;
else if(L.isFunction(o))return FUN;d=L.isNumber(d)?d:3;if(L.isArray(o)){s.push("[");for(i=0,len=o.length;i<len;i=i+1){if(L.isObject(o[i]))s.push(d>0?L.dump(o[i],d-1):OBJ);else s.push(o[i]);s.push(COMMA)}if(s.length>1)s.pop();s.push("]")}else{s.push("{");for(i in o)if(L.hasOwnProperty(o,i)){s.push(i+ARROW);if(L.isObject(o[i]))s.push(d>0?L.dump(o[i],d-1):OBJ);else s.push(o[i]);s.push(COMMA)}if(s.length>1)s.pop();s.push("}")}return s.join("")},substitute:function(s,o,f){var i,j,k,key,v,meta,saved=[],
token,DUMP="dump",SPACE=" ",LBRACE="{",RBRACE="}",dump,objstr;for(;;){i=s.lastIndexOf(LBRACE);if(i<0)break;j=s.indexOf(RBRACE,i);if(i+1>=j)break;token=s.substring(i+1,j);key=token;meta=null;k=key.indexOf(SPACE);if(k>-1){meta=key.substring(k+1);key=key.substring(0,k)}v=o[key];if(f)v=f(key,v,meta);if(L.isObject(v))if(L.isArray(v))v=L.dump(v,parseInt(meta,10));else{meta=meta||"";dump=meta.indexOf(DUMP);if(dump>-1)meta=meta.substring(4);objstr=v.toString();if(objstr===OBJECT_TOSTRING||dump>-1)v=L.dump(v,
parseInt(meta,10));else v=objstr}else if(!L.isString(v)&&!L.isNumber(v)){v="~-"+saved.length+"-~";saved[saved.length]=token}s=s.substring(0,i)+v+s.substring(j+1)}for(i=saved.length-1;i>=0;i=i-1)s=s.replace(new RegExp("~-"+i+"-~"),"{"+saved[i]+"}","g");return s},trim:function(s){try{return s.replace(/^\s+|\s+$/g,"")}catch(e){return s}},merge:function(){var o={},a=arguments,l=a.length,i;for(i=0;i<l;i=i+1)L.augmentObject(o,a[i],true);return o},later:function(when,o,fn,data,periodic){when=when||0;o=o||
{};var m=fn,d=data,f,r;if(L.isString(fn))m=o[fn];if(!m)throw new TypeError("method undefined");if(d&&!L.isArray(d))d=[data];f=function(){m.apply(o,d||NOTHING)};r=periodic?setInterval(f,when):setTimeout(f,when);return{interval:periodic,cancel:function(){if(this.interval)clearInterval(r);else clearTimeout(r)}}},isValue:function(o){return L.isObject(o)||L.isString(o)||L.isNumber(o)||L.isBoolean(o)}};L.hasOwnProperty=OP.hasOwnProperty?function(o,prop){return o&&o.hasOwnProperty(prop)}:function(o,prop){return!L.isUndefined(o[prop])&&
o.constructor.prototype[prop]!==o[prop]};OB.augmentObject(L,OB,true);YAHOO.util.Lang=L;L.augment=L.augmentProto;YAHOO.augment=L.augmentProto;YAHOO.extend=L.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.8.0r4",build:"2449"});
(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var Y=YAHOO.util,lang=YAHOO.lang,UA=YAHOO.env.ua,trim=YAHOO.lang.trim,propertyCache={},reCache={},RE_TABLE=/^t(?:able|d|h)$/i,RE_COLOR=/color$/i,document=window.document,documentElement=document.documentElement,OWNER_DOCUMENT="ownerDocument",DEFAULT_VIEW="defaultView",DOCUMENT_ELEMENT="documentElement",COMPAT_MODE="compatMode",OFFSET_LEFT="offsetLeft",OFFSET_TOP="offsetTop",OFFSET_PARENT="offsetParent",PARENT_NODE="parentNode",NODE_TYPE="nodeType",
TAG_NAME="tagName",SCROLL_LEFT="scrollLeft",SCROLL_TOP="scrollTop",GET_BOUNDING_CLIENT_RECT="getBoundingClientRect",GET_COMPUTED_STYLE="getComputedStyle",CURRENT_STYLE="currentStyle",CSS1_COMPAT="CSS1Compat",_BACK_COMPAT="BackCompat",_CLASS="class",CLASS_NAME="className",EMPTY="",SPACE=" ",C_START="(?:^|\\s)",C_END="(?= |$)",G="g",POSITION="position",FIXED="fixed",RELATIVE="relative",LEFT="left",TOP="top",MEDIUM="medium",BORDER_LEFT_WIDTH="borderLeftWidth",BORDER_TOP_WIDTH="borderTopWidth",isOpera=
UA.opera,isSafari=UA.webkit,isGecko=UA.gecko,isIE=UA.ie;Y.Dom={CUSTOM_ATTRIBUTES:!documentElement.hasAttribute?{"for":"htmlFor","class":CLASS_NAME}:{"htmlFor":"for","className":_CLASS},DOT_ATTRIBUTES:{},get:function(el){var id,nodes,c,i,len,attr;if(el){if(el[NODE_TYPE]||el.item)return el;if(typeof el==="string"){id=el;el=document.getElementById(el);attr=el?el.attributes:null;if(el&&attr&&attr.id&&attr.id.value===id)return el;else if(el&&document.all){el=null;nodes=document.all[id];for(i=0,len=nodes.length;i<
len;++i)if(nodes[i].id===id)return nodes[i]}return el}if(YAHOO.util.Element&&el instanceof YAHOO.util.Element)el=el.get("element");if("length"in el){c=[];for(i=0,len=el.length;i<len;++i)c[c.length]=Y.Dom.get(el[i]);return c}return el}return null},getComputedStyle:function(el,property){if(window[GET_COMPUTED_STYLE])return el[OWNER_DOCUMENT][DEFAULT_VIEW][GET_COMPUTED_STYLE](el,null)[property];else if(el[CURRENT_STYLE])return Y.Dom.IE_ComputedStyle.get(el,property)},getStyle:function(el,property){return Y.Dom.batch(el,
Y.Dom._getStyle,property)},_getStyle:function(){if(window[GET_COMPUTED_STYLE])return function(el,property){property=property==="float"?property="cssFloat":Y.Dom._toCamel(property);var value=el.style[property],computed;if(!value){computed=el[OWNER_DOCUMENT][DEFAULT_VIEW][GET_COMPUTED_STYLE](el,null);if(computed)value=computed[property]}return value};else if(documentElement[CURRENT_STYLE])return function(el,property){var value;switch(property){case "opacity":value=100;try{value=el.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{value=
el.filters("alpha").opacity}catch(err){}}return value/100;case "float":property="styleFloat";default:property=Y.Dom._toCamel(property);value=el[CURRENT_STYLE]?el[CURRENT_STYLE][property]:null;return el.style[property]||value}}}(),setStyle:function(el,property,val){Y.Dom.batch(el,Y.Dom._setStyle,{prop:property,val:val})},_setStyle:function(){if(isIE)return function(el,args){var property=Y.Dom._toCamel(args.prop),val=args.val;if(el)switch(property){case "opacity":if(lang.isString(el.style.filter)){el.style.filter=
"alpha(opacity="+val*100+")";if(!el[CURRENT_STYLE]||!el[CURRENT_STYLE].hasLayout)el.style.zoom=1}break;case "float":property="styleFloat";default:el.style[property]=val}else;};else return function(el,args){var property=Y.Dom._toCamel(args.prop),val=args.val;if(el){if(property=="float")property="cssFloat";el.style[property]=val}else;}}(),getXY:function(el){return Y.Dom.batch(el,Y.Dom._getXY)},_canPosition:function(el){return Y.Dom._getStyle(el,"display")!=="none"&&Y.Dom._inDoc(el)},_getXY:function(){if(document[DOCUMENT_ELEMENT][GET_BOUNDING_CLIENT_RECT])return function(node){var scrollLeft,
scrollTop,box,doc,off1,off2,mode,bLeft,bTop,floor=Math.floor,xy=false;if(Y.Dom._canPosition(node)){box=node[GET_BOUNDING_CLIENT_RECT]();doc=node[OWNER_DOCUMENT];scrollLeft=Y.Dom.getDocumentScrollLeft(doc);scrollTop=Y.Dom.getDocumentScrollTop(doc);xy=[floor(box[LEFT]),floor(box[TOP])];if(isIE&&UA.ie<8){off1=2;off2=2;mode=doc[COMPAT_MODE];if(UA.ie===6)if(mode!==_BACK_COMPAT){off1=0;off2=0}if(mode===_BACK_COMPAT){bLeft=_getComputedStyle(doc[DOCUMENT_ELEMENT],BORDER_LEFT_WIDTH);bTop=_getComputedStyle(doc[DOCUMENT_ELEMENT],
BORDER_TOP_WIDTH);if(bLeft!==MEDIUM)off1=parseInt(bLeft,10);if(bTop!==MEDIUM)off2=parseInt(bTop,10)}xy[0]-=off1;xy[1]-=off2}if(scrollTop||scrollLeft){xy[0]+=scrollLeft;xy[1]+=scrollTop}xy[0]=floor(xy[0]);xy[1]=floor(xy[1])}else;return xy};else return function(node){var docScrollLeft,docScrollTop,scrollTop,scrollLeft,bCheck,xy=false,parentNode=node;if(Y.Dom._canPosition(node)){xy=[node[OFFSET_LEFT],node[OFFSET_TOP]];docScrollLeft=Y.Dom.getDocumentScrollLeft(node[OWNER_DOCUMENT]);docScrollTop=Y.Dom.getDocumentScrollTop(node[OWNER_DOCUMENT]);
bCheck=isGecko||UA.webkit>519?true:false;while(parentNode=parentNode[OFFSET_PARENT]){xy[0]+=parentNode[OFFSET_LEFT];xy[1]+=parentNode[OFFSET_TOP];if(bCheck)xy=Y.Dom._calcBorders(parentNode,xy)}if(Y.Dom._getStyle(node,POSITION)!==FIXED){parentNode=node;while((parentNode=parentNode[PARENT_NODE])&&parentNode[TAG_NAME]){scrollTop=parentNode[SCROLL_TOP];scrollLeft=parentNode[SCROLL_LEFT];if(isGecko&&Y.Dom._getStyle(parentNode,"overflow")!=="visible")xy=Y.Dom._calcBorders(parentNode,xy);if(scrollTop||scrollLeft){xy[0]-=
scrollLeft;xy[1]-=scrollTop}}xy[0]+=docScrollLeft;xy[1]+=docScrollTop}else if(isOpera){xy[0]-=docScrollLeft;xy[1]-=docScrollTop}else if(isSafari||isGecko){xy[0]+=docScrollLeft;xy[1]+=docScrollTop}xy[0]=Math.floor(xy[0]);xy[1]=Math.floor(xy[1])}else;return xy}}(),getX:function(el){var f=function(el){return Y.Dom.getXY(el)[0]};return Y.Dom.batch(el,f,Y.Dom,true)},getY:function(el){var f=function(el){return Y.Dom.getXY(el)[1]};return Y.Dom.batch(el,f,Y.Dom,true)},setXY:function(el,pos,noRetry){Y.Dom.batch(el,
Y.Dom._setXY,{pos:pos,noRetry:noRetry})},_setXY:function(node,args){var pos=Y.Dom._getStyle(node,POSITION),setStyle=Y.Dom.setStyle,xy=args.pos,noRetry=args.noRetry,delta=[parseInt(Y.Dom.getComputedStyle(node,LEFT),10),parseInt(Y.Dom.getComputedStyle(node,TOP),10)],currentXY,newXY;if(pos=="static"){pos=RELATIVE;setStyle(node,POSITION,pos)}currentXY=Y.Dom._getXY(node);if(!xy||currentXY===false)return false;if(isNaN(delta[0]))delta[0]=pos==RELATIVE?0:node[OFFSET_LEFT];if(isNaN(delta[1]))delta[1]=pos==
RELATIVE?0:node[OFFSET_TOP];if(xy[0]!==null)setStyle(node,LEFT,xy[0]-currentXY[0]+delta[0]+"px");if(xy[1]!==null)setStyle(node,TOP,xy[1]-currentXY[1]+delta[1]+"px");if(!noRetry){newXY=Y.Dom._getXY(node);if(xy[0]!==null&&newXY[0]!=xy[0]||xy[1]!==null&&newXY[1]!=xy[1])Y.Dom._setXY(node,{pos:xy,noRetry:true})}},setX:function(el,x){Y.Dom.setXY(el,[x,null])},setY:function(el,y){Y.Dom.setXY(el,[null,y])},getRegion:function(el){var f=function(el){var region=false;if(Y.Dom._canPosition(el))region=Y.Region.getRegion(el);
else;return region};return Y.Dom.batch(el,f,Y.Dom,true)},getClientWidth:function(){return Y.Dom.getViewportWidth()},getClientHeight:function(){return Y.Dom.getViewportHeight()},getElementsByClassName:function(className,tag,root,apply,o,overrides){tag=tag||"*";root=root?Y.Dom.get(root):null||document;if(!root)return[];var nodes=[],elements=root.getElementsByTagName(tag),hasClass=Y.Dom.hasClass;for(var i=0,len=elements.length;i<len;++i)if(hasClass(elements[i],className))nodes[nodes.length]=elements[i];
if(apply)Y.Dom.batch(nodes,apply,o,overrides);return nodes},hasClass:function(el,className){return Y.Dom.batch(el,Y.Dom._hasClass,className)},_hasClass:function(el,className){var ret=false,current;if(el&&className){current=Y.Dom._getAttribute(el,CLASS_NAME)||EMPTY;if(className.exec)ret=className.test(current);else ret=className&&(SPACE+current+SPACE).indexOf(SPACE+className+SPACE)>-1}else;return ret},addClass:function(el,className){return Y.Dom.batch(el,Y.Dom._addClass,className)},_addClass:function(el,
className){var ret=false,current;if(el&&className){current=Y.Dom._getAttribute(el,CLASS_NAME)||EMPTY;if(!Y.Dom._hasClass(el,className)){Y.Dom.setAttribute(el,CLASS_NAME,trim(current+SPACE+className));ret=true}}else;return ret},removeClass:function(el,className){return Y.Dom.batch(el,Y.Dom._removeClass,className)},_removeClass:function(el,className){var ret=false,current,newClass,attr;if(el&&className){current=Y.Dom._getAttribute(el,CLASS_NAME)||EMPTY;Y.Dom.setAttribute(el,CLASS_NAME,current.replace(Y.Dom._getClassRegex(className),
EMPTY));newClass=Y.Dom._getAttribute(el,CLASS_NAME);if(current!==newClass){Y.Dom.setAttribute(el,CLASS_NAME,trim(newClass));ret=true;if(Y.Dom._getAttribute(el,CLASS_NAME)===""){attr=el.hasAttribute&&el.hasAttribute(_CLASS)?_CLASS:CLASS_NAME;el.removeAttribute(attr)}}}else;return ret},replaceClass:function(el,oldClassName,newClassName){return Y.Dom.batch(el,Y.Dom._replaceClass,{from:oldClassName,to:newClassName})},_replaceClass:function(el,classObj){var className,from,to,ret=false,current;if(el&&classObj){from=
classObj.from;to=classObj.to;if(!to)ret=false;else if(!from)ret=Y.Dom._addClass(el,classObj.to);else if(from!==to){current=Y.Dom._getAttribute(el,CLASS_NAME)||EMPTY;className=(SPACE+current.replace(Y.Dom._getClassRegex(from),SPACE+to)).split(Y.Dom._getClassRegex(to));className.splice(1,0,SPACE+to);Y.Dom.setAttribute(el,CLASS_NAME,trim(className.join(EMPTY)));ret=true}}else;return ret},generateId:function(el,prefix){prefix=prefix||"yui-gen";var f=function(el){if(el&&el.id)return el.id;var id=prefix+
YAHOO.env._id_counter++;if(el){if(el[OWNER_DOCUMENT]&&el[OWNER_DOCUMENT].getElementById(id))return Y.Dom.generateId(el,id+prefix);el.id=id}return id};return Y.Dom.batch(el,f,Y.Dom,true)||f.apply(Y.Dom,arguments)},isAncestor:function(haystack,needle){haystack=Y.Dom.get(haystack);needle=Y.Dom.get(needle);var ret=false;if(haystack&&needle&&haystack[NODE_TYPE]&&needle[NODE_TYPE])if(haystack.contains&&haystack!==needle)ret=haystack.contains(needle);else{if(haystack.compareDocumentPosition)ret=!!(haystack.compareDocumentPosition(needle)&
16)}else;return ret},inDocument:function(el,doc){return Y.Dom._inDoc(Y.Dom.get(el),doc)},_inDoc:function(el,doc){var ret=false;if(el&&el[TAG_NAME]){doc=doc||el[OWNER_DOCUMENT];ret=Y.Dom.isAncestor(doc[DOCUMENT_ELEMENT],el)}else;return ret},getElementsBy:function(method,tag,root,apply,o,overrides,firstOnly){tag=tag||"*";root=root?Y.Dom.get(root):null||document;if(!root)return[];var nodes=[],elements=root.getElementsByTagName(tag);for(var i=0,len=elements.length;i<len;++i)if(method(elements[i]))if(firstOnly){nodes=
elements[i];break}else nodes[nodes.length]=elements[i];if(apply)Y.Dom.batch(nodes,apply,o,overrides);return nodes},getElementBy:function(method,tag,root){return Y.Dom.getElementsBy(method,tag,root,null,null,null,true)},batch:function(el,method,o,overrides){var collection=[],scope=overrides?o:window;el=el&&(el[TAG_NAME]||el.item)?el:Y.Dom.get(el);if(el&&method){if(el[TAG_NAME]||el.length===undefined)return method.call(scope,el,o);for(var i=0;i<el.length;++i)collection[collection.length]=method.call(scope,
el[i],o)}else return false;return collection},getDocumentHeight:function(){var scrollHeight=document[COMPAT_MODE]!=CSS1_COMPAT||isSafari?document.body.scrollHeight:documentElement.scrollHeight,h=Math.max(scrollHeight,Y.Dom.getViewportHeight());return h},getDocumentWidth:function(){var scrollWidth=document[COMPAT_MODE]!=CSS1_COMPAT||isSafari?document.body.scrollWidth:documentElement.scrollWidth,w=Math.max(scrollWidth,Y.Dom.getViewportWidth());return w},getViewportHeight:function(){var height=self.innerHeight,
mode=document[COMPAT_MODE];if((mode||isIE)&&!isOpera)height=mode==CSS1_COMPAT?documentElement.clientHeight:document.body.clientHeight;return height},getViewportWidth:function(){var width=self.innerWidth,mode=document[COMPAT_MODE];if(mode||isIE)width=mode==CSS1_COMPAT?documentElement.clientWidth:document.body.clientWidth;return width},getAncestorBy:function(node,method){while(node=node[PARENT_NODE])if(Y.Dom._testElement(node,method))return node;return null},getAncestorByClassName:function(node,className){node=
Y.Dom.get(node);if(!node)return null;var method=function(el){return Y.Dom.hasClass(el,className)};return Y.Dom.getAncestorBy(node,method)},getAncestorByTagName:function(node,tagName){node=Y.Dom.get(node);if(!node)return null;var method=function(el){return el[TAG_NAME]&&el[TAG_NAME].toUpperCase()==tagName.toUpperCase()};return Y.Dom.getAncestorBy(node,method)},getPreviousSiblingBy:function(node,method){while(node){node=node.previousSibling;if(Y.Dom._testElement(node,method))return node}return null},
getPreviousSibling:function(node){node=Y.Dom.get(node);if(!node)return null;return Y.Dom.getPreviousSiblingBy(node)},getNextSiblingBy:function(node,method){while(node){node=node.nextSibling;if(Y.Dom._testElement(node,method))return node}return null},getNextSibling:function(node){node=Y.Dom.get(node);if(!node)return null;return Y.Dom.getNextSiblingBy(node)},getFirstChildBy:function(node,method){var child=Y.Dom._testElement(node.firstChild,method)?node.firstChild:null;return child||Y.Dom.getNextSiblingBy(node.firstChild,
method)},getFirstChild:function(node,method){node=Y.Dom.get(node);if(!node)return null;return Y.Dom.getFirstChildBy(node)},getLastChildBy:function(node,method){if(!node)return null;var child=Y.Dom._testElement(node.lastChild,method)?node.lastChild:null;return child||Y.Dom.getPreviousSiblingBy(node.lastChild,method)},getLastChild:function(node){node=Y.Dom.get(node);return Y.Dom.getLastChildBy(node)},getChildrenBy:function(node,method){var child=Y.Dom.getFirstChildBy(node,method),children=child?[child]:
[];Y.Dom.getNextSiblingBy(child,function(node){if(!method||method(node))children[children.length]=node;return false});return children},getChildren:function(node){node=Y.Dom.get(node);if(!node);return Y.Dom.getChildrenBy(node)},getDocumentScrollLeft:function(doc){doc=doc||document;return Math.max(doc[DOCUMENT_ELEMENT].scrollLeft,doc.body.scrollLeft)},getDocumentScrollTop:function(doc){doc=doc||document;return Math.max(doc[DOCUMENT_ELEMENT].scrollTop,doc.body.scrollTop)},insertBefore:function(newNode,
referenceNode){newNode=Y.Dom.get(newNode);referenceNode=Y.Dom.get(referenceNode);if(!newNode||!referenceNode||!referenceNode[PARENT_NODE])return null;return referenceNode[PARENT_NODE].insertBefore(newNode,referenceNode)},insertAfter:function(newNode,referenceNode){newNode=Y.Dom.get(newNode);referenceNode=Y.Dom.get(referenceNode);if(!newNode||!referenceNode||!referenceNode[PARENT_NODE])return null;if(referenceNode.nextSibling)return referenceNode[PARENT_NODE].insertBefore(newNode,referenceNode.nextSibling);
else return referenceNode[PARENT_NODE].appendChild(newNode)},getClientRegion:function(){var t=Y.Dom.getDocumentScrollTop(),l=Y.Dom.getDocumentScrollLeft(),r=Y.Dom.getViewportWidth()+l,b=Y.Dom.getViewportHeight()+t;return new Y.Region(t,r,b,l)},setAttribute:function(el,attr,val){Y.Dom.batch(el,Y.Dom._setAttribute,{attr:attr,val:val})},_setAttribute:function(el,args){var attr=Y.Dom._toCamel(args.attr),val=args.val;if(el&&el.setAttribute)if(Y.Dom.DOT_ATTRIBUTES[attr])el[attr]=val;else{attr=Y.Dom.CUSTOM_ATTRIBUTES[attr]||
attr;el.setAttribute(attr,val)}else;},getAttribute:function(el,attr){return Y.Dom.batch(el,Y.Dom._getAttribute,attr)},_getAttribute:function(el,attr){var val;attr=Y.Dom.CUSTOM_ATTRIBUTES[attr]||attr;if(el&&el.getAttribute)val=el.getAttribute(attr,2);else;return val},_toCamel:function(property){var c=propertyCache;function tU(x,l){return l.toUpperCase()}return c[property]||(c[property]=property.indexOf("-")===-1?property:property.replace(/-([a-z])/gi,tU))},_getClassRegex:function(className){var re;
if(className!==undefined)if(className.exec)re=className;else{re=reCache[className];if(!re){className=className.replace(Y.Dom._patterns.CLASS_RE_TOKENS,"\\$1");re=reCache[className]=new RegExp(C_START+className+C_END,G)}}return re},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(node,method){return node&&node[NODE_TYPE]==1&&(!method||method(node))},_calcBorders:function(node,xy2){var t=parseInt(Y.Dom[GET_COMPUTED_STYLE](node,BORDER_TOP_WIDTH),
10)||0,l=parseInt(Y.Dom[GET_COMPUTED_STYLE](node,BORDER_LEFT_WIDTH),10)||0;if(isGecko)if(RE_TABLE.test(node[TAG_NAME])){t=0;l=0}xy2[0]+=l;xy2[1]+=t;return xy2}};var _getComputedStyle=Y.Dom[GET_COMPUTED_STYLE];if(UA.opera)Y.Dom[GET_COMPUTED_STYLE]=function(node,att){var val=_getComputedStyle(node,att);if(RE_COLOR.test(att))val=Y.Dom.Color.toRGB(val);return val};if(UA.webkit)Y.Dom[GET_COMPUTED_STYLE]=function(node,att){var val=_getComputedStyle(node,att);if(val==="rgba(0, 0, 0, 0)")val="transparent";
return val};if(UA.ie&&UA.ie>=8&&document.documentElement.hasAttribute)Y.Dom.DOT_ATTRIBUTES.type=true})();YAHOO.util.Region=function(t,r,b,l){this.top=t;this.y=t;this[1]=t;this.right=r;this.bottom=b;this.left=l;this.x=l;this[0]=l;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(region){return region.left>=this.left&&region.right<=this.right&&region.top>=this.top&&region.bottom<=this.bottom};
YAHOO.util.Region.prototype.getArea=function(){return(this.bottom-this.top)*(this.right-this.left)};YAHOO.util.Region.prototype.intersect=function(region){var t=Math.max(this.top,region.top),r=Math.min(this.right,region.right),b=Math.min(this.bottom,region.bottom),l=Math.max(this.left,region.left);if(b>=t&&r>=l)return new YAHOO.util.Region(t,r,b,l);else return null};
YAHOO.util.Region.prototype.union=function(region){var t=Math.min(this.top,region.top),r=Math.max(this.right,region.right),b=Math.max(this.bottom,region.bottom),l=Math.min(this.left,region.left);return new YAHOO.util.Region(t,r,b,l)};YAHOO.util.Region.prototype.toString=function(){return"Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}"};
YAHOO.util.Region.getRegion=function(el){var p=YAHOO.util.Dom.getXY(el),t=p[1],r=p[0]+el.offsetWidth,b=p[1]+el.offsetHeight,l=p[0];return new YAHOO.util.Region(t,r,b,l)};YAHOO.util.Point=function(x,y){if(YAHOO.lang.isArray(x)){y=x[1];x=x[0]}YAHOO.util.Point.superclass.constructor.call(this,y,x,y,x)};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);
(function(){var Y=YAHOO.util,CLIENT_TOP="clientTop",CLIENT_LEFT="clientLeft",PARENT_NODE="parentNode",RIGHT="right",HAS_LAYOUT="hasLayout",PX="px",OPACITY="opacity",AUTO="auto",BORDER_LEFT_WIDTH="borderLeftWidth",BORDER_TOP_WIDTH="borderTopWidth",BORDER_RIGHT_WIDTH="borderRightWidth",BORDER_BOTTOM_WIDTH="borderBottomWidth",VISIBLE="visible",TRANSPARENT="transparent",HEIGHT="height",WIDTH="width",STYLE="style",CURRENT_STYLE="currentStyle",re_size=/^width|height$/,re_unit=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,
ComputedStyle={get:function(el,property){var value="",current=el[CURRENT_STYLE][property];if(property===OPACITY)value=Y.Dom.getStyle(el,OPACITY);else if(!current||current.indexOf&&current.indexOf(PX)>-1)value=current;else if(Y.Dom.IE_COMPUTED[property])value=Y.Dom.IE_COMPUTED[property](el,property);else if(re_unit.test(current))value=Y.Dom.IE.ComputedStyle.getPixel(el,property);else value=current;return value},getOffset:function(el,prop){var current=el[CURRENT_STYLE][prop],capped=prop.charAt(0).toUpperCase()+
prop.substr(1),offset="offset"+capped,pixel="pixel"+capped,value="",actual;if(current==AUTO){actual=el[offset];if(actual===undefined)value=0;value=actual;if(re_size.test(prop)){el[STYLE][prop]=actual;if(el[offset]>actual)value=actual-(el[offset]-actual);el[STYLE][prop]=AUTO}}else{if(!el[STYLE][pixel]&&!el[STYLE][prop])el[STYLE][prop]=current;value=el[STYLE][pixel]}return value+PX},getBorderWidth:function(el,property){var value=null;if(!el[CURRENT_STYLE][HAS_LAYOUT])el[STYLE].zoom=1;switch(property){case BORDER_TOP_WIDTH:value=
el[CLIENT_TOP];break;case BORDER_BOTTOM_WIDTH:value=el.offsetHeight-el.clientHeight-el[CLIENT_TOP];break;case BORDER_LEFT_WIDTH:value=el[CLIENT_LEFT];break;case BORDER_RIGHT_WIDTH:value=el.offsetWidth-el.clientWidth-el[CLIENT_LEFT];break}return value+PX},getPixel:function(node,att){var val=null,styleRight=node[CURRENT_STYLE][RIGHT],current=node[CURRENT_STYLE][att];node[STYLE][RIGHT]=current;val=node[STYLE].pixelRight;node[STYLE][RIGHT]=styleRight;return val+PX},getMargin:function(node,att){var val;
if(node[CURRENT_STYLE][att]==AUTO)val=0+PX;else val=Y.Dom.IE.ComputedStyle.getPixel(node,att);return val},getVisibility:function(node,att){var current;while((current=node[CURRENT_STYLE])&&current[att]=="inherit")node=node[PARENT_NODE];return current?current[att]:VISIBLE},getColor:function(node,att){return Y.Dom.Color.toRGB(node[CURRENT_STYLE][att])||TRANSPARENT},getBorderColor:function(node,att){var current=node[CURRENT_STYLE],val=current[att]||current.color;return Y.Dom.Color.toRGB(Y.Dom.Color.toHex(val))}},
IEComputed={};IEComputed.top=IEComputed.right=IEComputed.bottom=IEComputed.left=IEComputed[WIDTH]=IEComputed[HEIGHT]=ComputedStyle.getOffset;IEComputed.color=ComputedStyle.getColor;IEComputed[BORDER_TOP_WIDTH]=IEComputed[BORDER_RIGHT_WIDTH]=IEComputed[BORDER_BOTTOM_WIDTH]=IEComputed[BORDER_LEFT_WIDTH]=ComputedStyle.getBorderWidth;IEComputed.marginTop=IEComputed.marginRight=IEComputed.marginBottom=IEComputed.marginLeft=ComputedStyle.getMargin;IEComputed.visibility=ComputedStyle.getVisibility;IEComputed.borderColor=
IEComputed.borderTopColor=IEComputed.borderRightColor=IEComputed.borderBottomColor=IEComputed.borderLeftColor=ComputedStyle.getBorderColor;Y.Dom.IE_COMPUTED=IEComputed;Y.Dom.IE_ComputedStyle=ComputedStyle})();
(function(){var TO_STRING="toString",PARSE_INT=parseInt,RE=RegExp,Y=YAHOO.util;Y.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(val){if(!Y.Dom.Color.re_RGB.test(val))val=
Y.Dom.Color.toHex(val);if(Y.Dom.Color.re_hex.exec(val))val="rgb("+[PARSE_INT(RE.$1,16),PARSE_INT(RE.$2,16),PARSE_INT(RE.$3,16)].join(", ")+")";return val},toHex:function(val){val=Y.Dom.Color.KEYWORDS[val]||val;if(Y.Dom.Color.re_RGB.exec(val)){var r=RE.$1.length===1?"0"+RE.$1:Number(RE.$1),g=RE.$2.length===1?"0"+RE.$2:Number(RE.$2),b=RE.$3.length===1?"0"+RE.$3:Number(RE.$3);val=[r[TO_STRING](16),g[TO_STRING](16),b[TO_STRING](16)].join("")}if(val.length<6)val=val.replace(Y.Dom.Color.re_hex3,"$1$1");
if(val!=="transparent"&&val.indexOf("#")<0)val="#"+val;return val.toLowerCase()}}})();YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.0r4",build:"2449"});
YAHOO.util.CustomEvent=function(type,context,silent,signature,fireOnce){this.type=type;this.scope=context||window;this.silent=silent;this.fireOnce=fireOnce;this.fired=false;this.firedWith=null;this.signature=signature||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent);var onsubscribeType="_YUICEOnSubscribe";if(type!==onsubscribeType)this.subscribeEvent=new YAHOO.util.CustomEvent(onsubscribeType,this,true);this.lastError=null};YAHOO.util.CustomEvent.LIST=0;
YAHOO.util.CustomEvent.FLAT=1;
YAHOO.util.CustomEvent.prototype={subscribe:function(fn,obj,overrideContext){if(!fn)throw new Error("Invalid callback for subscriber to '"+this.type+"'");if(this.subscribeEvent)this.subscribeEvent.fire(fn,obj,overrideContext);var s=new YAHOO.util.Subscriber(fn,obj,overrideContext);if(this.fireOnce&&this.fired)this.notify(s,this.firedWith);else this.subscribers.push(s)},unsubscribe:function(fn,obj){if(!fn)return this.unsubscribeAll();var found=false;for(var i=0,len=this.subscribers.length;i<len;++i){var s=
this.subscribers[i];if(s&&s.contains(fn,obj)){this._delete(i);found=true}}return found},fire:function(){this.lastError=null;var errors=[],len=this.subscribers.length;var args=[].slice.call(arguments,0),ret=true,i,rebuild=false;if(this.fireOnce)if(this.fired)return true;else this.firedWith=args;this.fired=true;if(!len&&this.silent)return true;if(!this.silent);var subs=this.subscribers.slice();for(i=0;i<len;++i){var s=subs[i];if(!s)rebuild=true;else{ret=this.notify(s,args);if(false===ret){if(!this.silent);
break}}}return ret!==false},notify:function(s,args){var ret,param=null,scope=s.getScope(this.scope),throwErrors=YAHOO.util.Event.throwErrors;if(!this.silent);if(this.signature==YAHOO.util.CustomEvent.FLAT){if(args.length>0)param=args[0];try{ret=s.fn.call(scope,param,s.obj)}catch(e){this.lastError=e;if(throwErrors)throw e;}}else try{ret=s.fn.call(scope,this.type,args,s.obj)}catch(ex){this.lastError=ex;if(throwErrors)throw ex;}return ret},unsubscribeAll:function(){var l=this.subscribers.length,i;for(i=
l-1;i>-1;i--)this._delete(i);this.subscribers=[];return l},_delete:function(index){var s=this.subscribers[index];if(s){delete s.fn;delete s.obj}this.subscribers.splice(index,1)},toString:function(){return"CustomEvent: "+"'"+this.type+"', "+"context: "+this.scope}};YAHOO.util.Subscriber=function(fn,obj,overrideContext){this.fn=fn;this.obj=YAHOO.lang.isUndefined(obj)?null:obj;this.overrideContext=overrideContext};
YAHOO.util.Subscriber.prototype.getScope=function(defaultScope){if(this.overrideContext)if(this.overrideContext===true)return this.obj;else return this.overrideContext;return defaultScope};YAHOO.util.Subscriber.prototype.contains=function(fn,obj){if(obj)return this.fn==fn&&this.obj==obj;else return this.fn==fn};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};
if(!YAHOO.util.Event){YAHOO.util.Event=function(){var loadComplete=false,listeners=[],unloadListeners=[],retryCount=0,onAvailStack=[],counter=0,webkitKeymap={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},isIE=YAHOO.env.ua.ie,FOCUSIN="focusin",FOCUSOUT="focusout";return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:isIE,_interval:null,_dri:null,_specialTypes:{focusin:isIE?
"focusin":"focus",focusout:isIE?"focusout":"blur"},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval)this._interval=YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true)},onAvailable:function(id,fn,obj,overrideContext,checkContent){var a=YAHOO.lang.isString(id)?[id]:id;for(var i=0;i<a.length;i=i+1)onAvailStack.push({id:a[i],fn:fn,obj:obj,overrideContext:overrideContext,checkReady:checkContent});retryCount=this.POLL_RETRYS;this.startInterval()},onContentReady:function(id,
fn,obj,overrideContext){this.onAvailable(id,fn,obj,overrideContext,true)},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments)},_addListener:function(el,sType,fn,obj,overrideContext,bCapture){if(!fn||!fn.call)return false;if(this._isValidCollection(el)){var ok=true;for(var i=0,len=el.length;i<len;++i)ok=this.on(el[i],sType,fn,obj,overrideContext)&&ok;return ok}else if(YAHOO.lang.isString(el)){var oEl=this.getEl(el);if(oEl)el=oEl;else{this.onAvailable(el,function(){YAHOO.util.Event._addListener(el,
sType,fn,obj,overrideContext,bCapture)});return true}}if(!el)return false;if("unload"==sType&&obj!==this){unloadListeners[unloadListeners.length]=[el,sType,fn,obj,overrideContext];return true}var context=el;if(overrideContext)if(overrideContext===true)context=obj;else context=overrideContext;var wrappedFn=function(e){return fn.call(context,YAHOO.util.Event.getEvent(e,el),obj)};var li=[el,sType,fn,wrappedFn,context,obj,overrideContext,bCapture];var index=listeners.length;listeners[index]=li;try{this._simpleAdd(el,
sType,wrappedFn,bCapture)}catch(ex){this.lastError=ex;this.removeListener(el,sType,fn);return false}return true},_getType:function(type){return this._specialTypes[type]||type},addListener:function(el,sType,fn,obj,overrideContext){var capture=(sType==FOCUSIN||sType==FOCUSOUT)&&!YAHOO.env.ua.ie?true:false;return this._addListener(el,this._getType(sType),fn,obj,overrideContext,capture)},addFocusListener:function(el,fn,obj,overrideContext){return this.on(el,FOCUSIN,fn,obj,overrideContext)},removeFocusListener:function(el,
fn){return this.removeListener(el,FOCUSIN,fn)},addBlurListener:function(el,fn,obj,overrideContext){return this.on(el,FOCUSOUT,fn,obj,overrideContext)},removeBlurListener:function(el,fn){return this.removeListener(el,FOCUSOUT,fn)},removeListener:function(el,sType,fn){var i,len,li;sType=this._getType(sType);if(typeof el=="string")el=this.getEl(el);else if(this._isValidCollection(el)){var ok=true;for(i=el.length-1;i>-1;i--)ok=this.removeListener(el[i],sType,fn)&&ok;return ok}if(!fn||!fn.call)return this.purgeElement(el,
false,sType);if("unload"==sType){for(i=unloadListeners.length-1;i>-1;i--){li=unloadListeners[i];if(li&&li[0]==el&&li[1]==sType&&li[2]==fn){unloadListeners.splice(i,1);return true}}return false}var cacheItem=null;var index=arguments[3];if("undefined"===typeof index)index=this._getCacheIndex(listeners,el,sType,fn);if(index>=0)cacheItem=listeners[index];if(!el||!cacheItem)return false;var bCapture=cacheItem[this.CAPTURE]===true?true:false;try{this._simpleRemove(el,sType,cacheItem[this.WFN],bCapture)}catch(ex){this.lastError=
ex;return false}delete listeners[index][this.WFN];delete listeners[index][this.FN];listeners.splice(index,1);return true},getTarget:function(ev,resolveTextNode){var t=ev.target||ev.srcElement;return this.resolveTextNode(t)},resolveTextNode:function(n){try{if(n&&3==n.nodeType)return n.parentNode}catch(e){}return n},getPageX:function(ev){var x=ev.pageX;if(!x&&0!==x){x=ev.clientX||0;if(this.isIE)x+=this._getScrollLeft()}return x},getPageY:function(ev){var y=ev.pageY;if(!y&&0!==y){y=ev.clientY||0;if(this.isIE)y+=
this._getScrollTop()}return y},getXY:function(ev){return[this.getPageX(ev),this.getPageY(ev)]},getRelatedTarget:function(ev){var t=ev.relatedTarget;if(!t)if(ev.type=="mouseout")t=ev.toElement;else if(ev.type=="mouseover")t=ev.fromElement;return this.resolveTextNode(t)},getTime:function(ev){if(!ev.time){var t=(new Date).getTime();try{ev.time=t}catch(ex){this.lastError=ex;return t}}return ev.time},stopEvent:function(ev){this.stopPropagation(ev);this.preventDefault(ev)},stopPropagation:function(ev){if(ev.stopPropagation)ev.stopPropagation();
else ev.cancelBubble=true},preventDefault:function(ev){if(ev.preventDefault)ev.preventDefault();else ev.returnValue=false},getEvent:function(e,boundEl){var ev=e||window.event;if(!ev){var c=this.getEvent.caller;while(c){ev=c.arguments[0];if(ev&&Event==ev.constructor)break;c=c.caller}}return ev},getCharCode:function(ev){var code=ev.keyCode||ev.charCode||0;if(YAHOO.env.ua.webkit&&code in webkitKeymap)code=webkitKeymap[code];return code},_getCacheIndex:function(a,el,sType,fn){for(var i=0,l=a.length;i<
l;i=i+1){var li=a[i];if(li&&li[this.FN]==fn&&li[this.EL]==el&&li[this.TYPE]==sType)return i}return-1},generateId:function(el){var id=el.id;if(!id){id="yuievtautoid-"+counter;++counter;el.id=id}return id},_isValidCollection:function(o){try{return o&&typeof o!=="string"&&o.length&&!o.tagName&&!o.alert&&typeof o[0]!=="undefined"}catch(ex){return false}},elCache:{},getEl:function(id){return typeof id==="string"?document.getElementById(id):id},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",
YAHOO,0,0,1),_load:function(e){if(!loadComplete){loadComplete=true;var EU=YAHOO.util.Event;EU._ready();EU._tryPreloadAttach()}},_ready:function(e){var EU=YAHOO.util.Event;if(!EU.DOMReady){EU.DOMReady=true;EU.DOMReadyEvent.fire();EU._simpleRemove(document,"DOMContentLoaded",EU._ready)}},_tryPreloadAttach:function(){if(onAvailStack.length===0){retryCount=0;if(this._interval){this._interval.cancel();this._interval=null}return}if(this.locked)return;if(this.isIE)if(!this.DOMReady){this.startInterval();
return}this.locked=true;var tryAgain=!loadComplete;if(!tryAgain)tryAgain=retryCount>0&&onAvailStack.length>0;var notAvail=[];var executeItem=function(el,item){var context=el;if(item.overrideContext)if(item.overrideContext===true)context=item.obj;else context=item.overrideContext;item.fn.call(context,item.obj)};var i,len,item,el,ready=[];for(i=0,len=onAvailStack.length;i<len;i=i+1){item=onAvailStack[i];if(item){el=this.getEl(item.id);if(el)if(item.checkReady){if(loadComplete||el.nextSibling||!tryAgain){ready.push(item);
onAvailStack[i]=null}}else{executeItem(el,item);onAvailStack[i]=null}else notAvail.push(item)}}for(i=0,len=ready.length;i<len;i=i+1){item=ready[i];executeItem(this.getEl(item.id),item)}retryCount--;if(tryAgain){for(i=onAvailStack.length-1;i>-1;i--){item=onAvailStack[i];if(!item||!item.id)onAvailStack.splice(i,1)}this.startInterval()}else if(this._interval){this._interval.cancel();this._interval=null}this.locked=false},purgeElement:function(el,recurse,sType){var oEl=YAHOO.lang.isString(el)?this.getEl(el):
el;var elListeners=this.getListeners(oEl,sType),i,len;if(elListeners)for(i=elListeners.length-1;i>-1;i--){var l=elListeners[i];this.removeListener(oEl,l.type,l.fn)}if(recurse&&oEl&&oEl.childNodes)for(i=0,len=oEl.childNodes.length;i<len;++i)this.purgeElement(oEl.childNodes[i],recurse,sType)},getListeners:function(el,sType){var results=[],searchLists;if(!sType)searchLists=[listeners,unloadListeners];else if(sType==="unload")searchLists=[unloadListeners];else{sType=this._getType(sType);searchLists=[listeners]}var oEl=
YAHOO.lang.isString(el)?this.getEl(el):el;for(var j=0;j<searchLists.length;j=j+1){var searchList=searchLists[j];if(searchList)for(var i=0,len=searchList.length;i<len;++i){var l=searchList[i];if(l&&l[this.EL]===oEl&&(!sType||sType===l[this.TYPE]))results.push({type:l[this.TYPE],fn:l[this.FN],obj:l[this.OBJ],adjust:l[this.OVERRIDE],scope:l[this.ADJ_SCOPE],index:i})}}return results.length?results:null},_unload:function(e){var EU=YAHOO.util.Event,i,j,l,len,index,ul=unloadListeners.slice(),context;for(i=
0,len=unloadListeners.length;i<len;++i){l=ul[i];if(l){context=window;if(l[EU.ADJ_SCOPE])if(l[EU.ADJ_SCOPE]===true)context=l[EU.UNLOAD_OBJ];else context=l[EU.ADJ_SCOPE];l[EU.FN].call(context,EU.getEvent(e,l[EU.EL]),l[EU.UNLOAD_OBJ]);ul[i]=null}}l=null;context=null;unloadListeners=null;if(listeners){for(j=listeners.length-1;j>-1;j--){l=listeners[j];if(l)EU.removeListener(l[EU.EL],l[EU.TYPE],l[EU.FN],j)}l=null}EU._simpleRemove(window,"unload",EU._unload)},_getScrollLeft:function(){return this._getScroll()[1]},
_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var dd=document.documentElement,db=document.body;if(dd&&(dd.scrollTop||dd.scrollLeft))return[dd.scrollTop,dd.scrollLeft];else if(db)return[db.scrollTop,db.scrollLeft];else return[0,0]},regCE:function(){},_simpleAdd:function(){if(window.addEventListener)return function(el,sType,fn,capture){el.addEventListener(sType,fn,capture)};else if(window.attachEvent)return function(el,sType,fn,capture){el.attachEvent("on"+sType,fn)};else return function(){}}(),
_simpleRemove:function(){if(window.removeEventListener)return function(el,sType,fn,capture){el.removeEventListener(sType,fn,capture)};else if(window.detachEvent)return function(el,sType,fn){el.detachEvent("on"+sType,fn)};else return function(){}}()}}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;EU.onFocus=EU.addFocusListener;EU.onBlur=EU.addBlurListener;if(EU.isIE)if(self!==self.top)document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=
null;EU._ready()}};else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var n=document.createElement("p");EU._dri=setInterval(function(){try{n.doScroll("left");clearInterval(EU._dri);EU._dri=null;EU._ready();n=null}catch(ex){}},EU.POLL_INTERVAL)}else if(EU.webkit&&EU.webkit<525)EU._dri=setInterval(function(){var rs=document.readyState;if("loaded"==rs||"complete"==rs){clearInterval(EU._dri);EU._dri=null;EU._ready()}},EU.POLL_INTERVAL);else EU._simpleAdd(document,
"DOMContentLoaded",EU._ready);EU._simpleAdd(window,"load",EU._load);EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};
YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(p_type,p_fn,p_obj,overrideContext){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[p_type];if(ce)ce.subscribe(p_fn,p_obj,overrideContext);else{this.__yui_subscribers=this.__yui_subscribers||{};var subs=this.__yui_subscribers;if(!subs[p_type])subs[p_type]=[];subs[p_type].push({fn:p_fn,obj:p_obj,overrideContext:overrideContext})}},unsubscribe:function(p_type,p_fn,p_obj){this.__yui_events=
this.__yui_events||{};var evts=this.__yui_events;if(p_type){var ce=evts[p_type];if(ce)return ce.unsubscribe(p_fn,p_obj)}else{var ret=true;for(var i in evts)if(YAHOO.lang.hasOwnProperty(evts,i))ret=ret&&evts[i].unsubscribe(p_fn,p_obj);return ret}return false},unsubscribeAll:function(p_type){return this.unsubscribe(p_type)},createEvent:function(p_type,p_config){this.__yui_events=this.__yui_events||{};var opts=p_config||{},events=this.__yui_events,ce;if(events[p_type]);else{ce=new YAHOO.util.CustomEvent(p_type,
opts.scope||this,opts.silent,YAHOO.util.CustomEvent.FLAT,opts.fireOnce);events[p_type]=ce;if(opts.onSubscribeCallback)ce.subscribeEvent.subscribe(opts.onSubscribeCallback);this.__yui_subscribers=this.__yui_subscribers||{};var qs=this.__yui_subscribers[p_type];if(qs)for(var i=0;i<qs.length;++i)ce.subscribe(qs[i].fn,qs[i].obj,qs[i].overrideContext)}return events[p_type]},fireEvent:function(p_type){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[p_type];if(!ce)return null;var args=[];
for(var i=1;i<arguments.length;++i)args.push(arguments[i]);return ce.fire.apply(ce,args)},hasEvent:function(type){if(this.__yui_events)if(this.__yui_events[type])return true;return false}};
(function(){var Event=YAHOO.util.Event,Lang=YAHOO.lang;YAHOO.util.KeyListener=function(attachTo,keyData,handler,event){if(!attachTo);else if(!keyData);else if(!handler);if(!event)event=YAHOO.util.KeyListener.KEYDOWN;var keyEvent=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(Lang.isString(attachTo))attachTo=document.getElementById(attachTo);if(Lang.isFunction(handler))keyEvent.subscribe(handler);
else keyEvent.subscribe(handler.fn,handler.scope,handler.correctScope);function handleKeyPress(e,obj){if(!keyData.shift)keyData.shift=false;if(!keyData.alt)keyData.alt=false;if(!keyData.ctrl)keyData.ctrl=false;if(e.shiftKey==keyData.shift&&e.altKey==keyData.alt&&e.ctrlKey==keyData.ctrl){var dataItem,keys=keyData.keys,key;if(YAHOO.lang.isArray(keys))for(var i=0;i<keys.length;i++){dataItem=keys[i];key=Event.getCharCode(e);if(dataItem==key){keyEvent.fire(key,e);break}}else{key=Event.getCharCode(e);if(keys==
key)keyEvent.fire(key,e)}}}this.enable=function(){if(!this.enabled){Event.on(attachTo,event,handleKeyPress);this.enabledEvent.fire(keyData)}this.enabled=true};this.disable=function(){if(this.enabled){Event.removeListener(attachTo,event,handleKeyPress);this.disabledEvent.fire(keyData)}this.enabled=false};this.toString=function(){return"KeyListener ["+keyData.keys+"] "+attachTo.tagName+(attachTo.id?"["+attachTo.id+"]":"")}};var KeyListener=YAHOO.util.KeyListener;KeyListener.KEYDOWN="keydown";KeyListener.KEYUP=
"keyup";KeyListener.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.0r4",build:"2449"});
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),
completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(id){this._msxml_progid.unshift(id)},setDefaultPostHeader:function(b){if(typeof b==
"string")this._default_post_header=b;else if(typeof b=="boolean")this._use_default_post_header=b},setDefaultXhrHeader:function(b){if(typeof b=="string")this._default_xhr_header=b;else this._use_default_xhr_header=b},setPollingInterval:function(i){if(typeof i=="number"&&isFinite(i))this._polling_interval=i},createXhrObject:function(transactionId){var obj,http,i;try{http=new XMLHttpRequest;obj={conn:http,tId:transactionId,xhr:true}}catch(e){for(i=0;i<this._msxml_progid.length;++i)try{http=new ActiveXObject(this._msxml_progid[i]);
obj={conn:http,tId:transactionId,xhr:true};break}catch(e1){}}finally{return obj}},getConnectionObject:function(t){var o,tId=this._transaction_id;try{if(!t)o=this.createXhrObject(tId);else{o={tId:tId};if(t==="xdr"){o.conn=this._transport;o.xdr=true}else if(t==="upload")o.upload=true}if(o)this._transaction_id++}catch(e){}return o},asyncRequest:function(method,uri,callback,postData){var o,t,args=callback&&callback.argument?callback.argument:null;if(this._isFileUpload)t="upload";else if(callback.xdr)t=
"xdr";o=this.getConnectionObject(t);if(!o)return null;else{if(callback&&callback.customevents)this.initCustomEvents(o,callback);if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(o,callback,uri,postData);return o}if(method.toUpperCase()=="GET"){if(this._sFormData.length!==0)uri+=(uri.indexOf("?")==-1?"?":"&")+this._sFormData}else if(method.toUpperCase()=="POST")postData=postData?this._sFormData+"&"+postData:this._sFormData}if(method.toUpperCase()=="GET"&&callback&&callback.cache===false)uri+=
(uri.indexOf("?")==-1?"?":"&")+"rnd="+(new Date).valueOf().toString();if(this._use_default_xhr_header)if(!this._default_headers["X-Requested-With"])this.initHeader("X-Requested-With",this._default_xhr_header,true);if(method.toUpperCase()==="POST"&&this._use_default_post_header&&this._isFormSubmit===false)this.initHeader("Content-Type",this._default_post_header);if(o.xdr){this.xdr(o,method,uri,callback,postData);return o}o.conn.open(method,uri,true);if(this._has_default_headers||this._has_http_headers)this.setHeader(o);
this.handleReadyState(o,callback);o.conn.send(postData||"");if(this._isFormSubmit===true)this.resetFormState();this.startEvent.fire(o,args);if(o.startEvent)o.startEvent.fire(o,args);return o}},initCustomEvents:function(o,callback){var prop;for(prop in callback.customevents)if(this._customEvents[prop][0]){o[this._customEvents[prop][0]]=new YAHOO.util.CustomEvent(this._customEvents[prop][1],callback.scope?callback.scope:null);o[this._customEvents[prop][0]].subscribe(callback.customevents[prop])}},handleReadyState:function(o,
callback){var oConn=this,args=callback&&callback.argument?callback.argument:null;if(callback&&callback.timeout)this._timeOut[o.tId]=window.setTimeout(function(){oConn.abort(o,callback,true)},callback.timeout);this._poll[o.tId]=window.setInterval(function(){if(o.conn&&o.conn.readyState===4){window.clearInterval(oConn._poll[o.tId]);delete oConn._poll[o.tId];if(callback&&callback.timeout){window.clearTimeout(oConn._timeOut[o.tId]);delete oConn._timeOut[o.tId]}oConn.completeEvent.fire(o,args);if(o.completeEvent)o.completeEvent.fire(o,
args);oConn.handleTransactionResponse(o,callback)}},this._polling_interval)},handleTransactionResponse:function(o,callback,isAbort){var httpStatus,responseObject,args=callback&&callback.argument?callback.argument:null,xdrS=o.r&&o.r.statusText==="xdr:success"?true:false,xdrF=o.r&&o.r.statusText==="xdr:failure"?true:false,xdrA=isAbort;try{if(o.conn.status!==undefined&&o.conn.status!==0||xdrS)httpStatus=o.conn.status;else if(xdrF&&!xdrA)httpStatus=0;else httpStatus=13030}catch(e){httpStatus=13030}if(httpStatus>=
200&&httpStatus<300||httpStatus===1223||xdrS){responseObject=o.xdr?o.r:this.createResponseObject(o,args);if(callback&&callback.success)if(!callback.scope)callback.success(responseObject);else callback.success.apply(callback.scope,[responseObject]);this.successEvent.fire(responseObject);if(o.successEvent)o.successEvent.fire(responseObject)}else{switch(httpStatus){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:responseObject=this.createExceptionObject(o.tId,args,isAbort?isAbort:false);
if(callback&&callback.failure)if(!callback.scope)callback.failure(responseObject);else callback.failure.apply(callback.scope,[responseObject]);break;default:responseObject=o.xdr?o.response:this.createResponseObject(o,args);if(callback&&callback.failure)if(!callback.scope)callback.failure(responseObject);else callback.failure.apply(callback.scope,[responseObject])}this.failureEvent.fire(responseObject);if(o.failureEvent)o.failureEvent.fire(responseObject)}this.releaseObject(o);responseObject=null},
createResponseObject:function(o,callbackArg){var obj={},headerObj={},i,headerStr,header,delimitPos;try{headerStr=o.conn.getAllResponseHeaders();header=headerStr.split("\n");for(i=0;i<header.length;i++){delimitPos=header[i].indexOf(":");if(delimitPos!=-1)headerObj[header[i].substring(0,delimitPos)]=YAHOO.lang.trim(header[i].substring(delimitPos+2))}}catch(e){}obj.tId=o.tId;obj.status=o.conn.status==1223?204:o.conn.status;obj.statusText=o.conn.status==1223?"No Content":o.conn.statusText;obj.getResponseHeader=
headerObj;obj.getAllResponseHeaders=headerStr;obj.responseText=o.conn.responseText;obj.responseXML=o.conn.responseXML;if(callbackArg)obj.argument=callbackArg;return obj},createExceptionObject:function(tId,callbackArg,isAbort){var COMM_CODE=0,COMM_ERROR="communication failure",ABORT_CODE=-1,ABORT_ERROR="transaction aborted",obj={};obj.tId=tId;if(isAbort){obj.status=ABORT_CODE;obj.statusText=ABORT_ERROR}else{obj.status=COMM_CODE;obj.statusText=COMM_ERROR}if(callbackArg)obj.argument=callbackArg;return obj},
initHeader:function(label,value,isDefault){var headerObj=isDefault?this._default_headers:this._http_headers;headerObj[label]=value;if(isDefault)this._has_default_headers=true;else this._has_http_headers=true},setHeader:function(o){var prop;if(this._has_default_headers)for(prop in this._default_headers)if(YAHOO.lang.hasOwnProperty(this._default_headers,prop))o.conn.setRequestHeader(prop,this._default_headers[prop]);if(this._has_http_headers){for(prop in this._http_headers)if(YAHOO.lang.hasOwnProperty(this._http_headers,
prop))o.conn.setRequestHeader(prop,this._http_headers[prop]);this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(o,callback,isTimeout){var abortStatus,args=callback&&callback.argument?callback.argument:null;o=o||{};if(o.conn)if(o.xhr){if(this.isCallInProgress(o)){o.conn.abort();window.clearInterval(this._poll[o.tId]);delete this._poll[o.tId];if(isTimeout){window.clearTimeout(this._timeOut[o.tId]);
delete this._timeOut[o.tId]}abortStatus=true}}else{if(o.xdr){o.conn.abort(o.tId);abortStatus=true}}else if(o.upload){var frameId="yuiIO"+o.tId;var io=document.getElementById(frameId);if(io){YAHOO.util.Event.removeListener(io,"load");document.body.removeChild(io);if(isTimeout){window.clearTimeout(this._timeOut[o.tId]);delete this._timeOut[o.tId]}abortStatus=true}}else abortStatus=false;if(abortStatus===true){this.abortEvent.fire(o,args);if(o.abortEvent)o.abortEvent.fire(o,args);this.handleTransactionResponse(o,
callback,true)}return abortStatus},isCallInProgress:function(o){o=o||{};if(o.xhr&&o.conn)return o.conn.readyState!==4&&o.conn.readyState!==0;else if(o.xdr&&o.conn)return o.conn.isCallInProgress(o.tId);else if(o.upload===true)return document.getElementById("yuiIO"+o.tId)?true:false;else return false},releaseObject:function(o){if(o&&o.conn){o.conn=null;o=null}}};
(function(){var YCM=YAHOO.util.Connect,_fn={};function _swf(uri){var o='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+uri+'" width="0" height="0">'+'<param name="movie" value="'+uri+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",c=document.createElement("div");document.body.appendChild(c);c.innerHTML=o}function _xdr(o,m,u,c,d){_fn[parseInt(o.tId)]={"o":o,"c":c};if(d){c.method=m;c.data=d}o.conn.send(u,c,o.tId)}function _init(uri){_swf(uri);YCM._transport=
document.getElementById("YUIConnectionSwf")}function _xdrReady(){YCM.xdrReadyEvent.fire()}function _xdrStart(o,cb){if(o){YCM.startEvent.fire(o,cb.argument);if(o.startEvent)o.startEvent.fire(o,cb.argument)}}function _handleXdrResponse(r){var o=_fn[r.tId].o,cb=_fn[r.tId].c;if(r.statusText==="xdr:start"){_xdrStart(o,cb);return}r.responseText=decodeURI(r.responseText);o.r=r;if(cb.argument)o.r.argument=cb.argument;this.handleTransactionResponse(o,cb,r.statusText==="xdr:abort"?true:false);delete _fn[r.tId]}
YCM.xdr=_xdr;YCM.swf=_swf;YCM.transport=_init;YCM.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");YCM.xdrReady=_xdrReady;YCM.handleXdrResponse=_handleXdrResponse})();
(function(){var YCM=YAHOO.util.Connect,YE=YAHOO.util.Event;YCM._isFormSubmit=false;YCM._isFileUpload=false;YCM._formNode=null;YCM._sFormData=null;YCM._submitElementValue=null;YCM.uploadEvent=new YAHOO.util.CustomEvent("upload"),YCM._hasSubmitListener=function(){if(YE){YE.addListener(document,"click",function(e){var obj=YE.getTarget(e),name=obj.nodeName.toLowerCase();if((name==="input"||name==="button")&&obj.type&&obj.type.toLowerCase()=="submit")YCM._submitElementValue=encodeURIComponent(obj.name)+
"="+encodeURIComponent(obj.value)});return true}return false}();function _setForm(formId,isUpload,secureUri){var oForm,oElement,oName,oValue,oDisabled,hasSubmit=false,data=[],item=0,i,len,j,jlen,opt;this.resetFormState();if(typeof formId=="string")oForm=document.getElementById(formId)||document.forms[formId];else if(typeof formId=="object")oForm=formId;else return;if(isUpload){this.createFrame(secureUri?secureUri:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=oForm;return}for(i=
0,len=oForm.elements.length;i<len;++i){oElement=oForm.elements[i];oDisabled=oElement.disabled;oName=oElement.name;if(!oDisabled&&oName){oName=encodeURIComponent(oName)+"=";oValue=encodeURIComponent(oElement.value);switch(oElement.type){case "select-one":if(oElement.selectedIndex>-1){opt=oElement.options[oElement.selectedIndex];data[item++]=oName+encodeURIComponent(opt.attributes.value&&opt.attributes.value.specified?opt.value:opt.text)}break;case "select-multiple":if(oElement.selectedIndex>-1)for(j=
oElement.selectedIndex,jlen=oElement.options.length;j<jlen;++j){opt=oElement.options[j];if(opt.selected)data[item++]=oName+encodeURIComponent(opt.attributes.value&&opt.attributes.value.specified?opt.value:opt.text)}break;case "radio":case "checkbox":if(oElement.checked)data[item++]=oName+oValue;break;case "file":case undefined:case "reset":case "button":break;case "submit":if(hasSubmit===false){if(this._hasSubmitListener&&this._submitElementValue)data[item++]=this._submitElementValue;hasSubmit=true}break;
default:data[item++]=oName+oValue}}}this._isFormSubmit=true;this._sFormData=data.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}function _resetFormState(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""}function _createFrame(secureUri){var frameId="yuiIO"+this._transaction_id,io;if(YAHOO.env.ua.ie){io=document.createElement('<iframe id="'+frameId+'" name="'+frameId+'" />');if(typeof secureUri=="boolean")io.src="javascript:false"}else{io=
document.createElement("iframe");io.id=frameId;io.name=frameId}io.style.position="absolute";io.style.top="-1000px";io.style.left="-1000px";document.body.appendChild(io)}function _appendPostData(postData){var formElements=[],postMessage=postData.split("&"),i,delimitPos;for(i=0;i<postMessage.length;i++){delimitPos=postMessage[i].indexOf("=");if(delimitPos!=-1){formElements[i]=document.createElement("input");formElements[i].type="hidden";formElements[i].name=decodeURIComponent(postMessage[i].substring(0,
delimitPos));formElements[i].value=decodeURIComponent(postMessage[i].substring(delimitPos+1));this._formNode.appendChild(formElements[i])}}return formElements}function _uploadFile(o,callback,uri,postData){var frameId="yuiIO"+o.tId,uploadEncoding="multipart/form-data",io=document.getElementById(frameId),ie8=document.documentMode&&document.documentMode===8?true:false,oConn=this,args=callback&&callback.argument?callback.argument:null,oElements,i,prop,obj,rawFormAttributes,uploadCallback;rawFormAttributes=
{action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",uri);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",frameId);if(YAHOO.env.ua.ie&&!ie8)this._formNode.setAttribute("encoding",uploadEncoding);else this._formNode.setAttribute("enctype",uploadEncoding);if(postData)oElements=this.appendPostData(postData);this._formNode.submit();this.startEvent.fire(o,
args);if(o.startEvent)o.startEvent.fire(o,args);if(callback&&callback.timeout)this._timeOut[o.tId]=window.setTimeout(function(){oConn.abort(o,callback,true)},callback.timeout);if(oElements&&oElements.length>0)for(i=0;i<oElements.length;i++)this._formNode.removeChild(oElements[i]);for(prop in rawFormAttributes)if(YAHOO.lang.hasOwnProperty(rawFormAttributes,prop))if(rawFormAttributes[prop])this._formNode.setAttribute(prop,rawFormAttributes[prop]);else this._formNode.removeAttribute(prop);this.resetFormState();
uploadCallback=function(){if(callback&&callback.timeout){window.clearTimeout(oConn._timeOut[o.tId]);delete oConn._timeOut[o.tId]}oConn.completeEvent.fire(o,args);if(o.completeEvent)o.completeEvent.fire(o,args);obj={tId:o.tId,argument:callback.argument};try{obj.responseText=io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:io.contentWindow.document.documentElement.textContent;obj.responseXML=io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document}catch(e){}if(callback&&
callback.upload)if(!callback.scope)callback.upload(obj);else callback.upload.apply(callback.scope,[obj]);oConn.uploadEvent.fire(obj);if(o.uploadEvent)o.uploadEvent.fire(obj);YE.removeListener(io,"load",uploadCallback);setTimeout(function(){document.body.removeChild(io);oConn.releaseObject(o)},100)};YE.addListener(io,"load",uploadCallback)}YCM.setForm=_setForm;YCM.resetFormState=_resetFormState;YCM.createFrame=_createFrame;YCM.appendPostData=_appendPostData;YCM.uploadFile=_uploadFile})();
YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});
(function(){var lang=YAHOO.lang,util=YAHOO.util,Ev=util.Event;util.DataSourceBase=function(oLiveData,oConfigs){if(oLiveData===null||oLiveData===undefined)return;this.liveData=oLiveData;this._oQueue={interval:null,conn:null,requests:[]};this.responseSchema={};if(oConfigs&&oConfigs.constructor==Object)for(var sConfig in oConfigs)if(sConfig)this[sConfig]=oConfigs[sConfig];var maxCacheEntries=this.maxCacheEntries;if(!lang.isNumber(maxCacheEntries)||maxCacheEntries<0)maxCacheEntries=0;this._aIntervals=
[];this.createEvent("cacheRequestEvent");this.createEvent("cacheResponseEvent");this.createEvent("requestEvent");this.createEvent("responseEvent");this.createEvent("responseParseEvent");this.createEvent("responseCacheEvent");this.createEvent("dataErrorEvent");this.createEvent("cacheFlushEvent");var DS=util.DataSourceBase;this._sName="DataSource instance"+DS._nIndex;DS._nIndex++};var DS=util.DataSourceBase;lang.augmentObject(DS,{TYPE_UNKNOWN:-1,TYPE_JSARRAY:0,TYPE_JSFUNCTION:1,TYPE_XHR:2,TYPE_JSON:3,
TYPE_XML:4,TYPE_TEXT:5,TYPE_HTMLTABLE:6,TYPE_SCRIPTNODE:7,TYPE_LOCAL:8,ERROR_DATAINVALID:"Invalid data",ERROR_DATANULL:"Null data",_nIndex:0,_nTransactionId:0,_getLocationValue:function(field,context){var locator=field.locator||field.key||field,xmldoc=context.ownerDocument||context,result,res,value=null;try{if(!lang.isUndefined(xmldoc.evaluate)){result=xmldoc.evaluate(locator,context,xmldoc.createNSResolver(!context.ownerDocument?context.documentElement:context.ownerDocument.documentElement),0,null);
while(res=result.iterateNext())value=res.textContent}else{xmldoc.setProperty("SelectionLanguage","XPath");result=context.selectNodes(locator)[0];value=result.value||result.text||null}return value}catch(e){}},issueCallback:function(callback,params,error,scope){if(lang.isFunction(callback))callback.apply(scope,params);else if(lang.isObject(callback)){scope=callback.scope||scope||window;var callbackFunc=callback.success;if(error)callbackFunc=callback.failure;if(callbackFunc)callbackFunc.apply(scope,
params.concat([callback.argument]))}},parseString:function(oData){if(!lang.isValue(oData))return null;var string=oData+"";if(lang.isString(string))return string;else return null},parseNumber:function(oData){if(!lang.isValue(oData)||oData==="")return null;var number=oData*1;if(lang.isNumber(number))return number;else return null},convertNumber:function(oData){return DS.parseNumber(oData)},parseDate:function(oData){var date=null;if(!(oData instanceof Date))date=new Date(oData);else return oData;if(date instanceof
Date)return date;else return null},convertDate:function(oData){return DS.parseDate(oData)}});DS.Parser={string:DS.parseString,number:DS.parseNumber,date:DS.parseDate};DS.prototype={_sName:null,_aCache:null,_oQueue:null,_aIntervals:null,maxCacheEntries:0,liveData:null,dataType:DS.TYPE_UNKNOWN,responseType:DS.TYPE_UNKNOWN,responseSchema:null,useXPath:false,toString:function(){return this._sName},getCachedResponse:function(oRequest,oCallback,oCaller){var aCache=this._aCache;if(this.maxCacheEntries>0)if(!aCache)this._aCache=
[];else{var nCacheLength=aCache.length;if(nCacheLength>0){var oResponse=null;this.fireEvent("cacheRequestEvent",{request:oRequest,callback:oCallback,caller:oCaller});for(var i=nCacheLength-1;i>=0;i--){var oCacheElem=aCache[i];if(this.isCacheHit(oRequest,oCacheElem.request)){oResponse=oCacheElem.response;this.fireEvent("cacheResponseEvent",{request:oRequest,response:oResponse,callback:oCallback,caller:oCaller});if(i<nCacheLength-1){aCache.splice(i,1);this.addToCache(oRequest,oResponse)}oResponse.cached=
true;break}}return oResponse}}else if(aCache)this._aCache=null;return null},isCacheHit:function(oRequest,oCachedRequest){return oRequest===oCachedRequest},addToCache:function(oRequest,oResponse){var aCache=this._aCache;if(!aCache)return;while(aCache.length>=this.maxCacheEntries)aCache.shift();var oCacheElem={request:oRequest,response:oResponse};aCache[aCache.length]=oCacheElem;this.fireEvent("responseCacheEvent",{request:oRequest,response:oResponse})},flushCache:function(){if(this._aCache){this._aCache=
[];this.fireEvent("cacheFlushEvent")}},setInterval:function(nMsec,oRequest,oCallback,oCaller){if(lang.isNumber(nMsec)&&nMsec>=0){var oSelf=this;var nId=setInterval(function(){oSelf.makeConnection(oRequest,oCallback,oCaller)},nMsec);this._aIntervals.push(nId);return nId}else;},clearInterval:function(nId){var tracker=this._aIntervals||[];for(var i=tracker.length-1;i>-1;i--)if(tracker[i]===nId){tracker.splice(i,1);clearInterval(nId)}},clearAllIntervals:function(){var tracker=this._aIntervals||[];for(var i=
tracker.length-1;i>-1;i--)clearInterval(tracker[i]);tracker=[]},sendRequest:function(oRequest,oCallback,oCaller){var oCachedResponse=this.getCachedResponse(oRequest,oCallback,oCaller);if(oCachedResponse){DS.issueCallback(oCallback,[oRequest,oCachedResponse],false,oCaller);return null}return this.makeConnection(oRequest,oCallback,oCaller)},makeConnection:function(oRequest,oCallback,oCaller){var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});
var oRawResponse=this.liveData;this.handleResponse(oRequest,oRawResponse,oCallback,oCaller,tId);return tId},handleResponse:function(oRequest,oRawResponse,oCallback,oCaller,tId){this.fireEvent("responseEvent",{tId:tId,request:oRequest,response:oRawResponse,callback:oCallback,caller:oCaller});var xhr=this.dataType==DS.TYPE_XHR?true:false;var oParsedResponse=null;var oFullResponse=oRawResponse;if(this.responseType===DS.TYPE_UNKNOWN){var ctype=oRawResponse&&oRawResponse.getResponseHeader?oRawResponse.getResponseHeader["Content-Type"]:
null;if(ctype)if(ctype.indexOf("text/xml")>-1)this.responseType=DS.TYPE_XML;else if(ctype.indexOf("application/json")>-1)this.responseType=DS.TYPE_JSON;else{if(ctype.indexOf("text/plain")>-1)this.responseType=DS.TYPE_TEXT}else if(YAHOO.lang.isArray(oRawResponse))this.responseType=DS.TYPE_JSARRAY;else if(oRawResponse&&oRawResponse.nodeType&&(oRawResponse.nodeType===9||oRawResponse.nodeType===1||oRawResponse.nodeType===11))this.responseType=DS.TYPE_XML;else if(oRawResponse&&oRawResponse.nodeName&&oRawResponse.nodeName.toLowerCase()==
"table")this.responseType=DS.TYPE_HTMLTABLE;else if(YAHOO.lang.isObject(oRawResponse))this.responseType=DS.TYPE_JSON;else if(YAHOO.lang.isString(oRawResponse))this.responseType=DS.TYPE_TEXT}switch(this.responseType){case DS.TYPE_JSARRAY:if(xhr&&oRawResponse&&oRawResponse.responseText)oFullResponse=oRawResponse.responseText;try{if(lang.isString(oFullResponse)){var parseArgs=[oFullResponse].concat(this.parseJSONArgs);if(lang.JSON)oFullResponse=lang.JSON.parse.apply(lang.JSON,parseArgs);else if(window.JSON&&
JSON.parse)oFullResponse=JSON.parse.apply(JSON,parseArgs);else if(oFullResponse.parseJSON)oFullResponse=oFullResponse.parseJSON.apply(oFullResponse,parseArgs.slice(1));else{while(oFullResponse.length>0&&oFullResponse.charAt(0)!="{"&&oFullResponse.charAt(0)!="[")oFullResponse=oFullResponse.substring(1,oFullResponse.length);if(oFullResponse.length>0){var arrayEnd=Math.max(oFullResponse.lastIndexOf("]"),oFullResponse.lastIndexOf("}"));oFullResponse=oFullResponse.substring(0,arrayEnd+1);oFullResponse=
eval("("+oFullResponse+")")}}}}catch(e1){}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseArrayData(oRequest,oFullResponse);break;case DS.TYPE_JSON:if(xhr&&oRawResponse&&oRawResponse.responseText)oFullResponse=oRawResponse.responseText;try{if(lang.isString(oFullResponse)){var parseArgs=[oFullResponse].concat(this.parseJSONArgs);if(lang.JSON)oFullResponse=lang.JSON.parse.apply(lang.JSON,parseArgs);else if(window.JSON&&JSON.parse)oFullResponse=JSON.parse.apply(JSON,
parseArgs);else if(oFullResponse.parseJSON)oFullResponse=oFullResponse.parseJSON.apply(oFullResponse,parseArgs.slice(1));else{while(oFullResponse.length>0&&oFullResponse.charAt(0)!="{"&&oFullResponse.charAt(0)!="[")oFullResponse=oFullResponse.substring(1,oFullResponse.length);if(oFullResponse.length>0){var objEnd=Math.max(oFullResponse.lastIndexOf("]"),oFullResponse.lastIndexOf("}"));oFullResponse=oFullResponse.substring(0,objEnd+1);oFullResponse=eval("("+oFullResponse+")")}}}}catch(e){}oFullResponse=
this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseJSONData(oRequest,oFullResponse);break;case DS.TYPE_HTMLTABLE:if(xhr&&oRawResponse.responseText){var el=document.createElement("div");el.innerHTML=oRawResponse.responseText;oFullResponse=el.getElementsByTagName("table")[0]}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseHTMLTableData(oRequest,oFullResponse);break;case DS.TYPE_XML:if(xhr&&oRawResponse.responseXML)oFullResponse=
oRawResponse.responseXML;oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseXMLData(oRequest,oFullResponse);break;case DS.TYPE_TEXT:if(xhr&&lang.isString(oRawResponse.responseText))oFullResponse=oRawResponse.responseText;oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseTextData(oRequest,oFullResponse);break;default:oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback);oParsedResponse=this.parseData(oRequest,
oFullResponse);break}oParsedResponse=oParsedResponse||{};if(!oParsedResponse.results)oParsedResponse.results=[];if(!oParsedResponse.meta)oParsedResponse.meta={};if(!oParsedResponse.error){oParsedResponse=this.doBeforeCallback(oRequest,oFullResponse,oParsedResponse,oCallback);this.fireEvent("responseParseEvent",{request:oRequest,response:oParsedResponse,callback:oCallback,caller:oCaller});this.addToCache(oRequest,oParsedResponse)}else{oParsedResponse.error=true;this.fireEvent("dataErrorEvent",{request:oRequest,
response:oRawResponse,callback:oCallback,caller:oCaller,message:DS.ERROR_DATANULL})}oParsedResponse.tId=tId;DS.issueCallback(oCallback,[oRequest,oParsedResponse],oParsedResponse.error,oCaller)},doBeforeParseData:function(oRequest,oFullResponse,oCallback){return oFullResponse},doBeforeCallback:function(oRequest,oFullResponse,oParsedResponse,oCallback){return oParsedResponse},parseData:function(oRequest,oFullResponse){if(lang.isValue(oFullResponse)){var oParsedResponse={results:oFullResponse,meta:{}};
return oParsedResponse}return null},parseArrayData:function(oRequest,oFullResponse){if(lang.isArray(oFullResponse)){var results=[],i,j,rec,field,data;if(lang.isArray(this.responseSchema.fields)){var fields=this.responseSchema.fields;for(i=fields.length-1;i>=0;--i)if(typeof fields[i]!=="object")fields[i]={key:fields[i]};var parsers={},p;for(i=fields.length-1;i>=0;--i){p=(typeof fields[i].parser==="function"?fields[i].parser:DS.Parser[fields[i].parser+""])||fields[i].converter;if(p)parsers[fields[i].key]=
p}var arrType=lang.isArray(oFullResponse[0]);for(i=oFullResponse.length-1;i>-1;i--){var oResult={};rec=oFullResponse[i];if(typeof rec==="object")for(j=fields.length-1;j>-1;j--){field=fields[j];data=arrType?rec[j]:rec[field.key];if(parsers[field.key])data=parsers[field.key].call(this,data);if(data===undefined)data=null;oResult[field.key]=data}else if(lang.isString(rec))for(j=fields.length-1;j>-1;j--){field=fields[j];data=rec;if(parsers[field.key])data=parsers[field.key].call(this,data);if(data===undefined)data=
null;oResult[field.key]=data}results[i]=oResult}}else results=oFullResponse;var oParsedResponse={results:results};return oParsedResponse}return null},parseTextData:function(oRequest,oFullResponse){if(lang.isString(oFullResponse))if(lang.isString(this.responseSchema.recordDelim)&&lang.isString(this.responseSchema.fieldDelim)){var oParsedResponse={results:[]};var recDelim=this.responseSchema.recordDelim;var fieldDelim=this.responseSchema.fieldDelim;if(oFullResponse.length>0){var newLength=oFullResponse.length-
recDelim.length;if(oFullResponse.substr(newLength)==recDelim)oFullResponse=oFullResponse.substr(0,newLength);if(oFullResponse.length>0){var recordsarray=oFullResponse.split(recDelim);for(var i=0,len=recordsarray.length,recIdx=0;i<len;++i){var bError=false,sRecord=recordsarray[i];if(lang.isString(sRecord)&&sRecord.length>0){var fielddataarray=recordsarray[i].split(fieldDelim);var oResult={};if(lang.isArray(this.responseSchema.fields)){var fields=this.responseSchema.fields;for(var j=fields.length-1;j>
-1;j--)try{var data=fielddataarray[j];if(lang.isString(data)){if(data.charAt(0)=='"')data=data.substr(1);if(data.charAt(data.length-1)=='"')data=data.substr(0,data.length-1);var field=fields[j];var key=lang.isValue(field.key)?field.key:field;if(!field.parser&&field.converter)field.parser=field.converter;var parser=typeof field.parser==="function"?field.parser:DS.Parser[field.parser+""];if(parser)data=parser.call(this,data);if(data===undefined)data=null;oResult[key]=data}else bError=true}catch(e){bError=
true}}else oResult=fielddataarray;if(!bError)oParsedResponse.results[recIdx++]=oResult}}}}return oParsedResponse}return null},parseXMLResult:function(result){var oResult={},schema=this.responseSchema;try{for(var m=schema.fields.length-1;m>=0;m--){var field=schema.fields[m];var key=lang.isValue(field.key)?field.key:field;var data=null;if(this.useXPath)data=YAHOO.util.DataSource._getLocationValue(field,result);else{var xmlAttr=result.attributes.getNamedItem(key);if(xmlAttr)data=xmlAttr.value;else{var xmlNode=
result.getElementsByTagName(key);if(xmlNode&&xmlNode.item(0)){var item=xmlNode.item(0);data=item?item.text?item.text:item.textContent?item.textContent:null:null;if(!data){var datapieces=[];for(var j=0,len=item.childNodes.length;j<len;j++)if(item.childNodes[j].nodeValue)datapieces[datapieces.length]=item.childNodes[j].nodeValue;if(datapieces.length>0)data=datapieces.join("")}}}}if(data===null)data="";if(!field.parser&&field.converter)field.parser=field.converter;var parser=typeof field.parser==="function"?
field.parser:DS.Parser[field.parser+""];if(parser)data=parser.call(this,data);if(data===undefined)data=null;oResult[key]=data}}catch(e){}return oResult},parseXMLData:function(oRequest,oFullResponse){var bError=false,schema=this.responseSchema,oParsedResponse={meta:{}},xmlList=null,metaNode=schema.metaNode,metaLocators=schema.metaFields||{},i,k,loc,v;try{if(this.useXPath)for(k in metaLocators)oParsedResponse.meta[k]=YAHOO.util.DataSource._getLocationValue(metaLocators[k],oFullResponse);else{metaNode=
metaNode?oFullResponse.getElementsByTagName(metaNode)[0]:oFullResponse;if(metaNode)for(k in metaLocators)if(lang.hasOwnProperty(metaLocators,k)){loc=metaLocators[k];v=metaNode.getElementsByTagName(loc)[0];if(v)v=v.firstChild.nodeValue;else{v=metaNode.attributes.getNamedItem(loc);if(v)v=v.value}if(lang.isValue(v))oParsedResponse.meta[k]=v}}xmlList=schema.resultNode?oFullResponse.getElementsByTagName(schema.resultNode):null}catch(e){}if(!xmlList||!lang.isArray(schema.fields))bError=true;else{oParsedResponse.results=
[];for(i=xmlList.length-1;i>=0;--i){var oResult=this.parseXMLResult(xmlList.item(i));oParsedResponse.results[i]=oResult}}if(bError)oParsedResponse.error=true;else;return oParsedResponse},parseJSONData:function(oRequest,oFullResponse){var oParsedResponse={results:[],meta:{}};if(lang.isObject(oFullResponse)&&this.responseSchema.resultsList){var schema=this.responseSchema,fields=schema.fields,resultsList=oFullResponse,results=[],metaFields=schema.metaFields||{},fieldParsers=[],fieldPaths=[],simpleFields=
[],bError=false,i,len,j,v,key,parser,path;var buildPath=function(needle){var path=null,keys=[],i=0;if(needle){needle=needle.replace(/\[(['"])(.*?)\1\]/g,function(x,$1,$2){keys[i]=$2;return".@"+i++}).replace(/\[(\d+)\]/g,function(x,$1){keys[i]=parseInt($1,10)|0;return".@"+i++}).replace(/^\./,"");if(!/[^\w\.\$@]/.test(needle)){path=needle.split(".");for(i=path.length-1;i>=0;--i)if(path[i].charAt(0)==="@")path[i]=keys[parseInt(path[i].substr(1),10)]}else;}return path};var walkPath=function(path,origin){var v=
origin,i=0,len=path.length;for(;i<len&&v;++i)v=v[path[i]];return v};path=buildPath(schema.resultsList);if(path){resultsList=walkPath(path,oFullResponse);if(resultsList===undefined)bError=true}else bError=true;if(!resultsList)resultsList=[];if(!lang.isArray(resultsList))resultsList=[resultsList];if(!bError){if(schema.fields){var field;for(i=0,len=fields.length;i<len;i++){field=fields[i];key=field.key||field;parser=(typeof field.parser==="function"?field.parser:DS.Parser[field.parser+""])||field.converter;
path=buildPath(key);if(parser)fieldParsers[fieldParsers.length]={key:key,parser:parser};if(path)if(path.length>1)fieldPaths[fieldPaths.length]={key:key,path:path};else simpleFields[simpleFields.length]={key:key,path:path[0]};else;}for(i=resultsList.length-1;i>=0;--i){var r=resultsList[i],rec={};if(r){for(j=simpleFields.length-1;j>=0;--j)rec[simpleFields[j].key]=r[simpleFields[j].path]!==undefined?r[simpleFields[j].path]:r[j];for(j=fieldPaths.length-1;j>=0;--j)rec[fieldPaths[j].key]=walkPath(fieldPaths[j].path,
r);for(j=fieldParsers.length-1;j>=0;--j){var p=fieldParsers[j].key;rec[p]=fieldParsers[j].parser(rec[p]);if(rec[p]===undefined)rec[p]=null}}results[i]=rec}}else results=resultsList;for(key in metaFields)if(lang.hasOwnProperty(metaFields,key)){path=buildPath(metaFields[key]);if(path){v=walkPath(path,oFullResponse);oParsedResponse.meta[key]=v}}}else oParsedResponse.error=true;oParsedResponse.results=results}else oParsedResponse.error=true;return oParsedResponse},parseHTMLTableData:function(oRequest,
oFullResponse){var bError=false;var elTable=oFullResponse;var fields=this.responseSchema.fields;var oParsedResponse={results:[]};if(lang.isArray(fields))for(var i=0;i<elTable.tBodies.length;i++){var elTbody=elTable.tBodies[i];for(var j=elTbody.rows.length-1;j>-1;j--){var elRow=elTbody.rows[j];var oResult={};for(var k=fields.length-1;k>-1;k--){var field=fields[k];var key=lang.isValue(field.key)?field.key:field;var data=elRow.cells[k].innerHTML;if(!field.parser&&field.converter)field.parser=field.converter;
var parser=typeof field.parser==="function"?field.parser:DS.Parser[field.parser+""];if(parser)data=parser.call(this,data);if(data===undefined)data=null;oResult[key]=data}oParsedResponse.results[j]=oResult}}else bError=true;if(bError)oParsedResponse.error=true;else;return oParsedResponse}};lang.augmentProto(DS,util.EventProvider);util.LocalDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_LOCAL;if(oLiveData)if(YAHOO.lang.isArray(oLiveData))this.responseType=DS.TYPE_JSARRAY;else if(oLiveData.nodeType&&
oLiveData.nodeType==9)this.responseType=DS.TYPE_XML;else if(oLiveData.nodeName&&oLiveData.nodeName.toLowerCase()=="table"){this.responseType=DS.TYPE_HTMLTABLE;oLiveData=oLiveData.cloneNode(true)}else if(YAHOO.lang.isString(oLiveData))this.responseType=DS.TYPE_TEXT;else{if(YAHOO.lang.isObject(oLiveData))this.responseType=DS.TYPE_JSON}else{oLiveData=[];this.responseType=DS.TYPE_JSARRAY}util.LocalDataSource.superclass.constructor.call(this,oLiveData,oConfigs)};lang.extend(util.LocalDataSource,DS);lang.augmentObject(util.LocalDataSource,
DS);util.FunctionDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_JSFUNCTION;oLiveData=oLiveData||function(){};util.FunctionDataSource.superclass.constructor.call(this,oLiveData,oConfigs)};lang.extend(util.FunctionDataSource,DS,{scope:null,makeConnection:function(oRequest,oCallback,oCaller){var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});var oRawResponse=this.scope?this.liveData.call(this.scope,oRequest,this):this.liveData(oRequest);
if(this.responseType===DS.TYPE_UNKNOWN)if(YAHOO.lang.isArray(oRawResponse))this.responseType=DS.TYPE_JSARRAY;else if(oRawResponse&&oRawResponse.nodeType&&oRawResponse.nodeType==9)this.responseType=DS.TYPE_XML;else if(oRawResponse&&oRawResponse.nodeName&&oRawResponse.nodeName.toLowerCase()=="table")this.responseType=DS.TYPE_HTMLTABLE;else if(YAHOO.lang.isObject(oRawResponse))this.responseType=DS.TYPE_JSON;else if(YAHOO.lang.isString(oRawResponse))this.responseType=DS.TYPE_TEXT;this.handleResponse(oRequest,
oRawResponse,oCallback,oCaller,tId);return tId}});lang.augmentObject(util.FunctionDataSource,DS);util.ScriptNodeDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_SCRIPTNODE;oLiveData=oLiveData||"";util.ScriptNodeDataSource.superclass.constructor.call(this,oLiveData,oConfigs)};lang.extend(util.ScriptNodeDataSource,DS,{getUtility:util.Get,asyncMode:"allowAll",scriptCallbackParam:"callback",generateRequestCallback:function(id){return"&"+this.scriptCallbackParam+"=YAHOO.util.ScriptNodeDataSource.callbacks["+
id+"]"},doBeforeGetScriptNode:function(sUri){return sUri},makeConnection:function(oRequest,oCallback,oCaller){var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});if(util.ScriptNodeDataSource._nPending===0){util.ScriptNodeDataSource.callbacks=[];util.ScriptNodeDataSource._nId=0}var id=util.ScriptNodeDataSource._nId;util.ScriptNodeDataSource._nId++;var oSelf=this;util.ScriptNodeDataSource.callbacks[id]=function(oRawResponse){if(oSelf.asyncMode!==
"ignoreStaleResponses"||id===util.ScriptNodeDataSource.callbacks.length-1){if(oSelf.responseType===DS.TYPE_UNKNOWN)if(YAHOO.lang.isArray(oRawResponse))oSelf.responseType=DS.TYPE_JSARRAY;else if(oRawResponse.nodeType&&oRawResponse.nodeType==9)oSelf.responseType=DS.TYPE_XML;else if(oRawResponse.nodeName&&oRawResponse.nodeName.toLowerCase()=="table")oSelf.responseType=DS.TYPE_HTMLTABLE;else if(YAHOO.lang.isObject(oRawResponse))oSelf.responseType=DS.TYPE_JSON;else if(YAHOO.lang.isString(oRawResponse))oSelf.responseType=
DS.TYPE_TEXT;oSelf.handleResponse(oRequest,oRawResponse,oCallback,oCaller,tId)}else;delete util.ScriptNodeDataSource.callbacks[id]};util.ScriptNodeDataSource._nPending++;var sUri=this.liveData+oRequest+this.generateRequestCallback(id);sUri=this.doBeforeGetScriptNode(sUri);this.getUtility.script(sUri,{autopurge:true,onsuccess:util.ScriptNodeDataSource._bumpPendingDown,onfail:util.ScriptNodeDataSource._bumpPendingDown});return tId}});lang.augmentObject(util.ScriptNodeDataSource,DS);lang.augmentObject(util.ScriptNodeDataSource,
{_nId:0,_nPending:0,callbacks:[]});util.XHRDataSource=function(oLiveData,oConfigs){this.dataType=DS.TYPE_XHR;this.connMgr=this.connMgr||util.Connect;oLiveData=oLiveData||"";util.XHRDataSource.superclass.constructor.call(this,oLiveData,oConfigs)};lang.extend(util.XHRDataSource,DS,{connMgr:null,connXhrMode:"allowAll",connMethodPost:false,connTimeout:0,makeConnection:function(oRequest,oCallback,oCaller){var oRawResponse=null;var tId=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,
callback:oCallback,caller:oCaller});var oSelf=this;var oConnMgr=this.connMgr;var oQueue=this._oQueue;var _xhrSuccess=function(oResponse){if(oResponse&&this.connXhrMode=="ignoreStaleResponses"&&oResponse.tId!=oQueue.conn.tId)return null;else if(!oResponse){this.fireEvent("dataErrorEvent",{request:oRequest,response:null,callback:oCallback,caller:oCaller,message:DS.ERROR_DATANULL});DS.issueCallback(oCallback,[oRequest,{error:true}],true,oCaller);return null}else{if(this.responseType===DS.TYPE_UNKNOWN){var ctype=
oResponse.getResponseHeader?oResponse.getResponseHeader["Content-Type"]:null;if(ctype)if(ctype.indexOf("text/xml")>-1)this.responseType=DS.TYPE_XML;else if(ctype.indexOf("application/json")>-1)this.responseType=DS.TYPE_JSON;else if(ctype.indexOf("text/plain")>-1)this.responseType=DS.TYPE_TEXT}this.handleResponse(oRequest,oResponse,oCallback,oCaller,tId)}};var _xhrFailure=function(oResponse){this.fireEvent("dataErrorEvent",{request:oRequest,response:oResponse,callback:oCallback,caller:oCaller,message:DS.ERROR_DATAINVALID});
if(lang.isString(this.liveData)&&lang.isString(oRequest)&&this.liveData.lastIndexOf("?")!==this.liveData.length-1&&oRequest.indexOf("?")!==0);oResponse=oResponse||{};oResponse.error=true;DS.issueCallback(oCallback,[oRequest,oResponse],true,oCaller);return null};var _xhrCallback={success:_xhrSuccess,failure:_xhrFailure,scope:this};if(lang.isNumber(this.connTimeout))_xhrCallback.timeout=this.connTimeout;if(this.connXhrMode=="cancelStaleRequests")if(oQueue.conn)if(oConnMgr.abort){oConnMgr.abort(oQueue.conn);
oQueue.conn=null}else;if(oConnMgr&&oConnMgr.asyncRequest){var sLiveData=this.liveData;var isPost=this.connMethodPost;var sMethod=isPost?"POST":"GET";var sUri=isPost||!lang.isValue(oRequest)?sLiveData:sLiveData+oRequest;var sRequest=isPost?oRequest:null;if(this.connXhrMode!="queueRequests")oQueue.conn=oConnMgr.asyncRequest(sMethod,sUri,_xhrCallback,sRequest);else if(oQueue.conn){var allRequests=oQueue.requests;allRequests.push({request:oRequest,callback:_xhrCallback});if(!oQueue.interval)oQueue.interval=
setInterval(function(){if(oConnMgr.isCallInProgress(oQueue.conn))return;else if(allRequests.length>0){sUri=isPost||!lang.isValue(allRequests[0].request)?sLiveData:sLiveData+allRequests[0].request;sRequest=isPost?allRequests[0].request:null;oQueue.conn=oConnMgr.asyncRequest(sMethod,sUri,allRequests[0].callback,sRequest);allRequests.shift()}else{clearInterval(oQueue.interval);oQueue.interval=null}},50)}else oQueue.conn=oConnMgr.asyncRequest(sMethod,sUri,_xhrCallback,sRequest)}else DS.issueCallback(oCallback,
[oRequest,{error:true}],true,oCaller);return tId}});lang.augmentObject(util.XHRDataSource,DS);util.DataSource=function(oLiveData,oConfigs){oConfigs=oConfigs||{};var dataType=oConfigs.dataType;if(dataType)if(dataType==DS.TYPE_LOCAL){lang.augmentObject(util.DataSource,util.LocalDataSource);return new util.LocalDataSource(oLiveData,oConfigs)}else if(dataType==DS.TYPE_XHR){lang.augmentObject(util.DataSource,util.XHRDataSource);return new util.XHRDataSource(oLiveData,oConfigs)}else if(dataType==DS.TYPE_SCRIPTNODE){lang.augmentObject(util.DataSource,
util.ScriptNodeDataSource);return new util.ScriptNodeDataSource(oLiveData,oConfigs)}else if(dataType==DS.TYPE_JSFUNCTION){lang.augmentObject(util.DataSource,util.FunctionDataSource);return new util.FunctionDataSource(oLiveData,oConfigs)}if(YAHOO.lang.isString(oLiveData)){lang.augmentObject(util.DataSource,util.XHRDataSource);return new util.XHRDataSource(oLiveData,oConfigs)}else if(YAHOO.lang.isFunction(oLiveData)){lang.augmentObject(util.DataSource,util.FunctionDataSource);return new util.FunctionDataSource(oLiveData,
oConfigs)}else{lang.augmentObject(util.DataSource,util.LocalDataSource);return new util.LocalDataSource(oLiveData,oConfigs)}};lang.augmentObject(util.DataSource,DS)})();
YAHOO.util.Number={format:function(n,cfg){if(!isFinite(+n))return"";n=!isFinite(+n)?0:+n;cfg=YAHOO.lang.merge(YAHOO.util.Number.format.defaults,cfg||{});var neg=n<0,absN=Math.abs(n),places=cfg.decimalPlaces,sep=cfg.thousandsSeparator,s,bits,i;if(places<0){s=absN-absN%1+"";i=s.length+places;if(i>0)s=Number("."+s).toFixed(i).slice(2)+(new Array(s.length-i+1)).join("0");else s="0"}else s=absN<1&&absN>=0.5&&!places?"1":absN.toFixed(places);if(absN>1E3){bits=s.split(/\D/);i=bits[0].length%3||3;bits[0]=
bits[0].slice(0,i)+bits[0].slice(i).replace(/(\d{3})/g,sep+"$1");s=bits.join(cfg.decimalSeparator)}s=cfg.prefix+s+cfg.suffix;return neg?cfg.negativeFormat.replace(/#/,s):s}};YAHOO.util.Number.format.defaults={decimalSeparator:".",decimalPlaces:null,thousandsSeparator:"",prefix:"",suffix:"",negativeFormat:"-#"};
(function(){var xPad=function(x,pad,r){if(typeof r==="undefined")r=10;for(;parseInt(x,10)<r&&r>1;r/=10)x=pad.toString()+x;return x.toString()};var Dt={formats:{a:function(d,l){return l.a[d.getDay()]},A:function(d,l){return l.A[d.getDay()]},b:function(d,l){return l.b[d.getMonth()]},B:function(d,l){return l.B[d.getMonth()]},C:function(d){return xPad(parseInt(d.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(d){return xPad(parseInt(Dt.formats.G(d)%100,10),0)},G:function(d){var y=
d.getFullYear();var V=parseInt(Dt.formats.V(d),10);var W=parseInt(Dt.formats.W(d),10);if(W>V)y++;else if(W===0&&V>=52)y--;return y},H:["getHours","0"],I:function(d){var I=d.getHours()%12;return xPad(I===0?12:I,0)},j:function(d){var gmd_1=new Date(""+d.getFullYear()+"/1/1 GMT");var gmdate=new Date(""+d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate()+" GMT");var ms=gmdate-gmd_1;var doy=parseInt(ms/6E4/60/24,10)+1;return xPad(doy,0,100)},k:["getHours"," "],l:function(d){var I=d.getHours()%12;return xPad(I===
0?12:I," ")},m:function(d){return xPad(d.getMonth()+1,0)},M:["getMinutes","0"],p:function(d,l){return l.p[d.getHours()>=12?1:0]},P:function(d,l){return l.P[d.getHours()>=12?1:0]},s:function(d,l){return parseInt(d.getTime()/1E3,10)},S:["getSeconds","0"],u:function(d){var dow=d.getDay();return dow===0?7:dow},U:function(d){var doy=parseInt(Dt.formats.j(d),10);var rdow=6-d.getDay();var woy=parseInt((doy+rdow)/7,10);return xPad(woy,0)},V:function(d){var woy=parseInt(Dt.formats.W(d),10);var dow1_1=(new Date(""+
d.getFullYear()+"/1/1")).getDay();var idow=woy+(dow1_1>4||dow1_1<=1?0:1);if(idow===53&&(new Date(""+d.getFullYear()+"/12/31")).getDay()<4)idow=1;else if(idow===0)idow=Dt.formats.V(new Date(""+(d.getFullYear()-1)+"/12/31"));return xPad(idow,0)},w:"getDay",W:function(d){var doy=parseInt(Dt.formats.j(d),10);var rdow=7-Dt.formats.u(d);var woy=parseInt((doy+rdow)/7,10);return xPad(woy,0,10)},y:function(d){return xPad(d.getFullYear()%100,0)},Y:"getFullYear",z:function(d){var o=d.getTimezoneOffset();var H=
xPad(parseInt(Math.abs(o/60),10),0);var M=xPad(Math.abs(o%60),0);return(o>0?"-":"+")+H+M},Z:function(d){var tz=d.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");if(tz.length>4)tz=Dt.formats.z(d);return tz},"%":function(d){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(oDate,oConfig,sLocale){oConfig=oConfig||{};if(!(oDate instanceof Date))return YAHOO.lang.isValue(oDate)?
oDate:"";var format=oConfig.format||"%m/%d/%Y";if(format==="YYYY/MM/DD")format="%Y/%m/%d";else if(format==="DD/MM/YYYY")format="%d/%m/%Y";else if(format==="MM/DD/YYYY")format="%m/%d/%Y";sLocale=sLocale||"en";if(!(sLocale in YAHOO.util.DateLocale))if(sLocale.replace(/-[a-zA-Z]+$/,"")in YAHOO.util.DateLocale)sLocale=sLocale.replace(/-[a-zA-Z]+$/,"");else sLocale="en";var aLocale=YAHOO.util.DateLocale[sLocale];var replace_aggs=function(m0,m1){var f=Dt.aggregates[m1];return f==="locale"?aLocale[m1]:f};
var replace_formats=function(m0,m1){var f=Dt.formats[m1];if(typeof f==="string")return oDate[f]();else if(typeof f==="function")return f.call(oDate,oDate,aLocale);else if(typeof f==="object"&&typeof f[0]==="string")return xPad(oDate[f[0]](),f[1]);else return m1};while(format.match(/%[cDFhnrRtTxX]/))format=format.replace(/%([cDFhnrRtTxX])/g,replace_aggs);var str=format.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,replace_formats);replace_aggs=replace_formats=undefined;return str}};YAHOO.namespace("YAHOO.util");
YAHOO.util.Date=Dt;YAHOO.util.DateLocale={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%d/%m/%y",X:"%T"};YAHOO.util.DateLocale["en"]=YAHOO.lang.merge(YAHOO.util.DateLocale,
{});YAHOO.util.DateLocale["en-US"]=YAHOO.lang.merge(YAHOO.util.DateLocale["en"],{c:"%a %d %b %Y %I:%M:%S %p %Z",x:"%m/%d/%Y",X:"%I:%M:%S %p"});YAHOO.util.DateLocale["en-GB"]=YAHOO.lang.merge(YAHOO.util.DateLocale["en"],{r:"%l:%M:%S %P %Z"});YAHOO.util.DateLocale["en-AU"]=YAHOO.lang.merge(YAHOO.util.DateLocale["en"])})();YAHOO.register("datasource",YAHOO.util.DataSource,{version:"2.8.0r4",build:"2449"});YAHOO.widget.DS_JSArray=YAHOO.util.LocalDataSource;YAHOO.widget.DS_JSFunction=YAHOO.util.FunctionDataSource;
YAHOO.widget.DS_XHR=function(sScriptURI,aSchema,oConfigs){var DS=new YAHOO.util.XHRDataSource(sScriptURI,oConfigs);DS._aDeprecatedSchema=aSchema;return DS};YAHOO.widget.DS_ScriptNode=function(sScriptURI,aSchema,oConfigs){var DS=new YAHOO.util.ScriptNodeDataSource(sScriptURI,oConfigs);DS._aDeprecatedSchema=aSchema;return DS};YAHOO.widget.DS_XHR.TYPE_JSON=YAHOO.util.DataSourceBase.TYPE_JSON;YAHOO.widget.DS_XHR.TYPE_XML=YAHOO.util.DataSourceBase.TYPE_XML;YAHOO.widget.DS_XHR.TYPE_FLAT=YAHOO.util.DataSourceBase.TYPE_TEXT;
YAHOO.widget.AutoComplete=function(elInput,elContainer,oDataSource,oConfigs){if(elInput&&elContainer&&oDataSource){if(oDataSource&&YAHOO.lang.isFunction(oDataSource.sendRequest))this.dataSource=oDataSource;else return;this.key=0;var schema=oDataSource.responseSchema;if(oDataSource._aDeprecatedSchema){var aDeprecatedSchema=oDataSource._aDeprecatedSchema;if(YAHOO.lang.isArray(aDeprecatedSchema)){if(oDataSource.responseType===YAHOO.util.DataSourceBase.TYPE_JSON||oDataSource.responseType===YAHOO.util.DataSourceBase.TYPE_UNKNOWN){schema.resultsList=
aDeprecatedSchema[0];this.key=aDeprecatedSchema[1];schema.fields=aDeprecatedSchema.length<3?null:aDeprecatedSchema.slice(1)}else if(oDataSource.responseType===YAHOO.util.DataSourceBase.TYPE_XML){schema.resultNode=aDeprecatedSchema[0];this.key=aDeprecatedSchema[1];schema.fields=aDeprecatedSchema.slice(1)}else if(oDataSource.responseType===YAHOO.util.DataSourceBase.TYPE_TEXT){schema.recordDelim=aDeprecatedSchema[0];schema.fieldDelim=aDeprecatedSchema[1]}oDataSource.responseSchema=schema}}if(YAHOO.util.Dom.inDocument(elInput)){if(YAHOO.lang.isString(elInput)){this._sName=
"instance"+YAHOO.widget.AutoComplete._nIndex+" "+elInput;this._elTextbox=document.getElementById(elInput)}else{this._sName=elInput.id?"instance"+YAHOO.widget.AutoComplete._nIndex+" "+elInput.id:"instance"+YAHOO.widget.AutoComplete._nIndex;this._elTextbox=elInput}YAHOO.util.Dom.addClass(this._elTextbox,"yui-ac-input")}else return;if(YAHOO.util.Dom.inDocument(elContainer)){if(YAHOO.lang.isString(elContainer))this._elContainer=document.getElementById(elContainer);else this._elContainer=elContainer;if(this._elContainer.style.display==
"none");var elParent=this._elContainer.parentNode;var elTag=elParent.tagName.toLowerCase();if(elTag=="div")YAHOO.util.Dom.addClass(elParent,"yui-ac");else;}else return;if(this.dataSource.dataType===YAHOO.util.DataSourceBase.TYPE_LOCAL)this.applyLocalFilter=true;if(oConfigs&&oConfigs.constructor==Object)for(var sConfig in oConfigs)if(sConfig)this[sConfig]=oConfigs[sConfig];this._initContainerEl();this._initProps();this._initListEl();this._initContainerHelperEls();var oSelf=this;var elTextbox=this._elTextbox;
YAHOO.util.Event.addListener(elTextbox,"keyup",oSelf._onTextboxKeyUp,oSelf);YAHOO.util.Event.addListener(elTextbox,"keydown",oSelf._onTextboxKeyDown,oSelf);YAHOO.util.Event.addListener(elTextbox,"focus",oSelf._onTextboxFocus,oSelf);YAHOO.util.Event.addListener(elTextbox,"blur",oSelf._onTextboxBlur,oSelf);YAHOO.util.Event.addListener(elContainer,"mouseover",oSelf._onContainerMouseover,oSelf);YAHOO.util.Event.addListener(elContainer,"mouseout",oSelf._onContainerMouseout,oSelf);YAHOO.util.Event.addListener(elContainer,
"click",oSelf._onContainerClick,oSelf);YAHOO.util.Event.addListener(elContainer,"scroll",oSelf._onContainerScroll,oSelf);YAHOO.util.Event.addListener(elContainer,"resize",oSelf._onContainerResize,oSelf);YAHOO.util.Event.addListener(elTextbox,"keypress",oSelf._onTextboxKeyPress,oSelf);YAHOO.util.Event.addListener(window,"unload",oSelf._onWindowUnload,oSelf);this.textboxFocusEvent=new YAHOO.util.CustomEvent("textboxFocus",this);this.textboxKeyEvent=new YAHOO.util.CustomEvent("textboxKey",this);this.dataRequestEvent=
new YAHOO.util.CustomEvent("dataRequest",this);this.dataReturnEvent=new YAHOO.util.CustomEvent("dataReturn",this);this.dataErrorEvent=new YAHOO.util.CustomEvent("dataError",this);this.containerPopulateEvent=new YAHOO.util.CustomEvent("containerPopulate",this);this.containerExpandEvent=new YAHOO.util.CustomEvent("containerExpand",this);this.typeAheadEvent=new YAHOO.util.CustomEvent("typeAhead",this);this.itemMouseOverEvent=new YAHOO.util.CustomEvent("itemMouseOver",this);this.itemMouseOutEvent=new YAHOO.util.CustomEvent("itemMouseOut",
this);this.itemArrowToEvent=new YAHOO.util.CustomEvent("itemArrowTo",this);this.itemArrowFromEvent=new YAHOO.util.CustomEvent("itemArrowFrom",this);this.itemSelectEvent=new YAHOO.util.CustomEvent("itemSelect",this);this.unmatchedItemSelectEvent=new YAHOO.util.CustomEvent("unmatchedItemSelect",this);this.selectionEnforceEvent=new YAHOO.util.CustomEvent("selectionEnforce",this);this.containerCollapseEvent=new YAHOO.util.CustomEvent("containerCollapse",this);this.textboxBlurEvent=new YAHOO.util.CustomEvent("textboxBlur",
this);this.textboxChangeEvent=new YAHOO.util.CustomEvent("textboxChange",this);elTextbox.setAttribute("autocomplete","off");YAHOO.widget.AutoComplete._nIndex++}else;};YAHOO.widget.AutoComplete.prototype.dataSource=null;YAHOO.widget.AutoComplete.prototype.applyLocalFilter=null;YAHOO.widget.AutoComplete.prototype.queryMatchCase=false;YAHOO.widget.AutoComplete.prototype.queryMatchContains=false;YAHOO.widget.AutoComplete.prototype.queryMatchSubset=false;
YAHOO.widget.AutoComplete.prototype.minQueryLength=1;YAHOO.widget.AutoComplete.prototype.maxResultsDisplayed=10;YAHOO.widget.AutoComplete.prototype.queryDelay=0.2;YAHOO.widget.AutoComplete.prototype.typeAheadDelay=0.5;YAHOO.widget.AutoComplete.prototype.queryInterval=500;YAHOO.widget.AutoComplete.prototype.highlightClassName="yui-ac-highlight";YAHOO.widget.AutoComplete.prototype.prehighlightClassName=null;YAHOO.widget.AutoComplete.prototype.delimChar=null;
YAHOO.widget.AutoComplete.prototype.autoHighlight=true;YAHOO.widget.AutoComplete.prototype.typeAhead=false;YAHOO.widget.AutoComplete.prototype.animHoriz=false;YAHOO.widget.AutoComplete.prototype.animVert=true;YAHOO.widget.AutoComplete.prototype.animSpeed=0.3;YAHOO.widget.AutoComplete.prototype.forceSelection=false;YAHOO.widget.AutoComplete.prototype.allowBrowserAutocomplete=true;YAHOO.widget.AutoComplete.prototype.alwaysShowContainer=false;YAHOO.widget.AutoComplete.prototype.useIFrame=false;
YAHOO.widget.AutoComplete.prototype.useShadow=false;YAHOO.widget.AutoComplete.prototype.suppressInputUpdate=false;YAHOO.widget.AutoComplete.prototype.resultTypeList=true;YAHOO.widget.AutoComplete.prototype.queryQuestionMark=true;YAHOO.widget.AutoComplete.prototype.autoSnapContainer=true;YAHOO.widget.AutoComplete.prototype.toString=function(){return"AutoComplete "+this._sName};YAHOO.widget.AutoComplete.prototype.getInputEl=function(){return this._elTextbox};
YAHOO.widget.AutoComplete.prototype.getContainerEl=function(){return this._elContainer};YAHOO.widget.AutoComplete.prototype.isFocused=function(){return this._bFocused};YAHOO.widget.AutoComplete.prototype.isContainerOpen=function(){return this._bContainerOpen};YAHOO.widget.AutoComplete.prototype.getListEl=function(){return this._elList};YAHOO.widget.AutoComplete.prototype.getListItemMatch=function(elListItem){if(elListItem._sResultMatch)return elListItem._sResultMatch;else return null};
YAHOO.widget.AutoComplete.prototype.getListItemData=function(elListItem){if(elListItem._oResultData)return elListItem._oResultData;else return null};YAHOO.widget.AutoComplete.prototype.getListItemIndex=function(elListItem){if(YAHOO.lang.isNumber(elListItem._nItemIndex))return elListItem._nItemIndex;else return null};
YAHOO.widget.AutoComplete.prototype.setHeader=function(sHeader){if(this._elHeader){var elHeader=this._elHeader;if(sHeader){elHeader.innerHTML=sHeader;elHeader.style.display=""}else{elHeader.innerHTML="";elHeader.style.display="none"}}};YAHOO.widget.AutoComplete.prototype.setFooter=function(sFooter){if(this._elFooter){var elFooter=this._elFooter;if(sFooter){elFooter.innerHTML=sFooter;elFooter.style.display=""}else{elFooter.innerHTML="";elFooter.style.display="none"}}};
YAHOO.widget.AutoComplete.prototype.setBody=function(sBody){if(this._elBody){var elBody=this._elBody;YAHOO.util.Event.purgeElement(elBody,true);if(sBody){elBody.innerHTML=sBody;elBody.style.display=""}else{elBody.innerHTML="";elBody.style.display="none"}this._elList=null}};
YAHOO.widget.AutoComplete.prototype.generateRequest=function(sQuery){var dataType=this.dataSource.dataType;if(dataType===YAHOO.util.DataSourceBase.TYPE_XHR)if(!this.dataSource.connMethodPost)sQuery=(this.queryQuestionMark?"?":"")+(this.dataSource.scriptQueryParam||"query")+"="+sQuery+(this.dataSource.scriptQueryAppend?"&"+this.dataSource.scriptQueryAppend:"");else sQuery=(this.dataSource.scriptQueryParam||"query")+"="+sQuery+(this.dataSource.scriptQueryAppend?"&"+this.dataSource.scriptQueryAppend:
"");else if(dataType===YAHOO.util.DataSourceBase.TYPE_SCRIPTNODE)sQuery="&"+(this.dataSource.scriptQueryParam||"query")+"="+sQuery+(this.dataSource.scriptQueryAppend?"&"+this.dataSource.scriptQueryAppend:"");return sQuery};YAHOO.widget.AutoComplete.prototype.sendQuery=function(sQuery){this._bFocused=true;var newQuery=this.delimChar?this._elTextbox.value+sQuery:sQuery;this._sendQuery(newQuery)};
YAHOO.widget.AutoComplete.prototype.snapContainer=function(){var oTextbox=this._elTextbox,pos=YAHOO.util.Dom.getXY(oTextbox);pos[1]+=YAHOO.util.Dom.get(oTextbox).offsetHeight+2;YAHOO.util.Dom.setXY(this._elContainer,pos)};YAHOO.widget.AutoComplete.prototype.expandContainer=function(){this._toggleContainer(true)};YAHOO.widget.AutoComplete.prototype.collapseContainer=function(){this._toggleContainer(false)};
YAHOO.widget.AutoComplete.prototype.clearList=function(){var allItems=this._elList.childNodes,i=allItems.length-1;for(;i>-1;i--)allItems[i].style.display="none"};
YAHOO.widget.AutoComplete.prototype.getSubsetMatches=function(sQuery){var subQuery,oCachedResponse,subRequest;for(var i=sQuery.length;i>=this.minQueryLength;i--){subRequest=this.generateRequest(sQuery.substr(0,i));this.dataRequestEvent.fire(this,subQuery,subRequest);oCachedResponse=this.dataSource.getCachedResponse(subRequest);if(oCachedResponse)return this.filterResults.apply(this.dataSource,[sQuery,oCachedResponse,oCachedResponse,{scope:this}])}return null};
YAHOO.widget.AutoComplete.prototype.preparseRawResponse=function(oRequest,oFullResponse,oCallback){var nEnd=this.responseStripAfter!==""&&oFullResponse.indexOf?oFullResponse.indexOf(this.responseStripAfter):-1;if(nEnd!=-1)oFullResponse=oFullResponse.substring(0,nEnd);return oFullResponse};
YAHOO.widget.AutoComplete.prototype.filterResults=function(sQuery,oFullResponse,oParsedResponse,oCallback){if(oCallback&&oCallback.argument&&oCallback.argument.query)sQuery=oCallback.argument.query;if(sQuery&&sQuery!==""){oParsedResponse=YAHOO.widget.AutoComplete._cloneObject(oParsedResponse);var oAC=oCallback.scope,oDS=this,allResults=oParsedResponse.results,filteredResults=[],nMax=oAC.maxResultsDisplayed,bMatchCase=oDS.queryMatchCase||oAC.queryMatchCase,bMatchContains=oDS.queryMatchContains||oAC.queryMatchContains;
for(var i=0,len=allResults.length;i<len;i++){var oResult=allResults[i];var sResult=null;if(YAHOO.lang.isString(oResult))sResult=oResult;else if(YAHOO.lang.isArray(oResult))sResult=oResult[0];else if(this.responseSchema.fields){var key=this.responseSchema.fields[0].key||this.responseSchema.fields[0];sResult=oResult[key]}else if(this.key)sResult=oResult[this.key];if(YAHOO.lang.isString(sResult)){var sKeyIndex=bMatchCase?sResult.indexOf(decodeURIComponent(sQuery)):sResult.toLowerCase().indexOf(decodeURIComponent(sQuery).toLowerCase());
if(!bMatchContains&&sKeyIndex===0||bMatchContains&&sKeyIndex>-1)filteredResults.push(oResult)}if(len>nMax&&filteredResults.length===nMax)break}oParsedResponse.results=filteredResults}else;return oParsedResponse};YAHOO.widget.AutoComplete.prototype.handleResponse=function(sQuery,oResponse,oPayload){if(this instanceof YAHOO.widget.AutoComplete&&this._sName)this._populateList(sQuery,oResponse,oPayload)};YAHOO.widget.AutoComplete.prototype.doBeforeLoadData=function(sQuery,oResponse,oPayload){return true};
YAHOO.widget.AutoComplete.prototype.formatResult=function(oResultData,sQuery,sResultMatch){var sMarkup=sResultMatch?sResultMatch:"";return sMarkup};YAHOO.widget.AutoComplete.prototype.doBeforeExpandContainer=function(elTextbox,elContainer,sQuery,aResults){return true};
YAHOO.widget.AutoComplete.prototype.destroy=function(){var instanceName=this.toString();var elInput=this._elTextbox;var elContainer=this._elContainer;this.textboxFocusEvent.unsubscribeAll();this.textboxKeyEvent.unsubscribeAll();this.dataRequestEvent.unsubscribeAll();this.dataReturnEvent.unsubscribeAll();this.dataErrorEvent.unsubscribeAll();this.containerPopulateEvent.unsubscribeAll();this.containerExpandEvent.unsubscribeAll();this.typeAheadEvent.unsubscribeAll();this.itemMouseOverEvent.unsubscribeAll();
this.itemMouseOutEvent.unsubscribeAll();this.itemArrowToEvent.unsubscribeAll();this.itemArrowFromEvent.unsubscribeAll();this.itemSelectEvent.unsubscribeAll();this.unmatchedItemSelectEvent.unsubscribeAll();this.selectionEnforceEvent.unsubscribeAll();this.containerCollapseEvent.unsubscribeAll();this.textboxBlurEvent.unsubscribeAll();this.textboxChangeEvent.unsubscribeAll();YAHOO.util.Event.purgeElement(elInput,true);YAHOO.util.Event.purgeElement(elContainer,true);elContainer.innerHTML="";for(var key in this)if(YAHOO.lang.hasOwnProperty(this,
key))this[key]=null};YAHOO.widget.AutoComplete.prototype.textboxFocusEvent=null;YAHOO.widget.AutoComplete.prototype.textboxKeyEvent=null;YAHOO.widget.AutoComplete.prototype.dataRequestEvent=null;YAHOO.widget.AutoComplete.prototype.dataReturnEvent=null;YAHOO.widget.AutoComplete.prototype.dataErrorEvent=null;YAHOO.widget.AutoComplete.prototype.containerPopulateEvent=null;YAHOO.widget.AutoComplete.prototype.containerExpandEvent=null;YAHOO.widget.AutoComplete.prototype.typeAheadEvent=null;
YAHOO.widget.AutoComplete.prototype.itemMouseOverEvent=null;YAHOO.widget.AutoComplete.prototype.itemMouseOutEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowToEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowFromEvent=null;YAHOO.widget.AutoComplete.prototype.itemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.unmatchedItemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.selectionEnforceEvent=null;YAHOO.widget.AutoComplete.prototype.containerCollapseEvent=null;
YAHOO.widget.AutoComplete.prototype.textboxBlurEvent=null;YAHOO.widget.AutoComplete.prototype.textboxChangeEvent=null;YAHOO.widget.AutoComplete._nIndex=0;YAHOO.widget.AutoComplete.prototype._sName=null;YAHOO.widget.AutoComplete.prototype._elTextbox=null;YAHOO.widget.AutoComplete.prototype._elContainer=null;YAHOO.widget.AutoComplete.prototype._elContent=null;YAHOO.widget.AutoComplete.prototype._elHeader=null;YAHOO.widget.AutoComplete.prototype._elBody=null;
YAHOO.widget.AutoComplete.prototype._elFooter=null;YAHOO.widget.AutoComplete.prototype._elShadow=null;YAHOO.widget.AutoComplete.prototype._elIFrame=null;YAHOO.widget.AutoComplete.prototype._bFocused=false;YAHOO.widget.AutoComplete.prototype._oAnim=null;YAHOO.widget.AutoComplete.prototype._bContainerOpen=false;YAHOO.widget.AutoComplete.prototype._bOverContainer=false;YAHOO.widget.AutoComplete.prototype._elList=null;YAHOO.widget.AutoComplete.prototype._nDisplayedItems=0;
YAHOO.widget.AutoComplete.prototype._sCurQuery=null;YAHOO.widget.AutoComplete.prototype._sPastSelections="";YAHOO.widget.AutoComplete.prototype._sInitInputValue=null;YAHOO.widget.AutoComplete.prototype._elCurListItem=null;YAHOO.widget.AutoComplete.prototype._elCurPrehighlightItem=null;YAHOO.widget.AutoComplete.prototype._bItemSelected=false;YAHOO.widget.AutoComplete.prototype._nKeyCode=null;YAHOO.widget.AutoComplete.prototype._nDelayID=-1;YAHOO.widget.AutoComplete.prototype._nTypeAheadDelayID=-1;
YAHOO.widget.AutoComplete.prototype._iFrameSrc="javascript:false;";YAHOO.widget.AutoComplete.prototype._queryInterval=null;YAHOO.widget.AutoComplete.prototype._sLastTextboxValue=null;
YAHOO.widget.AutoComplete.prototype._initProps=function(){var minQueryLength=this.minQueryLength;if(!YAHOO.lang.isNumber(minQueryLength))this.minQueryLength=1;var maxResultsDisplayed=this.maxResultsDisplayed;if(!YAHOO.lang.isNumber(maxResultsDisplayed)||maxResultsDisplayed<1)this.maxResultsDisplayed=10;var queryDelay=this.queryDelay;if(!YAHOO.lang.isNumber(queryDelay)||queryDelay<0)this.queryDelay=0.2;var typeAheadDelay=this.typeAheadDelay;if(!YAHOO.lang.isNumber(typeAheadDelay)||typeAheadDelay<0)this.typeAheadDelay=
0.2;var delimChar=this.delimChar;if(YAHOO.lang.isString(delimChar)&&delimChar.length>0)this.delimChar=[delimChar];else if(!YAHOO.lang.isArray(delimChar))this.delimChar=null;var animSpeed=this.animSpeed;if((this.animHoriz||this.animVert)&&YAHOO.util.Anim){if(!YAHOO.lang.isNumber(animSpeed)||animSpeed<0)this.animSpeed=0.3;if(!this._oAnim)this._oAnim=new YAHOO.util.Anim(this._elContent,{},this.animSpeed);else this._oAnim.duration=this.animSpeed}if(this.forceSelection&&delimChar);};
YAHOO.widget.AutoComplete.prototype._initContainerHelperEls=function(){if(this.useShadow&&!this._elShadow){var elShadow=document.createElement("div");elShadow.className="yui-ac-shadow";elShadow.style.width=0;elShadow.style.height=0;this._elShadow=this._elContainer.appendChild(elShadow)}if(this.useIFrame&&!this._elIFrame){var elIFrame=document.createElement("iframe");elIFrame.src=this._iFrameSrc;elIFrame.frameBorder=0;elIFrame.scrolling="no";elIFrame.style.position="absolute";elIFrame.style.width=
0;elIFrame.style.height=0;elIFrame.style.padding=0;elIFrame.tabIndex=-1;elIFrame.role="presentation";elIFrame.title="Presentational iframe shim";this._elIFrame=this._elContainer.appendChild(elIFrame)}};
YAHOO.widget.AutoComplete.prototype._initContainerEl=function(){YAHOO.util.Dom.addClass(this._elContainer,"yui-ac-container");if(!this._elContent){var elContent=document.createElement("div");elContent.className="yui-ac-content";elContent.style.display="none";this._elContent=this._elContainer.appendChild(elContent);var elHeader=document.createElement("div");elHeader.className="yui-ac-hd";elHeader.style.display="none";this._elHeader=this._elContent.appendChild(elHeader);var elBody=document.createElement("div");
elBody.className="yui-ac-bd";this._elBody=this._elContent.appendChild(elBody);var elFooter=document.createElement("div");elFooter.className="yui-ac-ft";elFooter.style.display="none";this._elFooter=this._elContent.appendChild(elFooter)}else;};
YAHOO.widget.AutoComplete.prototype._initListEl=function(){var nListLength=this.maxResultsDisplayed,elList=this._elList||document.createElement("ul"),elListItem;while(elList.childNodes.length<nListLength){elListItem=document.createElement("li");elListItem.style.display="none";elListItem._nItemIndex=elList.childNodes.length;elList.appendChild(elListItem)}if(!this._elList){var elBody=this._elBody;YAHOO.util.Event.purgeElement(elBody,true);elBody.innerHTML="";this._elList=elBody.appendChild(elList)}this._elBody.style.display=
""};YAHOO.widget.AutoComplete.prototype._focus=function(){var oSelf=this;setTimeout(function(){try{oSelf._elTextbox.focus()}catch(e){}},0)};YAHOO.widget.AutoComplete.prototype._enableIntervalDetection=function(){var oSelf=this;if(!oSelf._queryInterval&&oSelf.queryInterval)oSelf._queryInterval=setInterval(function(){oSelf._onInterval()},oSelf.queryInterval)};YAHOO.widget.AutoComplete.prototype.enableIntervalDetection=YAHOO.widget.AutoComplete.prototype._enableIntervalDetection;
YAHOO.widget.AutoComplete.prototype._onInterval=function(){var currValue=this._elTextbox.value;var lastValue=this._sLastTextboxValue;if(currValue!=lastValue){this._sLastTextboxValue=currValue;this._sendQuery(currValue)}};YAHOO.widget.AutoComplete.prototype._clearInterval=function(){if(this._queryInterval){clearInterval(this._queryInterval);this._queryInterval=null}};
YAHOO.widget.AutoComplete.prototype._isIgnoreKey=function(nKeyCode){if(nKeyCode==9||nKeyCode==13||nKeyCode==16||nKeyCode==17||nKeyCode>=18&&nKeyCode<=20||nKeyCode==27||nKeyCode>=33&&nKeyCode<=35||nKeyCode>=36&&nKeyCode<=40||nKeyCode>=44&&nKeyCode<=45||nKeyCode==229)return true;return false};
YAHOO.widget.AutoComplete.prototype._sendQuery=function(sQuery){if(this.minQueryLength<0){this._toggleContainer(false);return}if(this.delimChar){var extraction=this._extractQuery(sQuery);sQuery=extraction.query;this._sPastSelections=extraction.previous}if(sQuery&&sQuery.length<this.minQueryLength||!sQuery&&this.minQueryLength>0){if(this._nDelayID!=-1)clearTimeout(this._nDelayID);this._toggleContainer(false);return}sQuery=encodeURIComponent(sQuery);this._nDelayID=-1;if(this.dataSource.queryMatchSubset||
this.queryMatchSubset){var oResponse=this.getSubsetMatches(sQuery);if(oResponse){this.handleResponse(sQuery,oResponse,{query:sQuery});return}}if(this.dataSource.responseStripAfter)this.dataSource.doBeforeParseData=this.preparseRawResponse;if(this.applyLocalFilter)this.dataSource.doBeforeCallback=this.filterResults;var sRequest=this.generateRequest(sQuery);this.dataRequestEvent.fire(this,sQuery,sRequest);this.dataSource.sendRequest(sRequest,{success:this.handleResponse,failure:this.handleResponse,
scope:this,argument:{query:sQuery}})};YAHOO.widget.AutoComplete.prototype._populateListItem=function(elListItem,oResult,sQuery){elListItem.innerHTML=this.formatResult(oResult,sQuery,elListItem._sResultMatch)};
YAHOO.widget.AutoComplete.prototype._populateList=function(sQuery,oResponse,oPayload){if(this._nTypeAheadDelayID!=-1)clearTimeout(this._nTypeAheadDelayID);sQuery=oPayload&&oPayload.query?oPayload.query:sQuery;var ok=this.doBeforeLoadData(sQuery,oResponse,oPayload);if(ok&&!oResponse.error){this.dataReturnEvent.fire(this,sQuery,oResponse.results);if(this._bFocused){var sCurQuery=decodeURIComponent(sQuery);this._sCurQuery=sCurQuery;this._bItemSelected=false;var allResults=oResponse.results,nItemsToShow=
Math.min(allResults.length,this.maxResultsDisplayed),sMatchKey=this.dataSource.responseSchema.fields?this.dataSource.responseSchema.fields[0].key||this.dataSource.responseSchema.fields[0]:0;if(nItemsToShow>0){if(!this._elList||this._elList.childNodes.length<nItemsToShow)this._initListEl();this._initContainerHelperEls();var allListItemEls=this._elList.childNodes;for(var i=nItemsToShow-1;i>=0;i--){var elListItem=allListItemEls[i],oResult=allResults[i];if(this.resultTypeList){var aResult=[];aResult[0]=
YAHOO.lang.isString(oResult)?oResult:oResult[sMatchKey]||oResult[this.key];var fields=this.dataSource.responseSchema.fields;if(YAHOO.lang.isArray(fields)&&fields.length>1)for(var k=1,len=fields.length;k<len;k++)aResult[aResult.length]=oResult[fields[k].key||fields[k]];else if(YAHOO.lang.isArray(oResult))aResult=oResult;else if(YAHOO.lang.isString(oResult))aResult=[oResult];else aResult[1]=oResult;oResult=aResult}elListItem._sResultMatch=YAHOO.lang.isString(oResult)?oResult:YAHOO.lang.isArray(oResult)?
oResult[0]:oResult[sMatchKey]||"";elListItem._oResultData=oResult;this._populateListItem(elListItem,oResult,sCurQuery);elListItem.style.display=""}if(nItemsToShow<allListItemEls.length){var extraListItem;for(var j=allListItemEls.length-1;j>=nItemsToShow;j--){extraListItem=allListItemEls[j];extraListItem.style.display="none"}}this._nDisplayedItems=nItemsToShow;this.containerPopulateEvent.fire(this,sQuery,allResults);if(this.autoHighlight){var elFirstListItem=this._elList.firstChild;this._toggleHighlight(elFirstListItem,
"to");this.itemArrowToEvent.fire(this,elFirstListItem);this._typeAhead(elFirstListItem,sQuery)}else this._toggleHighlight(this._elCurListItem,"from");ok=this._doBeforeExpandContainer(this._elTextbox,this._elContainer,sQuery,allResults);this._toggleContainer(ok)}else this._toggleContainer(false);return}}else this.dataErrorEvent.fire(this,sQuery,oResponse)};
YAHOO.widget.AutoComplete.prototype._doBeforeExpandContainer=function(elTextbox,elContainer,sQuery,aResults){if(this.autoSnapContainer)this.snapContainer();return this.doBeforeExpandContainer(elTextbox,elContainer,sQuery,aResults)};YAHOO.widget.AutoComplete.prototype._clearSelection=function(){var extraction=this.delimChar?this._extractQuery(this._elTextbox.value):{previous:"",query:this._elTextbox.value};this._elTextbox.value=extraction.previous;this.selectionEnforceEvent.fire(this,extraction.query)};
YAHOO.widget.AutoComplete.prototype._textMatchesOption=function(){var elMatch=null;for(var i=0;i<this._nDisplayedItems;i++){var elListItem=this._elList.childNodes[i];var sMatch=(""+elListItem._sResultMatch).toLowerCase();if(sMatch==this._sCurQuery.toLowerCase()){elMatch=elListItem;break}}return elMatch};
YAHOO.widget.AutoComplete.prototype._typeAhead=function(elListItem,sQuery){if(!this.typeAhead||this._nKeyCode==8)return;var oSelf=this,elTextbox=this._elTextbox;if(elTextbox.setSelectionRange||elTextbox.createTextRange)this._nTypeAheadDelayID=setTimeout(function(){var nStart=elTextbox.value.length;oSelf._updateValue(elListItem);var nEnd=elTextbox.value.length;oSelf._selectText(elTextbox,nStart,nEnd);var sPrefill=elTextbox.value.substr(nStart,nEnd);oSelf.typeAheadEvent.fire(oSelf,sQuery,sPrefill)},
this.typeAheadDelay*1E3)};YAHOO.widget.AutoComplete.prototype._selectText=function(elTextbox,nStart,nEnd){if(elTextbox.setSelectionRange)elTextbox.setSelectionRange(nStart,nEnd);else if(elTextbox.createTextRange){var oTextRange=elTextbox.createTextRange();oTextRange.moveStart("character",nStart);oTextRange.moveEnd("character",nEnd-elTextbox.value.length);oTextRange.select()}else elTextbox.select()};
YAHOO.widget.AutoComplete.prototype._extractQuery=function(sQuery){var aDelimChar=this.delimChar,nDelimIndex=-1,nNewIndex,nQueryStart,i=aDelimChar.length-1,sPrevious;for(;i>=0;i--){nNewIndex=sQuery.lastIndexOf(aDelimChar[i]);if(nNewIndex>nDelimIndex)nDelimIndex=nNewIndex}if(aDelimChar[i]==" ")for(var j=aDelimChar.length-1;j>=0;j--)if(sQuery[nDelimIndex-1]==aDelimChar[j]){nDelimIndex--;break}if(nDelimIndex>-1){nQueryStart=nDelimIndex+1;while(sQuery.charAt(nQueryStart)==" ")nQueryStart+=1;sPrevious=
sQuery.substring(0,nQueryStart);sQuery=sQuery.substr(nQueryStart)}else sPrevious="";return{previous:sPrevious,query:sQuery}};
YAHOO.widget.AutoComplete.prototype._toggleContainerHelpers=function(bShow){var width=this._elContent.offsetWidth+"px";var height=this._elContent.offsetHeight+"px";if(this.useIFrame&&this._elIFrame){var elIFrame=this._elIFrame;if(bShow){elIFrame.style.width=width;elIFrame.style.height=height;elIFrame.style.padding=""}else{elIFrame.style.width=0;elIFrame.style.height=0;elIFrame.style.padding=0}}if(this.useShadow&&this._elShadow){var elShadow=this._elShadow;if(bShow){elShadow.style.width=width;elShadow.style.height=
height}else{elShadow.style.width=0;elShadow.style.height=0}}};
YAHOO.widget.AutoComplete.prototype._toggleContainer=function(bShow){var elContainer=this._elContainer;if(this.alwaysShowContainer&&this._bContainerOpen)return;if(!bShow){this._toggleHighlight(this._elCurListItem,"from");this._nDisplayedItems=0;this._sCurQuery=null;if(this._elContent.style.display=="none")return}var oAnim=this._oAnim;if(oAnim&&oAnim.getEl()&&(this.animHoriz||this.animVert)){if(oAnim.isAnimated())oAnim.stop(true);var oClone=this._elContent.cloneNode(true);elContainer.appendChild(oClone);
oClone.style.top="-9000px";oClone.style.width="";oClone.style.height="";oClone.style.display="";var wExp=oClone.offsetWidth;var hExp=oClone.offsetHeight;var wColl=this.animHoriz?0:wExp;var hColl=this.animVert?0:hExp;oAnim.attributes=bShow?{width:{to:wExp},height:{to:hExp}}:{width:{to:wColl},height:{to:hColl}};if(bShow&&!this._bContainerOpen){this._elContent.style.width=wColl+"px";this._elContent.style.height=hColl+"px"}else{this._elContent.style.width=wExp+"px";this._elContent.style.height=hExp+"px"}elContainer.removeChild(oClone);
oClone=null;var oSelf=this;var onAnimComplete=function(){oAnim.onComplete.unsubscribeAll();if(bShow){oSelf._toggleContainerHelpers(true);oSelf._bContainerOpen=bShow;oSelf.containerExpandEvent.fire(oSelf)}else{oSelf._elContent.style.display="none";oSelf._bContainerOpen=bShow;oSelf.containerCollapseEvent.fire(oSelf)}};this._toggleContainerHelpers(false);this._elContent.style.display="";oAnim.onComplete.subscribe(onAnimComplete);oAnim.animate()}else if(bShow){this._elContent.style.display="";this._toggleContainerHelpers(true);
this._bContainerOpen=bShow;this.containerExpandEvent.fire(this)}else{this._toggleContainerHelpers(false);this._elContent.style.display="none";this._bContainerOpen=bShow;this.containerCollapseEvent.fire(this)}};
YAHOO.widget.AutoComplete.prototype._toggleHighlight=function(elNewListItem,sType){if(elNewListItem){var sHighlight=this.highlightClassName;if(this._elCurListItem){YAHOO.util.Dom.removeClass(this._elCurListItem,sHighlight);this._elCurListItem=null}if(sType=="to"&&sHighlight){YAHOO.util.Dom.addClass(elNewListItem,sHighlight);this._elCurListItem=elNewListItem}}};
YAHOO.widget.AutoComplete.prototype._togglePrehighlight=function(elNewListItem,sType){var sPrehighlight=this.prehighlightClassName;if(this._elCurPrehighlightItem)YAHOO.util.Dom.removeClass(this._elCurPrehighlightItem,sPrehighlight);if(elNewListItem==this._elCurListItem)return;if(sType=="mouseover"&&sPrehighlight){YAHOO.util.Dom.addClass(elNewListItem,sPrehighlight);this._elCurPrehighlightItem=elNewListItem}else YAHOO.util.Dom.removeClass(elNewListItem,sPrehighlight)};
YAHOO.widget.AutoComplete.prototype._updateValue=function(elListItem){if(!this.suppressInputUpdate){var elTextbox=this._elTextbox;var sDelimChar=this.delimChar?this.delimChar[0]||this.delimChar:null;var sResultMatch=elListItem._sResultMatch;var sNewValue="";if(sDelimChar){sNewValue=this._sPastSelections;sNewValue+=sResultMatch+sDelimChar;if(sDelimChar!=" ")sNewValue+=" "}else sNewValue=sResultMatch;elTextbox.value=sNewValue;if(elTextbox.type=="textarea")elTextbox.scrollTop=elTextbox.scrollHeight;
var end=elTextbox.value.length;this._selectText(elTextbox,end,end);this._elCurListItem=elListItem}};YAHOO.widget.AutoComplete.prototype._selectItem=function(elListItem){this._bItemSelected=true;this._updateValue(elListItem);this._sPastSelections=this._elTextbox.value;this._clearInterval();this.itemSelectEvent.fire(this,elListItem,elListItem._oResultData);this._toggleContainer(false)};
YAHOO.widget.AutoComplete.prototype._jumpSelection=function(){if(this._elCurListItem)this._selectItem(this._elCurListItem);else this._toggleContainer(false)};
YAHOO.widget.AutoComplete.prototype._moveSelection=function(nKeyCode){if(this._bContainerOpen){var elCurListItem=this._elCurListItem,nCurItemIndex=-1;if(elCurListItem)nCurItemIndex=elCurListItem._nItemIndex;var nNewItemIndex=nKeyCode==40?nCurItemIndex+1:nCurItemIndex-1;if(nNewItemIndex<-2||nNewItemIndex>=this._nDisplayedItems)return;if(elCurListItem){this._toggleHighlight(elCurListItem,"from");this.itemArrowFromEvent.fire(this,elCurListItem)}if(nNewItemIndex==-1){if(this.delimChar)this._elTextbox.value=
this._sPastSelections+this._sCurQuery;else this._elTextbox.value=this._sCurQuery;return}if(nNewItemIndex==-2){this._toggleContainer(false);return}var elNewListItem=this._elList.childNodes[nNewItemIndex],elContent=this._elContent,sOF=YAHOO.util.Dom.getStyle(elContent,"overflow"),sOFY=YAHOO.util.Dom.getStyle(elContent,"overflowY"),scrollOn=sOF=="auto"||sOF=="scroll"||sOFY=="auto"||sOFY=="scroll";if(scrollOn&&nNewItemIndex>-1&&nNewItemIndex<this._nDisplayedItems)if(nKeyCode==40)if(elNewListItem.offsetTop+
elNewListItem.offsetHeight>elContent.scrollTop+elContent.offsetHeight)elContent.scrollTop=elNewListItem.offsetTop+elNewListItem.offsetHeight-elContent.offsetHeight;else{if(elNewListItem.offsetTop+elNewListItem.offsetHeight<elContent.scrollTop)elContent.scrollTop=elNewListItem.offsetTop}else if(elNewListItem.offsetTop<elContent.scrollTop)this._elContent.scrollTop=elNewListItem.offsetTop;else if(elNewListItem.offsetTop>elContent.scrollTop+elContent.offsetHeight)this._elContent.scrollTop=elNewListItem.offsetTop+
elNewListItem.offsetHeight-elContent.offsetHeight;this._toggleHighlight(elNewListItem,"to");this.itemArrowToEvent.fire(this,elNewListItem);if(this.typeAhead)this._updateValue(elNewListItem)}};
YAHOO.widget.AutoComplete.prototype._onContainerMouseover=function(v,oSelf){var elTarget=YAHOO.util.Event.getTarget(v);var elTag=elTarget.nodeName.toLowerCase();while(elTarget&&elTag!="table"){switch(elTag){case "body":return;case "li":if(oSelf.prehighlightClassName)oSelf._togglePrehighlight(elTarget,"mouseover");else oSelf._toggleHighlight(elTarget,"to");oSelf.itemMouseOverEvent.fire(oSelf,elTarget);break;case "div":if(YAHOO.util.Dom.hasClass(elTarget,"yui-ac-container")){oSelf._bOverContainer=true;
return}break;default:break}elTarget=elTarget.parentNode;if(elTarget)elTag=elTarget.nodeName.toLowerCase()}};
YAHOO.widget.AutoComplete.prototype._onContainerMouseout=function(v,oSelf){var elTarget=YAHOO.util.Event.getTarget(v);var elTag=elTarget.nodeName.toLowerCase();while(elTarget&&elTag!="table"){switch(elTag){case "body":return;case "li":if(oSelf.prehighlightClassName)oSelf._togglePrehighlight(elTarget,"mouseout");else oSelf._toggleHighlight(elTarget,"from");oSelf.itemMouseOutEvent.fire(oSelf,elTarget);break;case "ul":oSelf._toggleHighlight(oSelf._elCurListItem,"to");break;case "div":if(YAHOO.util.Dom.hasClass(elTarget,
"yui-ac-container")){oSelf._bOverContainer=false;return}break;default:break}elTarget=elTarget.parentNode;if(elTarget)elTag=elTarget.nodeName.toLowerCase()}};
YAHOO.widget.AutoComplete.prototype._onContainerClick=function(v,oSelf){var elTarget=YAHOO.util.Event.getTarget(v);var elTag=elTarget.nodeName.toLowerCase();while(elTarget&&elTag!="table"){switch(elTag){case "body":return;case "li":oSelf._toggleHighlight(elTarget,"to");oSelf._selectItem(elTarget);return;default:break}elTarget=elTarget.parentNode;if(elTarget)elTag=elTarget.nodeName.toLowerCase()}};YAHOO.widget.AutoComplete.prototype._onContainerScroll=function(v,oSelf){oSelf._focus()};
YAHOO.widget.AutoComplete.prototype._onContainerResize=function(v,oSelf){oSelf._toggleContainerHelpers(oSelf._bContainerOpen)};
YAHOO.widget.AutoComplete.prototype._onTextboxKeyDown=function(v,oSelf){var nKeyCode=v.keyCode;if(oSelf._nTypeAheadDelayID!=-1)clearTimeout(oSelf._nTypeAheadDelayID);switch(nKeyCode){case 9:if(!YAHOO.env.ua.opera&&navigator.userAgent.toLowerCase().indexOf("mac")==-1||YAHOO.env.ua.webkit>420)if(oSelf._elCurListItem){if(oSelf.delimChar&&oSelf._nKeyCode!=nKeyCode)if(oSelf._bContainerOpen)YAHOO.util.Event.stopEvent(v);oSelf._selectItem(oSelf._elCurListItem)}else oSelf._toggleContainer(false);break;case 13:if(!YAHOO.env.ua.opera&&
navigator.userAgent.toLowerCase().indexOf("mac")==-1||YAHOO.env.ua.webkit>420)if(oSelf._elCurListItem){if(oSelf._nKeyCode!=nKeyCode)if(oSelf._bContainerOpen)YAHOO.util.Event.stopEvent(v);oSelf._selectItem(oSelf._elCurListItem)}else oSelf._toggleContainer(false);break;case 27:oSelf._toggleContainer(false);return;case 39:oSelf._jumpSelection();break;case 38:if(oSelf._bContainerOpen){YAHOO.util.Event.stopEvent(v);oSelf._moveSelection(nKeyCode)}break;case 40:if(oSelf._bContainerOpen){YAHOO.util.Event.stopEvent(v);
oSelf._moveSelection(nKeyCode)}break;default:oSelf._bItemSelected=false;oSelf._toggleHighlight(oSelf._elCurListItem,"from");oSelf.textboxKeyEvent.fire(oSelf,nKeyCode);break}if(nKeyCode===18)oSelf._enableIntervalDetection();oSelf._nKeyCode=nKeyCode};
YAHOO.widget.AutoComplete.prototype._onTextboxKeyPress=function(v,oSelf){var nKeyCode=v.keyCode;if(YAHOO.env.ua.opera||navigator.userAgent.toLowerCase().indexOf("mac")!=-1&&YAHOO.env.ua.webkit<420)switch(nKeyCode){case 9:if(oSelf._bContainerOpen){if(oSelf.delimChar)YAHOO.util.Event.stopEvent(v);if(oSelf._elCurListItem)oSelf._selectItem(oSelf._elCurListItem);else oSelf._toggleContainer(false)}break;case 13:if(oSelf._bContainerOpen){YAHOO.util.Event.stopEvent(v);if(oSelf._elCurListItem)oSelf._selectItem(oSelf._elCurListItem);
else oSelf._toggleContainer(false)}break;default:break}else if(nKeyCode==229)oSelf._enableIntervalDetection()};YAHOO.widget.AutoComplete.prototype._onTextboxKeyUp=function(v,oSelf){var sText=this.value;oSelf._initProps();var nKeyCode=v.keyCode;if(oSelf._isIgnoreKey(nKeyCode))return;if(oSelf._nDelayID!=-1)clearTimeout(oSelf._nDelayID);oSelf._nDelayID=setTimeout(function(){oSelf._sendQuery(sText)},oSelf.queryDelay*1E3)};
YAHOO.widget.AutoComplete.prototype._onTextboxFocus=function(v,oSelf){if(!oSelf._bFocused){oSelf._elTextbox.setAttribute("autocomplete","off");oSelf._bFocused=true;oSelf._sInitInputValue=oSelf._elTextbox.value;oSelf.textboxFocusEvent.fire(oSelf)}};
YAHOO.widget.AutoComplete.prototype._onTextboxBlur=function(v,oSelf){if(!oSelf._bOverContainer||oSelf._nKeyCode==9){if(!oSelf._bItemSelected){var elMatchListItem=oSelf._textMatchesOption();if(!oSelf._bContainerOpen||oSelf._bContainerOpen&&elMatchListItem===null)if(oSelf.forceSelection)oSelf._clearSelection();else oSelf.unmatchedItemSelectEvent.fire(oSelf,oSelf._sCurQuery);else if(oSelf.forceSelection)oSelf._selectItem(elMatchListItem)}oSelf._clearInterval();oSelf._bFocused=false;if(oSelf._sInitInputValue!==
oSelf._elTextbox.value)oSelf.textboxChangeEvent.fire(oSelf);oSelf.textboxBlurEvent.fire(oSelf);oSelf._toggleContainer(false)}else oSelf._focus()};YAHOO.widget.AutoComplete.prototype._onWindowUnload=function(v,oSelf){if(oSelf&&oSelf._elTextbox&&oSelf.allowBrowserAutocomplete)oSelf._elTextbox.setAttribute("autocomplete","on")};YAHOO.widget.AutoComplete.prototype.doBeforeSendQuery=function(sQuery){return this.generateRequest(sQuery)};
YAHOO.widget.AutoComplete.prototype.getListItems=function(){var allListItemEls=[],els=this._elList.childNodes;for(var i=els.length-1;i>=0;i--)allListItemEls[i]=els[i];return allListItemEls};
YAHOO.widget.AutoComplete._cloneObject=function(o){if(!YAHOO.lang.isValue(o))return o;var copy={};if(YAHOO.lang.isFunction(o))copy=o;else if(YAHOO.lang.isArray(o)){var array=[];for(var i=0,len=o.length;i<len;i++)array[i]=YAHOO.widget.AutoComplete._cloneObject(o[i]);copy=array}else if(YAHOO.lang.isObject(o))for(var x in o){if(YAHOO.lang.hasOwnProperty(o,x))if(YAHOO.lang.isValue(o[x])&&YAHOO.lang.isObject(o[x])||YAHOO.lang.isArray(o[x]))copy[x]=YAHOO.widget.AutoComplete._cloneObject(o[x]);else copy[x]=
o[x]}else copy=o;return copy};YAHOO.register("autocomplete",YAHOO.widget.AutoComplete,{version:"2.8.0r4",build:"2449"});YAHOO.util.Attribute=function(hash,owner){if(owner){this.owner=owner;this.configure(hash,true)}};
YAHOO.util.Attribute.prototype={name:undefined,value:null,owner:null,readOnly:false,writeOnce:false,_initialConfig:null,_written:false,method:null,setter:null,getter:null,validator:null,getValue:function(){var val=this.value;if(this.getter)val=this.getter.call(this.owner,this.name,val);return val},setValue:function(value,silent){var beforeRetVal,owner=this.owner,name=this.name;var event={type:name,prevValue:this.getValue(),newValue:value};if(this.readOnly||this.writeOnce&&this._written)return false;
if(this.validator&&!this.validator.call(owner,value))return false;if(!silent){beforeRetVal=owner.fireBeforeChangeEvent(event);if(beforeRetVal===false)return false}if(this.setter){value=this.setter.call(owner,value,this.name);if(value===undefined);}if(this.method)this.method.call(owner,value,this.name);this.value=value;this._written=true;event.type=name;if(!silent)this.owner.fireChangeEvent(event);return true},configure:function(map,init){map=map||{};if(init)this._written=false;this._initialConfig=
this._initialConfig||{};for(var key in map)if(map.hasOwnProperty(key)){this[key]=map[key];if(init)this._initialConfig[key]=map[key]}},resetValue:function(){return this.setValue(this._initialConfig.value)},resetConfig:function(){this.configure(this._initialConfig,true)},refresh:function(silent){this.setValue(this.value,silent)}};
(function(){var Lang=YAHOO.util.Lang;YAHOO.util.AttributeProvider=function(){};YAHOO.util.AttributeProvider.prototype={_configs:null,get:function(key){this._configs=this._configs||{};var config=this._configs[key];if(!config||!this._configs.hasOwnProperty(key))return null;return config.getValue()},set:function(key,value,silent){this._configs=this._configs||{};var config=this._configs[key];if(!config)return false;return config.setValue(value,silent)},getAttributeKeys:function(){this._configs=this._configs;
var keys=[],key;for(key in this._configs)if(Lang.hasOwnProperty(this._configs,key)&&!Lang.isUndefined(this._configs[key]))keys[keys.length]=key;return keys},setAttributes:function(map,silent){for(var key in map)if(Lang.hasOwnProperty(map,key))this.set(key,map[key],silent)},resetValue:function(key,silent){this._configs=this._configs||{};if(this._configs[key]){this.set(key,this._configs[key]._initialConfig.value,silent);return true}return false},refresh:function(key,silent){this._configs=this._configs||
{};var configs=this._configs;key=(Lang.isString(key)?[key]:key)||this.getAttributeKeys();for(var i=0,len=key.length;i<len;++i)if(configs.hasOwnProperty(key[i]))this._configs[key[i]].refresh(silent)},register:function(key,map){this.setAttributeConfig(key,map)},getAttributeConfig:function(key){this._configs=this._configs||{};var config=this._configs[key]||{};var map={};for(key in config)if(Lang.hasOwnProperty(config,key))map[key]=config[key];return map},setAttributeConfig:function(key,map,init){this._configs=
this._configs||{};map=map||{};if(!this._configs[key]){map.name=key;this._configs[key]=this.createAttribute(map)}else this._configs[key].configure(map,init)},configureAttribute:function(key,map,init){this.setAttributeConfig(key,map,init)},resetAttributeConfig:function(key){this._configs=this._configs||{};this._configs[key].resetConfig()},subscribe:function(type,callback){this._events=this._events||{};if(!(type in this._events))this._events[type]=this.createEvent(type);YAHOO.util.EventProvider.prototype.subscribe.apply(this,
arguments)},on:function(){this.subscribe.apply(this,arguments)},addListener:function(){this.subscribe.apply(this,arguments)},fireBeforeChangeEvent:function(e){var type="before";type+=e.type.charAt(0).toUpperCase()+e.type.substr(1)+"Change";e.type=type;return this.fireEvent(e.type,e)},fireChangeEvent:function(e){e.type+="Change";return this.fireEvent(e.type,e)},createAttribute:function(map){return new YAHOO.util.Attribute(map,this)}};YAHOO.augment(YAHOO.util.AttributeProvider,YAHOO.util.EventProvider)})();
(function(){var Dom=YAHOO.util.Dom,AttributeProvider=YAHOO.util.AttributeProvider,specialTypes={mouseenter:true,mouseleave:true};var Element=function(el,map){this.init.apply(this,arguments)};Element.DOM_EVENTS={"click":true,"dblclick":true,"keydown":true,"keypress":true,"keyup":true,"mousedown":true,"mousemove":true,"mouseout":true,"mouseover":true,"mouseup":true,"mouseenter":true,"mouseleave":true,"focus":true,"blur":true,"submit":true,"change":true};Element.prototype={DOM_EVENTS:null,DEFAULT_HTML_SETTER:function(value,
key){var el=this.get("element");if(el)el[key]=value;return value},DEFAULT_HTML_GETTER:function(key){var el=this.get("element"),val;if(el)val=el[key];return val},appendChild:function(child){child=child.get?child.get("element"):child;return this.get("element").appendChild(child)},getElementsByTagName:function(tag){return this.get("element").getElementsByTagName(tag)},hasChildNodes:function(){return this.get("element").hasChildNodes()},insertBefore:function(element,before){element=element.get?element.get("element"):
element;before=before&&before.get?before.get("element"):before;return this.get("element").insertBefore(element,before)},removeChild:function(child){child=child.get?child.get("element"):child;return this.get("element").removeChild(child)},replaceChild:function(newNode,oldNode){newNode=newNode.get?newNode.get("element"):newNode;oldNode=oldNode.get?oldNode.get("element"):oldNode;return this.get("element").replaceChild(newNode,oldNode)},initAttributes:function(map){},addListener:function(type,fn,obj,
scope){scope=scope||this;var Event=YAHOO.util.Event,el=this.get("element")||this.get("id"),self=this;if(specialTypes[type]&&!Event._createMouseDelegate)return false;if(!this._events[type]){if(el&&this.DOM_EVENTS[type])Event.on(el,type,function(e,matchedEl){if(e.srcElement&&!e.target)e.target=e.srcElement;if(e.toElement&&!e.relatedTarget||e.fromElement&&!e.relatedTarget)e.relatedTarget=Event.getRelatedTarget(e);if(!e.currentTarget)e.currentTarget=el;self.fireEvent(type,e,matchedEl)},obj,scope);this.createEvent(type,
{scope:this})}return YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments)},on:function(){return this.addListener.apply(this,arguments)},subscribe:function(){return this.addListener.apply(this,arguments)},removeListener:function(type,fn){return this.unsubscribe.apply(this,arguments)},addClass:function(className){Dom.addClass(this.get("element"),className)},getElementsByClassName:function(className,tag){return Dom.getElementsByClassName(className,tag,this.get("element"))},hasClass:function(className){return Dom.hasClass(this.get("element"),
className)},removeClass:function(className){return Dom.removeClass(this.get("element"),className)},replaceClass:function(oldClassName,newClassName){return Dom.replaceClass(this.get("element"),oldClassName,newClassName)},setStyle:function(property,value){return Dom.setStyle(this.get("element"),property,value)},getStyle:function(property){return Dom.getStyle(this.get("element"),property)},fireQueue:function(){var queue=this._queue;for(var i=0,len=queue.length;i<len;++i)this[queue[i][0]].apply(this,
queue[i][1])},appendTo:function(parent,before){parent=parent.get?parent.get("element"):Dom.get(parent);this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:parent});before=before&&before.get?before.get("element"):Dom.get(before);var element=this.get("element");if(!element)return false;if(!parent)return false;if(element.parent!=parent)if(before)parent.insertBefore(element,before);else parent.appendChild(element);this.fireEvent("appendTo",{type:"appendTo",target:parent});return element},get:function(key){var configs=
this._configs||{},el=configs.element;if(el&&!configs[key]&&!YAHOO.lang.isUndefined(el.value[key]))this._setHTMLAttrConfig(key);return AttributeProvider.prototype.get.call(this,key)},setAttributes:function(map,silent){var done={},configOrder=this._configOrder;for(var i=0,len=configOrder.length;i<len;++i)if(map[configOrder[i]]!==undefined){done[configOrder[i]]=true;this.set(configOrder[i],map[configOrder[i]],silent)}for(var att in map)if(map.hasOwnProperty(att)&&!done[att])this.set(att,map[att],silent)},
set:function(key,value,silent){var el=this.get("element");if(!el){this._queue[this._queue.length]=["set",arguments];if(this._configs[key])this._configs[key].value=value;return}if(!this._configs[key]&&!YAHOO.lang.isUndefined(el[key]))this._setHTMLAttrConfig(key);return AttributeProvider.prototype.set.apply(this,arguments)},setAttributeConfig:function(key,map,init){this._configOrder.push(key);AttributeProvider.prototype.setAttributeConfig.apply(this,arguments)},createEvent:function(type,config){this._events[type]=
true;return AttributeProvider.prototype.createEvent.apply(this,arguments)},init:function(el,attr){this._initElement(el,attr)},destroy:function(){var el=this.get("element");YAHOO.util.Event.purgeElement(el,true);this.unsubscribeAll();if(el&&el.parentNode)el.parentNode.removeChild(el);this._queue=[];this._events={};this._configs={};this._configOrder=[]},_initElement:function(el,attr){this._queue=this._queue||[];this._events=this._events||{};this._configs=this._configs||{};this._configOrder=[];attr=
attr||{};attr.element=attr.element||el||null;var isReady=false;var DOM_EVENTS=Element.DOM_EVENTS;this.DOM_EVENTS=this.DOM_EVENTS||{};for(var event in DOM_EVENTS)if(DOM_EVENTS.hasOwnProperty(event))this.DOM_EVENTS[event]=DOM_EVENTS[event];if(typeof attr.element==="string")this._setHTMLAttrConfig("id",{value:attr.element});if(Dom.get(attr.element)){isReady=true;this._initHTMLElement(attr);this._initContent(attr)}YAHOO.util.Event.onAvailable(attr.element,function(){if(!isReady)this._initHTMLElement(attr);
this.fireEvent("available",{type:"available",target:Dom.get(attr.element)})},this,true);YAHOO.util.Event.onContentReady(attr.element,function(){if(!isReady)this._initContent(attr);this.fireEvent("contentReady",{type:"contentReady",target:Dom.get(attr.element)})},this,true)},_initHTMLElement:function(attr){this.setAttributeConfig("element",{value:Dom.get(attr.element),readOnly:true})},_initContent:function(attr){this.initAttributes(attr);this.setAttributes(attr,true);this.fireQueue()},_setHTMLAttrConfig:function(key,
map){var el=this.get("element");map=map||{};map.name=key;map.setter=map.setter||this.DEFAULT_HTML_SETTER;map.getter=map.getter||this.DEFAULT_HTML_GETTER;map.value=map.value||el[key];this._configs[key]=new YAHOO.util.Attribute(map,this)}};YAHOO.augment(Element,AttributeProvider);YAHOO.util.Element=Element})();YAHOO.register("element",YAHOO.util.Element,{version:"2.8.0r4",build:"2449"});
(function(){var Y=YAHOO.util;var Anim=function(el,attributes,duration,method){if(!el);this.init(el,attributes,duration,method)};Anim.NAME="Anim";Anim.prototype={toString:function(){var el=this.getEl()||{};var id=el.id||el.tagName;return this.constructor.NAME+": "+id},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(attr,start,end){return this.method(this.currentFrame,
start,end-start,this.totalFrames)},setAttribute:function(attr,val,unit){var el=this.getEl();if(this.patterns.noNegatives.test(attr))val=val>0?val:0;if(attr in el&&!("style"in el&&attr in el.style))el[attr]=val;else Y.Dom.setStyle(el,attr,val+unit)},getAttribute:function(attr){var el=this.getEl();var val=Y.Dom.getStyle(el,attr);if(val!=="auto"&&!this.patterns.offsetUnit.test(val))return parseFloat(val);var a=this.patterns.offsetAttribute.exec(attr)||[];var pos=!!a[3];var box=!!a[2];if("style"in el)if(box||
Y.Dom.getStyle(el,"position")=="absolute"&&pos)val=el["offset"+a[0].charAt(0).toUpperCase()+a[0].substr(1)];else val=0;else if(attr in el)val=el[attr];return val},getDefaultUnit:function(attr){if(this.patterns.defaultUnit.test(attr))return"px";return""},setRuntimeAttribute:function(attr){var start;var end;var attributes=this.attributes;this.runtimeAttributes[attr]={};var isset=function(prop){return typeof prop!=="undefined"};if(!isset(attributes[attr]["to"])&&!isset(attributes[attr]["by"]))return false;
start=isset(attributes[attr]["from"])?attributes[attr]["from"]:this.getAttribute(attr);if(isset(attributes[attr]["to"]))end=attributes[attr]["to"];else if(isset(attributes[attr]["by"]))if(start.constructor==Array){end=[];for(var i=0,len=start.length;i<len;++i)end[i]=start[i]+attributes[attr]["by"][i]*1}else end=start+attributes[attr]["by"]*1;this.runtimeAttributes[attr].start=start;this.runtimeAttributes[attr].end=end;this.runtimeAttributes[attr].unit=isset(attributes[attr].unit)?attributes[attr]["unit"]:
this.getDefaultUnit(attr);return true},init:function(el,attributes,duration,method){var isAnimated=false;var startTime=null;var actualFrames=0;el=Y.Dom.get(el);this.attributes=attributes||{};this.duration=!YAHOO.lang.isUndefined(duration)?duration:1;this.method=method||Y.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=Y.AnimMgr.fps;this.setEl=function(element){el=Y.Dom.get(element)};this.getEl=function(){return el};this.isAnimated=function(){return isAnimated};this.getStartTime=
function(){return startTime};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated())return false;this.currentFrame=0;this.totalFrames=this.useSeconds?Math.ceil(Y.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds)this.totalFrames=1;Y.AnimMgr.registerElement(this);return true};this.stop=function(finish){if(!this.isAnimated())return false;if(finish){this.currentFrame=this.totalFrames;this._onTween.fire()}Y.AnimMgr.stop(this)};var onStart=function(){this.onStart.fire();
this.runtimeAttributes={};for(var attr in this.attributes)this.setRuntimeAttribute(attr);isAnimated=true;actualFrames=0;startTime=new Date};var onTween=function(){var data={duration:new Date-this.getStartTime(),currentFrame:this.currentFrame};data.toString=function(){return"duration: "+data.duration+", currentFrame: "+data.currentFrame};this.onTween.fire(data);var runtimeAttributes=this.runtimeAttributes;for(var attr in runtimeAttributes)this.setAttribute(attr,this.doMethod(attr,runtimeAttributes[attr].start,
runtimeAttributes[attr].end),runtimeAttributes[attr].unit);actualFrames+=1};var onComplete=function(){var actual_duration=(new Date-startTime)/1E3;var data={duration:actual_duration,frames:actualFrames,fps:actualFrames/actual_duration};data.toString=function(){return"duration: "+data.duration+", frames: "+data.frames+", fps: "+data.fps};isAnimated=false;actualFrames=0;this.onComplete.fire(data)};this._onStart=new Y.CustomEvent("_start",this,true);this.onStart=new Y.CustomEvent("start",this);this.onTween=
new Y.CustomEvent("tween",this);this._onTween=new Y.CustomEvent("_tween",this,true);this.onComplete=new Y.CustomEvent("complete",this);this._onComplete=new Y.CustomEvent("_complete",this,true);this._onStart.subscribe(onStart);this._onTween.subscribe(onTween);this._onComplete.subscribe(onComplete)}};Y.Anim=Anim})();
YAHOO.util.AnimMgr=new function(){var thread=null;var queue=[];var tweenCount=0;this.fps=1E3;this.delay=1;this.registerElement=function(tween){queue[queue.length]=tween;tweenCount+=1;tween._onStart.fire();this.start()};this.unRegister=function(tween,index){index=index||getIndex(tween);if(!tween.isAnimated()||index===-1)return false;tween._onComplete.fire();queue.splice(index,1);tweenCount-=1;if(tweenCount<=0)this.stop();return true};this.start=function(){if(thread===null)thread=setInterval(this.run,
this.delay)};this.stop=function(tween){if(!tween){clearInterval(thread);for(var i=0,len=queue.length;i<len;++i)this.unRegister(queue[0],0);queue=[];thread=null;tweenCount=0}else this.unRegister(tween)};this.run=function(){for(var i=0,len=queue.length;i<len;++i){var tween=queue[i];if(!tween||!tween.isAnimated())continue;if(tween.currentFrame<tween.totalFrames||tween.totalFrames===null){tween.currentFrame+=1;if(tween.useSeconds)correctFrame(tween);tween._onTween.fire()}else YAHOO.util.AnimMgr.stop(tween,
i)}};var getIndex=function(anim){for(var i=0,len=queue.length;i<len;++i)if(queue[i]===anim)return i;return-1};var correctFrame=function(tween){var frames=tween.totalFrames;var frame=tween.currentFrame;var expected=tween.currentFrame*tween.duration*1E3/tween.totalFrames;var elapsed=new Date-tween.getStartTime();var tweak=0;if(elapsed<tween.duration*1E3)tweak=Math.round((elapsed/expected-1)*tween.currentFrame);else tweak=frames-(frame+1);if(tweak>0&&isFinite(tweak)){if(tween.currentFrame+tweak>=frames)tweak=
frames-(frame+1);tween.currentFrame+=tweak}};this._queue=queue;this._getIndex=getIndex};YAHOO.util.Bezier=new function(){this.getPosition=function(points,t){var n=points.length;var tmp=[];for(var i=0;i<n;++i)tmp[i]=[points[i][0],points[i][1]];for(var j=1;j<n;++j)for(i=0;i<n-j;++i){tmp[i][0]=(1-t)*tmp[i][0]+t*tmp[parseInt(i+1,10)][0];tmp[i][1]=(1-t)*tmp[i][1]+t*tmp[parseInt(i+1,10)][1]}return[tmp[0][0],tmp[0][1]]}};
(function(){var ColorAnim=function(el,attributes,duration,method){ColorAnim.superclass.constructor.call(this,el,attributes,duration,method)};ColorAnim.NAME="ColorAnim";ColorAnim.DEFAULT_BGCOLOR="#fff";var Y=YAHOO.util;YAHOO.extend(ColorAnim,Y.Anim);var superclass=ColorAnim.superclass;var proto=ColorAnim.prototype;proto.patterns.color=/color$/i;proto.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;proto.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;proto.patterns.hex3=
/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;proto.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;proto.parseColor=function(s){if(s.length==3)return s;var c=this.patterns.hex.exec(s);if(c&&c.length==4)return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)];c=this.patterns.rgb.exec(s);if(c&&c.length==4)return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];c=this.patterns.hex3.exec(s);if(c&&c.length==4)return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],
16)];return null};proto.getAttribute=function(attr){var el=this.getEl();if(this.patterns.color.test(attr)){var val=YAHOO.util.Dom.getStyle(el,attr);var that=this;if(this.patterns.transparent.test(val)){var parent=YAHOO.util.Dom.getAncestorBy(el,function(node){return!that.patterns.transparent.test(val)});if(parent)val=Y.Dom.getStyle(parent,attr);else val=ColorAnim.DEFAULT_BGCOLOR}}else val=superclass.getAttribute.call(this,attr);return val};proto.doMethod=function(attr,start,end){var val;if(this.patterns.color.test(attr)){val=
[];for(var i=0,len=start.length;i<len;++i)val[i]=superclass.doMethod.call(this,attr,start[i],end[i]);val="rgb("+Math.floor(val[0])+","+Math.floor(val[1])+","+Math.floor(val[2])+")"}else val=superclass.doMethod.call(this,attr,start,end);return val};proto.setRuntimeAttribute=function(attr){superclass.setRuntimeAttribute.call(this,attr);if(this.patterns.color.test(attr)){var attributes=this.attributes;var start=this.parseColor(this.runtimeAttributes[attr].start);var end=this.parseColor(this.runtimeAttributes[attr].end);
if(typeof attributes[attr]["to"]==="undefined"&&typeof attributes[attr]["by"]!=="undefined"){end=this.parseColor(attributes[attr].by);for(var i=0,len=start.length;i<len;++i)end[i]=start[i]+end[i]}this.runtimeAttributes[attr].start=start;this.runtimeAttributes[attr].end=end}};Y.ColorAnim=ColorAnim})();
YAHOO.util.Easing={easeNone:function(t,b,c,d){return c*t/d+b},easeIn:function(t,b,c,d){return c*(t/=d)*t+b},easeOut:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeBoth:function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b},easeInStrong:function(t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutStrong:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeBothStrong:function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},elasticIn:function(t,b,c,d,a,p){if(t==
0)return b;if((t/=d)==1)return b+c;if(!p)p=d*0.3;if(!a||a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p))+b},elasticOut:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*0.3;if(!a||a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*2*Math.PI/p)+c+b},elasticBoth:function(t,b,c,d,a,p){if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=
d*0.3*1.5;if(!a||a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-0.5*a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)*0.5+c+b},backIn:function(t,b,c,d,s){if(typeof s=="undefined")s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},backOut:function(t,b,c,d,s){if(typeof s=="undefined")s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},backBoth:function(t,b,c,d,s){if(typeof s=="undefined")s=1.70158;if((t/=d/
2)<1)return c/2*t*t*(((s*=1.525)+1)*t-s)+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},bounceIn:function(t,b,c,d){return c-YAHOO.util.Easing.bounceOut(d-t,0,c,d)+b},bounceOut:function(t,b,c,d){if((t/=d)<1/2.75)return c*7.5625*t*t+b;else if(t<2/2.75)return c*(7.5625*(t-=1.5/2.75)*t+0.75)+b;else if(t<2.5/2.75)return c*(7.5625*(t-=2.25/2.75)*t+0.9375)+b;return c*(7.5625*(t-=2.625/2.75)*t+0.984375)+b},bounceBoth:function(t,b,c,d){if(t<d/2)return YAHOO.util.Easing.bounceIn(t*2,0,c,d)*0.5+b;return YAHOO.util.Easing.bounceOut(t*
2-d,0,c,d)*0.5+c*0.5+b}};
(function(){var Motion=function(el,attributes,duration,method){if(el)Motion.superclass.constructor.call(this,el,attributes,duration,method)};Motion.NAME="Motion";var Y=YAHOO.util;YAHOO.extend(Motion,Y.ColorAnim);var superclass=Motion.superclass;var proto=Motion.prototype;proto.patterns.points=/^points$/i;proto.setAttribute=function(attr,val,unit){if(this.patterns.points.test(attr)){unit=unit||"px";superclass.setAttribute.call(this,"left",val[0],unit);superclass.setAttribute.call(this,"top",val[1],
unit)}else superclass.setAttribute.call(this,attr,val,unit)};proto.getAttribute=function(attr){if(this.patterns.points.test(attr))var val=[superclass.getAttribute.call(this,"left"),superclass.getAttribute.call(this,"top")];else val=superclass.getAttribute.call(this,attr);return val};proto.doMethod=function(attr,start,end){var val=null;if(this.patterns.points.test(attr)){var t=this.method(this.currentFrame,0,100,this.totalFrames)/100;val=Y.Bezier.getPosition(this.runtimeAttributes[attr],t)}else val=
superclass.doMethod.call(this,attr,start,end);return val};proto.setRuntimeAttribute=function(attr){if(this.patterns.points.test(attr)){var el=this.getEl();var attributes=this.attributes;var start;var control=attributes["points"]["control"]||[];var end;var i,len;if(control.length>0&&!(control[0]instanceof Array))control=[control];else{var tmp=[];for(i=0,len=control.length;i<len;++i)tmp[i]=control[i];control=tmp}if(Y.Dom.getStyle(el,"position")=="static")Y.Dom.setStyle(el,"position","relative");if(isset(attributes["points"]["from"]))Y.Dom.setXY(el,
attributes["points"]["from"]);else Y.Dom.setXY(el,Y.Dom.getXY(el));start=this.getAttribute("points");if(isset(attributes["points"]["to"])){end=translateValues.call(this,attributes["points"]["to"],start);var pageXY=Y.Dom.getXY(this.getEl());for(i=0,len=control.length;i<len;++i)control[i]=translateValues.call(this,control[i],start)}else if(isset(attributes["points"]["by"])){end=[start[0]+attributes["points"]["by"][0],start[1]+attributes["points"]["by"][1]];for(i=0,len=control.length;i<len;++i)control[i]=
[start[0]+control[i][0],start[1]+control[i][1]]}this.runtimeAttributes[attr]=[start];if(control.length>0)this.runtimeAttributes[attr]=this.runtimeAttributes[attr].concat(control);this.runtimeAttributes[attr][this.runtimeAttributes[attr].length]=end}else superclass.setRuntimeAttribute.call(this,attr)};var translateValues=function(val,start){var pageXY=Y.Dom.getXY(this.getEl());val=[val[0]-pageXY[0]+start[0],val[1]-pageXY[1]+start[1]];return val};var isset=function(prop){return typeof prop!=="undefined"};
Y.Motion=Motion})();
(function(){var Scroll=function(el,attributes,duration,method){if(el)Scroll.superclass.constructor.call(this,el,attributes,duration,method)};Scroll.NAME="Scroll";var Y=YAHOO.util;YAHOO.extend(Scroll,Y.ColorAnim);var superclass=Scroll.superclass;var proto=Scroll.prototype;proto.doMethod=function(attr,start,end){var val=null;if(attr=="scroll")val=[this.method(this.currentFrame,start[0],end[0]-start[0],this.totalFrames),this.method(this.currentFrame,start[1],end[1]-start[1],this.totalFrames)];else val=
superclass.doMethod.call(this,attr,start,end);return val};proto.getAttribute=function(attr){var val=null;var el=this.getEl();if(attr=="scroll")val=[el.scrollLeft,el.scrollTop];else val=superclass.getAttribute.call(this,attr);return val};proto.setAttribute=function(attr,val,unit){var el=this.getEl();if(attr=="scroll"){el.scrollLeft=val[0];el.scrollTop=val[1]}else superclass.setAttribute.call(this,attr,val,unit)};Y.Scroll=Scroll})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.8.0r4",build:"2449"});
if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var Event=YAHOO.util.Event,Dom=YAHOO.util.Dom;return{useShim:false,_shimActive:false,_shimState:false,_debugShim:false,_createShim:function(){var s=document.createElement("div");s.id="yui-ddm-shim";if(document.body.firstChild)document.body.insertBefore(s,document.body.firstChild);else document.body.appendChild(s);s.style.display="none";s.style.backgroundColor="red";s.style.position="absolute";s.style.zIndex="99999";Dom.setStyle(s,"opacity",
"0");this._shim=s;Event.on(s,"mouseup",this.handleMouseUp,this,true);Event.on(s,"mousemove",this.handleMouseMove,this,true);Event.on(window,"scroll",this._sizeShim,this,true)},_sizeShim:function(){if(this._shimActive){var s=this._shim;s.style.height=Dom.getDocumentHeight()+"px";s.style.width=Dom.getDocumentWidth()+"px";s.style.top="0";s.style.left="0"}},_activateShim:function(){if(this.useShim){if(!this._shim)this._createShim();this._shimActive=true;var s=this._shim,o="0";if(this._debugShim)o=".5";
Dom.setStyle(s,"opacity",o);this._sizeShim();s.style.display="block"}},_deactivateShim:function(){this._shim.style.display="none";this._shimActive=false},_shim:null,ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(sMethod,args){for(var i in this.ids)for(var j in this.ids[i]){var oDD=
this.ids[i][j];if(!this.isTypeOfDD(oDD))continue;oDD[sMethod].apply(oDD,args)}},_onLoad:function(){this.init();Event.on(document,"mouseup",this.handleMouseUp,this,true);Event.on(document,"mousemove",this.handleMouseMove,this,true);Event.on(window,"unload",this._onUnload,this,true);Event.on(window,"resize",this._onResize,this,true)},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},
locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1E3,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(oDD,sGroup){if(!this.initialized)this.init();if(!this.ids[sGroup])this.ids[sGroup]={};this.ids[sGroup][oDD.id]=oDD},removeDDFromGroup:function(oDD,sGroup){if(!this.ids[sGroup])this.ids[sGroup]={};var obj=this.ids[sGroup];if(obj&&obj[oDD.id])delete obj[oDD.id]},_remove:function(oDD){for(var g in oDD.groups)if(g){var item=this.ids[g];if(item&&
item[oDD.id])delete item[oDD.id]}delete this.handleIds[oDD.id]},regHandle:function(sDDId,sHandleId){if(!this.handleIds[sDDId])this.handleIds[sDDId]={};this.handleIds[sDDId][sHandleId]=sHandleId},isDragDrop:function(id){return this.getDDById(id)?true:false},getRelated:function(p_oDD,bTargetsOnly){var oDDs=[];for(var i in p_oDD.groups)for(var j in this.ids[i]){var dd=this.ids[i][j];if(!this.isTypeOfDD(dd))continue;if(!bTargetsOnly||dd.isTarget)oDDs[oDDs.length]=dd}return oDDs},isLegalTarget:function(oDD,
oTargetDD){var targets=this.getRelated(oDD,true);for(var i=0,len=targets.length;i<len;++i)if(targets[i].id==oTargetDD.id)return true;return false},isTypeOfDD:function(oDD){return oDD&&oDD.__ygDragDrop},isHandle:function(sDDId,sHandleId){return this.handleIds[sDDId]&&this.handleIds[sDDId][sHandleId]},getDDById:function(id){for(var i in this.ids)if(this.ids[i][id])return this.ids[i][id];return null},handleMouseDown:function(e,oDD){this.currentTarget=YAHOO.util.Event.getTarget(e);this.dragCurrent=oDD;
var el=oDD.getEl();this.startX=YAHOO.util.Event.getPageX(e);this.startY=YAHOO.util.Event.getPageY(e);this.deltaX=this.startX-el.offsetLeft;this.deltaY=this.startY-el.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var DDM=YAHOO.util.DDM;DDM.startDrag(DDM.startX,DDM.startY);DDM.fromTimeout=true},this.clickTimeThresh)},startDrag:function(x,y){if(this.dragCurrent&&this.dragCurrent.useShim){this._shimState=this.useShim;this.useShim=true}this._activateShim();clearTimeout(this.clickTimeout);
var dc=this.dragCurrent;if(dc&&dc.events.b4StartDrag){dc.b4StartDrag(x,y);dc.fireEvent("b4StartDragEvent",{x:x,y:y})}if(dc&&dc.events.startDrag){dc.startDrag(x,y);dc.fireEvent("startDragEvent",{x:x,y:y})}this.dragThreshMet=true},handleMouseUp:function(e){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.fromTimeout=false;this.handleMouseMove(e)}this.fromTimeout=false;this.fireEvents(e,true)}else;this.stopDrag(e);this.stopEvent(e)}},stopEvent:function(e){if(this.stopPropagation)YAHOO.util.Event.stopPropagation(e);
if(this.preventDefault)YAHOO.util.Event.preventDefault(e)},stopDrag:function(e,silent){var dc=this.dragCurrent;if(dc&&!silent){if(this.dragThreshMet){if(dc.events.b4EndDrag){dc.b4EndDrag(e);dc.fireEvent("b4EndDragEvent",{e:e})}if(dc.events.endDrag){dc.endDrag(e);dc.fireEvent("endDragEvent",{e:e})}}if(dc.events.mouseUp){dc.onMouseUp(e);dc.fireEvent("mouseUpEvent",{e:e})}}if(this._shimActive){this._deactivateShim();if(this.dragCurrent&&this.dragCurrent.useShim){this.useShim=this._shimState;this._shimState=
false}}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(e){var dc=this.dragCurrent;if(dc){if(YAHOO.util.Event.isIE&&!e.button){this.stopEvent(e);return this.handleMouseUp(e)}else if(e.clientX<0||e.clientY<0);if(!this.dragThreshMet){var diffX=Math.abs(this.startX-YAHOO.util.Event.getPageX(e));var diffY=Math.abs(this.startY-YAHOO.util.Event.getPageY(e));if(diffX>this.clickPixelThresh||diffY>this.clickPixelThresh)this.startDrag(this.startX,this.startY)}if(this.dragThreshMet){if(dc&&
dc.events.b4Drag){dc.b4Drag(e);dc.fireEvent("b4DragEvent",{e:e})}if(dc&&dc.events.drag){dc.onDrag(e);dc.fireEvent("dragEvent",{e:e})}if(dc)this.fireEvents(e,false)}this.stopEvent(e)}},fireEvents:function(e,isDrop){var dc=this.dragCurrent;if(!dc||dc.isLocked()||dc.dragOnly)return;var x=YAHOO.util.Event.getPageX(e),y=YAHOO.util.Event.getPageY(e),pt=new YAHOO.util.Point(x,y),pos=dc.getTargetCoord(pt.x,pt.y),el=dc.getDragEl(),events=["out","over","drop","enter"],curRegion=new YAHOO.util.Region(pos.y,
pos.x+el.offsetWidth,pos.y+el.offsetHeight,pos.x),oldOvers=[],inGroupsObj={},inGroups=[],data={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var i in this.dragOvers){var ddo=this.dragOvers[i];if(!this.isTypeOfDD(ddo))continue;if(!this.isOverTarget(pt,ddo,this.mode,curRegion))data.outEvts.push(ddo);oldOvers[i]=true;delete this.dragOvers[i]}for(var sGroup in dc.groups){if("string"!=typeof sGroup)continue;for(i in this.ids[sGroup]){var oDD=this.ids[sGroup][i];if(!this.isTypeOfDD(oDD))continue;
if(oDD.isTarget&&!oDD.isLocked()&&oDD!=dc)if(this.isOverTarget(pt,oDD,this.mode,curRegion)){inGroupsObj[sGroup]=true;if(isDrop)data.dropEvts.push(oDD);else{if(!oldOvers[oDD.id])data.enterEvts.push(oDD);else data.overEvts.push(oDD);this.dragOvers[oDD.id]=oDD}}}}this.interactionInfo={out:data.outEvts,enter:data.enterEvts,over:data.overEvts,drop:data.dropEvts,point:pt,draggedRegion:curRegion,sourceRegion:this.locationCache[dc.id],validDrop:isDrop};for(var inG in inGroupsObj)inGroups.push(inG);if(isDrop&&
!data.dropEvts.length){this.interactionInfo.validDrop=false;if(dc.events.invalidDrop){dc.onInvalidDrop(e);dc.fireEvent("invalidDropEvent",{e:e})}}for(i=0;i<events.length;i++){var tmp=null;if(data[events[i]+"Evts"])tmp=data[events[i]+"Evts"];if(tmp&&tmp.length){var type=events[i].charAt(0).toUpperCase()+events[i].substr(1),ev="onDrag"+type,b4="b4Drag"+type,cev="drag"+type+"Event",check="drag"+type;if(this.mode){if(dc.events[b4]){dc[b4](e,tmp,inGroups);dc.fireEvent(b4+"Event",{event:e,info:tmp,group:inGroups})}if(dc.events[check]){dc[ev](e,
tmp,inGroups);dc.fireEvent(cev,{event:e,info:tmp,group:inGroups})}}else for(var b=0,len=tmp.length;b<len;++b){if(dc.events[b4]){dc[b4](e,tmp[b].id,inGroups[0]);dc.fireEvent(b4+"Event",{event:e,info:tmp[b].id,group:inGroups[0]})}if(dc.events[check]){dc[ev](e,tmp[b].id,inGroups[0]);dc.fireEvent(cev,{event:e,info:tmp[b].id,group:inGroups[0]})}}}}},getBestMatch:function(dds){var winner=null;var len=dds.length;if(len==1)winner=dds[0];else for(var i=0;i<len;++i){var dd=dds[i];if(this.mode==this.INTERSECT&&
dd.cursorIsOver){winner=dd;break}else if(!winner||!winner.overlap||dd.overlap&&winner.overlap.getArea()<dd.overlap.getArea())winner=dd}return winner},refreshCache:function(groups){var g=groups||this.ids;for(var sGroup in g){if("string"!=typeof sGroup)continue;for(var i in this.ids[sGroup]){var oDD=this.ids[sGroup][i];if(this.isTypeOfDD(oDD)){var loc=this.getLocation(oDD);if(loc)this.locationCache[oDD.id]=loc;else delete this.locationCache[oDD.id]}}}},verifyEl:function(el){try{if(el){var parent=el.offsetParent;
if(parent)return true}}catch(e){}return false},getLocation:function(oDD){if(!this.isTypeOfDD(oDD))return null;var el=oDD.getEl(),pos,x1,x2,y1,y2,t,r,b,l;try{pos=YAHOO.util.Dom.getXY(el)}catch(e){}if(!pos)return null;x1=pos[0];x2=x1+el.offsetWidth;y1=pos[1];y2=y1+el.offsetHeight;t=y1-oDD.padding[0];r=x2+oDD.padding[1];b=y2+oDD.padding[2];l=x1-oDD.padding[3];return new YAHOO.util.Region(t,r,b,l)},isOverTarget:function(pt,oTarget,intersect,curRegion){var loc=this.locationCache[oTarget.id];if(!loc||!this.useCache){loc=
this.getLocation(oTarget);this.locationCache[oTarget.id]=loc}if(!loc)return false;oTarget.cursorIsOver=loc.contains(pt);var dc=this.dragCurrent;if(!dc||!intersect&&!dc.constrainX&&!dc.constrainY)return oTarget.cursorIsOver;oTarget.overlap=null;if(!curRegion){var pos=dc.getTargetCoord(pt.x,pt.y);var el=dc.getDragEl();curRegion=new YAHOO.util.Region(pos.y,pos.x+el.offsetWidth,pos.y+el.offsetHeight,pos.x)}var overlap=curRegion.intersect(loc);if(overlap){oTarget.overlap=overlap;return intersect?true:
oTarget.cursorIsOver}else return false},_onUnload:function(e,me){this.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);this.ids={}},elementCache:{},getElWrapper:function(id){var oWrapper=this.elementCache[id];if(!oWrapper||!oWrapper.el)oWrapper=this.elementCache[id]=new this.ElementWrapper(YAHOO.util.Dom.get(id));return oWrapper},getElement:function(id){return YAHOO.util.Dom.get(id)},getCss:function(id){var el=YAHOO.util.Dom.get(id);
return el?el.style:null},ElementWrapper:function(el){this.el=el||null;this.id=this.el&&el.id;this.css=this.el&&el.style},getPosX:function(el){return YAHOO.util.Dom.getX(el)},getPosY:function(el){return YAHOO.util.Dom.getY(el)},swapNode:function(n1,n2){if(n1.swapNode)n1.swapNode(n2);else{var p=n2.parentNode;var s=n2.nextSibling;if(s==n1)p.insertBefore(n1,n2);else if(n2==n1.nextSibling)p.insertBefore(n2,n1);else{n1.parentNode.replaceChild(n2,n1);p.insertBefore(n1,s)}}},getScroll:function(){var t,l,
dde=document.documentElement,db=document.body;if(dde&&(dde.scrollTop||dde.scrollLeft)){t=dde.scrollTop;l=dde.scrollLeft}else if(db){t=db.scrollTop;l=db.scrollLeft}else;return{top:t,left:l}},getStyle:function(el,styleProp){return YAHOO.util.Dom.getStyle(el,styleProp)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(moveEl,targetEl){var aCoord=YAHOO.util.Dom.getXY(targetEl);YAHOO.util.Dom.setXY(moveEl,aCoord)},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight()},
getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth()},numericSort:function(a,b){return a-b},_timeoutCount:0,_addListeners:function(){var DDM=YAHOO.util.DDM;if(YAHOO.util.Event&&document)DDM._onLoad();else if(DDM._timeoutCount>2E3);else{setTimeout(DDM._addListeners,10);if(document&&document.body)DDM._timeoutCount+=1}},handleWasClicked:function(node,id){if(this.isHandle(id,node.id))return true;else{var p=node.parentNode;while(p)if(this.isHandle(id,p.id))return true;else p=p.parentNode}return false}}}();
YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners()}
(function(){var Event=YAHOO.util.Event;var Dom=YAHOO.util.Dom;YAHOO.util.DragDrop=function(id,sGroup,config){if(id)this.init(id,sGroup,config)};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},unlock:function(){this.locked=false},isTarget:true,padding:null,
dragOnly:false,useShim:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(x,y){},startDrag:function(x,y){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,id){},b4DragOver:function(e){},onDragOver:function(e,id){},b4DragOut:function(e){},onDragOut:function(e,
id){},b4DragDrop:function(e){},onDragDrop:function(e,id){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},getEl:function(){if(!this._domRef)this._domRef=Dom.get(this.id);return this._domRef},getDragEl:function(){return Dom.get(this.dragElId)},init:function(id,sGroup,config){this.initTarget(id,sGroup,config);Event.on(this._domRef||this.id,"mousedown",this.handleMouseDown,
this,true);for(var i in this.events)this.createEvent(i+"Event")},initTarget:function(id,sGroup,config){this.config=config||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof id!=="string"){this._domRef=id;id=Dom.generateId(id)}this.id=id;this.addToGroup(sGroup?sGroup:"default");this.handleElId=id;Event.onAvailable(id,this.handleOnAvailable,this,true);this.setDragElId(id);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig()},applyConfig:function(){this.events=
{mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events)for(var i in this.config.events)if(this.config.events[i]===false)this.events[i]=false;this.padding=this.config.padding||[0,0,0,0];this.isTarget=this.config.isTarget!==false;this.maintainOffset=this.config.maintainOffset;this.primaryButtonOnly=
this.config.primaryButtonOnly!==false;this.dragOnly=this.config.dragOnly===true?true:false;this.useShim=this.config.useShim===true?true:false},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(iTop,iRight,iBot,iLeft){if(!iRight&&0!==iRight)this.padding=[iTop,iTop,iTop,iTop];else if(!iBot&&0!==iBot)this.padding=[iTop,iRight,iTop,iRight];else this.padding=[iTop,iRight,iBot,iLeft]},setInitPosition:function(diffX,diffY){var el=this.getEl();
if(!this.DDM.verifyEl(el)){if(el&&el.style&&el.style.display=="none");else;return}var dx=diffX||0;var dy=diffY||0;var p=Dom.getXY(el);this.initPageX=p[0]-dx;this.initPageY=p[1]-dy;this.lastPageX=p[0];this.lastPageY=p[1];this.setStartPosition(p)},setStartPosition:function(pos){var p=pos||Dom.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=p[0];this.startPageY=p[1]},addToGroup:function(sGroup){this.groups[sGroup]=true;this.DDM.regDragDrop(this,sGroup)},removeFromGroup:function(sGroup){if(this.groups[sGroup])delete this.groups[sGroup];
this.DDM.removeDDFromGroup(this,sGroup)},setDragElId:function(id){this.dragElId=id},setHandleElId:function(id){if(typeof id!=="string")id=Dom.generateId(id);this.handleElId=id;this.DDM.regHandle(this.id,id)},setOuterHandleElId:function(id){if(typeof id!=="string")id=Dom.generateId(id);Event.on(id,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(id);this.hasOuterHandles=true},unreg:function(){Event.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},
isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(e,oDD){var button=e.which||e.button;if(this.primaryButtonOnly&&button>1)return;if(this.isLocked())return;var b4Return=this.b4MouseDown(e),b4Return2=true;if(this.events.b4MouseDown)b4Return2=this.fireEvent("b4MouseDownEvent",e);var mDownReturn=this.onMouseDown(e),mDownReturn2=true;if(this.events.mouseDown)mDownReturn2=this.fireEvent("mouseDownEvent",e);if(b4Return===false||mDownReturn===false||b4Return2===false||
mDownReturn2===false)return;this.DDM.refreshCache(this.groups);var pt=new YAHOO.util.Point(Event.getPageX(e),Event.getPageY(e));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(pt,this));else if(this.clickValidator(e)){this.setStartPosition();this.DDM.handleMouseDown(e,this);this.DDM.stopEvent(e)}else;},clickValidator:function(e){var target=YAHOO.util.Event.getTarget(e);return this.isValidHandleChild(target)&&(this.id==this.handleElId||this.DDM.handleWasClicked(target,this.id))},getTargetCoord:function(iPageX,
iPageY){var x=iPageX-this.deltaX;var y=iPageY-this.deltaY;if(this.constrainX){if(x<this.minX)x=this.minX;if(x>this.maxX)x=this.maxX}if(this.constrainY){if(y<this.minY)y=this.minY;if(y>this.maxY)y=this.maxY}x=this.getTick(x,this.xTicks);y=this.getTick(y,this.yTicks);return{x:x,y:y}},addInvalidHandleType:function(tagName){var type=tagName.toUpperCase();this.invalidHandleTypes[type]=type},addInvalidHandleId:function(id){if(typeof id!=="string")id=Dom.generateId(id);this.invalidHandleIds[id]=id},addInvalidHandleClass:function(cssClass){this.invalidHandleClasses.push(cssClass)},
removeInvalidHandleType:function(tagName){var type=tagName.toUpperCase();delete this.invalidHandleTypes[type]},removeInvalidHandleId:function(id){if(typeof id!=="string")id=Dom.generateId(id);delete this.invalidHandleIds[id]},removeInvalidHandleClass:function(cssClass){for(var i=0,len=this.invalidHandleClasses.length;i<len;++i)if(this.invalidHandleClasses[i]==cssClass)delete this.invalidHandleClasses[i]},isValidHandleChild:function(node){var valid=true;var nodeName;try{nodeName=node.nodeName.toUpperCase()}catch(e){nodeName=
node.nodeName}valid=valid&&!this.invalidHandleTypes[nodeName];valid=valid&&!this.invalidHandleIds[node.id];for(var i=0,len=this.invalidHandleClasses.length;valid&&i<len;++i)valid=!Dom.hasClass(node,this.invalidHandleClasses[i]);return valid},setXTicks:function(iStartX,iTickSize){this.xTicks=[];this.xTickSize=iTickSize;var tickMap={};for(var i=this.initPageX;i>=this.minX;i=i-iTickSize)if(!tickMap[i]){this.xTicks[this.xTicks.length]=i;tickMap[i]=true}for(i=this.initPageX;i<=this.maxX;i=i+iTickSize)if(!tickMap[i]){this.xTicks[this.xTicks.length]=
i;tickMap[i]=true}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(iStartY,iTickSize){this.yTicks=[];this.yTickSize=iTickSize;var tickMap={};for(var i=this.initPageY;i>=this.minY;i=i-iTickSize)if(!tickMap[i]){this.yTicks[this.yTicks.length]=i;tickMap[i]=true}for(i=this.initPageY;i<=this.maxY;i=i+iTickSize)if(!tickMap[i]){this.yTicks[this.yTicks.length]=i;tickMap[i]=true}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(iLeft,iRight,iTickSize){this.leftConstraint=parseInt(iLeft,
10);this.rightConstraint=parseInt(iRight,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(iTickSize)this.setXTicks(this.initPageX,iTickSize);this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(iUp,iDown,iTickSize){this.topConstraint=parseInt(iUp,10);this.bottomConstraint=parseInt(iDown,
10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(iTickSize)this.setYTicks(this.initPageY,iTickSize);this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var dx=this.maintainOffset?this.lastPageX-this.initPageX:0;var dy=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(dx,dy)}else this.setInitPosition();if(this.constrainX)this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);
if(this.constrainY)this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(val,tickArray){if(!tickArray)return val;else if(tickArray[0]>=val)return tickArray[0];else{for(var i=0,len=tickArray.length;i<len;++i){var next=i+1;if(tickArray[next]&&tickArray[next]>=val){var diff1=val-tickArray[i];var diff2=tickArray[next]-val;return diff2>diff1?tickArray[i]:tickArray[next]}}return tickArray[tickArray.length-1]}},toString:function(){return"DragDrop "+this.id}};YAHOO.augment(YAHOO.util.DragDrop,
YAHOO.util.EventProvider)})();YAHOO.util.DD=function(id,sGroup,config){if(id)this.init(id,sGroup,config)};
YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(iPageX,iPageY){var x=iPageX-this.startPageX;var y=iPageY-this.startPageY;this.setDelta(x,y)},setDelta:function(iDeltaX,iDeltaY){this.deltaX=iDeltaX;this.deltaY=iDeltaY},setDragElPos:function(iPageX,iPageY){var el=this.getDragEl();this.alignElWithMouse(el,iPageX,iPageY)},alignElWithMouse:function(el,iPageX,iPageY){var oCoord=this.getTargetCoord(iPageX,iPageY);if(!this.deltaSetXY){var aCoord=[oCoord.x,oCoord.y];YAHOO.util.Dom.setXY(el,
aCoord);var newLeft=parseInt(YAHOO.util.Dom.getStyle(el,"left"),10);var newTop=parseInt(YAHOO.util.Dom.getStyle(el,"top"),10);this.deltaSetXY=[newLeft-oCoord.x,newTop-oCoord.y]}else{YAHOO.util.Dom.setStyle(el,"left",oCoord.x+this.deltaSetXY[0]+"px");YAHOO.util.Dom.setStyle(el,"top",oCoord.y+this.deltaSetXY[1]+"px")}this.cachePosition(oCoord.x,oCoord.y);var self=this;setTimeout(function(){self.autoScroll.call(self,oCoord.x,oCoord.y,el.offsetHeight,el.offsetWidth)},0)},cachePosition:function(iPageX,
iPageY){if(iPageX){this.lastPageX=iPageX;this.lastPageY=iPageY}else{var aCoord=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=aCoord[0];this.lastPageY=aCoord[1]}},autoScroll:function(x,y,h,w){if(this.scroll){var clientH=this.DDM.getClientHeight();var clientW=this.DDM.getClientWidth();var st=this.DDM.getScrollTop();var sl=this.DDM.getScrollLeft();var bot=h+y;var right=w+x;var toBot=clientH+st-y-this.deltaY;var toRight=clientW+sl-x-this.deltaX;var thresh=40;var scrAmt=document.all?80:30;if(bot>clientH&&
toBot<thresh)window.scrollTo(sl,st+scrAmt);if(y<st&&st>0&&y-st<thresh)window.scrollTo(sl,st-scrAmt);if(right>clientW&&toRight<thresh)window.scrollTo(sl+scrAmt,st);if(x<sl&&sl>0&&x-sl<thresh)window.scrollTo(sl-scrAmt,st)}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=this.config.scroll!==false},b4MouseDown:function(e){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(e),YAHOO.util.Event.getPageY(e))},b4Drag:function(e){this.setDragElPos(YAHOO.util.Event.getPageX(e),
YAHOO.util.Event.getPageY(e))},toString:function(){return"DD "+this.id}});YAHOO.util.DDProxy=function(id,sGroup,config){if(id){this.init(id,sGroup,config);this.initFrame()}};YAHOO.util.DDProxy.dragElId="ygddfdiv";
YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var self=this,body=document.body;if(!body||!body.firstChild){setTimeout(function(){self.createFrame()},50);return}var div=this.getDragEl(),Dom=YAHOO.util.Dom;if(!div){div=document.createElement("div");div.id=this.dragElId;var s=div.style;s.position="absolute";s.visibility="hidden";s.cursor="move";s.border="2px solid #aaa";s.zIndex=999;s.height="25px";s.width="25px";var _data=document.createElement("div");
Dom.setStyle(_data,"height","100%");Dom.setStyle(_data,"width","100%");Dom.setStyle(_data,"background-color","#ccc");Dom.setStyle(_data,"opacity","0");div.appendChild(_data);body.insertBefore(div,body.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=this.config.resizeFrame!==false;this.centerFrame=this.config.centerFrame;this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId)},showFrame:function(iPageX,
iPageY){var el=this.getEl();var dragEl=this.getDragEl();var s=dragEl.style;this._resizeProxy();if(this.centerFrame)this.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2));this.setDragElPos(iPageX,iPageY);YAHOO.util.Dom.setStyle(dragEl,"visibility","visible")},_resizeProxy:function(){if(this.resizeFrame){var DOM=YAHOO.util.Dom;var el=this.getEl();var dragEl=this.getDragEl();var bt=parseInt(DOM.getStyle(dragEl,"borderTopWidth"),10);var br=parseInt(DOM.getStyle(dragEl,"borderRightWidth"),
10);var bb=parseInt(DOM.getStyle(dragEl,"borderBottomWidth"),10);var bl=parseInt(DOM.getStyle(dragEl,"borderLeftWidth"),10);if(isNaN(bt))bt=0;if(isNaN(br))br=0;if(isNaN(bb))bb=0;if(isNaN(bl))bl=0;var newWidth=Math.max(0,el.offsetWidth-br-bl);var newHeight=Math.max(0,el.offsetHeight-bt-bb);DOM.setStyle(dragEl,"width",newWidth+"px");DOM.setStyle(dragEl,"height",newHeight+"px")}},b4MouseDown:function(e){this.setStartPosition();var x=YAHOO.util.Event.getPageX(e);var y=YAHOO.util.Event.getPageY(e);this.autoOffset(x,
y)},b4StartDrag:function(x,y){this.showFrame(x,y)},b4EndDrag:function(e){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden")},endDrag:function(e){var DOM=YAHOO.util.Dom;var lel=this.getEl();var del=this.getDragEl();DOM.setStyle(del,"visibility","");DOM.setStyle(lel,"visibility","hidden");YAHOO.util.DDM.moveToEl(lel,del);DOM.setStyle(del,"visibility","hidden");DOM.setStyle(lel,"visibility","")},toString:function(){return"DDProxy "+this.id}});
YAHOO.util.DDTarget=function(id,sGroup,config){if(id)this.initTarget(id,sGroup,config)};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return"DDTarget "+this.id}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.8.0r4",build:"2449"});
(function(){YAHOO.util.Config=function(owner){if(owner)this.init(owner)};var Lang=YAHOO.lang,CustomEvent=YAHOO.util.CustomEvent,Config=YAHOO.util.Config;Config.CONFIG_CHANGED_EVENT="configChanged";Config.BOOLEAN_TYPE="boolean";Config.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(owner){this.owner=owner;this.configChangedEvent=this.createEvent(Config.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=CustomEvent.LIST;
this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(val){return typeof val==Config.BOOLEAN_TYPE},checkNumber:function(val){return!isNaN(val)},fireEvent:function(key,value){var property=this.config[key];if(property&&property.event)property.event.fire(value)},addProperty:function(key,propertyObject){key=key.toLowerCase();this.config[key]=propertyObject;propertyObject.event=this.createEvent(key,{scope:this.owner});propertyObject.event.signature=CustomEvent.LIST;
propertyObject.key=key;if(propertyObject.handler)propertyObject.event.subscribe(propertyObject.handler,this.owner);this.setProperty(key,propertyObject.value,true);if(!propertyObject.suppressEvent)this.queueProperty(key,propertyObject.value)},getConfig:function(){var cfg={},currCfg=this.config,prop,property;for(prop in currCfg)if(Lang.hasOwnProperty(currCfg,prop)){property=currCfg[prop];if(property&&property.event)cfg[prop]=property.value}return cfg},getProperty:function(key){var property=this.config[key.toLowerCase()];
if(property&&property.event)return property.value;else return undefined},resetProperty:function(key){key=key.toLowerCase();var property=this.config[key];if(property&&property.event){if(this.initialConfig[key]&&!Lang.isUndefined(this.initialConfig[key])){this.setProperty(key,this.initialConfig[key]);return true}}else return false},setProperty:function(key,value,silent){var property;key=key.toLowerCase();if(this.queueInProgress&&!silent){this.queueProperty(key,value);return true}else{property=this.config[key];
if(property&&property.event)if(property.validator&&!property.validator(value))return false;else{property.value=value;if(!silent){this.fireEvent(key,value);this.configChangedEvent.fire([key,value])}return true}else return false}},queueProperty:function(key,value){key=key.toLowerCase();var property=this.config[key],foundDuplicate=false,iLen,queueItem,queueItemKey,queueItemValue,sLen,supercedesCheck,qLen,queueItemCheck,queueItemCheckKey,queueItemCheckValue,i,s,q;if(property&&property.event){if(!Lang.isUndefined(value)&&
property.validator&&!property.validator(value))return false;else{if(!Lang.isUndefined(value))property.value=value;else value=property.value;foundDuplicate=false;iLen=this.eventQueue.length;for(i=0;i<iLen;i++){queueItem=this.eventQueue[i];if(queueItem){queueItemKey=queueItem[0];queueItemValue=queueItem[1];if(queueItemKey==key){this.eventQueue[i]=null;this.eventQueue.push([key,!Lang.isUndefined(value)?value:queueItemValue]);foundDuplicate=true;break}}}if(!foundDuplicate&&!Lang.isUndefined(value))this.eventQueue.push([key,
value])}if(property.supercedes){sLen=property.supercedes.length;for(s=0;s<sLen;s++){supercedesCheck=property.supercedes[s];qLen=this.eventQueue.length;for(q=0;q<qLen;q++){queueItemCheck=this.eventQueue[q];if(queueItemCheck){queueItemCheckKey=queueItemCheck[0];queueItemCheckValue=queueItemCheck[1];if(queueItemCheckKey==supercedesCheck.toLowerCase()){this.eventQueue.push([queueItemCheckKey,queueItemCheckValue]);this.eventQueue[q]=null;break}}}}}return true}else return false},refireEvent:function(key){key=
key.toLowerCase();var property=this.config[key];if(property&&property.event&&!Lang.isUndefined(property.value))if(this.queueInProgress)this.queueProperty(key);else this.fireEvent(key,property.value)},applyConfig:function(userConfig,init){var sKey,oConfig;if(init){oConfig={};for(sKey in userConfig)if(Lang.hasOwnProperty(userConfig,sKey))oConfig[sKey.toLowerCase()]=userConfig[sKey];this.initialConfig=oConfig}for(sKey in userConfig)if(Lang.hasOwnProperty(userConfig,sKey))this.queueProperty(sKey,userConfig[sKey])},
refresh:function(){var prop;for(prop in this.config)if(Lang.hasOwnProperty(this.config,prop))this.refireEvent(prop)},fireQueue:function(){var i,queueItem,key,value,property;this.queueInProgress=true;for(i=0;i<this.eventQueue.length;i++){queueItem=this.eventQueue[i];if(queueItem){key=queueItem[0];value=queueItem[1];property=this.config[key];property.value=value;this.eventQueue[i]=null;this.fireEvent(key,value)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(key,handler,
obj,overrideContext){var property=this.config[key.toLowerCase()];if(property&&property.event){if(!Config.alreadySubscribed(property.event,handler,obj))property.event.subscribe(handler,obj,overrideContext);return true}else return false},unsubscribeFromConfigEvent:function(key,handler,obj){var property=this.config[key.toLowerCase()];if(property&&property.event)return property.event.unsubscribe(handler,obj);else return false},toString:function(){var output="Config";if(this.owner)output+=" ["+this.owner.toString()+
"]";return output},outputEventQueue:function(){var output="",queueItem,q,nQueue=this.eventQueue.length;for(q=0;q<nQueue;q++){queueItem=this.eventQueue[q];if(queueItem)output+=queueItem[0]+"="+queueItem[1]+", "}return output},destroy:function(){var oConfig=this.config,sProperty,oProperty;for(sProperty in oConfig)if(Lang.hasOwnProperty(oConfig,sProperty)){oProperty=oConfig[sProperty];oProperty.event.unsubscribeAll();oProperty.event=null}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=
null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};Config.alreadySubscribed=function(evt,fn,obj){var nSubscribers=evt.subscribers.length,subsc,i;if(nSubscribers>0){i=nSubscribers-1;do{subsc=evt.subscribers[i];if(subsc&&subsc.obj==obj&&subsc.fn==fn)return true}while(i--)}return false};YAHOO.lang.augmentProto(Config,YAHOO.util.EventProvider)})();
(function(){YAHOO.widget.Module=function(el,userConfig){if(el)this.init(el,userConfig);else;};var Dom=YAHOO.util.Dom,Config=YAHOO.util.Config,Event=YAHOO.util.Event,CustomEvent=YAHOO.util.CustomEvent,Module=YAHOO.widget.Module,UA=YAHOO.env.ua,m_oModuleTemplate,m_oHeaderTemplate,m_oBodyTemplate,m_oFooterTemplate,EVENT_TYPES={"BEFORE_INIT":"beforeInit","INIT":"init","APPEND":"append","BEFORE_RENDER":"beforeRender","RENDER":"render","CHANGE_HEADER":"changeHeader","CHANGE_BODY":"changeBody","CHANGE_FOOTER":"changeFooter",
"CHANGE_CONTENT":"changeContent","DESTROY":"destroy","BEFORE_SHOW":"beforeShow","SHOW":"show","BEFORE_HIDE":"beforeHide","HIDE":"hide"},DEFAULT_CONFIG={"VISIBLE":{key:"visible",value:true,validator:YAHOO.lang.isBoolean},"EFFECT":{key:"effect",suppressEvent:true,supercedes:["visible"]},"MONITOR_RESIZE":{key:"monitorresize",value:true},"APPEND_TO_DOCUMENT_BODY":{key:"appendtodocumentbody",value:false}};Module.IMG_ROOT=null;Module.IMG_ROOT_SSL=null;Module.CSS_MODULE="yui-module";Module.CSS_HEADER="hd";
Module.CSS_BODY="bd";Module.CSS_FOOTER="ft";Module.RESIZE_MONITOR_SECURE_URL="javascript:false;";Module.RESIZE_MONITOR_BUFFER=1;Module.textResizeEvent=new CustomEvent("textResize");Module.forceDocumentRedraw=function(){var docEl=document.documentElement;if(docEl){docEl.className+=" ";docEl.className=YAHOO.lang.trim(docEl.className)}};function createModuleTemplate(){if(!m_oModuleTemplate){m_oModuleTemplate=document.createElement("div");m_oModuleTemplate.innerHTML='<div class="'+Module.CSS_HEADER+'"></div>'+
'<div class="'+Module.CSS_BODY+'"></div><div class="'+Module.CSS_FOOTER+'"></div>';m_oHeaderTemplate=m_oModuleTemplate.firstChild;m_oBodyTemplate=m_oHeaderTemplate.nextSibling;m_oFooterTemplate=m_oBodyTemplate.nextSibling}return m_oModuleTemplate}function createHeader(){if(!m_oHeaderTemplate)createModuleTemplate();return m_oHeaderTemplate.cloneNode(false)}function createBody(){if(!m_oBodyTemplate)createModuleTemplate();return m_oBodyTemplate.cloneNode(false)}function createFooter(){if(!m_oFooterTemplate)createModuleTemplate();
return m_oFooterTemplate.cloneNode(false)}Module.prototype={constructor:Module,element:null,header:null,body:null,footer:null,id:null,imageRoot:Module.IMG_ROOT,initEvents:function(){var SIGNATURE=CustomEvent.LIST;this.beforeInitEvent=this.createEvent(EVENT_TYPES.BEFORE_INIT);this.beforeInitEvent.signature=SIGNATURE;this.initEvent=this.createEvent(EVENT_TYPES.INIT);this.initEvent.signature=SIGNATURE;this.appendEvent=this.createEvent(EVENT_TYPES.APPEND);this.appendEvent.signature=SIGNATURE;this.beforeRenderEvent=
this.createEvent(EVENT_TYPES.BEFORE_RENDER);this.beforeRenderEvent.signature=SIGNATURE;this.renderEvent=this.createEvent(EVENT_TYPES.RENDER);this.renderEvent.signature=SIGNATURE;this.changeHeaderEvent=this.createEvent(EVENT_TYPES.CHANGE_HEADER);this.changeHeaderEvent.signature=SIGNATURE;this.changeBodyEvent=this.createEvent(EVENT_TYPES.CHANGE_BODY);this.changeBodyEvent.signature=SIGNATURE;this.changeFooterEvent=this.createEvent(EVENT_TYPES.CHANGE_FOOTER);this.changeFooterEvent.signature=SIGNATURE;
this.changeContentEvent=this.createEvent(EVENT_TYPES.CHANGE_CONTENT);this.changeContentEvent.signature=SIGNATURE;this.destroyEvent=this.createEvent(EVENT_TYPES.DESTROY);this.destroyEvent.signature=SIGNATURE;this.beforeShowEvent=this.createEvent(EVENT_TYPES.BEFORE_SHOW);this.beforeShowEvent.signature=SIGNATURE;this.showEvent=this.createEvent(EVENT_TYPES.SHOW);this.showEvent.signature=SIGNATURE;this.beforeHideEvent=this.createEvent(EVENT_TYPES.BEFORE_HIDE);this.beforeHideEvent.signature=SIGNATURE;this.hideEvent=
this.createEvent(EVENT_TYPES.HIDE);this.hideEvent.signature=SIGNATURE},platform:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1)return"windows";else if(ua.indexOf("macintosh")!=-1)return"mac";else return false}(),browser:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("opera")!=-1)return"opera";else if(ua.indexOf("msie 7")!=-1)return"ie7";else if(ua.indexOf("msie")!=-1)return"ie";else if(ua.indexOf("safari")!=-1)return"safari";
else if(ua.indexOf("gecko")!=-1)return"gecko";else return false}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0)return true;else return false}(),initDefaultConfig:function(){this.cfg.addProperty(DEFAULT_CONFIG.VISIBLE.key,{handler:this.configVisible,value:DEFAULT_CONFIG.VISIBLE.value,validator:DEFAULT_CONFIG.VISIBLE.validator});this.cfg.addProperty(DEFAULT_CONFIG.EFFECT.key,{suppressEvent:DEFAULT_CONFIG.EFFECT.suppressEvent,supercedes:DEFAULT_CONFIG.EFFECT.supercedes});
this.cfg.addProperty(DEFAULT_CONFIG.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:DEFAULT_CONFIG.MONITOR_RESIZE.value});this.cfg.addProperty(DEFAULT_CONFIG.APPEND_TO_DOCUMENT_BODY.key,{value:DEFAULT_CONFIG.APPEND_TO_DOCUMENT_BODY.value})},init:function(el,userConfig){var elId,child;this.initEvents();this.beforeInitEvent.fire(Module);this.cfg=new Config(this);if(this.isSecure)this.imageRoot=Module.IMG_ROOT_SSL;if(typeof el=="string"){elId=el;el=document.getElementById(el);if(!el){el=createModuleTemplate().cloneNode(false);
el.id=elId}}this.id=Dom.generateId(el);this.element=el;child=this.element.firstChild;if(child){var fndHd=false,fndBd=false,fndFt=false;do if(1==child.nodeType)if(!fndHd&&Dom.hasClass(child,Module.CSS_HEADER)){this.header=child;fndHd=true}else if(!fndBd&&Dom.hasClass(child,Module.CSS_BODY)){this.body=child;fndBd=true}else if(!fndFt&&Dom.hasClass(child,Module.CSS_FOOTER)){this.footer=child;fndFt=true}while(child=child.nextSibling)}this.initDefaultConfig();Dom.addClass(this.element,Module.CSS_MODULE);
if(userConfig)this.cfg.applyConfig(userConfig,true);if(!Config.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg))this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);this.initEvent.fire(Module)},initResizeMonitor:function(){var isGeckoWin=UA.gecko&&this.platform=="windows";if(isGeckoWin){var self=this;setTimeout(function(){self._initResizeMonitor()},0)}else this._initResizeMonitor()},_initResizeMonitor:function(){var oDoc,oIFrame,sHTML;function fireTextResize(){Module.textResizeEvent.fire()}
if(!UA.opera){oIFrame=Dom.get("_yuiResizeMonitor");var supportsCWResize=this._supportsCWResize();if(!oIFrame){oIFrame=document.createElement("iframe");if(this.isSecure&&Module.RESIZE_MONITOR_SECURE_URL&&UA.ie)oIFrame.src=Module.RESIZE_MONITOR_SECURE_URL;if(!supportsCWResize){sHTML=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");oIFrame.src="data:text/html;charset=utf-8,"+
encodeURIComponent(sHTML)}oIFrame.id="_yuiResizeMonitor";oIFrame.title="Text Resize Monitor";oIFrame.style.position="absolute";oIFrame.style.visibility="hidden";var db=document.body,fc=db.firstChild;if(fc)db.insertBefore(oIFrame,fc);else db.appendChild(oIFrame);oIFrame.style.backgroundColor="transparent";oIFrame.style.borderWidth="0";oIFrame.style.width="2em";oIFrame.style.height="2em";oIFrame.style.left="0";oIFrame.style.top=-1*(oIFrame.offsetHeight+Module.RESIZE_MONITOR_BUFFER)+"px";oIFrame.style.visibility=
"visible";if(UA.webkit){oDoc=oIFrame.contentWindow.document;oDoc.open();oDoc.close()}}if(oIFrame&&oIFrame.contentWindow){Module.textResizeEvent.subscribe(this.onDomResize,this,true);if(!Module.textResizeInitialized){if(supportsCWResize)if(!Event.on(oIFrame.contentWindow,"resize",fireTextResize))Event.on(oIFrame,"resize",fireTextResize);Module.textResizeInitialized=true}this.resizeMonitor=oIFrame}}},_supportsCWResize:function(){var bSupported=true;if(UA.gecko&&UA.gecko<=1.8)bSupported=false;return bSupported},
onDomResize:function(e,obj){var nTop=-1*(this.resizeMonitor.offsetHeight+Module.RESIZE_MONITOR_BUFFER);this.resizeMonitor.style.top=nTop+"px";this.resizeMonitor.style.left="0"},setHeader:function(headerContent){var oHeader=this.header||(this.header=createHeader());if(headerContent.nodeName){oHeader.innerHTML="";oHeader.appendChild(headerContent)}else oHeader.innerHTML=headerContent;if(this._rendered)this._renderHeader();this.changeHeaderEvent.fire(headerContent);this.changeContentEvent.fire()},appendToHeader:function(element){var oHeader=
this.header||(this.header=createHeader());oHeader.appendChild(element);this.changeHeaderEvent.fire(element);this.changeContentEvent.fire()},setBody:function(bodyContent){var oBody=this.body||(this.body=createBody());if(bodyContent.nodeName){oBody.innerHTML="";oBody.appendChild(bodyContent)}else oBody.innerHTML=bodyContent;if(this._rendered)this._renderBody();this.changeBodyEvent.fire(bodyContent);this.changeContentEvent.fire()},appendToBody:function(element){var oBody=this.body||(this.body=createBody());
oBody.appendChild(element);this.changeBodyEvent.fire(element);this.changeContentEvent.fire()},setFooter:function(footerContent){var oFooter=this.footer||(this.footer=createFooter());if(footerContent.nodeName){oFooter.innerHTML="";oFooter.appendChild(footerContent)}else oFooter.innerHTML=footerContent;if(this._rendered)this._renderFooter();this.changeFooterEvent.fire(footerContent);this.changeContentEvent.fire()},appendToFooter:function(element){var oFooter=this.footer||(this.footer=createFooter());
oFooter.appendChild(element);this.changeFooterEvent.fire(element);this.changeContentEvent.fire()},render:function(appendToNode,moduleElement){var me=this;function appendTo(parentNode){if(typeof parentNode=="string")parentNode=document.getElementById(parentNode);if(parentNode){me._addToParent(parentNode,me.element);me.appendEvent.fire()}}this.beforeRenderEvent.fire();if(!moduleElement)moduleElement=this.element;if(appendToNode)appendTo(appendToNode);else if(!Dom.inDocument(this.element))return false;
this._renderHeader(moduleElement);this._renderBody(moduleElement);this._renderFooter(moduleElement);this._rendered=true;this.renderEvent.fire();return true},_renderHeader:function(moduleElement){moduleElement=moduleElement||this.element;if(this.header&&!Dom.inDocument(this.header)){var firstChild=moduleElement.firstChild;if(firstChild)moduleElement.insertBefore(this.header,firstChild);else moduleElement.appendChild(this.header)}},_renderBody:function(moduleElement){moduleElement=moduleElement||this.element;
if(this.body&&!Dom.inDocument(this.body))if(this.footer&&Dom.isAncestor(moduleElement,this.footer))moduleElement.insertBefore(this.body,this.footer);else moduleElement.appendChild(this.body)},_renderFooter:function(moduleElement){moduleElement=moduleElement||this.element;if(this.footer&&!Dom.inDocument(this.footer))moduleElement.appendChild(this.footer)},destroy:function(){var parent;if(this.element){Event.purgeElement(this.element,true);parent=this.element.parentNode}if(parent)parent.removeChild(this.element);
this.element=null;this.header=null;this.body=null;this.footer=null;Module.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire()},show:function(){this.cfg.setProperty("visible",true)},hide:function(){this.cfg.setProperty("visible",false)},configVisible:function(type,args,obj){var visible=args[0];if(visible){if(this.beforeShowEvent.fire()){Dom.setStyle(this.element,"display","block");this.showEvent.fire()}}else if(this.beforeHideEvent.fire()){Dom.setStyle(this.element,
"display","none");this.hideEvent.fire()}},configMonitorResize:function(type,args,obj){var monitor=args[0];if(monitor)this.initResizeMonitor();else{Module.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null}},_addToParent:function(parentNode,element){if(!this.cfg.getProperty("appendtodocumentbody")&&parentNode===document.body&&parentNode.firstChild)parentNode.insertBefore(element,parentNode.firstChild);else parentNode.appendChild(element)},toString:function(){return"Module "+
this.id}};YAHOO.lang.augmentProto(Module,YAHOO.util.EventProvider)})();
(function(){YAHOO.widget.Overlay=function(el,userConfig){YAHOO.widget.Overlay.superclass.constructor.call(this,el,userConfig)};var Lang=YAHOO.lang,CustomEvent=YAHOO.util.CustomEvent,Module=YAHOO.widget.Module,Event=YAHOO.util.Event,Dom=YAHOO.util.Dom,Config=YAHOO.util.Config,UA=YAHOO.env.ua,Overlay=YAHOO.widget.Overlay,_SUBSCRIBE="subscribe",_UNSUBSCRIBE="unsubscribe",_CONTAINED="contained",m_oIFrameTemplate,EVENT_TYPES={"BEFORE_MOVE":"beforeMove","MOVE":"move"},DEFAULT_CONFIG={"X":{key:"x",validator:Lang.isNumber,
suppressEvent:true,supercedes:["iframe"]},"Y":{key:"y",validator:Lang.isNumber,suppressEvent:true,supercedes:["iframe"]},"XY":{key:"xy",suppressEvent:true,supercedes:["iframe"]},"CONTEXT":{key:"context",suppressEvent:true,supercedes:["iframe"]},"FIXED_CENTER":{key:"fixedcenter",value:false,supercedes:["iframe","visible"]},"WIDTH":{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"HEIGHT":{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},"AUTO_FILL_HEIGHT":{key:"autofillheight",
supercedes:["height"],value:"body"},"ZINDEX":{key:"zindex",value:null},"CONSTRAIN_TO_VIEWPORT":{key:"constraintoviewport",value:false,validator:Lang.isBoolean,supercedes:["iframe","x","y","xy"]},"IFRAME":{key:"iframe",value:UA.ie==6?true:false,validator:Lang.isBoolean,supercedes:["zindex"]},"PREVENT_CONTEXT_OVERLAP":{key:"preventcontextoverlap",value:false,validator:Lang.isBoolean,supercedes:["constraintoviewport"]}};Overlay.IFRAME_SRC="javascript:false;";Overlay.IFRAME_OFFSET=3;Overlay.VIEWPORT_OFFSET=
10;Overlay.TOP_LEFT="tl";Overlay.TOP_RIGHT="tr";Overlay.BOTTOM_LEFT="bl";Overlay.BOTTOM_RIGHT="br";Overlay.PREVENT_OVERLAP_X={"tltr":true,"blbr":true,"brbl":true,"trtl":true};Overlay.PREVENT_OVERLAP_Y={"trbr":true,"tlbl":true,"bltl":true,"brtr":true};Overlay.CSS_OVERLAY="yui-overlay";Overlay.CSS_HIDDEN="yui-overlay-hidden";Overlay.CSS_IFRAME="yui-overlay-iframe";Overlay.STD_MOD_RE=/^\s*?(body|footer|header)\s*?$/i;Overlay.windowScrollEvent=new CustomEvent("windowScroll");Overlay.windowResizeEvent=
new CustomEvent("windowResize");Overlay.windowScrollHandler=function(e){var t=Event.getTarget(e);if(!t||t===window||t===window.document)if(UA.ie){if(!window.scrollEnd)window.scrollEnd=-1;clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){Overlay.windowScrollEvent.fire()},1)}else Overlay.windowScrollEvent.fire()};Overlay.windowResizeHandler=function(e){if(UA.ie){if(!window.resizeEnd)window.resizeEnd=-1;clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){Overlay.windowResizeEvent.fire()},
100)}else Overlay.windowResizeEvent.fire()};Overlay._initialized=null;if(Overlay._initialized===null){Event.on(window,"scroll",Overlay.windowScrollHandler);Event.on(window,"resize",Overlay.windowResizeHandler);Overlay._initialized=true}Overlay._TRIGGER_MAP={"windowScroll":Overlay.windowScrollEvent,"windowResize":Overlay.windowResizeEvent,"textResize":Module.textResizeEvent};YAHOO.extend(Overlay,Module,{CONTEXT_TRIGGERS:[],init:function(el,userConfig){Overlay.superclass.init.call(this,el);this.beforeInitEvent.fire(Overlay);
Dom.addClass(this.element,Overlay.CSS_OVERLAY);if(userConfig)this.cfg.applyConfig(userConfig,true);if(this.platform=="mac"&&UA.gecko){if(!Config.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this))this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);if(!Config.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this))this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true)}this.initEvent.fire(Overlay)},initEvents:function(){Overlay.superclass.initEvents.call(this);
var SIGNATURE=CustomEvent.LIST;this.beforeMoveEvent=this.createEvent(EVENT_TYPES.BEFORE_MOVE);this.beforeMoveEvent.signature=SIGNATURE;this.moveEvent=this.createEvent(EVENT_TYPES.MOVE);this.moveEvent.signature=SIGNATURE},initDefaultConfig:function(){Overlay.superclass.initDefaultConfig.call(this);var cfg=this.cfg;cfg.addProperty(DEFAULT_CONFIG.X.key,{handler:this.configX,validator:DEFAULT_CONFIG.X.validator,suppressEvent:DEFAULT_CONFIG.X.suppressEvent,supercedes:DEFAULT_CONFIG.X.supercedes});cfg.addProperty(DEFAULT_CONFIG.Y.key,
{handler:this.configY,validator:DEFAULT_CONFIG.Y.validator,suppressEvent:DEFAULT_CONFIG.Y.suppressEvent,supercedes:DEFAULT_CONFIG.Y.supercedes});cfg.addProperty(DEFAULT_CONFIG.XY.key,{handler:this.configXY,suppressEvent:DEFAULT_CONFIG.XY.suppressEvent,supercedes:DEFAULT_CONFIG.XY.supercedes});cfg.addProperty(DEFAULT_CONFIG.CONTEXT.key,{handler:this.configContext,suppressEvent:DEFAULT_CONFIG.CONTEXT.suppressEvent,supercedes:DEFAULT_CONFIG.CONTEXT.supercedes});cfg.addProperty(DEFAULT_CONFIG.FIXED_CENTER.key,
{handler:this.configFixedCenter,value:DEFAULT_CONFIG.FIXED_CENTER.value,validator:DEFAULT_CONFIG.FIXED_CENTER.validator,supercedes:DEFAULT_CONFIG.FIXED_CENTER.supercedes});cfg.addProperty(DEFAULT_CONFIG.WIDTH.key,{handler:this.configWidth,suppressEvent:DEFAULT_CONFIG.WIDTH.suppressEvent,supercedes:DEFAULT_CONFIG.WIDTH.supercedes});cfg.addProperty(DEFAULT_CONFIG.HEIGHT.key,{handler:this.configHeight,suppressEvent:DEFAULT_CONFIG.HEIGHT.suppressEvent,supercedes:DEFAULT_CONFIG.HEIGHT.supercedes});cfg.addProperty(DEFAULT_CONFIG.AUTO_FILL_HEIGHT.key,
{handler:this.configAutoFillHeight,value:DEFAULT_CONFIG.AUTO_FILL_HEIGHT.value,validator:this._validateAutoFill,supercedes:DEFAULT_CONFIG.AUTO_FILL_HEIGHT.supercedes});cfg.addProperty(DEFAULT_CONFIG.ZINDEX.key,{handler:this.configzIndex,value:DEFAULT_CONFIG.ZINDEX.value});cfg.addProperty(DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.value,validator:DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.validator,supercedes:DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.supercedes});
cfg.addProperty(DEFAULT_CONFIG.IFRAME.key,{handler:this.configIframe,value:DEFAULT_CONFIG.IFRAME.value,validator:DEFAULT_CONFIG.IFRAME.validator,supercedes:DEFAULT_CONFIG.IFRAME.supercedes});cfg.addProperty(DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.key,{value:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.value,validator:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.validator,supercedes:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.supercedes})},moveTo:function(x,y){this.cfg.setProperty("xy",[x,y])},hideMacGeckoScrollbars:function(){Dom.replaceClass(this.element,
"show-scrollbars","hide-scrollbars")},showMacGeckoScrollbars:function(){Dom.replaceClass(this.element,"hide-scrollbars","show-scrollbars")},_setDomVisibility:function(show){Dom.setStyle(this.element,"visibility",show?"visible":"hidden");var hiddenClass=Overlay.CSS_HIDDEN;if(show)Dom.removeClass(this.element,hiddenClass);else Dom.addClass(this.element,hiddenClass)},configVisible:function(type,args,obj){var visible=args[0],currentVis=Dom.getStyle(this.element,"visibility"),effect=this.cfg.getProperty("effect"),
effectInstances=[],isMacGecko=this.platform=="mac"&&UA.gecko,alreadySubscribed=Config.alreadySubscribed,eff,ei,e,i,j,k,h,nEffects,nEffectInstances;if(currentVis=="inherit"){e=this.element.parentNode;while(e.nodeType!=9&&e.nodeType!=11){currentVis=Dom.getStyle(e,"visibility");if(currentVis!="inherit")break;e=e.parentNode}if(currentVis=="inherit")currentVis="visible"}if(effect)if(effect instanceof Array){nEffects=effect.length;for(i=0;i<nEffects;i++){eff=effect[i];effectInstances[effectInstances.length]=
eff.effect(this,eff.duration)}}else effectInstances[effectInstances.length]=effect.effect(this,effect.duration);if(visible){if(isMacGecko)this.showMacGeckoScrollbars();if(effect){if(visible)if(currentVis!="visible"||currentVis==="")if(this.beforeShowEvent.fire()){nEffectInstances=effectInstances.length;for(j=0;j<nEffectInstances;j++){ei=effectInstances[j];if(j===0&&!alreadySubscribed(ei.animateInCompleteEvent,this.showEvent.fire,this.showEvent))ei.animateInCompleteEvent.subscribe(this.showEvent.fire,
this.showEvent,true);ei.animateIn()}}}else if(currentVis!="visible"||currentVis===""){if(this.beforeShowEvent.fire()){this._setDomVisibility(true);this.cfg.refireEvent("iframe");this.showEvent.fire()}}else this._setDomVisibility(true)}else{if(isMacGecko)this.hideMacGeckoScrollbars();if(effect)if(currentVis=="visible"){if(this.beforeHideEvent.fire()){nEffectInstances=effectInstances.length;for(k=0;k<nEffectInstances;k++){h=effectInstances[k];if(k===0&&!alreadySubscribed(h.animateOutCompleteEvent,this.hideEvent.fire,
this.hideEvent))h.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);h.animateOut()}}}else{if(currentVis==="")this._setDomVisibility(false)}else if(currentVis=="visible"||currentVis===""){if(this.beforeHideEvent.fire()){this._setDomVisibility(false);this.hideEvent.fire()}}else this._setDomVisibility(false)}},doCenterOnDOMEvent:function(){var cfg=this.cfg,fc=cfg.getProperty("fixedcenter");if(cfg.getProperty("visible"))if(fc&&(fc!==_CONTAINED||this.fitsInViewport()))this.center()},
fitsInViewport:function(){var nViewportOffset=Overlay.VIEWPORT_OFFSET,element=this.element,elementWidth=element.offsetWidth,elementHeight=element.offsetHeight,viewportWidth=Dom.getViewportWidth(),viewportHeight=Dom.getViewportHeight();return elementWidth+nViewportOffset<viewportWidth&&elementHeight+nViewportOffset<viewportHeight},configFixedCenter:function(type,args,obj){var val=args[0],alreadySubscribed=Config.alreadySubscribed,windowResizeEvent=Overlay.windowResizeEvent,windowScrollEvent=Overlay.windowScrollEvent;
if(val){this.center();if(!alreadySubscribed(this.beforeShowEvent,this.center))this.beforeShowEvent.subscribe(this.center);if(!alreadySubscribed(windowResizeEvent,this.doCenterOnDOMEvent,this))windowResizeEvent.subscribe(this.doCenterOnDOMEvent,this,true);if(!alreadySubscribed(windowScrollEvent,this.doCenterOnDOMEvent,this))windowScrollEvent.subscribe(this.doCenterOnDOMEvent,this,true)}else{this.beforeShowEvent.unsubscribe(this.center);windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,
this)}},configHeight:function(type,args,obj){var height=args[0],el=this.element;Dom.setStyle(el,"height",height);this.cfg.refireEvent("iframe")},configAutoFillHeight:function(type,args,obj){var fillEl=args[0],cfg=this.cfg,autoFillHeight="autofillheight",height="height",currEl=cfg.getProperty(autoFillHeight),autoFill=this._autoFillOnHeightChange;cfg.unsubscribeFromConfigEvent(height,autoFill);Module.textResizeEvent.unsubscribe(autoFill);this.changeContentEvent.unsubscribe(autoFill);if(currEl&&fillEl!==
currEl&&this[currEl])Dom.setStyle(this[currEl],height,"");if(fillEl){fillEl=Lang.trim(fillEl.toLowerCase());cfg.subscribeToConfigEvent(height,autoFill,this[fillEl],this);Module.textResizeEvent.subscribe(autoFill,this[fillEl],this);this.changeContentEvent.subscribe(autoFill,this[fillEl],this);cfg.setProperty(autoFillHeight,fillEl,true)}},configWidth:function(type,args,obj){var width=args[0],el=this.element;Dom.setStyle(el,"width",width);this.cfg.refireEvent("iframe")},configzIndex:function(type,args,
obj){var zIndex=args[0],el=this.element;if(!zIndex){zIndex=Dom.getStyle(el,"zIndex");if(!zIndex||isNaN(zIndex))zIndex=0}if(this.iframe||this.cfg.getProperty("iframe")===true)if(zIndex<=0)zIndex=1;Dom.setStyle(el,"zIndex",zIndex);this.cfg.setProperty("zIndex",zIndex,true);if(this.iframe)this.stackIframe()},configXY:function(type,args,obj){var pos=args[0],x=pos[0],y=pos[1];this.cfg.setProperty("x",x);this.cfg.setProperty("y",y);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");
this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y])},configX:function(type,args,obj){var x=args[0],y=this.cfg.getProperty("y");this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");Dom.setX(this.element,x,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y])},configY:function(type,args,obj){var x=this.cfg.getProperty("x"),y=args[0];this.cfg.setProperty("x",
x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");Dom.setY(this.element,y,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y])},showIframe:function(){var oIFrame=this.iframe,oParentNode;if(oIFrame){oParentNode=this.element.parentNode;if(oParentNode!=oIFrame.parentNode)this._addToParent(oParentNode,oIFrame);oIFrame.style.display="block"}},hideIframe:function(){if(this.iframe)this.iframe.style.display=
"none"},syncIframe:function(){var oIFrame=this.iframe,oElement=this.element,nOffset=Overlay.IFRAME_OFFSET,nDimensionOffset=nOffset*2,aXY;if(oIFrame){oIFrame.style.width=oElement.offsetWidth+nDimensionOffset+"px";oIFrame.style.height=oElement.offsetHeight+nDimensionOffset+"px";aXY=this.cfg.getProperty("xy");if(!Lang.isArray(aXY)||isNaN(aXY[0])||isNaN(aXY[1])){this.syncPosition();aXY=this.cfg.getProperty("xy")}Dom.setXY(oIFrame,[aXY[0]-nOffset,aXY[1]-nOffset])}},stackIframe:function(){if(this.iframe){var overlayZ=
Dom.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(overlayZ)&&!isNaN(overlayZ))Dom.setStyle(this.iframe,"zIndex",overlayZ-1)}},configIframe:function(type,args,obj){var bIFrame=args[0];function createIFrame(){var oIFrame=this.iframe,oElement=this.element,oParent;if(!oIFrame){if(!m_oIFrameTemplate){m_oIFrameTemplate=document.createElement("iframe");if(this.isSecure)m_oIFrameTemplate.src=Overlay.IFRAME_SRC;if(UA.ie){m_oIFrameTemplate.style.filter="alpha(opacity=0)";m_oIFrameTemplate.frameBorder=
0}else m_oIFrameTemplate.style.opacity="0";m_oIFrameTemplate.style.position="absolute";m_oIFrameTemplate.style.border="none";m_oIFrameTemplate.style.margin="0";m_oIFrameTemplate.style.padding="0";m_oIFrameTemplate.style.display="none";m_oIFrameTemplate.tabIndex=-1;m_oIFrameTemplate.className=Overlay.CSS_IFRAME}oIFrame=m_oIFrameTemplate.cloneNode(false);oIFrame.id=this.id+"_f";oParent=oElement.parentNode;var parentNode=oParent||document.body;this._addToParent(parentNode,oIFrame);this.iframe=oIFrame}this.showIframe();
this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true}}function onBeforeShow(){createIFrame.call(this);this.beforeShowEvent.unsubscribe(onBeforeShow);this._iframeDeferred=false}if(bIFrame)if(this.cfg.getProperty("visible"))createIFrame.call(this);else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(onBeforeShow);
this._iframeDeferred=true}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM)}},configConstrainToViewport:function(type,args,obj){var val=
args[0];if(val){if(!Config.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this))this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);if(!Config.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM))this.beforeShowEvent.subscribe(this._primeXYFromDOM)}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this)}},configContext:function(type,args,obj){var contextArgs=args[0],contextEl,elementMagnetCorner,
contextMagnetCorner,triggers,offset,defTriggers=this.CONTEXT_TRIGGERS;if(contextArgs){contextEl=contextArgs[0];elementMagnetCorner=contextArgs[1];contextMagnetCorner=contextArgs[2];triggers=contextArgs[3];offset=contextArgs[4];if(defTriggers&&defTriggers.length>0)triggers=(triggers||[]).concat(defTriggers);if(contextEl){if(typeof contextEl=="string")this.cfg.setProperty("context",[document.getElementById(contextEl),elementMagnetCorner,contextMagnetCorner,triggers,offset],true);if(elementMagnetCorner&&
contextMagnetCorner)this.align(elementMagnetCorner,contextMagnetCorner,offset);if(this._contextTriggers)this._processTriggers(this._contextTriggers,_UNSUBSCRIBE,this._alignOnTrigger);if(triggers){this._processTriggers(triggers,_SUBSCRIBE,this._alignOnTrigger);this._contextTriggers=triggers}}}},_alignOnTrigger:function(type,args){this.align()},_findTriggerCE:function(t){var tce=null;if(t instanceof CustomEvent)tce=t;else if(Overlay._TRIGGER_MAP[t])tce=Overlay._TRIGGER_MAP[t];return tce},_processTriggers:function(triggers,
mode,fn){var t,tce;for(var i=0,l=triggers.length;i<l;++i){t=triggers[i];tce=this._findTriggerCE(t);if(tce)tce[mode](fn,this,true);else this[mode](t,fn)}},align:function(elementAlign,contextAlign,xyOffset){var contextArgs=this.cfg.getProperty("context"),me=this,context,element,contextRegion;function doAlign(v,h){var alignX=null,alignY=null;switch(elementAlign){case Overlay.TOP_LEFT:alignX=h;alignY=v;break;case Overlay.TOP_RIGHT:alignX=h-element.offsetWidth;alignY=v;break;case Overlay.BOTTOM_LEFT:alignX=
h;alignY=v-element.offsetHeight;break;case Overlay.BOTTOM_RIGHT:alignX=h-element.offsetWidth;alignY=v-element.offsetHeight;break}if(alignX!==null&&alignY!==null){if(xyOffset){alignX+=xyOffset[0];alignY+=xyOffset[1]}me.moveTo(alignX,alignY)}}if(contextArgs){context=contextArgs[0];element=this.element;me=this;if(!elementAlign)elementAlign=contextArgs[1];if(!contextAlign)contextAlign=contextArgs[2];if(!xyOffset&&contextArgs[4])xyOffset=contextArgs[4];if(element&&context){contextRegion=Dom.getRegion(context);
switch(contextAlign){case Overlay.TOP_LEFT:doAlign(contextRegion.top,contextRegion.left);break;case Overlay.TOP_RIGHT:doAlign(contextRegion.top,contextRegion.right);break;case Overlay.BOTTOM_LEFT:doAlign(contextRegion.bottom,contextRegion.left);break;case Overlay.BOTTOM_RIGHT:doAlign(contextRegion.bottom,contextRegion.right);break}}}},enforceConstraints:function(type,args,obj){var pos=args[0];var cXY=this.getConstrainedXY(pos[0],pos[1]);this.cfg.setProperty("x",cXY[0],true);this.cfg.setProperty("y",
cXY[1],true);this.cfg.setProperty("xy",cXY,true)},_getConstrainedPos:function(pos,val){var overlayEl=this.element,buffer=Overlay.VIEWPORT_OFFSET,x=pos=="x",overlaySize=x?overlayEl.offsetWidth:overlayEl.offsetHeight,viewportSize=x?Dom.getViewportWidth():Dom.getViewportHeight(),docScroll=x?Dom.getDocumentScrollLeft():Dom.getDocumentScrollTop(),overlapPositions=x?Overlay.PREVENT_OVERLAP_X:Overlay.PREVENT_OVERLAP_Y,context=this.cfg.getProperty("context"),bOverlayFitsInViewport=overlaySize+buffer<viewportSize,
bPreventContextOverlap=this.cfg.getProperty("preventcontextoverlap")&&context&&overlapPositions[context[1]+context[2]],minConstraint=docScroll+buffer,maxConstraint=docScroll+viewportSize-overlaySize-buffer,constrainedVal=val;if(val<minConstraint||val>maxConstraint)if(bPreventContextOverlap)constrainedVal=this._preventOverlap(pos,context[0],overlaySize,viewportSize,docScroll);else if(bOverlayFitsInViewport)if(val<minConstraint)constrainedVal=minConstraint;else{if(val>maxConstraint)constrainedVal=maxConstraint}else constrainedVal=
minConstraint;return constrainedVal},_preventOverlap:function(pos,contextEl,overlaySize,viewportSize,docScroll){var x=pos=="x",buffer=Overlay.VIEWPORT_OFFSET,overlay=this,contextElPos=(x?Dom.getX(contextEl):Dom.getY(contextEl))-docScroll,contextElSize=x?contextEl.offsetWidth:contextEl.offsetHeight,minRegionSize=contextElPos-buffer,maxRegionSize=viewportSize-(contextElPos+contextElSize)-buffer,bFlipped=false,flip=function(){var flippedVal;if(overlay.cfg.getProperty(pos)-docScroll>contextElPos)flippedVal=
contextElPos-overlaySize;else flippedVal=contextElPos+contextElSize;overlay.cfg.setProperty(pos,flippedVal+docScroll,true);return flippedVal},setPosition=function(){var displayRegionSize=overlay.cfg.getProperty(pos)-docScroll>contextElPos?maxRegionSize:minRegionSize,position;if(overlaySize>displayRegionSize)if(bFlipped)flip();else{flip();bFlipped=true;position=setPosition()}return position};setPosition();return this.cfg.getProperty(pos)},getConstrainedX:function(x){return this._getConstrainedPos("x",
x)},getConstrainedY:function(y){return this._getConstrainedPos("y",y)},getConstrainedXY:function(x,y){return[this.getConstrainedX(x),this.getConstrainedY(y)]},center:function(){var nViewportOffset=Overlay.VIEWPORT_OFFSET,elementWidth=this.element.offsetWidth,elementHeight=this.element.offsetHeight,viewPortWidth=Dom.getViewportWidth(),viewPortHeight=Dom.getViewportHeight(),x,y;if(elementWidth<viewPortWidth)x=viewPortWidth/2-elementWidth/2+Dom.getDocumentScrollLeft();else x=nViewportOffset+Dom.getDocumentScrollLeft();
if(elementHeight<viewPortHeight)y=viewPortHeight/2-elementHeight/2+Dom.getDocumentScrollTop();else y=nViewportOffset+Dom.getDocumentScrollTop();this.cfg.setProperty("xy",[parseInt(x,10),parseInt(y,10)]);this.cfg.refireEvent("iframe");if(UA.webkit)this.forceContainerRedraw()},syncPosition:function(){var pos=Dom.getXY(this.element);this.cfg.setProperty("x",pos[0],true);this.cfg.setProperty("y",pos[1],true);this.cfg.setProperty("xy",pos,true)},onDomResize:function(e,obj){var me=this;Overlay.superclass.onDomResize.call(this,
e,obj);setTimeout(function(){me.syncPosition();me.cfg.refireEvent("iframe");me.cfg.refireEvent("context")},0)},_getComputedHeight:function(){if(document.defaultView&&document.defaultView.getComputedStyle)return function(el){var height=null;if(el.ownerDocument&&el.ownerDocument.defaultView){var computed=el.ownerDocument.defaultView.getComputedStyle(el,"");if(computed)height=parseInt(computed.height,10)}return Lang.isNumber(height)?height:null};else return function(el){var height=null;if(el.style.pixelHeight)height=
el.style.pixelHeight;return Lang.isNumber(height)?height:null}}(),_validateAutoFillHeight:function(val){return!val||Lang.isString(val)&&Overlay.STD_MOD_RE.test(val)},_autoFillOnHeightChange:function(type,args,el){var height=this.cfg.getProperty("height");if(height&&height!=="auto"||height===0)this.fillHeight(el)},_getPreciseHeight:function(el){var height=el.offsetHeight;if(el.getBoundingClientRect){var rect=el.getBoundingClientRect();height=rect.bottom-rect.top}return height},fillHeight:function(el){if(el){var container=
this.innerElement||this.element,containerEls=[this.header,this.body,this.footer],containerEl,total=0,filled=0,remaining=0,validEl=false;for(var i=0,l=containerEls.length;i<l;i++){containerEl=containerEls[i];if(containerEl)if(el!==containerEl)filled+=this._getPreciseHeight(containerEl);else validEl=true}if(validEl){if(UA.ie||UA.opera)Dom.setStyle(el,"height",0+"px");total=this._getComputedHeight(container);if(total===null){Dom.addClass(container,"yui-override-padding");total=container.clientHeight;
Dom.removeClass(container,"yui-override-padding")}remaining=Math.max(total-filled,0);Dom.setStyle(el,"height",remaining+"px");if(el.offsetHeight!=remaining)remaining=Math.max(remaining-(el.offsetHeight-remaining),0);Dom.setStyle(el,"height",remaining+"px")}}},bringToTop:function(){var aOverlays=[],oElement=this.element;function compareZIndexDesc(p_oOverlay1,p_oOverlay2){var sZIndex1=Dom.getStyle(p_oOverlay1,"zIndex"),sZIndex2=Dom.getStyle(p_oOverlay2,"zIndex"),nZIndex1=!sZIndex1||isNaN(sZIndex1)?
0:parseInt(sZIndex1,10),nZIndex2=!sZIndex2||isNaN(sZIndex2)?0:parseInt(sZIndex2,10);if(nZIndex1>nZIndex2)return-1;else if(nZIndex1<nZIndex2)return 1;else return 0}function isOverlayElement(p_oElement){var isOverlay=Dom.hasClass(p_oElement,Overlay.CSS_OVERLAY),Panel=YAHOO.widget.Panel;if(isOverlay&&!Dom.isAncestor(oElement,p_oElement))if(Panel&&Dom.hasClass(p_oElement,Panel.CSS_PANEL))aOverlays[aOverlays.length]=p_oElement.parentNode;else aOverlays[aOverlays.length]=p_oElement}Dom.getElementsBy(isOverlayElement,
"DIV",document.body);aOverlays.sort(compareZIndexDesc);var oTopOverlay=aOverlays[0],nTopZIndex;if(oTopOverlay){nTopZIndex=Dom.getStyle(oTopOverlay,"zIndex");if(!isNaN(nTopZIndex)){var bRequiresBump=false;if(oTopOverlay!=oElement)bRequiresBump=true;else if(aOverlays.length>1){var nNextZIndex=Dom.getStyle(aOverlays[1],"zIndex");if(!isNaN(nNextZIndex)&&nTopZIndex==nNextZIndex)bRequiresBump=true}if(bRequiresBump)this.cfg.setProperty("zindex",parseInt(nTopZIndex,10)+2)}}},destroy:function(){if(this.iframe)this.iframe.parentNode.removeChild(this.iframe);
this.iframe=null;Overlay.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);Overlay.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);Module.textResizeEvent.unsubscribe(this._autoFillOnHeightChange);if(this._contextTriggers)this._processTriggers(this._contextTriggers,_UNSUBSCRIBE,this._alignOnTrigger);Overlay.superclass.destroy.call(this)},forceContainerRedraw:function(){var c=this;Dom.addClass(c.element,"yui-force-redraw");setTimeout(function(){Dom.removeClass(c.element,"yui-force-redraw")},
0)},toString:function(){return"Overlay "+this.id}})})();
(function(){YAHOO.widget.OverlayManager=function(userConfig){this.init(userConfig)};var Overlay=YAHOO.widget.Overlay,Event=YAHOO.util.Event,Dom=YAHOO.util.Dom,Config=YAHOO.util.Config,CustomEvent=YAHOO.util.CustomEvent,OverlayManager=YAHOO.widget.OverlayManager;OverlayManager.CSS_FOCUSED="focused";OverlayManager.prototype={constructor:OverlayManager,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"})},
init:function(userConfig){this.cfg=new Config(this);this.initDefaultConfig();if(userConfig)this.cfg.applyConfig(userConfig,true);this.cfg.fireQueue();var activeOverlay=null;this.getActive=function(){return activeOverlay};this.focus=function(overlay){var o=this.find(overlay);if(o)o.focus()};this.remove=function(overlay){var o=this.find(overlay),originalZ;if(o){if(activeOverlay==o)activeOverlay=null;var bDestroyed=o.element===null&&o.cfg===null?true:false;if(!bDestroyed){originalZ=Dom.getStyle(o.element,
"zIndex");o.cfg.setProperty("zIndex",-1E3,true)}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,this.overlays.length-1);o.hideEvent.unsubscribe(o.blur);o.destroyEvent.unsubscribe(this._onOverlayDestroy,o);o.focusEvent.unsubscribe(this._onOverlayFocusHandler,o);o.blurEvent.unsubscribe(this._onOverlayBlurHandler,o);if(!bDestroyed){Event.removeListener(o.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);o.cfg.setProperty("zIndex",originalZ,true);o.cfg.setProperty("manager",
null)}if(o.focusEvent._managed)o.focusEvent=null;if(o.blurEvent._managed)o.blurEvent=null;if(o.focus._managed)o.focus=null;if(o.blur._managed)o.blur=null}};this.blurAll=function(){var nOverlays=this.overlays.length,i;if(nOverlays>0){i=nOverlays-1;do this.overlays[i].blur();while(i--)}};this._manageBlur=function(overlay){var changed=false;if(activeOverlay==overlay){Dom.removeClass(activeOverlay.element,OverlayManager.CSS_FOCUSED);activeOverlay=null;changed=true}return changed};this._manageFocus=function(overlay){var changed=
false;if(activeOverlay!=overlay){if(activeOverlay)activeOverlay.blur();activeOverlay=overlay;this.bringToTop(activeOverlay);Dom.addClass(activeOverlay.element,OverlayManager.CSS_FOCUSED);changed=true}return changed};var overlays=this.cfg.getProperty("overlays");if(!this.overlays)this.overlays=[];if(overlays){this.register(overlays);this.overlays.sort(this.compareZIndexDesc)}},_onOverlayElementFocus:function(p_oEvent){var oTarget=Event.getTarget(p_oEvent),oClose=this.close;if(oClose&&(oTarget==oClose||
Dom.isAncestor(oClose,oTarget)))this.blur();else this.focus()},_onOverlayDestroy:function(p_sType,p_aArgs,p_oOverlay){this.remove(p_oOverlay)},_onOverlayFocusHandler:function(p_sType,p_aArgs,p_oOverlay){this._manageFocus(p_oOverlay)},_onOverlayBlurHandler:function(p_sType,p_aArgs,p_oOverlay){this._manageBlur(p_oOverlay)},_bindFocus:function(overlay){var mgr=this;if(!overlay.focusEvent){overlay.focusEvent=overlay.createEvent("focus");overlay.focusEvent.signature=CustomEvent.LIST;overlay.focusEvent._managed=
true}else overlay.focusEvent.subscribe(mgr._onOverlayFocusHandler,overlay,mgr);if(!overlay.focus){Event.on(overlay.element,mgr.cfg.getProperty("focusevent"),mgr._onOverlayElementFocus,null,overlay);overlay.focus=function(){if(mgr._manageFocus(this)){if(this.cfg.getProperty("visible")&&this.focusFirst)this.focusFirst();this.focusEvent.fire()}};overlay.focus._managed=true}},_bindBlur:function(overlay){var mgr=this;if(!overlay.blurEvent){overlay.blurEvent=overlay.createEvent("blur");overlay.blurEvent.signature=
CustomEvent.LIST;overlay.focusEvent._managed=true}else overlay.blurEvent.subscribe(mgr._onOverlayBlurHandler,overlay,mgr);if(!overlay.blur){overlay.blur=function(){if(mgr._manageBlur(this))this.blurEvent.fire()};overlay.blur._managed=true}overlay.hideEvent.subscribe(overlay.blur)},_bindDestroy:function(overlay){var mgr=this;overlay.destroyEvent.subscribe(mgr._onOverlayDestroy,overlay,mgr)},_syncZIndex:function(overlay){var zIndex=Dom.getStyle(overlay.element,"zIndex");if(!isNaN(zIndex))overlay.cfg.setProperty("zIndex",
parseInt(zIndex,10));else overlay.cfg.setProperty("zIndex",0)},register:function(overlay){var registered=false,i,n;if(overlay instanceof Overlay){overlay.cfg.addProperty("manager",{value:this});this._bindFocus(overlay);this._bindBlur(overlay);this._bindDestroy(overlay);this._syncZIndex(overlay);this.overlays.push(overlay);this.bringToTop(overlay);registered=true}else if(overlay instanceof Array)for(i=0,n=overlay.length;i<n;i++)registered=this.register(overlay[i])||registered;return registered},bringToTop:function(p_oOverlay){var oOverlay=
this.find(p_oOverlay),nTopZIndex,oTopOverlay,aOverlays;if(oOverlay){aOverlays=this.overlays;aOverlays.sort(this.compareZIndexDesc);oTopOverlay=aOverlays[0];if(oTopOverlay){nTopZIndex=Dom.getStyle(oTopOverlay.element,"zIndex");if(!isNaN(nTopZIndex)){var bRequiresBump=false;if(oTopOverlay!==oOverlay)bRequiresBump=true;else if(aOverlays.length>1){var nNextZIndex=Dom.getStyle(aOverlays[1].element,"zIndex");if(!isNaN(nNextZIndex)&&nTopZIndex==nNextZIndex)bRequiresBump=true}if(bRequiresBump)oOverlay.cfg.setProperty("zindex",
parseInt(nTopZIndex,10)+2)}aOverlays.sort(this.compareZIndexDesc)}}},find:function(overlay){var isInstance=overlay instanceof Overlay,overlays=this.overlays,n=overlays.length,found=null,o,i;if(isInstance||typeof overlay=="string")for(i=n-1;i>=0;i--){o=overlays[i];if(isInstance&&o===overlay||o.id==overlay){found=o;break}}return found},compareZIndexDesc:function(o1,o2){var zIndex1=o1.cfg?o1.cfg.getProperty("zIndex"):null,zIndex2=o2.cfg?o2.cfg.getProperty("zIndex"):null;if(zIndex1===null&&zIndex2===
null)return 0;else if(zIndex1===null)return 1;else if(zIndex2===null)return-1;else if(zIndex1>zIndex2)return-1;else if(zIndex1<zIndex2)return 1;else return 0},showAll:function(){var overlays=this.overlays,n=overlays.length,i;for(i=n-1;i>=0;i--)overlays[i].show()},hideAll:function(){var overlays=this.overlays,n=overlays.length,i;for(i=n-1;i>=0;i--)overlays[i].hide()},toString:function(){return"OverlayManager"}}})();
(function(){YAHOO.widget.Tooltip=function(el,userConfig){YAHOO.widget.Tooltip.superclass.constructor.call(this,el,userConfig)};var Lang=YAHOO.lang,Event=YAHOO.util.Event,CustomEvent=YAHOO.util.CustomEvent,Dom=YAHOO.util.Dom,Tooltip=YAHOO.widget.Tooltip,UA=YAHOO.env.ua,bIEQuirks=UA.ie&&(UA.ie<=6||document.compatMode=="BackCompat"),m_oShadowTemplate,DEFAULT_CONFIG={"PREVENT_OVERLAP":{key:"preventoverlap",value:true,validator:Lang.isBoolean,supercedes:["x","y","xy"]},"SHOW_DELAY":{key:"showdelay",value:200,
validator:Lang.isNumber},"AUTO_DISMISS_DELAY":{key:"autodismissdelay",value:5E3,validator:Lang.isNumber},"HIDE_DELAY":{key:"hidedelay",value:250,validator:Lang.isNumber},"TEXT":{key:"text",suppressEvent:true},"CONTAINER":{key:"container"},"DISABLED":{key:"disabled",value:false,suppressEvent:true},"XY_OFFSET":{key:"xyoffset",value:[0,25],suppressEvent:true}},EVENT_TYPES={"CONTEXT_MOUSE_OVER":"contextMouseOver","CONTEXT_MOUSE_OUT":"contextMouseOut","CONTEXT_TRIGGER":"contextTrigger"};Tooltip.CSS_TOOLTIP=
"yui-tt";function restoreOriginalWidth(sOriginalWidth,sForcedWidth){var oConfig=this.cfg,sCurrentWidth=oConfig.getProperty("width");if(sCurrentWidth==sForcedWidth)oConfig.setProperty("width",sOriginalWidth)}function setWidthToOffsetWidth(p_sType,p_aArgs){if("_originalWidth"in this)restoreOriginalWidth.call(this,this._originalWidth,this._forcedWidth);var oBody=document.body,oConfig=this.cfg,sOriginalWidth=oConfig.getProperty("width"),sNewWidth,oClone;if((!sOriginalWidth||sOriginalWidth=="auto")&&(oConfig.getProperty("container")!=
oBody||oConfig.getProperty("x")>=Dom.getViewportWidth()||oConfig.getProperty("y")>=Dom.getViewportHeight())){oClone=this.element.cloneNode(true);oClone.style.visibility="hidden";oClone.style.top="0px";oClone.style.left="0px";oBody.appendChild(oClone);sNewWidth=oClone.offsetWidth+"px";oBody.removeChild(oClone);oClone=null;oConfig.setProperty("width",sNewWidth);oConfig.refireEvent("xy");this._originalWidth=sOriginalWidth||"";this._forcedWidth=sNewWidth}}function onDOMReady(p_sType,p_aArgs,p_oObject){this.render(p_oObject)}
function onInit(){Event.onDOMReady(onDOMReady,this.cfg.getProperty("container"),this)}YAHOO.extend(Tooltip,YAHOO.widget.Overlay,{init:function(el,userConfig){Tooltip.superclass.init.call(this,el);this.beforeInitEvent.fire(Tooltip);Dom.addClass(this.element,Tooltip.CSS_TOOLTIP);if(userConfig)this.cfg.applyConfig(userConfig,true);this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.subscribe("changeContent",setWidthToOffsetWidth);this.subscribe("init",
onInit);this.subscribe("render",this.onRender);this.initEvent.fire(Tooltip)},initEvents:function(){Tooltip.superclass.initEvents.call(this);var SIGNATURE=CustomEvent.LIST;this.contextMouseOverEvent=this.createEvent(EVENT_TYPES.CONTEXT_MOUSE_OVER);this.contextMouseOverEvent.signature=SIGNATURE;this.contextMouseOutEvent=this.createEvent(EVENT_TYPES.CONTEXT_MOUSE_OUT);this.contextMouseOutEvent.signature=SIGNATURE;this.contextTriggerEvent=this.createEvent(EVENT_TYPES.CONTEXT_TRIGGER);this.contextTriggerEvent.signature=
SIGNATURE},initDefaultConfig:function(){Tooltip.superclass.initDefaultConfig.call(this);this.cfg.addProperty(DEFAULT_CONFIG.PREVENT_OVERLAP.key,{value:DEFAULT_CONFIG.PREVENT_OVERLAP.value,validator:DEFAULT_CONFIG.PREVENT_OVERLAP.validator,supercedes:DEFAULT_CONFIG.PREVENT_OVERLAP.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.SHOW_DELAY.key,{handler:this.configShowDelay,value:200,validator:DEFAULT_CONFIG.SHOW_DELAY.validator});this.cfg.addProperty(DEFAULT_CONFIG.AUTO_DISMISS_DELAY.key,{handler:this.configAutoDismissDelay,
value:DEFAULT_CONFIG.AUTO_DISMISS_DELAY.value,validator:DEFAULT_CONFIG.AUTO_DISMISS_DELAY.validator});this.cfg.addProperty(DEFAULT_CONFIG.HIDE_DELAY.key,{handler:this.configHideDelay,value:DEFAULT_CONFIG.HIDE_DELAY.value,validator:DEFAULT_CONFIG.HIDE_DELAY.validator});this.cfg.addProperty(DEFAULT_CONFIG.TEXT.key,{handler:this.configText,suppressEvent:DEFAULT_CONFIG.TEXT.suppressEvent});this.cfg.addProperty(DEFAULT_CONFIG.CONTAINER.key,{handler:this.configContainer,value:document.body});this.cfg.addProperty(DEFAULT_CONFIG.DISABLED.key,
{handler:this.configContainer,value:DEFAULT_CONFIG.DISABLED.value,supressEvent:DEFAULT_CONFIG.DISABLED.suppressEvent});this.cfg.addProperty(DEFAULT_CONFIG.XY_OFFSET.key,{value:DEFAULT_CONFIG.XY_OFFSET.value.concat(),supressEvent:DEFAULT_CONFIG.XY_OFFSET.suppressEvent})},configText:function(type,args,obj){var text=args[0];if(text)this.setBody(text)},configContainer:function(type,args,obj){var container=args[0];if(typeof container=="string")this.cfg.setProperty("container",document.getElementById(container),
true)},_removeEventListeners:function(){var aElements=this._context,nElements,oElement,i;if(aElements){nElements=aElements.length;if(nElements>0){i=nElements-1;do{oElement=aElements[i];Event.removeListener(oElement,"mouseover",this.onContextMouseOver);Event.removeListener(oElement,"mousemove",this.onContextMouseMove);Event.removeListener(oElement,"mouseout",this.onContextMouseOut)}while(i--)}}},configContext:function(type,args,obj){var context=args[0],aElements,nElements,oElement,i;if(context){if(!(context instanceof
Array)){if(typeof context=="string")this.cfg.setProperty("context",[document.getElementById(context)],true);else this.cfg.setProperty("context",[context],true);context=this.cfg.getProperty("context")}this._removeEventListeners();this._context=context;aElements=this._context;if(aElements){nElements=aElements.length;if(nElements>0){i=nElements-1;do{oElement=aElements[i];Event.on(oElement,"mouseover",this.onContextMouseOver,this);Event.on(oElement,"mousemove",this.onContextMouseMove,this);Event.on(oElement,
"mouseout",this.onContextMouseOut,this)}while(i--)}}}},onContextMouseMove:function(e,obj){obj.pageX=Event.getPageX(e);obj.pageY=Event.getPageY(e)},onContextMouseOver:function(e,obj){var context=this;if(context.title){obj._tempTitle=context.title;context.title=""}if(obj.fireEvent("contextMouseOver",context,e)!==false&&!obj.cfg.getProperty("disabled")){if(obj.hideProcId){clearTimeout(obj.hideProcId);obj.hideProcId=null}Event.on(context,"mousemove",obj.onContextMouseMove,obj);obj.showProcId=obj.doShow(e,
context)}},onContextMouseOut:function(e,obj){var el=this;if(obj._tempTitle){el.title=obj._tempTitle;obj._tempTitle=null}if(obj.showProcId){clearTimeout(obj.showProcId);obj.showProcId=null}if(obj.hideProcId){clearTimeout(obj.hideProcId);obj.hideProcId=null}obj.fireEvent("contextMouseOut",el,e);obj.hideProcId=setTimeout(function(){obj.hide()},obj.cfg.getProperty("hidedelay"))},doShow:function(e,context){var offset=this.cfg.getProperty("xyoffset"),xOffset=offset[0],yOffset=offset[1],me=this;if(UA.opera&&
context.tagName&&context.tagName.toUpperCase()=="A")yOffset+=12;return setTimeout(function(){var txt=me.cfg.getProperty("text");if(me._tempTitle&&(txt===""||YAHOO.lang.isUndefined(txt)||YAHOO.lang.isNull(txt)))me.setBody(me._tempTitle);else me.cfg.refireEvent("text");me.moveTo(me.pageX+xOffset,me.pageY+yOffset);if(me.cfg.getProperty("preventoverlap"))me.preventOverlap(me.pageX,me.pageY);Event.removeListener(context,"mousemove",me.onContextMouseMove);me.contextTriggerEvent.fire(context);me.show();
me.hideProcId=me.doHide()},this.cfg.getProperty("showdelay"))},doHide:function(){var me=this;return setTimeout(function(){me.hide()},this.cfg.getProperty("autodismissdelay"))},preventOverlap:function(pageX,pageY){var height=this.element.offsetHeight,mousePoint=new YAHOO.util.Point(pageX,pageY),elementRegion=Dom.getRegion(this.element);elementRegion.top-=5;elementRegion.left-=5;elementRegion.right+=5;elementRegion.bottom+=5;if(elementRegion.contains(mousePoint))this.cfg.setProperty("y",pageY-height-
5)},onRender:function(p_sType,p_aArgs){function sizeShadow(){var oElement=this.element,oShadow=this.underlay;if(oShadow){oShadow.style.width=oElement.offsetWidth+6+"px";oShadow.style.height=oElement.offsetHeight+1+"px"}}function addShadowVisibleClass(){Dom.addClass(this.underlay,"yui-tt-shadow-visible");if(UA.ie)this.forceUnderlayRedraw()}function removeShadowVisibleClass(){Dom.removeClass(this.underlay,"yui-tt-shadow-visible")}function createShadow(){var oShadow=this.underlay,oElement,Module,nIE,
me;if(!oShadow){oElement=this.element;Module=YAHOO.widget.Module;nIE=UA.ie;me=this;if(!m_oShadowTemplate){m_oShadowTemplate=document.createElement("div");m_oShadowTemplate.className="yui-tt-shadow"}oShadow=m_oShadowTemplate.cloneNode(false);oElement.appendChild(oShadow);this.underlay=oShadow;this._shadow=this.underlay;addShadowVisibleClass.call(this);this.subscribe("beforeShow",addShadowVisibleClass);this.subscribe("hide",removeShadowVisibleClass);if(bIEQuirks){window.setTimeout(function(){sizeShadow.call(me)},
0);this.cfg.subscribeToConfigEvent("width",sizeShadow);this.cfg.subscribeToConfigEvent("height",sizeShadow);this.subscribe("changeContent",sizeShadow);Module.textResizeEvent.subscribe(sizeShadow,this,true);this.subscribe("destroy",function(){Module.textResizeEvent.unsubscribe(sizeShadow,this)})}}}function onBeforeShow(){createShadow.call(this);this.unsubscribe("beforeShow",onBeforeShow)}if(this.cfg.getProperty("visible"))createShadow.call(this);else this.subscribe("beforeShow",onBeforeShow)},forceUnderlayRedraw:function(){var tt=
this;Dom.addClass(tt.underlay,"yui-force-redraw");setTimeout(function(){Dom.removeClass(tt.underlay,"yui-force-redraw")},0)},destroy:function(){this._removeEventListeners();Tooltip.superclass.destroy.call(this)},toString:function(){return"Tooltip "+this.id}})})();
(function(){YAHOO.widget.Panel=function(el,userConfig){YAHOO.widget.Panel.superclass.constructor.call(this,el,userConfig)};var _currentModal=null;var Lang=YAHOO.lang,Util=YAHOO.util,Dom=Util.Dom,Event=Util.Event,CustomEvent=Util.CustomEvent,KeyListener=YAHOO.util.KeyListener,Config=Util.Config,Overlay=YAHOO.widget.Overlay,Panel=YAHOO.widget.Panel,UA=YAHOO.env.ua,bIEQuirks=UA.ie&&(UA.ie<=6||document.compatMode=="BackCompat"),m_oMaskTemplate,m_oUnderlayTemplate,m_oCloseIconTemplate,EVENT_TYPES={"SHOW_MASK":"showMask",
"HIDE_MASK":"hideMask","DRAG":"drag"},DEFAULT_CONFIG={"CLOSE":{key:"close",value:true,validator:Lang.isBoolean,supercedes:["visible"]},"DRAGGABLE":{key:"draggable",value:Util.DD?true:false,validator:Lang.isBoolean,supercedes:["visible"]},"DRAG_ONLY":{key:"dragonly",value:false,validator:Lang.isBoolean,supercedes:["draggable"]},"UNDERLAY":{key:"underlay",value:"shadow",supercedes:["visible"]},"MODAL":{key:"modal",value:false,validator:Lang.isBoolean,supercedes:["visible","zindex"]},"KEY_LISTENERS":{key:"keylisteners",
suppressEvent:true,supercedes:["visible"]},"STRINGS":{key:"strings",supercedes:["close"],validator:Lang.isObject,value:{close:"Close"}}};Panel.CSS_PANEL="yui-panel";Panel.CSS_PANEL_CONTAINER="yui-panel-container";Panel.FOCUSABLE=["a","button","select","textarea","input","iframe"];function createHeader(p_sType,p_aArgs){if(!this.header&&this.cfg.getProperty("draggable"))this.setHeader("&#160;")}function restoreOriginalWidth(p_sType,p_aArgs,p_oObject){var sOriginalWidth=p_oObject[0],sNewWidth=p_oObject[1],
oConfig=this.cfg,sCurrentWidth=oConfig.getProperty("width");if(sCurrentWidth==sNewWidth)oConfig.setProperty("width",sOriginalWidth);this.unsubscribe("hide",restoreOriginalWidth,p_oObject)}function setWidthToOffsetWidth(p_sType,p_aArgs){var oConfig,sOriginalWidth,sNewWidth;if(bIEQuirks){oConfig=this.cfg;sOriginalWidth=oConfig.getProperty("width");if(!sOriginalWidth||sOriginalWidth=="auto"){sNewWidth=this.element.offsetWidth+"px";oConfig.setProperty("width",sNewWidth);this.subscribe("hide",restoreOriginalWidth,
[sOriginalWidth||"",sNewWidth])}}}YAHOO.extend(Panel,Overlay,{init:function(el,userConfig){Panel.superclass.init.call(this,el);this.beforeInitEvent.fire(Panel);Dom.addClass(this.element,Panel.CSS_PANEL);this.buildWrapper();if(userConfig)this.cfg.applyConfig(userConfig,true);this.subscribe("showMask",this._addFocusHandlers);this.subscribe("hideMask",this._removeFocusHandlers);this.subscribe("beforeRender",createHeader);this.subscribe("render",function(){this.setFirstLastFocusable();this.subscribe("changeContent",
this.setFirstLastFocusable)});this.subscribe("show",this.focusFirst);this.initEvent.fire(Panel)},_onElementFocus:function(e){if(_currentModal===this){var target=Event.getTarget(e),doc=document.documentElement,insideDoc=target!==doc&&target!==window;if(insideDoc&&target!==this.element&&target!==this.mask&&!Dom.isAncestor(this.element,target))try{if(this.firstElement)this.firstElement.focus();else if(this._modalFocus)this._modalFocus.focus();else this.innerElement.focus()}catch(err){try{if(insideDoc&&
target!==document.body)target.blur()}catch(err2){}}}},_addFocusHandlers:function(p_sType,p_aArgs){if(!this.firstElement)if(UA.webkit||UA.opera){if(!this._modalFocus)this._createHiddenFocusElement()}else this.innerElement.tabIndex=0;this.setTabLoop(this.firstElement,this.lastElement);Event.onFocus(document.documentElement,this._onElementFocus,this,true);_currentModal=this},_createHiddenFocusElement:function(){var e=document.createElement("button");e.style.height="1px";e.style.width="1px";e.style.position=
"absolute";e.style.left="-10000em";e.style.opacity=0;e.tabIndex=-1;this.innerElement.appendChild(e);this._modalFocus=e},_removeFocusHandlers:function(p_sType,p_aArgs){Event.removeFocusListener(document.documentElement,this._onElementFocus,this);if(_currentModal==this)_currentModal=null},focusFirst:function(type,args,obj){var el=this.firstElement;if(args&&args[1])Event.stopEvent(args[1]);if(el)try{el.focus()}catch(err){}},focusLast:function(type,args,obj){var el=this.lastElement;if(args&&args[1])Event.stopEvent(args[1]);
if(el)try{el.focus()}catch(err){}},setTabLoop:function(firstElement,lastElement){var backTab=this.preventBackTab,tab=this.preventTabOut,showEvent=this.showEvent,hideEvent=this.hideEvent;if(backTab){backTab.disable();showEvent.unsubscribe(backTab.enable,backTab);hideEvent.unsubscribe(backTab.disable,backTab);backTab=this.preventBackTab=null}if(tab){tab.disable();showEvent.unsubscribe(tab.enable,tab);hideEvent.unsubscribe(tab.disable,tab);tab=this.preventTabOut=null}if(firstElement){this.preventBackTab=
new KeyListener(firstElement,{shift:true,keys:9},{fn:this.focusLast,scope:this,correctScope:true});backTab=this.preventBackTab;showEvent.subscribe(backTab.enable,backTab,true);hideEvent.subscribe(backTab.disable,backTab,true)}if(lastElement){this.preventTabOut=new KeyListener(lastElement,{shift:false,keys:9},{fn:this.focusFirst,scope:this,correctScope:true});tab=this.preventTabOut;showEvent.subscribe(tab.enable,tab,true);hideEvent.subscribe(tab.disable,tab,true)}},getFocusableElements:function(root){root=
root||this.innerElement;var focusable={};for(var i=0;i<Panel.FOCUSABLE.length;i++)focusable[Panel.FOCUSABLE[i]]=true;function isFocusable(el){if(el.focus&&el.type!=="hidden"&&!el.disabled&&focusable[el.tagName.toLowerCase()])return true;return false}return Dom.getElementsBy(isFocusable,null,root)},setFirstLastFocusable:function(){this.firstElement=null;this.lastElement=null;var elements=this.getFocusableElements();this.focusableElements=elements;if(elements.length>0){this.firstElement=elements[0];
this.lastElement=elements[elements.length-1]}if(this.cfg.getProperty("modal"))this.setTabLoop(this.firstElement,this.lastElement)},initEvents:function(){Panel.superclass.initEvents.call(this);var SIGNATURE=CustomEvent.LIST;this.showMaskEvent=this.createEvent(EVENT_TYPES.SHOW_MASK);this.showMaskEvent.signature=SIGNATURE;this.hideMaskEvent=this.createEvent(EVENT_TYPES.HIDE_MASK);this.hideMaskEvent.signature=SIGNATURE;this.dragEvent=this.createEvent(EVENT_TYPES.DRAG);this.dragEvent.signature=SIGNATURE},
initDefaultConfig:function(){Panel.superclass.initDefaultConfig.call(this);this.cfg.addProperty(DEFAULT_CONFIG.CLOSE.key,{handler:this.configClose,value:DEFAULT_CONFIG.CLOSE.value,validator:DEFAULT_CONFIG.CLOSE.validator,supercedes:DEFAULT_CONFIG.CLOSE.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.DRAGGABLE.key,{handler:this.configDraggable,value:Util.DD?true:false,validator:DEFAULT_CONFIG.DRAGGABLE.validator,supercedes:DEFAULT_CONFIG.DRAGGABLE.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.DRAG_ONLY.key,
{value:DEFAULT_CONFIG.DRAG_ONLY.value,validator:DEFAULT_CONFIG.DRAG_ONLY.validator,supercedes:DEFAULT_CONFIG.DRAG_ONLY.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.UNDERLAY.key,{handler:this.configUnderlay,value:DEFAULT_CONFIG.UNDERLAY.value,supercedes:DEFAULT_CONFIG.UNDERLAY.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.MODAL.key,{handler:this.configModal,value:DEFAULT_CONFIG.MODAL.value,validator:DEFAULT_CONFIG.MODAL.validator,supercedes:DEFAULT_CONFIG.MODAL.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.KEY_LISTENERS.key,
{handler:this.configKeyListeners,suppressEvent:DEFAULT_CONFIG.KEY_LISTENERS.suppressEvent,supercedes:DEFAULT_CONFIG.KEY_LISTENERS.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.STRINGS.key,{value:DEFAULT_CONFIG.STRINGS.value,handler:this.configStrings,validator:DEFAULT_CONFIG.STRINGS.validator,supercedes:DEFAULT_CONFIG.STRINGS.supercedes})},configClose:function(type,args,obj){var val=args[0],oClose=this.close,strings=this.cfg.getProperty("strings");if(val)if(!oClose){if(!m_oCloseIconTemplate){m_oCloseIconTemplate=
document.createElement("a");m_oCloseIconTemplate.className="container-close";m_oCloseIconTemplate.href="#"}oClose=m_oCloseIconTemplate.cloneNode(true);this.innerElement.appendChild(oClose);oClose.innerHTML=strings&&strings.close?strings.close:"&#160;";Event.on(oClose,"click",this._doClose,this,true);this.close=oClose}else oClose.style.display="block";else if(oClose)oClose.style.display="none"},_doClose:function(e){Event.preventDefault(e);this.hide()},configDraggable:function(type,args,obj){var val=
args[0];if(val){if(!Util.DD){this.cfg.setProperty("draggable",false);return}if(this.header){Dom.setStyle(this.header,"cursor","move");this.registerDragDrop()}this.subscribe("beforeShow",setWidthToOffsetWidth)}else{if(this.dd)this.dd.unreg();if(this.header)Dom.setStyle(this.header,"cursor","auto");this.unsubscribe("beforeShow",setWidthToOffsetWidth)}},configUnderlay:function(type,args,obj){var bMacGecko=this.platform=="mac"&&UA.gecko,sUnderlay=args[0].toLowerCase(),oUnderlay=this.underlay,oElement=
this.element;function createUnderlay(){var bNew=false;if(!oUnderlay){if(!m_oUnderlayTemplate){m_oUnderlayTemplate=document.createElement("div");m_oUnderlayTemplate.className="underlay"}oUnderlay=m_oUnderlayTemplate.cloneNode(false);this.element.appendChild(oUnderlay);this.underlay=oUnderlay;if(bIEQuirks){this.sizeUnderlay();this.cfg.subscribeToConfigEvent("width",this.sizeUnderlay);this.cfg.subscribeToConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.subscribe(this.sizeUnderlay);YAHOO.widget.Module.textResizeEvent.subscribe(this.sizeUnderlay,
this,true)}if(UA.webkit&&UA.webkit<420)this.changeContentEvent.subscribe(this.forceUnderlayRedraw);bNew=true}}function onBeforeShow(){var bNew=createUnderlay.call(this);if(!bNew&&bIEQuirks)this.sizeUnderlay();this._underlayDeferred=false;this.beforeShowEvent.unsubscribe(onBeforeShow)}function destroyUnderlay(){if(this._underlayDeferred){this.beforeShowEvent.unsubscribe(onBeforeShow);this._underlayDeferred=false}if(oUnderlay){this.cfg.unsubscribeFromConfigEvent("width",this.sizeUnderlay);this.cfg.unsubscribeFromConfigEvent("height",
this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.forceUnderlayRedraw);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.sizeUnderlay,this,true);this.element.removeChild(oUnderlay);this.underlay=null}}switch(sUnderlay){case "shadow":Dom.removeClass(oElement,"matte");Dom.addClass(oElement,"shadow");break;case "matte":if(!bMacGecko)destroyUnderlay.call(this);Dom.removeClass(oElement,"shadow");Dom.addClass(oElement,"matte");break;default:if(!bMacGecko)destroyUnderlay.call(this);
Dom.removeClass(oElement,"shadow");Dom.removeClass(oElement,"matte");break}if(sUnderlay=="shadow"||bMacGecko&&!oUnderlay)if(this.cfg.getProperty("visible")){var bNew=createUnderlay.call(this);if(!bNew&&bIEQuirks)this.sizeUnderlay()}else if(!this._underlayDeferred){this.beforeShowEvent.subscribe(onBeforeShow);this._underlayDeferred=true}},configModal:function(type,args,obj){var modal=args[0];if(modal){if(!this._hasModalityEventListeners){this.subscribe("beforeShow",this.buildMask);this.subscribe("beforeShow",
this.bringToTop);this.subscribe("beforeShow",this.showMask);this.subscribe("hide",this.hideMask);Overlay.windowResizeEvent.subscribe(this.sizeMask,this,true);this._hasModalityEventListeners=true}}else if(this._hasModalityEventListeners){if(this.cfg.getProperty("visible")){this.hideMask();this.removeMask()}this.unsubscribe("beforeShow",this.buildMask);this.unsubscribe("beforeShow",this.bringToTop);this.unsubscribe("beforeShow",this.showMask);this.unsubscribe("hide",this.hideMask);Overlay.windowResizeEvent.unsubscribe(this.sizeMask,
this);this._hasModalityEventListeners=false}},removeMask:function(){var oMask=this.mask,oParentNode;if(oMask){this.hideMask();oParentNode=oMask.parentNode;if(oParentNode)oParentNode.removeChild(oMask);this.mask=null}},configKeyListeners:function(type,args,obj){var listeners=args[0],listener,nListeners,i;if(listeners)if(listeners instanceof Array){nListeners=listeners.length;for(i=0;i<nListeners;i++){listener=listeners[i];if(!Config.alreadySubscribed(this.showEvent,listener.enable,listener))this.showEvent.subscribe(listener.enable,
listener,true);if(!Config.alreadySubscribed(this.hideEvent,listener.disable,listener)){this.hideEvent.subscribe(listener.disable,listener,true);this.destroyEvent.subscribe(listener.disable,listener,true)}}}else{if(!Config.alreadySubscribed(this.showEvent,listeners.enable,listeners))this.showEvent.subscribe(listeners.enable,listeners,true);if(!Config.alreadySubscribed(this.hideEvent,listeners.disable,listeners)){this.hideEvent.subscribe(listeners.disable,listeners,true);this.destroyEvent.subscribe(listeners.disable,
listeners,true)}}},configStrings:function(type,args,obj){var val=Lang.merge(DEFAULT_CONFIG.STRINGS.value,args[0]);this.cfg.setProperty(DEFAULT_CONFIG.STRINGS.key,val,true)},configHeight:function(type,args,obj){var height=args[0],el=this.innerElement;Dom.setStyle(el,"height",height);this.cfg.refireEvent("iframe")},_autoFillOnHeightChange:function(type,args,el){Panel.superclass._autoFillOnHeightChange.apply(this,arguments);if(bIEQuirks){var panel=this;setTimeout(function(){panel.sizeUnderlay()},0)}},
configWidth:function(type,args,obj){var width=args[0],el=this.innerElement;Dom.setStyle(el,"width",width);this.cfg.refireEvent("iframe")},configzIndex:function(type,args,obj){Panel.superclass.configzIndex.call(this,type,args,obj);if(this.mask||this.cfg.getProperty("modal")===true){var panelZ=Dom.getStyle(this.element,"zIndex");if(!panelZ||isNaN(panelZ))panelZ=0;if(panelZ===0)this.cfg.setProperty("zIndex",1);else this.stackMask()}},buildWrapper:function(){var elementParent=this.element.parentNode,
originalElement=this.element,wrapper=document.createElement("div");wrapper.className=Panel.CSS_PANEL_CONTAINER;wrapper.id=originalElement.id+"_c";if(elementParent)elementParent.insertBefore(wrapper,originalElement);wrapper.appendChild(originalElement);this.element=wrapper;this.innerElement=originalElement;Dom.setStyle(this.innerElement,"visibility","inherit")},sizeUnderlay:function(){var oUnderlay=this.underlay,oElement;if(oUnderlay){oElement=this.element;oUnderlay.style.width=oElement.offsetWidth+
"px";oUnderlay.style.height=oElement.offsetHeight+"px"}},registerDragDrop:function(){var me=this;if(this.header){if(!Util.DD)return;var bDragOnly=this.cfg.getProperty("dragonly")===true;this.dd=new Util.DD(this.element.id,this.id,{dragOnly:bDragOnly});if(!this.header.id)this.header.id=this.id+"_h";this.dd.startDrag=function(){var offsetHeight,offsetWidth,viewPortWidth,viewPortHeight,scrollX,scrollY;if(YAHOO.env.ua.ie==6)Dom.addClass(me.element,"drag");if(me.cfg.getProperty("constraintoviewport")){var nViewportOffset=
Overlay.VIEWPORT_OFFSET;offsetHeight=me.element.offsetHeight;offsetWidth=me.element.offsetWidth;viewPortWidth=Dom.getViewportWidth();viewPortHeight=Dom.getViewportHeight();scrollX=Dom.getDocumentScrollLeft();scrollY=Dom.getDocumentScrollTop();if(offsetHeight+nViewportOffset<viewPortHeight){this.minY=scrollY+nViewportOffset;this.maxY=scrollY+viewPortHeight-offsetHeight-nViewportOffset}else{this.minY=scrollY+nViewportOffset;this.maxY=scrollY+nViewportOffset}if(offsetWidth+nViewportOffset<viewPortWidth){this.minX=
scrollX+nViewportOffset;this.maxX=scrollX+viewPortWidth-offsetWidth-nViewportOffset}else{this.minX=scrollX+nViewportOffset;this.maxX=scrollX+nViewportOffset}this.constrainX=true;this.constrainY=true}else{this.constrainX=false;this.constrainY=false}me.dragEvent.fire("startDrag",arguments)};this.dd.onDrag=function(){me.syncPosition();me.cfg.refireEvent("iframe");if(this.platform=="mac"&&YAHOO.env.ua.gecko)this.showMacGeckoScrollbars();me.dragEvent.fire("onDrag",arguments)};this.dd.endDrag=function(){if(YAHOO.env.ua.ie==
6)Dom.removeClass(me.element,"drag");me.dragEvent.fire("endDrag",arguments);me.moveEvent.fire(me.cfg.getProperty("xy"))};this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA")}},buildMask:function(){var oMask=this.mask;if(!oMask){if(!m_oMaskTemplate){m_oMaskTemplate=document.createElement("div");m_oMaskTemplate.className="mask";m_oMaskTemplate.innerHTML="&#160;"}oMask=m_oMaskTemplate.cloneNode(true);
oMask.id=this.id+"_mask";document.body.insertBefore(oMask,document.body.firstChild);this.mask=oMask;if(YAHOO.env.ua.gecko&&this.platform=="mac")Dom.addClass(this.mask,"block-scrollbars");this.stackMask()}},hideMask:function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.style.display="none";Dom.removeClass(document.body,"masked");this.hideMaskEvent.fire()}},showMask:function(){if(this.cfg.getProperty("modal")&&this.mask){Dom.addClass(document.body,"masked");this.sizeMask();this.mask.style.display=
"block";this.showMaskEvent.fire()}},sizeMask:function(){if(this.mask){var mask=this.mask,viewWidth=Dom.getViewportWidth(),viewHeight=Dom.getViewportHeight();if(mask.offsetHeight>viewHeight)mask.style.height=viewHeight+"px";if(mask.offsetWidth>viewWidth)mask.style.width=viewWidth+"px";mask.style.height=Dom.getDocumentHeight()+"px";mask.style.width=Dom.getDocumentWidth()+"px"}},stackMask:function(){if(this.mask){var panelZ=Dom.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(panelZ)&&!isNaN(panelZ))Dom.setStyle(this.mask,
"zIndex",panelZ-1)}},render:function(appendToNode){return Panel.superclass.render.call(this,appendToNode,this.innerElement)},_renderHeader:function(moduleElement){moduleElement=moduleElement||this.innerElement;Panel.superclass._renderHeader.call(this,moduleElement)},_renderBody:function(moduleElement){moduleElement=moduleElement||this.innerElement;Panel.superclass._renderBody.call(this,moduleElement)},_renderFooter:function(moduleElement){moduleElement=moduleElement||this.innerElement;Panel.superclass._renderFooter.call(this,
moduleElement)},destroy:function(){Overlay.windowResizeEvent.unsubscribe(this.sizeMask,this);this.removeMask();if(this.close)Event.purgeElement(this.close);Panel.superclass.destroy.call(this)},forceUnderlayRedraw:function(){var u=this.underlay;Dom.addClass(u,"yui-force-redraw");setTimeout(function(){Dom.removeClass(u,"yui-force-redraw")},0)},toString:function(){return"Panel "+this.id}})})();
(function(){YAHOO.widget.Dialog=function(el,userConfig){YAHOO.widget.Dialog.superclass.constructor.call(this,el,userConfig)};var Event=YAHOO.util.Event,CustomEvent=YAHOO.util.CustomEvent,Dom=YAHOO.util.Dom,Dialog=YAHOO.widget.Dialog,Lang=YAHOO.lang,EVENT_TYPES={"BEFORE_SUBMIT":"beforeSubmit","SUBMIT":"submit","MANUAL_SUBMIT":"manualSubmit","ASYNC_SUBMIT":"asyncSubmit","FORM_SUBMIT":"formSubmit","CANCEL":"cancel"},DEFAULT_CONFIG={"POST_METHOD":{key:"postmethod",value:"async"},"POST_DATA":{key:"postdata",
value:null},"BUTTONS":{key:"buttons",value:"none",supercedes:["visible"]},"HIDEAFTERSUBMIT":{key:"hideaftersubmit",value:true}};Dialog.CSS_DIALOG="yui-dialog";function removeButtonEventHandlers(){var aButtons=this._aButtons,nButtons,oButton,i;if(Lang.isArray(aButtons)){nButtons=aButtons.length;if(nButtons>0){i=nButtons-1;do{oButton=aButtons[i];if(YAHOO.widget.Button&&oButton instanceof YAHOO.widget.Button)oButton.destroy();else if(oButton.tagName.toUpperCase()=="BUTTON"){Event.purgeElement(oButton);
Event.purgeElement(oButton,false)}}while(i--)}}}YAHOO.extend(Dialog,YAHOO.widget.Panel,{form:null,initDefaultConfig:function(){Dialog.superclass.initDefaultConfig.call(this);this.callback={success:null,failure:null,argument:null};this.cfg.addProperty(DEFAULT_CONFIG.POST_METHOD.key,{handler:this.configPostMethod,value:DEFAULT_CONFIG.POST_METHOD.value,validator:function(val){if(val!="form"&&val!="async"&&val!="none"&&val!="manual")return false;else return true}});this.cfg.addProperty(DEFAULT_CONFIG.POST_DATA.key,
{value:DEFAULT_CONFIG.POST_DATA.value});this.cfg.addProperty(DEFAULT_CONFIG.HIDEAFTERSUBMIT.key,{value:DEFAULT_CONFIG.HIDEAFTERSUBMIT.value});this.cfg.addProperty(DEFAULT_CONFIG.BUTTONS.key,{handler:this.configButtons,value:DEFAULT_CONFIG.BUTTONS.value,supercedes:DEFAULT_CONFIG.BUTTONS.supercedes})},initEvents:function(){Dialog.superclass.initEvents.call(this);var SIGNATURE=CustomEvent.LIST;this.beforeSubmitEvent=this.createEvent(EVENT_TYPES.BEFORE_SUBMIT);this.beforeSubmitEvent.signature=SIGNATURE;
this.submitEvent=this.createEvent(EVENT_TYPES.SUBMIT);this.submitEvent.signature=SIGNATURE;this.manualSubmitEvent=this.createEvent(EVENT_TYPES.MANUAL_SUBMIT);this.manualSubmitEvent.signature=SIGNATURE;this.asyncSubmitEvent=this.createEvent(EVENT_TYPES.ASYNC_SUBMIT);this.asyncSubmitEvent.signature=SIGNATURE;this.formSubmitEvent=this.createEvent(EVENT_TYPES.FORM_SUBMIT);this.formSubmitEvent.signature=SIGNATURE;this.cancelEvent=this.createEvent(EVENT_TYPES.CANCEL);this.cancelEvent.signature=SIGNATURE},
init:function(el,userConfig){Dialog.superclass.init.call(this,el);this.beforeInitEvent.fire(Dialog);Dom.addClass(this.element,Dialog.CSS_DIALOG);this.cfg.setProperty("visible",false);if(userConfig)this.cfg.applyConfig(userConfig,true);this.showEvent.subscribe(this.focusFirst,this,true);this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.subscribe("changeBody",this.registerForm);this.initEvent.fire(Dialog)},doSubmit:function(){var Connect=YAHOO.util.Connect,oForm=this.form,bUseFileUpload=
false,bUseSecureFileUpload=false,aElements,nElements,i,formAttrs;switch(this.cfg.getProperty("postmethod")){case "async":aElements=oForm.elements;nElements=aElements.length;if(nElements>0){i=nElements-1;do if(aElements[i].type=="file"){bUseFileUpload=true;break}while(i--)}if(bUseFileUpload&&YAHOO.env.ua.ie&&this.isSecure)bUseSecureFileUpload=true;formAttrs=this._getFormAttributes(oForm);Connect.setForm(oForm,bUseFileUpload,bUseSecureFileUpload);var postData=this.cfg.getProperty("postdata");var c=
Connect.asyncRequest(formAttrs.method,formAttrs.action,this.callback,postData);this.asyncSubmitEvent.fire(c);break;case "form":oForm.submit();this.formSubmitEvent.fire();break;case "none":case "manual":this.manualSubmitEvent.fire();break}},_getFormAttributes:function(oForm){var attrs={method:null,action:null};if(oForm)if(oForm.getAttributeNode){var action=oForm.getAttributeNode("action");var method=oForm.getAttributeNode("method");if(action)attrs.action=action.value;if(method)attrs.method=method.value}else{attrs.action=
oForm.getAttribute("action");attrs.method=oForm.getAttribute("method")}attrs.method=(Lang.isString(attrs.method)?attrs.method:"POST").toUpperCase();attrs.action=Lang.isString(attrs.action)?attrs.action:"";return attrs},registerForm:function(){var form=this.element.getElementsByTagName("form")[0];if(this.form)if(this.form==form&&Dom.isAncestor(this.element,this.form))return;else{Event.purgeElement(this.form);this.form=null}if(!form){form=document.createElement("form");form.name="frm_"+this.id;this.body.appendChild(form)}if(form){this.form=
form;Event.on(form,"submit",this._submitHandler,this,true)}},_submitHandler:function(e){Event.stopEvent(e);this.submit();this.form.blur()},setTabLoop:function(firstElement,lastElement){firstElement=firstElement||this.firstButton;lastElement=this.lastButton||lastElement;Dialog.superclass.setTabLoop.call(this,firstElement,lastElement)},setFirstLastFocusable:function(){Dialog.superclass.setFirstLastFocusable.call(this);var i,l,el,elements=this.focusableElements;this.firstFormElement=null;this.lastFormElement=
null;if(this.form&&elements&&elements.length>0){l=elements.length;for(i=0;i<l;++i){el=elements[i];if(this.form===el.form){this.firstFormElement=el;break}}for(i=l-1;i>=0;--i){el=elements[i];if(this.form===el.form){this.lastFormElement=el;break}}}},configClose:function(type,args,obj){Dialog.superclass.configClose.apply(this,arguments)},_doClose:function(e){Event.preventDefault(e);this.cancel()},configButtons:function(type,args,obj){var Button=YAHOO.widget.Button,aButtons=args[0],oInnerElement=this.innerElement,
oButton,oButtonEl,oYUIButton,nButtons,oSpan,oFooter,i;removeButtonEventHandlers.call(this);this._aButtons=null;if(Lang.isArray(aButtons)){oSpan=document.createElement("span");oSpan.className="button-group";nButtons=aButtons.length;this._aButtons=[];this.defaultHtmlButton=null;for(i=0;i<nButtons;i++){oButton=aButtons[i];if(Button){oYUIButton=new Button({label:oButton.text});oYUIButton.appendTo(oSpan);oButtonEl=oYUIButton.get("element");if(oButton.isDefault){oYUIButton.addClass("default");this.defaultHtmlButton=
oButtonEl}if(Lang.isFunction(oButton.handler))oYUIButton.set("onclick",{fn:oButton.handler,obj:this,scope:this});else if(Lang.isObject(oButton.handler)&&Lang.isFunction(oButton.handler.fn))oYUIButton.set("onclick",{fn:oButton.handler.fn,obj:!Lang.isUndefined(oButton.handler.obj)?oButton.handler.obj:this,scope:oButton.handler.scope||this});this._aButtons[this._aButtons.length]=oYUIButton}else{oButtonEl=document.createElement("button");oButtonEl.setAttribute("type","button");if(oButton.isDefault){oButtonEl.className=
"default";this.defaultHtmlButton=oButtonEl}oButtonEl.innerHTML=oButton.text;if(Lang.isFunction(oButton.handler))Event.on(oButtonEl,"click",oButton.handler,this,true);else if(Lang.isObject(oButton.handler)&&Lang.isFunction(oButton.handler.fn))Event.on(oButtonEl,"click",oButton.handler.fn,!Lang.isUndefined(oButton.handler.obj)?oButton.handler.obj:this,oButton.handler.scope||this);oSpan.appendChild(oButtonEl);this._aButtons[this._aButtons.length]=oButtonEl}oButton.htmlButton=oButtonEl;if(i===0)this.firstButton=
oButtonEl;if(i==nButtons-1)this.lastButton=oButtonEl}this.setFooter(oSpan);oFooter=this.footer;if(Dom.inDocument(this.element)&&!Dom.isAncestor(oInnerElement,oFooter))oInnerElement.appendChild(oFooter);this.buttonSpan=oSpan}else{oSpan=this.buttonSpan;oFooter=this.footer;if(oSpan&&oFooter){oFooter.removeChild(oSpan);this.buttonSpan=null;this.firstButton=null;this.lastButton=null;this.defaultHtmlButton=null}}this.changeContentEvent.fire()},getButtons:function(){return this._aButtons||null},focusFirst:function(type,
args,obj){var el=this.firstFormElement;if(args&&args[1])Event.stopEvent(args[1]);if(el)try{el.focus()}catch(oException){}else if(this.defaultHtmlButton)this.focusDefaultButton();else this.focusFirstButton()},focusLast:function(type,args,obj){var aButtons=this.cfg.getProperty("buttons"),el=this.lastFormElement;if(args&&args[1])Event.stopEvent(args[1]);if(aButtons&&Lang.isArray(aButtons))this.focusLastButton();else if(el)try{el.focus()}catch(oException){}},_getButton:function(button){var Button=YAHOO.widget.Button;
if(Button&&button&&button.nodeName&&button.id)button=Button.getButton(button.id)||button;return button},focusDefaultButton:function(){var button=this._getButton(this.defaultHtmlButton);if(button)try{button.focus()}catch(oException){}},blurButtons:function(){var aButtons=this.cfg.getProperty("buttons"),nButtons,oButton,oElement,i;if(aButtons&&Lang.isArray(aButtons)){nButtons=aButtons.length;if(nButtons>0){i=nButtons-1;do{oButton=aButtons[i];if(oButton){oElement=this._getButton(oButton.htmlButton);
if(oElement)try{oElement.blur()}catch(oException){}}}while(i--)}}},focusFirstButton:function(){var aButtons=this.cfg.getProperty("buttons"),oButton,oElement;if(aButtons&&Lang.isArray(aButtons)){oButton=aButtons[0];if(oButton){oElement=this._getButton(oButton.htmlButton);if(oElement)try{oElement.focus()}catch(oException){}}}},focusLastButton:function(){var aButtons=this.cfg.getProperty("buttons"),nButtons,oButton,oElement;if(aButtons&&Lang.isArray(aButtons)){nButtons=aButtons.length;if(nButtons>0){oButton=
aButtons[nButtons-1];if(oButton){oElement=this._getButton(oButton.htmlButton);if(oElement)try{oElement.focus()}catch(oException){}}}}},configPostMethod:function(type,args,obj){this.registerForm()},validate:function(){return true},submit:function(){if(this.validate())if(this.beforeSubmitEvent.fire()){this.doSubmit();this.submitEvent.fire();if(this.cfg.getProperty("hideaftersubmit"))this.hide();return true}else return false;else return false},cancel:function(){this.cancelEvent.fire();this.hide()},getData:function(){var oForm=
this.form,aElements,nTotalElements,oData,sName,oElement,nElements,sType,sTagName,aOptions,nOptions,aValues,oOption,oRadio,oCheckbox,valueAttr,i,n;function isFormElement(p_oElement){var sTag=p_oElement.tagName.toUpperCase();return(sTag=="INPUT"||sTag=="TEXTAREA"||sTag=="SELECT")&&p_oElement.name==sName}if(oForm){aElements=oForm.elements;nTotalElements=aElements.length;oData={};for(i=0;i<nTotalElements;i++){sName=aElements[i].name;oElement=Dom.getElementsBy(isFormElement,"*",oForm);nElements=oElement.length;
if(nElements>0)if(nElements==1){oElement=oElement[0];sType=oElement.type;sTagName=oElement.tagName.toUpperCase();switch(sTagName){case "INPUT":if(sType=="checkbox")oData[sName]=oElement.checked;else if(sType!="radio")oData[sName]=oElement.value;break;case "TEXTAREA":oData[sName]=oElement.value;break;case "SELECT":aOptions=oElement.options;nOptions=aOptions.length;aValues=[];for(n=0;n<nOptions;n++){oOption=aOptions[n];if(oOption.selected){valueAttr=oOption.attributes.value;aValues[aValues.length]=
valueAttr&&valueAttr.specified?oOption.value:oOption.text}}oData[sName]=aValues;break}}else{sType=oElement[0].type;switch(sType){case "radio":for(n=0;n<nElements;n++){oRadio=oElement[n];if(oRadio.checked){oData[sName]=oRadio.value;break}}break;case "checkbox":aValues=[];for(n=0;n<nElements;n++){oCheckbox=oElement[n];if(oCheckbox.checked)aValues[aValues.length]=oCheckbox.value}oData[sName]=aValues;break}}}}return oData},destroy:function(){removeButtonEventHandlers.call(this);this._aButtons=null;var aForms=
this.element.getElementsByTagName("form"),oForm;if(aForms.length>0){oForm=aForms[0];if(oForm){Event.purgeElement(oForm);if(oForm.parentNode)oForm.parentNode.removeChild(oForm);this.form=null}}Dialog.superclass.destroy.call(this)},toString:function(){return"Dialog "+this.id}})})();
(function(){YAHOO.widget.SimpleDialog=function(el,userConfig){YAHOO.widget.SimpleDialog.superclass.constructor.call(this,el,userConfig)};var Dom=YAHOO.util.Dom,SimpleDialog=YAHOO.widget.SimpleDialog,DEFAULT_CONFIG={"ICON":{key:"icon",value:"none",suppressEvent:true},"TEXT":{key:"text",value:"",suppressEvent:true,supercedes:["icon"]}};SimpleDialog.ICON_BLOCK="blckicon";SimpleDialog.ICON_ALARM="alrticon";SimpleDialog.ICON_HELP="hlpicon";SimpleDialog.ICON_INFO="infoicon";SimpleDialog.ICON_WARN="warnicon";
SimpleDialog.ICON_TIP="tipicon";SimpleDialog.ICON_CSS_CLASSNAME="yui-icon";SimpleDialog.CSS_SIMPLEDIALOG="yui-simple-dialog";YAHOO.extend(SimpleDialog,YAHOO.widget.Dialog,{initDefaultConfig:function(){SimpleDialog.superclass.initDefaultConfig.call(this);this.cfg.addProperty(DEFAULT_CONFIG.ICON.key,{handler:this.configIcon,value:DEFAULT_CONFIG.ICON.value,suppressEvent:DEFAULT_CONFIG.ICON.suppressEvent});this.cfg.addProperty(DEFAULT_CONFIG.TEXT.key,{handler:this.configText,value:DEFAULT_CONFIG.TEXT.value,
suppressEvent:DEFAULT_CONFIG.TEXT.suppressEvent,supercedes:DEFAULT_CONFIG.TEXT.supercedes})},init:function(el,userConfig){SimpleDialog.superclass.init.call(this,el);this.beforeInitEvent.fire(SimpleDialog);Dom.addClass(this.element,SimpleDialog.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(userConfig)this.cfg.applyConfig(userConfig,true);this.beforeRenderEvent.subscribe(function(){if(!this.body)this.setBody("")},this,true);this.initEvent.fire(SimpleDialog)},registerForm:function(){SimpleDialog.superclass.registerForm.call(this);
this.form.innerHTML+='<input type="hidden" name="'+this.id+'" value=""/>'},configIcon:function(type,args,obj){var sIcon=args[0],oBody=this.body,sCSSClass=SimpleDialog.ICON_CSS_CLASSNAME,aElements,oIcon,oIconParent;if(sIcon&&sIcon!="none"){aElements=Dom.getElementsByClassName(sCSSClass,"*",oBody);if(aElements.length===1){oIcon=aElements[0];oIconParent=oIcon.parentNode;if(oIconParent){oIconParent.removeChild(oIcon);oIcon=null}}if(sIcon.indexOf(".")==-1){oIcon=document.createElement("span");oIcon.className=
sCSSClass+" "+sIcon;oIcon.innerHTML="&#160;"}else{oIcon=document.createElement("img");oIcon.src=this.imageRoot+sIcon;oIcon.className=sCSSClass}if(oIcon)oBody.insertBefore(oIcon,oBody.firstChild)}},configText:function(type,args,obj){var text=args[0];if(text){this.setBody(text);this.cfg.refireEvent("icon")}},toString:function(){return"SimpleDialog "+this.id}})})();
(function(){YAHOO.widget.ContainerEffect=function(overlay,attrIn,attrOut,targetElement,animClass){if(!animClass)animClass=YAHOO.util.Anim;this.overlay=overlay;this.attrIn=attrIn;this.attrOut=attrOut;this.targetElement=targetElement||overlay.element;this.animClass=animClass};var Dom=YAHOO.util.Dom,CustomEvent=YAHOO.util.CustomEvent,ContainerEffect=YAHOO.widget.ContainerEffect;ContainerEffect.FADE=function(overlay,dur){var Easing=YAHOO.util.Easing,fin={attributes:{opacity:{from:0,to:1}},duration:dur,
method:Easing.easeIn},fout={attributes:{opacity:{to:0}},duration:dur,method:Easing.easeOut},fade=new ContainerEffect(overlay,fin,fout,overlay.element);fade.handleUnderlayStart=function(){var underlay=this.overlay.underlay;if(underlay&&YAHOO.env.ua.ie){var hasFilters=underlay.filters&&underlay.filters.length>0;if(hasFilters)Dom.addClass(overlay.element,"yui-effect-fade")}};fade.handleUnderlayComplete=function(){var underlay=this.overlay.underlay;if(underlay&&YAHOO.env.ua.ie)Dom.removeClass(overlay.element,
"yui-effect-fade")};fade.handleStartAnimateIn=function(type,args,obj){Dom.addClass(obj.overlay.element,"hide-select");if(!obj.overlay.underlay)obj.overlay.cfg.refireEvent("underlay");obj.handleUnderlayStart();obj.overlay._setDomVisibility(true);Dom.setStyle(obj.overlay.element,"opacity",0)};fade.handleCompleteAnimateIn=function(type,args,obj){Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter)obj.overlay.element.style.filter=null;obj.handleUnderlayComplete();obj.overlay.cfg.refireEvent("iframe");
obj.animateInCompleteEvent.fire()};fade.handleStartAnimateOut=function(type,args,obj){Dom.addClass(obj.overlay.element,"hide-select");obj.handleUnderlayStart()};fade.handleCompleteAnimateOut=function(type,args,obj){Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter)obj.overlay.element.style.filter=null;obj.overlay._setDomVisibility(false);Dom.setStyle(obj.overlay.element,"opacity",1);obj.handleUnderlayComplete();obj.overlay.cfg.refireEvent("iframe");obj.animateOutCompleteEvent.fire()};
fade.init();return fade};ContainerEffect.SLIDE=function(overlay,dur){var Easing=YAHOO.util.Easing,x=overlay.cfg.getProperty("x")||Dom.getX(overlay.element),y=overlay.cfg.getProperty("y")||Dom.getY(overlay.element),clientWidth=Dom.getClientWidth(),offsetWidth=overlay.element.offsetWidth,sin={attributes:{points:{to:[x,y]}},duration:dur,method:Easing.easeIn},sout={attributes:{points:{to:[clientWidth+25,y]}},duration:dur,method:Easing.easeOut},slide=new ContainerEffect(overlay,sin,sout,overlay.element,
YAHOO.util.Motion);slide.handleStartAnimateIn=function(type,args,obj){obj.overlay.element.style.left=-25-offsetWidth+"px";obj.overlay.element.style.top=y+"px"};slide.handleTweenAnimateIn=function(type,args,obj){var pos=Dom.getXY(obj.overlay.element),currentX=pos[0],currentY=pos[1];if(Dom.getStyle(obj.overlay.element,"visibility")=="hidden"&&currentX<x)obj.overlay._setDomVisibility(true);obj.overlay.cfg.setProperty("xy",[currentX,currentY],true);obj.overlay.cfg.refireEvent("iframe")};slide.handleCompleteAnimateIn=
function(type,args,obj){obj.overlay.cfg.setProperty("xy",[x,y],true);obj.startX=x;obj.startY=y;obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire()};slide.handleStartAnimateOut=function(type,args,obj){var vw=Dom.getViewportWidth(),pos=Dom.getXY(obj.overlay.element),yso=pos[1];obj.animOut.attributes.points.to=[vw+25,yso]};slide.handleTweenAnimateOut=function(type,args,obj){var pos=Dom.getXY(obj.overlay.element),xto=pos[0],yto=pos[1];obj.overlay.cfg.setProperty("xy",[xto,yto],true);
obj.overlay.cfg.refireEvent("iframe")};slide.handleCompleteAnimateOut=function(type,args,obj){obj.overlay._setDomVisibility(false);obj.overlay.cfg.setProperty("xy",[x,y]);obj.animateOutCompleteEvent.fire()};slide.init();return slide};ContainerEffect.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=CustomEvent.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=CustomEvent.LIST;
this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=CustomEvent.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=CustomEvent.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,
this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this)},animateIn:function(){this.beforeAnimateInEvent.fire();this.animIn.animate()},animateOut:function(){this.beforeAnimateOutEvent.fire();this.animOut.animate()},handleStartAnimateIn:function(type,
args,obj){},handleTweenAnimateIn:function(type,args,obj){},handleCompleteAnimateIn:function(type,args,obj){},handleStartAnimateOut:function(type,args,obj){},handleTweenAnimateOut:function(type,args,obj){},handleCompleteAnimateOut:function(type,args,obj){},toString:function(){var output="ContainerEffect";if(this.overlay)output+=" ["+this.overlay.toString()+"]";return output}};YAHOO.lang.augmentProto(ContainerEffect,YAHOO.util.EventProvider)})();
YAHOO.register("container",YAHOO.widget.Module,{version:"2.8.0r4",build:"2449"});
(function(){var UA=YAHOO.env.ua,Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang,_DIV="DIV",_HD="hd",_BD="bd",_FT="ft",_LI="LI",_DISABLED="disabled",_MOUSEOVER="mouseover",_MOUSEOUT="mouseout",_MOUSEDOWN="mousedown",_MOUSEUP="mouseup",_CLICK="click",_KEYDOWN="keydown",_KEYUP="keyup",_KEYPRESS="keypress",_CLICK_TO_HIDE="clicktohide",_POSITION="position",_DYNAMIC="dynamic",_SHOW_DELAY="showdelay",_SELECTED="selected",_VISIBLE="visible",_UL="UL",_MENUMANAGER="MenuManager";YAHOO.widget.MenuManager=
function(){var m_bInitializedEventHandlers=false,m_oMenus={},m_oVisibleMenus={},m_oItems={},m_oEventTypes={"click":"clickEvent","mousedown":"mouseDownEvent","mouseup":"mouseUpEvent","mouseover":"mouseOverEvent","mouseout":"mouseOutEvent","keydown":"keyDownEvent","keyup":"keyUpEvent","keypress":"keyPressEvent","focus":"focusEvent","focusin":"focusEvent","blur":"blurEvent","focusout":"blurEvent"},m_oFocusedMenuItem=null;function getMenuRootElement(p_oElement){var oParentNode,returnVal;if(p_oElement&&
p_oElement.tagName)switch(p_oElement.tagName.toUpperCase()){case _DIV:oParentNode=p_oElement.parentNode;if((Dom.hasClass(p_oElement,_HD)||Dom.hasClass(p_oElement,_BD)||Dom.hasClass(p_oElement,_FT))&&oParentNode&&oParentNode.tagName&&oParentNode.tagName.toUpperCase()==_DIV)returnVal=oParentNode;else returnVal=p_oElement;break;case _LI:returnVal=p_oElement;break;default:oParentNode=p_oElement.parentNode;if(oParentNode)returnVal=getMenuRootElement(oParentNode);break}return returnVal}function onDOMEvent(p_oEvent){var oTarget=
Event.getTarget(p_oEvent),oElement=getMenuRootElement(oTarget),bFireEvent=true,sEventType=p_oEvent.type,sCustomEventType,sTagName,sId,oMenuItem,oMenu;if(oElement){sTagName=oElement.tagName.toUpperCase();if(sTagName==_LI){sId=oElement.id;if(sId&&m_oItems[sId]){oMenuItem=m_oItems[sId];oMenu=oMenuItem.parent}}else if(sTagName==_DIV)if(oElement.id)oMenu=m_oMenus[oElement.id]}if(oMenu){sCustomEventType=m_oEventTypes[sEventType];if(sEventType=="click"&&UA.gecko&&oMenu.platform!="mac"&&p_oEvent.button>0)bFireEvent=
false;if(bFireEvent&&oMenuItem&&!oMenuItem.cfg.getProperty(_DISABLED))oMenuItem[sCustomEventType].fire(p_oEvent);if(bFireEvent)oMenu[sCustomEventType].fire(p_oEvent,oMenuItem)}else if(sEventType==_MOUSEDOWN)for(var i in m_oVisibleMenus)if(Lang.hasOwnProperty(m_oVisibleMenus,i)){oMenu=m_oVisibleMenus[i];if(oMenu.cfg.getProperty(_CLICK_TO_HIDE)&&!(oMenu instanceof YAHOO.widget.MenuBar)&&oMenu.cfg.getProperty(_POSITION)==_DYNAMIC){oMenu.hide();if(UA.ie&&oTarget.focus)oTarget.setActive()}else{if(oMenu.cfg.getProperty(_SHOW_DELAY)>
0)oMenu._cancelShowDelay();if(oMenu.activeItem){oMenu.activeItem.blur();oMenu.activeItem.cfg.setProperty(_SELECTED,false);oMenu.activeItem=null}}}}function onMenuDestroy(p_sType,p_aArgs,p_oMenu){if(m_oMenus[p_oMenu.id])this.removeMenu(p_oMenu)}function onMenuFocus(p_sType,p_aArgs){var oItem=p_aArgs[1];if(oItem)m_oFocusedMenuItem=oItem}function onMenuBlur(p_sType,p_aArgs){m_oFocusedMenuItem=null}function onMenuVisibleConfigChange(p_sType,p_aArgs){var bVisible=p_aArgs[0],sId=this.id;if(bVisible)m_oVisibleMenus[sId]=
this;else if(m_oVisibleMenus[sId])delete m_oVisibleMenus[sId]}function onItemDestroy(p_sType,p_aArgs){removeItem(this)}function removeItem(p_oMenuItem){var sId=p_oMenuItem.id;if(sId&&m_oItems[sId]){if(m_oFocusedMenuItem==p_oMenuItem)m_oFocusedMenuItem=null;delete m_oItems[sId];p_oMenuItem.destroyEvent.unsubscribe(onItemDestroy)}}function onItemAdded(p_sType,p_aArgs){var oItem=p_aArgs[0],sId;if(oItem instanceof YAHOO.widget.MenuItem){sId=oItem.id;if(!m_oItems[sId]){m_oItems[sId]=oItem;oItem.destroyEvent.subscribe(onItemDestroy)}}}
return{addMenu:function(p_oMenu){var oDoc;if(p_oMenu instanceof YAHOO.widget.Menu&&p_oMenu.id&&!m_oMenus[p_oMenu.id]){m_oMenus[p_oMenu.id]=p_oMenu;if(!m_bInitializedEventHandlers){oDoc=document;Event.on(oDoc,_MOUSEOVER,onDOMEvent,this,true);Event.on(oDoc,_MOUSEOUT,onDOMEvent,this,true);Event.on(oDoc,_MOUSEDOWN,onDOMEvent,this,true);Event.on(oDoc,_MOUSEUP,onDOMEvent,this,true);Event.on(oDoc,_CLICK,onDOMEvent,this,true);Event.on(oDoc,_KEYDOWN,onDOMEvent,this,true);Event.on(oDoc,_KEYUP,onDOMEvent,this,
true);Event.on(oDoc,_KEYPRESS,onDOMEvent,this,true);Event.onFocus(oDoc,onDOMEvent,this,true);Event.onBlur(oDoc,onDOMEvent,this,true);m_bInitializedEventHandlers=true}p_oMenu.cfg.subscribeToConfigEvent(_VISIBLE,onMenuVisibleConfigChange);p_oMenu.destroyEvent.subscribe(onMenuDestroy,p_oMenu,this);p_oMenu.itemAddedEvent.subscribe(onItemAdded);p_oMenu.focusEvent.subscribe(onMenuFocus);p_oMenu.blurEvent.subscribe(onMenuBlur)}},removeMenu:function(p_oMenu){var sId,aItems,i;if(p_oMenu){sId=p_oMenu.id;if(sId in
m_oMenus&&m_oMenus[sId]==p_oMenu){aItems=p_oMenu.getItems();if(aItems&&aItems.length>0){i=aItems.length-1;do removeItem(aItems[i]);while(i--)}delete m_oMenus[sId];if(sId in m_oVisibleMenus&&m_oVisibleMenus[sId]==p_oMenu)delete m_oVisibleMenus[sId];if(p_oMenu.cfg)p_oMenu.cfg.unsubscribeFromConfigEvent(_VISIBLE,onMenuVisibleConfigChange);p_oMenu.destroyEvent.unsubscribe(onMenuDestroy,p_oMenu);p_oMenu.itemAddedEvent.unsubscribe(onItemAdded);p_oMenu.focusEvent.unsubscribe(onMenuFocus);p_oMenu.blurEvent.unsubscribe(onMenuBlur)}}},
hideVisible:function(){var oMenu;for(var i in m_oVisibleMenus)if(Lang.hasOwnProperty(m_oVisibleMenus,i)){oMenu=m_oVisibleMenus[i];if(!(oMenu instanceof YAHOO.widget.MenuBar)&&oMenu.cfg.getProperty(_POSITION)==_DYNAMIC)oMenu.hide()}},getVisible:function(){return m_oVisibleMenus},getMenus:function(){return m_oMenus},getMenu:function(p_sId){var returnVal;if(p_sId in m_oMenus)returnVal=m_oMenus[p_sId];return returnVal},getMenuItem:function(p_sId){var returnVal;if(p_sId in m_oItems)returnVal=m_oItems[p_sId];
return returnVal},getMenuItemGroup:function(p_sId){var oUL=Dom.get(p_sId),aItems,oNode,oItem,sId,returnVal;if(oUL&&oUL.tagName&&oUL.tagName.toUpperCase()==_UL){oNode=oUL.firstChild;if(oNode){aItems=[];do{sId=oNode.id;if(sId){oItem=this.getMenuItem(sId);if(oItem)aItems[aItems.length]=oItem}}while(oNode=oNode.nextSibling);if(aItems.length>0)returnVal=aItems}}return returnVal},getFocusedMenuItem:function(){return m_oFocusedMenuItem},getFocusedMenu:function(){var returnVal;if(m_oFocusedMenuItem)returnVal=
m_oFocusedMenuItem.parent.getRoot();return returnVal},toString:function(){return _MENUMANAGER}}}()})();
(function(){var Lang=YAHOO.lang,_MENU="Menu",_DIV_UPPERCASE="DIV",_DIV_LOWERCASE="div",_ID="id",_SELECT="SELECT",_XY="xy",_Y="y",_UL_UPPERCASE="UL",_UL_LOWERCASE="ul",_FIRST_OF_TYPE="first-of-type",_LI="LI",_OPTGROUP="OPTGROUP",_OPTION="OPTION",_DISABLED="disabled",_NONE="none",_SELECTED="selected",_GROUP_INDEX="groupindex",_INDEX="index",_SUBMENU="submenu",_VISIBLE="visible",_HIDE_DELAY="hidedelay",_POSITION="position",_DYNAMIC="dynamic",_STATIC="static",_DYNAMIC_STATIC=_DYNAMIC+","+_STATIC,_URL=
"url",_HASH="#",_TARGET="target",_MAX_HEIGHT="maxheight",_TOP_SCROLLBAR="topscrollbar",_BOTTOM_SCROLLBAR="bottomscrollbar",_UNDERSCORE="_",_TOP_SCROLLBAR_DISABLED=_TOP_SCROLLBAR+_UNDERSCORE+_DISABLED,_BOTTOM_SCROLLBAR_DISABLED=_BOTTOM_SCROLLBAR+_UNDERSCORE+_DISABLED,_MOUSEMOVE="mousemove",_SHOW_DELAY="showdelay",_SUBMENU_HIDE_DELAY="submenuhidedelay",_IFRAME="iframe",_CONSTRAIN_TO_VIEWPORT="constraintoviewport",_PREVENT_CONTEXT_OVERLAP="preventcontextoverlap",_SUBMENU_ALIGNMENT="submenualignment",
_AUTO_SUBMENU_DISPLAY="autosubmenudisplay",_CLICK_TO_HIDE="clicktohide",_CONTAINER="container",_SCROLL_INCREMENT="scrollincrement",_MIN_SCROLL_HEIGHT="minscrollheight",_CLASSNAME="classname",_SHADOW="shadow",_KEEP_OPEN="keepopen",_HD="hd",_HAS_TITLE="hastitle",_CONTEXT="context",_EMPTY_STRING="",_MOUSEDOWN="mousedown",_KEYDOWN="keydown",_HEIGHT="height",_WIDTH="width",_PX="px",_EFFECT="effect",_MONITOR_RESIZE="monitorresize",_DISPLAY="display",_BLOCK="block",_VISIBILITY="visibility",_ABSOLUTE="absolute",
_ZINDEX="zindex",_YUI_MENU_BODY_SCROLLED="yui-menu-body-scrolled",_NON_BREAKING_SPACE="&#32;",_SPACE=" ",_MOUSEOVER="mouseover",_MOUSEOUT="mouseout",_ITEM_ADDED="itemAdded",_ITEM_REMOVED="itemRemoved",_HIDDEN="hidden",_YUI_MENU_SHADOW="yui-menu-shadow",_YUI_MENU_SHADOW_VISIBLE=_YUI_MENU_SHADOW+"-visible",_YUI_MENU_SHADOW_YUI_MENU_SHADOW_VISIBLE=_YUI_MENU_SHADOW+_SPACE+_YUI_MENU_SHADOW_VISIBLE;YAHOO.widget.Menu=function(p_oElement,p_oConfig){if(p_oConfig){this.parent=p_oConfig.parent;this.lazyLoad=
p_oConfig.lazyLoad||p_oConfig.lazyload;this.itemData=p_oConfig.itemData||p_oConfig.itemdata}YAHOO.widget.Menu.superclass.constructor.call(this,p_oElement,p_oConfig)};function checkPosition(p_sPosition){var returnVal=false;if(Lang.isString(p_sPosition))returnVal=_DYNAMIC_STATIC.indexOf(p_sPosition.toLowerCase())!=-1;return returnVal}var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Module=YAHOO.widget.Module,Overlay=YAHOO.widget.Overlay,Menu=YAHOO.widget.Menu,MenuManager=YAHOO.widget.MenuManager,CustomEvent=
YAHOO.util.CustomEvent,UA=YAHOO.env.ua,m_oShadowTemplate,bFocusListenerInitialized=false,oFocusedElement,EVENT_TYPES=[["mouseOverEvent",_MOUSEOVER],["mouseOutEvent",_MOUSEOUT],["mouseDownEvent",_MOUSEDOWN],["mouseUpEvent","mouseup"],["clickEvent","click"],["keyPressEvent","keypress"],["keyDownEvent",_KEYDOWN],["keyUpEvent","keyup"],["focusEvent","focus"],["blurEvent","blur"],["itemAddedEvent",_ITEM_ADDED],["itemRemovedEvent",_ITEM_REMOVED]],VISIBLE_CONFIG={key:_VISIBLE,value:false,validator:Lang.isBoolean},
CONSTRAIN_TO_VIEWPORT_CONFIG={key:_CONSTRAIN_TO_VIEWPORT,value:true,validator:Lang.isBoolean,supercedes:[_IFRAME,"x",_Y,_XY]},PREVENT_CONTEXT_OVERLAP_CONFIG={key:_PREVENT_CONTEXT_OVERLAP,value:true,validator:Lang.isBoolean,supercedes:[_CONSTRAIN_TO_VIEWPORT]},POSITION_CONFIG={key:_POSITION,value:_DYNAMIC,validator:checkPosition,supercedes:[_VISIBLE,_IFRAME]},SUBMENU_ALIGNMENT_CONFIG={key:_SUBMENU_ALIGNMENT,value:["tl","tr"]},AUTO_SUBMENU_DISPLAY_CONFIG={key:_AUTO_SUBMENU_DISPLAY,value:true,validator:Lang.isBoolean,
suppressEvent:true},SHOW_DELAY_CONFIG={key:_SHOW_DELAY,value:250,validator:Lang.isNumber,suppressEvent:true},HIDE_DELAY_CONFIG={key:_HIDE_DELAY,value:0,validator:Lang.isNumber,suppressEvent:true},SUBMENU_HIDE_DELAY_CONFIG={key:_SUBMENU_HIDE_DELAY,value:250,validator:Lang.isNumber,suppressEvent:true},CLICK_TO_HIDE_CONFIG={key:_CLICK_TO_HIDE,value:true,validator:Lang.isBoolean,suppressEvent:true},CONTAINER_CONFIG={key:_CONTAINER,suppressEvent:true},SCROLL_INCREMENT_CONFIG={key:_SCROLL_INCREMENT,value:1,
validator:Lang.isNumber,supercedes:[_MAX_HEIGHT],suppressEvent:true},MIN_SCROLL_HEIGHT_CONFIG={key:_MIN_SCROLL_HEIGHT,value:90,validator:Lang.isNumber,supercedes:[_MAX_HEIGHT],suppressEvent:true},MAX_HEIGHT_CONFIG={key:_MAX_HEIGHT,value:0,validator:Lang.isNumber,supercedes:[_IFRAME],suppressEvent:true},CLASS_NAME_CONFIG={key:_CLASSNAME,value:null,validator:Lang.isString,suppressEvent:true},DISABLED_CONFIG={key:_DISABLED,value:false,validator:Lang.isBoolean,suppressEvent:true},SHADOW_CONFIG={key:_SHADOW,
value:true,validator:Lang.isBoolean,suppressEvent:true,supercedes:[_VISIBLE]},KEEP_OPEN_CONFIG={key:_KEEP_OPEN,value:false,validator:Lang.isBoolean};function onDocFocus(event){oFocusedElement=Event.getTarget(event)}YAHOO.lang.extend(Menu,Overlay,{CSS_CLASS_NAME:"yuimenu",ITEM_TYPE:null,GROUP_TITLE_TAG_NAME:"h6",OFF_SCREEN_POSITION:"-999em",_useHideDelay:false,_bHandledMouseOverEvent:false,_bHandledMouseOutEvent:false,_aGroupTitleElements:null,_aItemGroups:null,_aListElements:null,_nCurrentMouseX:0,
_bStopMouseEventHandlers:false,_sClassName:null,lazyLoad:false,itemData:null,activeItem:null,parent:null,srcElement:null,init:function(p_oElement,p_oConfig){this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];if(!this.ITEM_TYPE)this.ITEM_TYPE=YAHOO.widget.MenuItem;var oElement;if(Lang.isString(p_oElement))oElement=Dom.get(p_oElement);else if(p_oElement.tagName)oElement=p_oElement;if(oElement&&oElement.tagName)switch(oElement.tagName.toUpperCase()){case _DIV_UPPERCASE:this.srcElement=
oElement;if(!oElement.id)oElement.setAttribute(_ID,Dom.generateId());Menu.superclass.init.call(this,oElement);this.beforeInitEvent.fire(Menu);break;case _SELECT:this.srcElement=oElement;Menu.superclass.init.call(this,Dom.generateId());this.beforeInitEvent.fire(Menu);break}else{Menu.superclass.init.call(this,p_oElement);this.beforeInitEvent.fire(Menu)}if(this.element){Dom.addClass(this.element,this.CSS_CLASS_NAME);this.initEvent.subscribe(this._onInit);this.beforeRenderEvent.subscribe(this._onBeforeRender);
this.renderEvent.subscribe(this._onRender);this.beforeShowEvent.subscribe(this._onBeforeShow);this.hideEvent.subscribe(this._onHide);this.showEvent.subscribe(this._onShow);this.beforeHideEvent.subscribe(this._onBeforeHide);this.mouseOverEvent.subscribe(this._onMouseOver);this.mouseOutEvent.subscribe(this._onMouseOut);this.clickEvent.subscribe(this._onClick);this.keyDownEvent.subscribe(this._onKeyDown);this.keyPressEvent.subscribe(this._onKeyPress);this.blurEvent.subscribe(this._onBlur);if(!bFocusListenerInitialized){Event.onFocus(document,
onDocFocus);bFocusListenerInitialized=true}if(UA.gecko&&UA.gecko<1.9||UA.webkit)this.cfg.subscribeToConfigEvent(_Y,this._onYChange);if(p_oConfig)this.cfg.applyConfig(p_oConfig,true);MenuManager.addMenu(this);this.initEvent.fire(Menu)}},_initSubTree:function(){var oSrcElement=this.srcElement,sSrcElementTagName,nGroup,sGroupTitleTagName,oNode,aListElements,nListElements,i;if(oSrcElement){sSrcElementTagName=oSrcElement.tagName&&oSrcElement.tagName.toUpperCase();if(sSrcElementTagName==_DIV_UPPERCASE){oNode=
this.body.firstChild;if(oNode){nGroup=0;sGroupTitleTagName=this.GROUP_TITLE_TAG_NAME.toUpperCase();do if(oNode&&oNode.tagName)switch(oNode.tagName.toUpperCase()){case sGroupTitleTagName:this._aGroupTitleElements[nGroup]=oNode;break;case _UL_UPPERCASE:this._aListElements[nGroup]=oNode;this._aItemGroups[nGroup]=[];nGroup++;break}while(oNode=oNode.nextSibling);if(this._aListElements[0])Dom.addClass(this._aListElements[0],_FIRST_OF_TYPE)}}oNode=null;if(sSrcElementTagName)switch(sSrcElementTagName){case _DIV_UPPERCASE:aListElements=
this._aListElements;nListElements=aListElements.length;if(nListElements>0){i=nListElements-1;do{oNode=aListElements[i].firstChild;if(oNode){do if(oNode&&oNode.tagName&&oNode.tagName.toUpperCase()==_LI)this.addItem(new this.ITEM_TYPE(oNode,{parent:this}),i);while(oNode=oNode.nextSibling)}}while(i--)}break;case _SELECT:oNode=oSrcElement.firstChild;do if(oNode&&oNode.tagName)switch(oNode.tagName.toUpperCase()){case _OPTGROUP:case _OPTION:this.addItem(new this.ITEM_TYPE(oNode,{parent:this}));break}while(oNode=
oNode.nextSibling);break}}},_getFirstEnabledItem:function(){var aItems=this.getItems(),nItems=aItems.length,oItem,returnVal;for(var i=0;i<nItems;i++){oItem=aItems[i];if(oItem&&!oItem.cfg.getProperty(_DISABLED)&&oItem.element.style.display!=_NONE){returnVal=oItem;break}}return returnVal},_addItemToGroup:function(p_nGroupIndex,p_oItem,p_nItemIndex){var oItem,nGroupIndex,aGroup,oGroupItem,bAppend,oNextItemSibling,nItemIndex,returnVal;function getNextItemSibling(p_aArray,p_nStartIndex){return p_aArray[p_nStartIndex]||
getNextItemSibling(p_aArray,p_nStartIndex+1)}if(p_oItem instanceof this.ITEM_TYPE){oItem=p_oItem;oItem.parent=this}else if(Lang.isString(p_oItem))oItem=new this.ITEM_TYPE(p_oItem,{parent:this});else if(Lang.isObject(p_oItem)){p_oItem.parent=this;oItem=new this.ITEM_TYPE(p_oItem.text,p_oItem)}if(oItem){if(oItem.cfg.getProperty(_SELECTED))this.activeItem=oItem;nGroupIndex=Lang.isNumber(p_nGroupIndex)?p_nGroupIndex:0;aGroup=this._getItemGroup(nGroupIndex);if(!aGroup)aGroup=this._createItemGroup(nGroupIndex);
if(Lang.isNumber(p_nItemIndex)){bAppend=p_nItemIndex>=aGroup.length;if(aGroup[p_nItemIndex])aGroup.splice(p_nItemIndex,0,oItem);else aGroup[p_nItemIndex]=oItem;oGroupItem=aGroup[p_nItemIndex];if(oGroupItem){if(bAppend&&(!oGroupItem.element.parentNode||oGroupItem.element.parentNode.nodeType==11))this._aListElements[nGroupIndex].appendChild(oGroupItem.element);else{oNextItemSibling=getNextItemSibling(aGroup,p_nItemIndex+1);if(oNextItemSibling&&(!oGroupItem.element.parentNode||oGroupItem.element.parentNode.nodeType==
11))this._aListElements[nGroupIndex].insertBefore(oGroupItem.element,oNextItemSibling.element)}oGroupItem.parent=this;this._subscribeToItemEvents(oGroupItem);this._configureSubmenu(oGroupItem);this._updateItemProperties(nGroupIndex);this.itemAddedEvent.fire(oGroupItem);this.changeContentEvent.fire();returnVal=oGroupItem}}else{nItemIndex=aGroup.length;aGroup[nItemIndex]=oItem;oGroupItem=aGroup[nItemIndex];if(oGroupItem){if(!Dom.isAncestor(this._aListElements[nGroupIndex],oGroupItem.element))this._aListElements[nGroupIndex].appendChild(oGroupItem.element);
oGroupItem.element.setAttribute(_GROUP_INDEX,nGroupIndex);oGroupItem.element.setAttribute(_INDEX,nItemIndex);oGroupItem.parent=this;oGroupItem.index=nItemIndex;oGroupItem.groupIndex=nGroupIndex;this._subscribeToItemEvents(oGroupItem);this._configureSubmenu(oGroupItem);if(nItemIndex===0)Dom.addClass(oGroupItem.element,_FIRST_OF_TYPE);this.itemAddedEvent.fire(oGroupItem);this.changeContentEvent.fire();returnVal=oGroupItem}}}return returnVal},_removeItemFromGroupByIndex:function(p_nGroupIndex,p_nItemIndex){var nGroupIndex=
Lang.isNumber(p_nGroupIndex)?p_nGroupIndex:0,aGroup=this._getItemGroup(nGroupIndex),aArray,oItem,oUL;if(aGroup){aArray=aGroup.splice(p_nItemIndex,1);oItem=aArray[0];if(oItem){this._updateItemProperties(nGroupIndex);if(aGroup.length===0){oUL=this._aListElements[nGroupIndex];if(this.body&&oUL)this.body.removeChild(oUL);this._aItemGroups.splice(nGroupIndex,1);this._aListElements.splice(nGroupIndex,1);oUL=this._aListElements[0];if(oUL)Dom.addClass(oUL,_FIRST_OF_TYPE)}this.itemRemovedEvent.fire(oItem);
this.changeContentEvent.fire()}}return oItem},_removeItemFromGroupByValue:function(p_nGroupIndex,p_oItem){var aGroup=this._getItemGroup(p_nGroupIndex),nItems,nItemIndex,returnVal,i;if(aGroup){nItems=aGroup.length;nItemIndex=-1;if(nItems>0){i=nItems-1;do if(aGroup[i]==p_oItem){nItemIndex=i;break}while(i--);if(nItemIndex>-1)returnVal=this._removeItemFromGroupByIndex(p_nGroupIndex,nItemIndex)}}return returnVal},_updateItemProperties:function(p_nGroupIndex){var aGroup=this._getItemGroup(p_nGroupIndex),
nItems=aGroup.length,oItem,oLI,i;if(nItems>0){i=nItems-1;do{oItem=aGroup[i];if(oItem){oLI=oItem.element;oItem.index=i;oItem.groupIndex=p_nGroupIndex;oLI.setAttribute(_GROUP_INDEX,p_nGroupIndex);oLI.setAttribute(_INDEX,i);Dom.removeClass(oLI,_FIRST_OF_TYPE)}}while(i--);if(oLI)Dom.addClass(oLI,_FIRST_OF_TYPE)}},_createItemGroup:function(p_nIndex){var oUL,returnVal;if(!this._aItemGroups[p_nIndex]){this._aItemGroups[p_nIndex]=[];oUL=document.createElement(_UL_LOWERCASE);this._aListElements[p_nIndex]=
oUL;returnVal=this._aItemGroups[p_nIndex]}return returnVal},_getItemGroup:function(p_nIndex){var nIndex=Lang.isNumber(p_nIndex)?p_nIndex:0,aGroups=this._aItemGroups,returnVal;if(nIndex in aGroups)returnVal=aGroups[nIndex];return returnVal},_configureSubmenu:function(p_oItem){var oSubmenu=p_oItem.cfg.getProperty(_SUBMENU);if(oSubmenu){this.cfg.configChangedEvent.subscribe(this._onParentMenuConfigChange,oSubmenu,true);this.renderEvent.subscribe(this._onParentMenuRender,oSubmenu,true)}},_subscribeToItemEvents:function(p_oItem){p_oItem.destroyEvent.subscribe(this._onMenuItemDestroy,
p_oItem,this);p_oItem.cfg.configChangedEvent.subscribe(this._onMenuItemConfigChange,p_oItem,this)},_onVisibleChange:function(p_sType,p_aArgs){var bVisible=p_aArgs[0];if(bVisible)Dom.addClass(this.element,_VISIBLE);else Dom.removeClass(this.element,_VISIBLE)},_cancelHideDelay:function(){var oTimer=this.getRoot()._hideDelayTimer;if(oTimer)oTimer.cancel()},_execHideDelay:function(){this._cancelHideDelay();var oRoot=this.getRoot();oRoot._hideDelayTimer=Lang.later(oRoot.cfg.getProperty(_HIDE_DELAY),this,
function(){if(oRoot.activeItem){if(oRoot.hasFocus())oRoot.activeItem.focus();oRoot.clearActiveItem()}if(oRoot==this&&!(this instanceof YAHOO.widget.MenuBar)&&this.cfg.getProperty(_POSITION)==_DYNAMIC)this.hide()})},_cancelShowDelay:function(){var oTimer=this.getRoot()._showDelayTimer;if(oTimer)oTimer.cancel()},_execSubmenuHideDelay:function(p_oSubmenu,p_nMouseX,p_nHideDelay){p_oSubmenu._submenuHideDelayTimer=Lang.later(50,this,function(){if(this._nCurrentMouseX>p_nMouseX+10)p_oSubmenu._submenuHideDelayTimer=
Lang.later(p_nHideDelay,p_oSubmenu,function(){this.hide()});else p_oSubmenu.hide()})},_disableScrollHeader:function(){if(!this._bHeaderDisabled){Dom.addClass(this.header,_TOP_SCROLLBAR_DISABLED);this._bHeaderDisabled=true}},_disableScrollFooter:function(){if(!this._bFooterDisabled){Dom.addClass(this.footer,_BOTTOM_SCROLLBAR_DISABLED);this._bFooterDisabled=true}},_enableScrollHeader:function(){if(this._bHeaderDisabled){Dom.removeClass(this.header,_TOP_SCROLLBAR_DISABLED);this._bHeaderDisabled=false}},
_enableScrollFooter:function(){if(this._bFooterDisabled){Dom.removeClass(this.footer,_BOTTOM_SCROLLBAR_DISABLED);this._bFooterDisabled=false}},_onMouseOver:function(p_sType,p_aArgs){var oEvent=p_aArgs[0],oItem=p_aArgs[1],oTarget=Event.getTarget(oEvent),oRoot=this.getRoot(),oSubmenuHideDelayTimer=this._submenuHideDelayTimer,oParentMenu,nShowDelay,bShowDelay,oActiveItem,oItemCfg,oSubmenu;var showSubmenu=function(){if(this.parent.cfg.getProperty(_SELECTED))this.show()};if(!this._bStopMouseEventHandlers){if(!this._bHandledMouseOverEvent&&
(oTarget==this.element||Dom.isAncestor(this.element,oTarget))){if(this._useHideDelay)this._cancelHideDelay();this._nCurrentMouseX=0;Event.on(this.element,_MOUSEMOVE,this._onMouseMove,this,true);if(!(oItem&&Dom.isAncestor(oItem.element,Event.getRelatedTarget(oEvent))))this.clearActiveItem();if(this.parent&&oSubmenuHideDelayTimer){oSubmenuHideDelayTimer.cancel();this.parent.cfg.setProperty(_SELECTED,true);oParentMenu=this.parent.parent;oParentMenu._bHandledMouseOutEvent=true;oParentMenu._bHandledMouseOverEvent=
false}this._bHandledMouseOverEvent=true;this._bHandledMouseOutEvent=false}if(oItem&&!oItem.handledMouseOverEvent&&!oItem.cfg.getProperty(_DISABLED)&&(oTarget==oItem.element||Dom.isAncestor(oItem.element,oTarget))){nShowDelay=this.cfg.getProperty(_SHOW_DELAY);bShowDelay=nShowDelay>0;if(bShowDelay)this._cancelShowDelay();oActiveItem=this.activeItem;if(oActiveItem)oActiveItem.cfg.setProperty(_SELECTED,false);oItemCfg=oItem.cfg;oItemCfg.setProperty(_SELECTED,true);if(this.hasFocus()||oRoot._hasFocus){oItem.focus();
oRoot._hasFocus=false}if(this.cfg.getProperty(_AUTO_SUBMENU_DISPLAY)){oSubmenu=oItemCfg.getProperty(_SUBMENU);if(oSubmenu)if(bShowDelay)oRoot._showDelayTimer=Lang.later(oRoot.cfg.getProperty(_SHOW_DELAY),oSubmenu,showSubmenu);else oSubmenu.show()}oItem.handledMouseOverEvent=true;oItem.handledMouseOutEvent=false}}},_onMouseOut:function(p_sType,p_aArgs){var oEvent=p_aArgs[0],oItem=p_aArgs[1],oRelatedTarget=Event.getRelatedTarget(oEvent),bMovingToSubmenu=false,oItemCfg,oSubmenu,nSubmenuHideDelay,nShowDelay;
if(!this._bStopMouseEventHandlers){if(oItem&&!oItem.cfg.getProperty(_DISABLED)){oItemCfg=oItem.cfg;oSubmenu=oItemCfg.getProperty(_SUBMENU);if(oSubmenu&&(oRelatedTarget==oSubmenu.element||Dom.isAncestor(oSubmenu.element,oRelatedTarget)))bMovingToSubmenu=true;if(!oItem.handledMouseOutEvent&&(oRelatedTarget!=oItem.element&&!Dom.isAncestor(oItem.element,oRelatedTarget)||bMovingToSubmenu)){if(!bMovingToSubmenu){oItem.cfg.setProperty(_SELECTED,false);if(oSubmenu){nSubmenuHideDelay=this.cfg.getProperty(_SUBMENU_HIDE_DELAY);
nShowDelay=this.cfg.getProperty(_SHOW_DELAY);if(!(this instanceof YAHOO.widget.MenuBar)&&nSubmenuHideDelay>0&&nShowDelay>=nSubmenuHideDelay)this._execSubmenuHideDelay(oSubmenu,Event.getPageX(oEvent),nSubmenuHideDelay);else oSubmenu.hide()}}oItem.handledMouseOutEvent=true;oItem.handledMouseOverEvent=false}}if(!this._bHandledMouseOutEvent&&(oRelatedTarget!=this.element&&!Dom.isAncestor(this.element,oRelatedTarget)||bMovingToSubmenu)){if(this._useHideDelay)this._execHideDelay();Event.removeListener(this.element,
_MOUSEMOVE,this._onMouseMove);this._nCurrentMouseX=Event.getPageX(oEvent);this._bHandledMouseOutEvent=true;this._bHandledMouseOverEvent=false}}},_onMouseMove:function(p_oEvent,p_oMenu){if(!this._bStopMouseEventHandlers)this._nCurrentMouseX=Event.getPageX(p_oEvent)},_onClick:function(p_sType,p_aArgs){var oEvent=p_aArgs[0],oItem=p_aArgs[1],bInMenuAnchor=false,oSubmenu,oMenu,oRoot,sId,sURL,nHashPos,nLen;var hide=function(){oRoot=this.getRoot();if(oRoot instanceof YAHOO.widget.MenuBar||oRoot.cfg.getProperty(_POSITION)==
_STATIC)oRoot.clearActiveItem();else oRoot.hide()};if(oItem)if(oItem.cfg.getProperty(_DISABLED)){Event.preventDefault(oEvent);hide.call(this)}else{oSubmenu=oItem.cfg.getProperty(_SUBMENU);sURL=oItem.cfg.getProperty(_URL);if(sURL){nHashPos=sURL.indexOf(_HASH);nLen=sURL.length;if(nHashPos!=-1){sURL=sURL.substr(nHashPos,nLen);nLen=sURL.length;if(nLen>1){sId=sURL.substr(1,nLen);oMenu=YAHOO.widget.MenuManager.getMenu(sId);if(oMenu)bInMenuAnchor=this.getRoot()===oMenu.getRoot()}else if(nLen===1)bInMenuAnchor=
true}}if(bInMenuAnchor&&!oItem.cfg.getProperty(_TARGET)){Event.preventDefault(oEvent);if(UA.webkit)oItem.focus();else oItem.focusEvent.fire()}if(!oSubmenu&&!this.cfg.getProperty(_KEEP_OPEN))hide.call(this)}},_onKeyDown:function(p_sType,p_aArgs){var oEvent=p_aArgs[0],oItem=p_aArgs[1],oSubmenu,oItemCfg,oParentItem,oRoot,oNextItem,oBody,nBodyScrollTop,nBodyOffsetHeight,aItems,nItems,nNextItemOffsetTop,nScrollTarget,oParentMenu,oFocusedEl;if(this._useHideDelay)this._cancelHideDelay();function stopMouseEventHandlers(){this._bStopMouseEventHandlers=
true;Lang.later(10,this,function(){this._bStopMouseEventHandlers=false})}if(oItem&&!oItem.cfg.getProperty(_DISABLED)){oItemCfg=oItem.cfg;oParentItem=this.parent;switch(oEvent.keyCode){case 38:case 40:oNextItem=oEvent.keyCode==38?oItem.getPreviousEnabledSibling():oItem.getNextEnabledSibling();if(oNextItem){this.clearActiveItem();oNextItem.cfg.setProperty(_SELECTED,true);oNextItem.focus();if(this.cfg.getProperty(_MAX_HEIGHT)>0){oBody=this.body;nBodyScrollTop=oBody.scrollTop;nBodyOffsetHeight=oBody.offsetHeight;
aItems=this.getItems();nItems=aItems.length-1;nNextItemOffsetTop=oNextItem.element.offsetTop;if(oEvent.keyCode==40){if(nNextItemOffsetTop>=nBodyOffsetHeight+nBodyScrollTop)oBody.scrollTop=nNextItemOffsetTop-nBodyOffsetHeight;else if(nNextItemOffsetTop<=nBodyScrollTop)oBody.scrollTop=0;if(oNextItem==aItems[nItems])oBody.scrollTop=oNextItem.element.offsetTop}else{if(nNextItemOffsetTop<=nBodyScrollTop)oBody.scrollTop=nNextItemOffsetTop-oNextItem.element.offsetHeight;else if(nNextItemOffsetTop>=nBodyScrollTop+
nBodyOffsetHeight)oBody.scrollTop=nNextItemOffsetTop;if(oNextItem==aItems[0])oBody.scrollTop=0}nBodyScrollTop=oBody.scrollTop;nScrollTarget=oBody.scrollHeight-oBody.offsetHeight;if(nBodyScrollTop===0){this._disableScrollHeader();this._enableScrollFooter()}else if(nBodyScrollTop==nScrollTarget){this._enableScrollHeader();this._disableScrollFooter()}else{this._enableScrollHeader();this._enableScrollFooter()}}}Event.preventDefault(oEvent);stopMouseEventHandlers();break;case 39:oSubmenu=oItemCfg.getProperty(_SUBMENU);
if(oSubmenu){if(!oItemCfg.getProperty(_SELECTED))oItemCfg.setProperty(_SELECTED,true);oSubmenu.show();oSubmenu.setInitialFocus();oSubmenu.setInitialSelection()}else{oRoot=this.getRoot();if(oRoot instanceof YAHOO.widget.MenuBar){oNextItem=oRoot.activeItem.getNextEnabledSibling();if(oNextItem){oRoot.clearActiveItem();oNextItem.cfg.setProperty(_SELECTED,true);oSubmenu=oNextItem.cfg.getProperty(_SUBMENU);if(oSubmenu){oSubmenu.show();oSubmenu.setInitialFocus()}else oNextItem.focus()}}}Event.preventDefault(oEvent);
stopMouseEventHandlers();break;case 37:if(oParentItem){oParentMenu=oParentItem.parent;if(oParentMenu instanceof YAHOO.widget.MenuBar){oNextItem=oParentMenu.activeItem.getPreviousEnabledSibling();if(oNextItem){oParentMenu.clearActiveItem();oNextItem.cfg.setProperty(_SELECTED,true);oSubmenu=oNextItem.cfg.getProperty(_SUBMENU);if(oSubmenu){oSubmenu.show();oSubmenu.setInitialFocus()}else oNextItem.focus()}}else{this.hide();oParentItem.focus()}}Event.preventDefault(oEvent);stopMouseEventHandlers();break}}if(oEvent.keyCode==
27){if(this.cfg.getProperty(_POSITION)==_DYNAMIC){this.hide();if(this.parent)this.parent.focus();else{oFocusedEl=this._focusedElement;if(oFocusedEl&&oFocusedEl.focus)try{oFocusedEl.focus()}catch(ex){}}}else if(this.activeItem){oSubmenu=this.activeItem.cfg.getProperty(_SUBMENU);if(oSubmenu&&oSubmenu.cfg.getProperty(_VISIBLE)){oSubmenu.hide();this.activeItem.focus()}else{this.activeItem.blur();this.activeItem.cfg.setProperty(_SELECTED,false)}}Event.preventDefault(oEvent)}},_onKeyPress:function(p_sType,
p_aArgs){var oEvent=p_aArgs[0];if(oEvent.keyCode==40||oEvent.keyCode==38)Event.preventDefault(oEvent)},_onBlur:function(p_sType,p_aArgs){if(this._hasFocus)this._hasFocus=false},_onYChange:function(p_sType,p_aArgs){var oParent=this.parent,nScrollTop,oIFrame,nY;if(oParent){nScrollTop=oParent.parent.body.scrollTop;if(nScrollTop>0){nY=this.cfg.getProperty(_Y)-nScrollTop;Dom.setY(this.element,nY);oIFrame=this.iframe;if(oIFrame)Dom.setY(oIFrame,nY);this.cfg.setProperty(_Y,nY,true)}}},_onScrollTargetMouseOver:function(p_oEvent,
p_oMenu){var oBodyScrollTimer=this._bodyScrollTimer;if(oBodyScrollTimer)oBodyScrollTimer.cancel();this._cancelHideDelay();var oTarget=Event.getTarget(p_oEvent),oBody=this.body,nScrollIncrement=this.cfg.getProperty(_SCROLL_INCREMENT),nScrollTarget,fnScrollFunction;function scrollBodyDown(){var nScrollTop=oBody.scrollTop;if(nScrollTop<nScrollTarget){oBody.scrollTop=nScrollTop+nScrollIncrement;this._enableScrollHeader()}else{oBody.scrollTop=nScrollTarget;this._bodyScrollTimer.cancel();this._disableScrollFooter()}}
function scrollBodyUp(){var nScrollTop=oBody.scrollTop;if(nScrollTop>0){oBody.scrollTop=nScrollTop-nScrollIncrement;this._enableScrollFooter()}else{oBody.scrollTop=0;this._bodyScrollTimer.cancel();this._disableScrollHeader()}}if(Dom.hasClass(oTarget,_HD))fnScrollFunction=scrollBodyUp;else{nScrollTarget=oBody.scrollHeight-oBody.offsetHeight;fnScrollFunction=scrollBodyDown}this._bodyScrollTimer=Lang.later(10,this,fnScrollFunction,null,true)},_onScrollTargetMouseOut:function(p_oEvent,p_oMenu){var oBodyScrollTimer=
this._bodyScrollTimer;if(oBodyScrollTimer)oBodyScrollTimer.cancel();this._cancelHideDelay()},_onInit:function(p_sType,p_aArgs){this.cfg.subscribeToConfigEvent(_VISIBLE,this._onVisibleChange);var bRootMenu=!this.parent,bLazyLoad=this.lazyLoad;if((bRootMenu&&!bLazyLoad||bRootMenu&&(this.cfg.getProperty(_VISIBLE)||this.cfg.getProperty(_POSITION)==_STATIC)||!bRootMenu&&!bLazyLoad)&&this.getItemGroups().length===0){if(this.srcElement)this._initSubTree();if(this.itemData)this.addItems(this.itemData)}else if(bLazyLoad)this.cfg.fireQueue()},
_onBeforeRender:function(p_sType,p_aArgs){var oEl=this.element,nListElements=this._aListElements.length,bFirstList=true,i=0,oUL,oGroupTitle;if(nListElements>0){do{oUL=this._aListElements[i];if(oUL){if(bFirstList){Dom.addClass(oUL,_FIRST_OF_TYPE);bFirstList=false}if(!Dom.isAncestor(oEl,oUL))this.appendToBody(oUL);oGroupTitle=this._aGroupTitleElements[i];if(oGroupTitle){if(!Dom.isAncestor(oEl,oGroupTitle))oUL.parentNode.insertBefore(oGroupTitle,oUL);Dom.addClass(oUL,_HAS_TITLE)}}i++}while(i<nListElements)
}},_onRender:function(p_sType,p_aArgs){if(this.cfg.getProperty(_POSITION)==_DYNAMIC)if(!this.cfg.getProperty(_VISIBLE))this.positionOffScreen()},_onBeforeShow:function(p_sType,p_aArgs){var nOptions,n,oSrcElement,oContainer=this.cfg.getProperty(_CONTAINER);if(this.lazyLoad&&this.getItemGroups().length===0){if(this.srcElement)this._initSubTree();if(this.itemData)if(this.parent&&this.parent.parent&&this.parent.parent.srcElement&&this.parent.parent.srcElement.tagName.toUpperCase()==_SELECT){nOptions=
this.itemData.length;for(n=0;n<nOptions;n++)if(this.itemData[n].tagName)this.addItem(new this.ITEM_TYPE(this.itemData[n]))}else this.addItems(this.itemData);oSrcElement=this.srcElement;if(oSrcElement)if(oSrcElement.tagName.toUpperCase()==_SELECT)if(Dom.inDocument(oSrcElement))this.render(oSrcElement.parentNode);else this.render(oContainer);else this.render();else if(this.parent)this.render(this.parent.element);else this.render(oContainer)}var oParent=this.parent,aAlignment;if(!oParent&&this.cfg.getProperty(_POSITION)==
_DYNAMIC)this.cfg.refireEvent(_XY);if(oParent){aAlignment=oParent.parent.cfg.getProperty(_SUBMENU_ALIGNMENT);this.cfg.setProperty(_CONTEXT,[oParent.element,aAlignment[0],aAlignment[1]]);this.align()}},getConstrainedY:function(y){var oMenu=this,aContext=oMenu.cfg.getProperty(_CONTEXT),nInitialMaxHeight=oMenu.cfg.getProperty(_MAX_HEIGHT),nMaxHeight,oOverlapPositions={"trbr":true,"tlbl":true,"bltl":true,"brtr":true},bPotentialContextOverlap=aContext&&oOverlapPositions[aContext[1]+aContext[2]],oMenuEl=
oMenu.element,nMenuOffsetHeight=oMenuEl.offsetHeight,nViewportOffset=Overlay.VIEWPORT_OFFSET,viewPortHeight=Dom.getViewportHeight(),scrollY=Dom.getDocumentScrollTop(),bCanConstrain=oMenu.cfg.getProperty(_MIN_SCROLL_HEIGHT)+nViewportOffset<viewPortHeight,nAvailableHeight,oContextEl,nContextElY,nContextElHeight,bFlipped=false,nTopRegionHeight,nBottomRegionHeight,topConstraint=scrollY+nViewportOffset,bottomConstraint=scrollY+viewPortHeight-nMenuOffsetHeight-nViewportOffset,yNew=y;var flipVertical=function(){var nNewY;
if(oMenu.cfg.getProperty(_Y)-scrollY>nContextElY)nNewY=nContextElY-nMenuOffsetHeight;else nNewY=nContextElY+nContextElHeight;oMenu.cfg.setProperty(_Y,nNewY+scrollY,true);return nNewY};var getDisplayRegionHeight=function(){if(oMenu.cfg.getProperty(_Y)-scrollY>nContextElY)return nBottomRegionHeight-nViewportOffset;else return nTopRegionHeight-nViewportOffset};var alignY=function(){var nNewY;if(oMenu.cfg.getProperty(_Y)-scrollY>nContextElY)nNewY=nContextElY+nContextElHeight;else nNewY=nContextElY-oMenuEl.offsetHeight;
oMenu.cfg.setProperty(_Y,nNewY+scrollY,true)};var resetMaxHeight=function(){oMenu._setScrollHeight(this.cfg.getProperty(_MAX_HEIGHT));oMenu.hideEvent.unsubscribe(resetMaxHeight)};var setVerticalPosition=function(){var nDisplayRegionHeight=getDisplayRegionHeight(),bMenuHasItems=oMenu.getItems().length>0,nMenuMinScrollHeight,fnReturnVal;if(nMenuOffsetHeight>nDisplayRegionHeight){nMenuMinScrollHeight=bMenuHasItems?oMenu.cfg.getProperty(_MIN_SCROLL_HEIGHT):nMenuOffsetHeight;if(nDisplayRegionHeight>nMenuMinScrollHeight&&
bMenuHasItems)nMaxHeight=nDisplayRegionHeight;else nMaxHeight=nInitialMaxHeight;oMenu._setScrollHeight(nMaxHeight);oMenu.hideEvent.subscribe(resetMaxHeight);alignY();if(nDisplayRegionHeight<nMenuMinScrollHeight)if(bFlipped)flipVertical();else{flipVertical();bFlipped=true;fnReturnVal=setVerticalPosition()}}else if(nMaxHeight&&nMaxHeight!==nInitialMaxHeight){oMenu._setScrollHeight(nInitialMaxHeight);oMenu.hideEvent.subscribe(resetMaxHeight);alignY()}return fnReturnVal};if(y<topConstraint||y>bottomConstraint)if(bCanConstrain)if(oMenu.cfg.getProperty(_PREVENT_CONTEXT_OVERLAP)&&
bPotentialContextOverlap){oContextEl=aContext[0];nContextElHeight=oContextEl.offsetHeight;nContextElY=Dom.getY(oContextEl)-scrollY;nTopRegionHeight=nContextElY;nBottomRegionHeight=viewPortHeight-(nContextElY+nContextElHeight);setVerticalPosition();yNew=oMenu.cfg.getProperty(_Y)}else if(!(oMenu instanceof YAHOO.widget.MenuBar)&&nMenuOffsetHeight>=viewPortHeight){nAvailableHeight=viewPortHeight-nViewportOffset*2;if(nAvailableHeight>oMenu.cfg.getProperty(_MIN_SCROLL_HEIGHT)){oMenu._setScrollHeight(nAvailableHeight);
oMenu.hideEvent.subscribe(resetMaxHeight);alignY();yNew=oMenu.cfg.getProperty(_Y)}}else if(y<topConstraint)yNew=topConstraint;else{if(y>bottomConstraint)yNew=bottomConstraint}else yNew=nViewportOffset+scrollY;return yNew},_onHide:function(p_sType,p_aArgs){if(this.cfg.getProperty(_POSITION)===_DYNAMIC)this.positionOffScreen()},_onShow:function(p_sType,p_aArgs){var oParent=this.parent,oParentMenu,oElement,nOffsetWidth,sWidth;function disableAutoSubmenuDisplay(p_oEvent){var oTarget;if(p_oEvent.type==
_MOUSEDOWN||p_oEvent.type==_KEYDOWN&&p_oEvent.keyCode==27){oTarget=Event.getTarget(p_oEvent);if(oTarget!=oParentMenu.element||!Dom.isAncestor(oParentMenu.element,oTarget)){oParentMenu.cfg.setProperty(_AUTO_SUBMENU_DISPLAY,false);Event.removeListener(document,_MOUSEDOWN,disableAutoSubmenuDisplay);Event.removeListener(document,_KEYDOWN,disableAutoSubmenuDisplay)}}}function onSubmenuHide(p_sType,p_aArgs,p_sWidth){this.cfg.setProperty(_WIDTH,_EMPTY_STRING);this.hideEvent.unsubscribe(onSubmenuHide,p_sWidth)}
if(oParent){oParentMenu=oParent.parent;if(!oParentMenu.cfg.getProperty(_AUTO_SUBMENU_DISPLAY)&&(oParentMenu instanceof YAHOO.widget.MenuBar||oParentMenu.cfg.getProperty(_POSITION)==_STATIC)){oParentMenu.cfg.setProperty(_AUTO_SUBMENU_DISPLAY,true);Event.on(document,_MOUSEDOWN,disableAutoSubmenuDisplay);Event.on(document,_KEYDOWN,disableAutoSubmenuDisplay)}if(this.cfg.getProperty("x")<oParentMenu.cfg.getProperty("x")&&UA.gecko&&UA.gecko<1.9&&!this.cfg.getProperty(_WIDTH)){oElement=this.element;nOffsetWidth=
oElement.offsetWidth;oElement.style.width=nOffsetWidth+_PX;sWidth=nOffsetWidth-(oElement.offsetWidth-nOffsetWidth)+_PX;this.cfg.setProperty(_WIDTH,sWidth);this.hideEvent.subscribe(onSubmenuHide,sWidth)}}if(this===this.getRoot()&&this.cfg.getProperty(_POSITION)===_DYNAMIC){this._focusedElement=oFocusedElement;this.focus()}},_onBeforeHide:function(p_sType,p_aArgs){var oActiveItem=this.activeItem,oRoot=this.getRoot(),oConfig,oSubmenu;if(oActiveItem){oConfig=oActiveItem.cfg;oConfig.setProperty(_SELECTED,
false);oSubmenu=oConfig.getProperty(_SUBMENU);if(oSubmenu)oSubmenu.hide()}if(UA.ie&&this.cfg.getProperty(_POSITION)===_DYNAMIC&&this.parent)oRoot._hasFocus=this.hasFocus();if(oRoot==this)oRoot.blur()},_onParentMenuConfigChange:function(p_sType,p_aArgs,p_oSubmenu){var sPropertyName=p_aArgs[0][0],oPropertyValue=p_aArgs[0][1];switch(sPropertyName){case _IFRAME:case _CONSTRAIN_TO_VIEWPORT:case _HIDE_DELAY:case _SHOW_DELAY:case _SUBMENU_HIDE_DELAY:case _CLICK_TO_HIDE:case _EFFECT:case _CLASSNAME:case _SCROLL_INCREMENT:case _MAX_HEIGHT:case _MIN_SCROLL_HEIGHT:case _MONITOR_RESIZE:case _SHADOW:case _PREVENT_CONTEXT_OVERLAP:case _KEEP_OPEN:p_oSubmenu.cfg.setProperty(sPropertyName,
oPropertyValue);break;case _SUBMENU_ALIGNMENT:if(!(this.parent.parent instanceof YAHOO.widget.MenuBar))p_oSubmenu.cfg.setProperty(sPropertyName,oPropertyValue);break}},_onParentMenuRender:function(p_sType,p_aArgs,p_oSubmenu){var oParentMenu=p_oSubmenu.parent.parent,oParentCfg=oParentMenu.cfg,oConfig={constraintoviewport:oParentCfg.getProperty(_CONSTRAIN_TO_VIEWPORT),xy:[0,0],clicktohide:oParentCfg.getProperty(_CLICK_TO_HIDE),effect:oParentCfg.getProperty(_EFFECT),showdelay:oParentCfg.getProperty(_SHOW_DELAY),
hidedelay:oParentCfg.getProperty(_HIDE_DELAY),submenuhidedelay:oParentCfg.getProperty(_SUBMENU_HIDE_DELAY),classname:oParentCfg.getProperty(_CLASSNAME),scrollincrement:oParentCfg.getProperty(_SCROLL_INCREMENT),maxheight:oParentCfg.getProperty(_MAX_HEIGHT),minscrollheight:oParentCfg.getProperty(_MIN_SCROLL_HEIGHT),iframe:oParentCfg.getProperty(_IFRAME),shadow:oParentCfg.getProperty(_SHADOW),preventcontextoverlap:oParentCfg.getProperty(_PREVENT_CONTEXT_OVERLAP),monitorresize:oParentCfg.getProperty(_MONITOR_RESIZE),
keepopen:oParentCfg.getProperty(_KEEP_OPEN)},oLI;if(!(oParentMenu instanceof YAHOO.widget.MenuBar))oConfig[_SUBMENU_ALIGNMENT]=oParentCfg.getProperty(_SUBMENU_ALIGNMENT);p_oSubmenu.cfg.applyConfig(oConfig);if(!this.lazyLoad){oLI=this.parent.element;if(this.element.parentNode==oLI)this.render();else this.render(oLI)}},_onMenuItemDestroy:function(p_sType,p_aArgs,p_oItem){this._removeItemFromGroupByValue(p_oItem.groupIndex,p_oItem)},_onMenuItemConfigChange:function(p_sType,p_aArgs,p_oItem){var sPropertyName=
p_aArgs[0][0],oPropertyValue=p_aArgs[0][1],oSubmenu;switch(sPropertyName){case _SELECTED:if(oPropertyValue===true)this.activeItem=p_oItem;break;case _SUBMENU:oSubmenu=p_aArgs[0][1];if(oSubmenu)this._configureSubmenu(p_oItem);break}},configVisible:function(p_sType,p_aArgs,p_oMenu){var bVisible,sDisplay;if(this.cfg.getProperty(_POSITION)==_DYNAMIC)Menu.superclass.configVisible.call(this,p_sType,p_aArgs,p_oMenu);else{bVisible=p_aArgs[0];sDisplay=Dom.getStyle(this.element,_DISPLAY);Dom.setStyle(this.element,
_VISIBILITY,_VISIBLE);if(bVisible){if(sDisplay!=_BLOCK){this.beforeShowEvent.fire();Dom.setStyle(this.element,_DISPLAY,_BLOCK);this.showEvent.fire()}}else if(sDisplay==_BLOCK){this.beforeHideEvent.fire();Dom.setStyle(this.element,_DISPLAY,_NONE);this.hideEvent.fire()}}},configPosition:function(p_sType,p_aArgs,p_oMenu){var oElement=this.element,sCSSPosition=p_aArgs[0]==_STATIC?_STATIC:_ABSOLUTE,oCfg=this.cfg,nZIndex;Dom.setStyle(oElement,_POSITION,sCSSPosition);if(sCSSPosition==_STATIC){Dom.setStyle(oElement,
_DISPLAY,_BLOCK);oCfg.setProperty(_VISIBLE,true)}else Dom.setStyle(oElement,_VISIBILITY,_HIDDEN);if(sCSSPosition==_ABSOLUTE){nZIndex=oCfg.getProperty(_ZINDEX);if(!nZIndex||nZIndex===0)oCfg.setProperty(_ZINDEX,1)}},configIframe:function(p_sType,p_aArgs,p_oMenu){if(this.cfg.getProperty(_POSITION)==_DYNAMIC)Menu.superclass.configIframe.call(this,p_sType,p_aArgs,p_oMenu)},configHideDelay:function(p_sType,p_aArgs,p_oMenu){var nHideDelay=p_aArgs[0];this._useHideDelay=nHideDelay>0},configContainer:function(p_sType,
p_aArgs,p_oMenu){var oElement=p_aArgs[0];if(Lang.isString(oElement))this.cfg.setProperty(_CONTAINER,Dom.get(oElement),true)},_clearSetWidthFlag:function(){this._widthSetForScroll=false;this.cfg.unsubscribeFromConfigEvent(_WIDTH,this._clearSetWidthFlag)},_setScrollHeight:function(p_nScrollHeight){var nScrollHeight=p_nScrollHeight,bRefireIFrameAndShadow=false,bSetWidth=false,oElement,oBody,oHeader,oFooter,fnMouseOver,fnMouseOut,nMinScrollHeight,nHeight,nOffsetWidth,sWidth;if(this.getItems().length>
0){oElement=this.element;oBody=this.body;oHeader=this.header;oFooter=this.footer;fnMouseOver=this._onScrollTargetMouseOver;fnMouseOut=this._onScrollTargetMouseOut;nMinScrollHeight=this.cfg.getProperty(_MIN_SCROLL_HEIGHT);if(nScrollHeight>0&&nScrollHeight<nMinScrollHeight)nScrollHeight=nMinScrollHeight;Dom.setStyle(oBody,_HEIGHT,_EMPTY_STRING);Dom.removeClass(oBody,_YUI_MENU_BODY_SCROLLED);oBody.scrollTop=0;bSetWidth=UA.gecko&&UA.gecko<1.9||UA.ie;if(nScrollHeight>0&&bSetWidth&&!this.cfg.getProperty(_WIDTH)){nOffsetWidth=
oElement.offsetWidth;oElement.style.width=nOffsetWidth+_PX;sWidth=nOffsetWidth-(oElement.offsetWidth-nOffsetWidth)+_PX;this.cfg.unsubscribeFromConfigEvent(_WIDTH,this._clearSetWidthFlag);this.cfg.setProperty(_WIDTH,sWidth);this._widthSetForScroll=true;this.cfg.subscribeToConfigEvent(_WIDTH,this._clearSetWidthFlag)}if(nScrollHeight>0&&!oHeader&&!oFooter){this.setHeader(_NON_BREAKING_SPACE);this.setFooter(_NON_BREAKING_SPACE);oHeader=this.header;oFooter=this.footer;Dom.addClass(oHeader,_TOP_SCROLLBAR);
Dom.addClass(oFooter,_BOTTOM_SCROLLBAR);oElement.insertBefore(oHeader,oBody);oElement.appendChild(oFooter)}nHeight=nScrollHeight;if(oHeader&&oFooter)nHeight=nHeight-(oHeader.offsetHeight+oFooter.offsetHeight);if(nHeight>0&&oBody.offsetHeight>nScrollHeight){Dom.addClass(oBody,_YUI_MENU_BODY_SCROLLED);Dom.setStyle(oBody,_HEIGHT,nHeight+_PX);if(!this._hasScrollEventHandlers){Event.on(oHeader,_MOUSEOVER,fnMouseOver,this,true);Event.on(oHeader,_MOUSEOUT,fnMouseOut,this,true);Event.on(oFooter,_MOUSEOVER,
fnMouseOver,this,true);Event.on(oFooter,_MOUSEOUT,fnMouseOut,this,true);this._hasScrollEventHandlers=true}this._disableScrollHeader();this._enableScrollFooter();bRefireIFrameAndShadow=true}else if(oHeader&&oFooter){if(this._widthSetForScroll){this._widthSetForScroll=false;this.cfg.unsubscribeFromConfigEvent(_WIDTH,this._clearSetWidthFlag);this.cfg.setProperty(_WIDTH,_EMPTY_STRING)}this._enableScrollHeader();this._enableScrollFooter();if(this._hasScrollEventHandlers){Event.removeListener(oHeader,_MOUSEOVER,
fnMouseOver);Event.removeListener(oHeader,_MOUSEOUT,fnMouseOut);Event.removeListener(oFooter,_MOUSEOVER,fnMouseOver);Event.removeListener(oFooter,_MOUSEOUT,fnMouseOut);this._hasScrollEventHandlers=false}oElement.removeChild(oHeader);oElement.removeChild(oFooter);this.header=null;this.footer=null;bRefireIFrameAndShadow=true}if(bRefireIFrameAndShadow){this.cfg.refireEvent(_IFRAME);this.cfg.refireEvent(_SHADOW)}}},_setMaxHeight:function(p_sType,p_aArgs,p_nMaxHeight){this._setScrollHeight(p_nMaxHeight);
this.renderEvent.unsubscribe(this._setMaxHeight)},configMaxHeight:function(p_sType,p_aArgs,p_oMenu){var nMaxHeight=p_aArgs[0];if(this.lazyLoad&&!this.body&&nMaxHeight>0)this.renderEvent.subscribe(this._setMaxHeight,nMaxHeight,this);else this._setScrollHeight(nMaxHeight)},configClassName:function(p_sType,p_aArgs,p_oMenu){var sClassName=p_aArgs[0];if(this._sClassName)Dom.removeClass(this.element,this._sClassName);Dom.addClass(this.element,sClassName);this._sClassName=sClassName},_onItemAdded:function(p_sType,
p_aArgs){var oItem=p_aArgs[0];if(oItem)oItem.cfg.setProperty(_DISABLED,true)},configDisabled:function(p_sType,p_aArgs,p_oMenu){var bDisabled=p_aArgs[0],aItems=this.getItems(),nItems,i;if(Lang.isArray(aItems)){nItems=aItems.length;if(nItems>0){i=nItems-1;do aItems[i].cfg.setProperty(_DISABLED,bDisabled);while(i--)}if(bDisabled){this.clearActiveItem(true);Dom.addClass(this.element,_DISABLED);this.itemAddedEvent.subscribe(this._onItemAdded)}else{Dom.removeClass(this.element,_DISABLED);this.itemAddedEvent.unsubscribe(this._onItemAdded)}}},
configShadow:function(p_sType,p_aArgs,p_oMenu){var sizeShadow=function(){var oElement=this.element,oShadow=this._shadow;if(oShadow&&oElement){if(oShadow.style.width&&oShadow.style.height){oShadow.style.width=_EMPTY_STRING;oShadow.style.height=_EMPTY_STRING}oShadow.style.width=oElement.offsetWidth+6+_PX;oShadow.style.height=oElement.offsetHeight+1+_PX}};var replaceShadow=function(){this.element.appendChild(this._shadow)};var addShadowVisibleClass=function(){Dom.addClass(this._shadow,_YUI_MENU_SHADOW_VISIBLE)};
var removeShadowVisibleClass=function(){Dom.removeClass(this._shadow,_YUI_MENU_SHADOW_VISIBLE)};var createShadow=function(){var oShadow=this._shadow,oElement;if(!oShadow){oElement=this.element;if(!m_oShadowTemplate){m_oShadowTemplate=document.createElement(_DIV_LOWERCASE);m_oShadowTemplate.className=_YUI_MENU_SHADOW_YUI_MENU_SHADOW_VISIBLE}oShadow=m_oShadowTemplate.cloneNode(false);oElement.appendChild(oShadow);this._shadow=oShadow;this.beforeShowEvent.subscribe(addShadowVisibleClass);this.beforeHideEvent.subscribe(removeShadowVisibleClass);
if(UA.ie){Lang.later(0,this,function(){sizeShadow.call(this);this.syncIframe()});this.cfg.subscribeToConfigEvent(_WIDTH,sizeShadow);this.cfg.subscribeToConfigEvent(_HEIGHT,sizeShadow);this.cfg.subscribeToConfigEvent(_MAX_HEIGHT,sizeShadow);this.changeContentEvent.subscribe(sizeShadow);Module.textResizeEvent.subscribe(sizeShadow,this,true);this.destroyEvent.subscribe(function(){Module.textResizeEvent.unsubscribe(sizeShadow,this)})}this.cfg.subscribeToConfigEvent(_MAX_HEIGHT,replaceShadow)}};var onBeforeShow=
function(){if(this._shadow){replaceShadow.call(this);if(UA.ie)sizeShadow.call(this)}else createShadow.call(this);this.beforeShowEvent.unsubscribe(onBeforeShow)};var bShadow=p_aArgs[0];if(bShadow&&this.cfg.getProperty(_POSITION)==_DYNAMIC)if(this.cfg.getProperty(_VISIBLE))if(this._shadow){replaceShadow.call(this);if(UA.ie)sizeShadow.call(this)}else createShadow.call(this);else this.beforeShowEvent.subscribe(onBeforeShow)},initEvents:function(){Menu.superclass.initEvents.call(this);var i=EVENT_TYPES.length-
1,aEventData,oCustomEvent;do{aEventData=EVENT_TYPES[i];oCustomEvent=this.createEvent(aEventData[1]);oCustomEvent.signature=CustomEvent.LIST;this[aEventData[0]]=oCustomEvent}while(i--)},positionOffScreen:function(){var oIFrame=this.iframe,oElement=this.element,sPos=this.OFF_SCREEN_POSITION;oElement.style.top=_EMPTY_STRING;oElement.style.left=_EMPTY_STRING;if(oIFrame){oIFrame.style.top=sPos;oIFrame.style.left=sPos}},getRoot:function(){var oItem=this.parent,oParentMenu,returnVal;if(oItem){oParentMenu=
oItem.parent;returnVal=oParentMenu?oParentMenu.getRoot():this}else returnVal=this;return returnVal},toString:function(){var sReturnVal=_MENU,sId=this.id;if(sId)sReturnVal+=_SPACE+sId;return sReturnVal},setItemGroupTitle:function(p_sGroupTitle,p_nGroupIndex){var nGroupIndex,oTitle,i,nFirstIndex;if(Lang.isString(p_sGroupTitle)&&p_sGroupTitle.length>0){nGroupIndex=Lang.isNumber(p_nGroupIndex)?p_nGroupIndex:0;oTitle=this._aGroupTitleElements[nGroupIndex];if(oTitle)oTitle.innerHTML=p_sGroupTitle;else{oTitle=
document.createElement(this.GROUP_TITLE_TAG_NAME);oTitle.innerHTML=p_sGroupTitle;this._aGroupTitleElements[nGroupIndex]=oTitle}i=this._aGroupTitleElements.length-1;do if(this._aGroupTitleElements[i]){Dom.removeClass(this._aGroupTitleElements[i],_FIRST_OF_TYPE);nFirstIndex=i}while(i--);if(nFirstIndex!==null)Dom.addClass(this._aGroupTitleElements[nFirstIndex],_FIRST_OF_TYPE);this.changeContentEvent.fire()}},addItem:function(p_oItem,p_nGroupIndex){return this._addItemToGroup(p_nGroupIndex,p_oItem)},
addItems:function(p_aItems,p_nGroupIndex){var nItems,aItems,oItem,i,returnVal;if(Lang.isArray(p_aItems)){nItems=p_aItems.length;aItems=[];for(i=0;i<nItems;i++){oItem=p_aItems[i];if(oItem)if(Lang.isArray(oItem))aItems[aItems.length]=this.addItems(oItem,i);else aItems[aItems.length]=this._addItemToGroup(p_nGroupIndex,oItem)}if(aItems.length)returnVal=aItems}return returnVal},insertItem:function(p_oItem,p_nItemIndex,p_nGroupIndex){return this._addItemToGroup(p_nGroupIndex,p_oItem,p_nItemIndex)},removeItem:function(p_oObject,
p_nGroupIndex){var oItem,returnVal;if(!Lang.isUndefined(p_oObject)){if(p_oObject instanceof YAHOO.widget.MenuItem)oItem=this._removeItemFromGroupByValue(p_nGroupIndex,p_oObject);else if(Lang.isNumber(p_oObject))oItem=this._removeItemFromGroupByIndex(p_nGroupIndex,p_oObject);if(oItem){oItem.destroy();returnVal=oItem}}return returnVal},getItems:function(){var aGroups=this._aItemGroups,nGroups,returnVal,aItems=[];if(Lang.isArray(aGroups)){nGroups=aGroups.length;returnVal=nGroups==1?aGroups[0]:Array.prototype.concat.apply(aItems,
aGroups)}return returnVal},getItemGroups:function(){return this._aItemGroups},getItem:function(p_nItemIndex,p_nGroupIndex){var aGroup,returnVal;if(Lang.isNumber(p_nItemIndex)){aGroup=this._getItemGroup(p_nGroupIndex);if(aGroup)returnVal=aGroup[p_nItemIndex]}return returnVal},getSubmenus:function(){var aItems=this.getItems(),nItems=aItems.length,aSubmenus,oSubmenu,oItem,i;if(nItems>0){aSubmenus=[];for(i=0;i<nItems;i++){oItem=aItems[i];if(oItem){oSubmenu=oItem.cfg.getProperty(_SUBMENU);if(oSubmenu)aSubmenus[aSubmenus.length]=
oSubmenu}}}return aSubmenus},clearContent:function(){var aItems=this.getItems(),nItems=aItems.length,oElement=this.element,oBody=this.body,oHeader=this.header,oFooter=this.footer,oItem,oSubmenu,i;if(nItems>0){i=nItems-1;do{oItem=aItems[i];if(oItem){oSubmenu=oItem.cfg.getProperty(_SUBMENU);if(oSubmenu){this.cfg.configChangedEvent.unsubscribe(this._onParentMenuConfigChange,oSubmenu);this.renderEvent.unsubscribe(this._onParentMenuRender,oSubmenu)}this.removeItem(oItem,oItem.groupIndex)}}while(i--)}if(oHeader){Event.purgeElement(oHeader);
oElement.removeChild(oHeader)}if(oFooter){Event.purgeElement(oFooter);oElement.removeChild(oFooter)}if(oBody){Event.purgeElement(oBody);oBody.innerHTML=_EMPTY_STRING}this.activeItem=null;this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];this.cfg.setProperty(_WIDTH,null)},destroy:function(){this.clearContent();this._aItemGroups=null;this._aListElements=null;this._aGroupTitleElements=null;Menu.superclass.destroy.call(this)},setInitialFocus:function(){var oItem=this._getFirstEnabledItem();
if(oItem)oItem.focus()},setInitialSelection:function(){var oItem=this._getFirstEnabledItem();if(oItem)oItem.cfg.setProperty(_SELECTED,true)},clearActiveItem:function(p_bBlur){if(this.cfg.getProperty(_SHOW_DELAY)>0)this._cancelShowDelay();var oActiveItem=this.activeItem,oConfig,oSubmenu;if(oActiveItem){oConfig=oActiveItem.cfg;if(p_bBlur){oActiveItem.blur();this.getRoot()._hasFocus=true}oConfig.setProperty(_SELECTED,false);oSubmenu=oConfig.getProperty(_SUBMENU);if(oSubmenu)oSubmenu.hide();this.activeItem=
null}},focus:function(){if(!this.hasFocus())this.setInitialFocus()},blur:function(){var oItem;if(this.hasFocus()){oItem=MenuManager.getFocusedMenuItem();if(oItem)oItem.blur()}},hasFocus:function(){return MenuManager.getFocusedMenu()==this.getRoot()},_doItemSubmenuSubscribe:function(p_sType,p_aArgs,p_oObject){var oItem=p_aArgs[0],oSubmenu=oItem.cfg.getProperty(_SUBMENU);if(oSubmenu)oSubmenu.subscribe.apply(oSubmenu,p_oObject)},_doSubmenuSubscribe:function(p_sType,p_aArgs,p_oObject){var oSubmenu=this.cfg.getProperty(_SUBMENU);
if(oSubmenu)oSubmenu.subscribe.apply(oSubmenu,p_oObject)},subscribe:function(){Menu.superclass.subscribe.apply(this,arguments);Menu.superclass.subscribe.call(this,_ITEM_ADDED,this._doItemSubmenuSubscribe,arguments);var aItems=this.getItems(),nItems,oItem,oSubmenu,i;if(aItems){nItems=aItems.length;if(nItems>0){i=nItems-1;do{oItem=aItems[i];oSubmenu=oItem.cfg.getProperty(_SUBMENU);if(oSubmenu)oSubmenu.subscribe.apply(oSubmenu,arguments);else oItem.cfg.subscribeToConfigEvent(_SUBMENU,this._doSubmenuSubscribe,
arguments)}while(i--)}}},unsubscribe:function(){Menu.superclass.unsubscribe.apply(this,arguments);Menu.superclass.unsubscribe.call(this,_ITEM_ADDED,this._doItemSubmenuSubscribe,arguments);var aItems=this.getItems(),nItems,oItem,oSubmenu,i;if(aItems){nItems=aItems.length;if(nItems>0){i=nItems-1;do{oItem=aItems[i];oSubmenu=oItem.cfg.getProperty(_SUBMENU);if(oSubmenu)oSubmenu.unsubscribe.apply(oSubmenu,arguments);else oItem.cfg.unsubscribeFromConfigEvent(_SUBMENU,this._doSubmenuSubscribe,arguments)}while(i--)}}},
initDefaultConfig:function(){Menu.superclass.initDefaultConfig.call(this);var oConfig=this.cfg;oConfig.addProperty(VISIBLE_CONFIG.key,{handler:this.configVisible,value:VISIBLE_CONFIG.value,validator:VISIBLE_CONFIG.validator});oConfig.addProperty(CONSTRAIN_TO_VIEWPORT_CONFIG.key,{handler:this.configConstrainToViewport,value:CONSTRAIN_TO_VIEWPORT_CONFIG.value,validator:CONSTRAIN_TO_VIEWPORT_CONFIG.validator,supercedes:CONSTRAIN_TO_VIEWPORT_CONFIG.supercedes});oConfig.addProperty(PREVENT_CONTEXT_OVERLAP_CONFIG.key,
{value:PREVENT_CONTEXT_OVERLAP_CONFIG.value,validator:PREVENT_CONTEXT_OVERLAP_CONFIG.validator,supercedes:PREVENT_CONTEXT_OVERLAP_CONFIG.supercedes});oConfig.addProperty(POSITION_CONFIG.key,{handler:this.configPosition,value:POSITION_CONFIG.value,validator:POSITION_CONFIG.validator,supercedes:POSITION_CONFIG.supercedes});oConfig.addProperty(SUBMENU_ALIGNMENT_CONFIG.key,{value:SUBMENU_ALIGNMENT_CONFIG.value,suppressEvent:SUBMENU_ALIGNMENT_CONFIG.suppressEvent});oConfig.addProperty(AUTO_SUBMENU_DISPLAY_CONFIG.key,
{value:AUTO_SUBMENU_DISPLAY_CONFIG.value,validator:AUTO_SUBMENU_DISPLAY_CONFIG.validator,suppressEvent:AUTO_SUBMENU_DISPLAY_CONFIG.suppressEvent});oConfig.addProperty(SHOW_DELAY_CONFIG.key,{value:SHOW_DELAY_CONFIG.value,validator:SHOW_DELAY_CONFIG.validator,suppressEvent:SHOW_DELAY_CONFIG.suppressEvent});oConfig.addProperty(HIDE_DELAY_CONFIG.key,{handler:this.configHideDelay,value:HIDE_DELAY_CONFIG.value,validator:HIDE_DELAY_CONFIG.validator,suppressEvent:HIDE_DELAY_CONFIG.suppressEvent});oConfig.addProperty(SUBMENU_HIDE_DELAY_CONFIG.key,
{value:SUBMENU_HIDE_DELAY_CONFIG.value,validator:SUBMENU_HIDE_DELAY_CONFIG.validator,suppressEvent:SUBMENU_HIDE_DELAY_CONFIG.suppressEvent});oConfig.addProperty(CLICK_TO_HIDE_CONFIG.key,{value:CLICK_TO_HIDE_CONFIG.value,validator:CLICK_TO_HIDE_CONFIG.validator,suppressEvent:CLICK_TO_HIDE_CONFIG.suppressEvent});oConfig.addProperty(CONTAINER_CONFIG.key,{handler:this.configContainer,value:document.body,suppressEvent:CONTAINER_CONFIG.suppressEvent});oConfig.addProperty(SCROLL_INCREMENT_CONFIG.key,{value:SCROLL_INCREMENT_CONFIG.value,
validator:SCROLL_INCREMENT_CONFIG.validator,supercedes:SCROLL_INCREMENT_CONFIG.supercedes,suppressEvent:SCROLL_INCREMENT_CONFIG.suppressEvent});oConfig.addProperty(MIN_SCROLL_HEIGHT_CONFIG.key,{value:MIN_SCROLL_HEIGHT_CONFIG.value,validator:MIN_SCROLL_HEIGHT_CONFIG.validator,supercedes:MIN_SCROLL_HEIGHT_CONFIG.supercedes,suppressEvent:MIN_SCROLL_HEIGHT_CONFIG.suppressEvent});oConfig.addProperty(MAX_HEIGHT_CONFIG.key,{handler:this.configMaxHeight,value:MAX_HEIGHT_CONFIG.value,validator:MAX_HEIGHT_CONFIG.validator,
suppressEvent:MAX_HEIGHT_CONFIG.suppressEvent,supercedes:MAX_HEIGHT_CONFIG.supercedes});oConfig.addProperty(CLASS_NAME_CONFIG.key,{handler:this.configClassName,value:CLASS_NAME_CONFIG.value,validator:CLASS_NAME_CONFIG.validator,supercedes:CLASS_NAME_CONFIG.supercedes});oConfig.addProperty(DISABLED_CONFIG.key,{handler:this.configDisabled,value:DISABLED_CONFIG.value,validator:DISABLED_CONFIG.validator,suppressEvent:DISABLED_CONFIG.suppressEvent});oConfig.addProperty(SHADOW_CONFIG.key,{handler:this.configShadow,
value:SHADOW_CONFIG.value,validator:SHADOW_CONFIG.validator});oConfig.addProperty(KEEP_OPEN_CONFIG.key,{value:KEEP_OPEN_CONFIG.value,validator:KEEP_OPEN_CONFIG.validator})}})})();
(function(){YAHOO.widget.MenuItem=function(p_oObject,p_oConfig){if(p_oObject){if(p_oConfig){this.parent=p_oConfig.parent;this.value=p_oConfig.value;this.id=p_oConfig.id}this.init(p_oObject,p_oConfig)}};var Dom=YAHOO.util.Dom,Module=YAHOO.widget.Module,Menu=YAHOO.widget.Menu,MenuItem=YAHOO.widget.MenuItem,CustomEvent=YAHOO.util.CustomEvent,UA=YAHOO.env.ua,Lang=YAHOO.lang,_TEXT="text",_HASH="#",_HYPHEN="-",_HELP_TEXT="helptext",_URL="url",_TARGET="target",_EMPHASIS="emphasis",_STRONG_EMPHASIS="strongemphasis",
_CHECKED="checked",_SUBMENU="submenu",_DISABLED="disabled",_SELECTED="selected",_HAS_SUBMENU="hassubmenu",_CHECKED_DISABLED="checked-disabled",_HAS_SUBMENU_DISABLED="hassubmenu-disabled",_HAS_SUBMENU_SELECTED="hassubmenu-selected",_CHECKED_SELECTED="checked-selected",_ONCLICK="onclick",_CLASSNAME="classname",_EMPTY_STRING="",_OPTION="OPTION",_OPTGROUP="OPTGROUP",_LI_UPPERCASE="LI",_HREF="href",_SELECT="SELECT",_DIV="DIV",_START_HELP_TEXT='<em class="helptext">',_START_EM="<em>",_END_EM="</em>",_START_STRONG=
"<strong>",_END_STRONG="</strong>",_PREVENT_CONTEXT_OVERLAP="preventcontextoverlap",_OBJ="obj",_SCOPE="scope",_NONE="none",_VISIBLE="visible",_SPACE=" ",_MENUITEM="MenuItem",_CLICK="click",_SHOW="show",_HIDE="hide",_LI_LOWERCASE="li",_ANCHOR_TEMPLATE='<a href="#"></a>',EVENT_TYPES=[["mouseOverEvent","mouseover"],["mouseOutEvent","mouseout"],["mouseDownEvent","mousedown"],["mouseUpEvent","mouseup"],["clickEvent",_CLICK],["keyPressEvent","keypress"],["keyDownEvent","keydown"],["keyUpEvent","keyup"],
["focusEvent","focus"],["blurEvent","blur"],["destroyEvent","destroy"]],TEXT_CONFIG={key:_TEXT,value:_EMPTY_STRING,validator:Lang.isString,suppressEvent:true},HELP_TEXT_CONFIG={key:_HELP_TEXT,supercedes:[_TEXT],suppressEvent:true},URL_CONFIG={key:_URL,value:_HASH,suppressEvent:true},TARGET_CONFIG={key:_TARGET,suppressEvent:true},EMPHASIS_CONFIG={key:_EMPHASIS,value:false,validator:Lang.isBoolean,suppressEvent:true,supercedes:[_TEXT]},STRONG_EMPHASIS_CONFIG={key:_STRONG_EMPHASIS,value:false,validator:Lang.isBoolean,
suppressEvent:true,supercedes:[_TEXT]},CHECKED_CONFIG={key:_CHECKED,value:false,validator:Lang.isBoolean,suppressEvent:true,supercedes:[_DISABLED,_SELECTED]},SUBMENU_CONFIG={key:_SUBMENU,suppressEvent:true,supercedes:[_DISABLED,_SELECTED]},DISABLED_CONFIG={key:_DISABLED,value:false,validator:Lang.isBoolean,suppressEvent:true,supercedes:[_TEXT,_SELECTED]},SELECTED_CONFIG={key:_SELECTED,value:false,validator:Lang.isBoolean,suppressEvent:true},ONCLICK_CONFIG={key:_ONCLICK,suppressEvent:true},CLASS_NAME_CONFIG=
{key:_CLASSNAME,value:null,validator:Lang.isString,suppressEvent:true},KEY_LISTENER_CONFIG={key:"keylistener",value:null,suppressEvent:true},m_oMenuItemTemplate=null,CLASS_NAMES={};var getClassNameForState=function(prefix,state){var oClassNames=CLASS_NAMES[prefix];if(!oClassNames){CLASS_NAMES[prefix]={};oClassNames=CLASS_NAMES[prefix]}var sClassName=oClassNames[state];if(!sClassName){sClassName=prefix+_HYPHEN+state;oClassNames[state]=sClassName}return sClassName};var addClassNameForState=function(state){Dom.addClass(this.element,
getClassNameForState(this.CSS_CLASS_NAME,state));Dom.addClass(this._oAnchor,getClassNameForState(this.CSS_LABEL_CLASS_NAME,state))};var removeClassNameForState=function(state){Dom.removeClass(this.element,getClassNameForState(this.CSS_CLASS_NAME,state));Dom.removeClass(this._oAnchor,getClassNameForState(this.CSS_LABEL_CLASS_NAME,state))};MenuItem.prototype={CSS_CLASS_NAME:"yuimenuitem",CSS_LABEL_CLASS_NAME:"yuimenuitemlabel",SUBMENU_TYPE:null,_oAnchor:null,_oHelpTextEM:null,_oSubmenu:null,_oOnclickAttributeValue:null,
_sClassName:null,constructor:MenuItem,index:null,groupIndex:null,parent:null,element:null,srcElement:null,value:null,browser:Module.prototype.browser,id:null,init:function(p_oObject,p_oConfig){if(!this.SUBMENU_TYPE)this.SUBMENU_TYPE=Menu;this.cfg=new YAHOO.util.Config(this);this.initDefaultConfig();var oConfig=this.cfg,sURL=_HASH,oCustomEvent,aEventData,oAnchor,sTarget,sText,sId,i;if(Lang.isString(p_oObject)){this._createRootNodeStructure();oConfig.queueProperty(_TEXT,p_oObject)}else if(p_oObject&&
p_oObject.tagName)switch(p_oObject.tagName.toUpperCase()){case _OPTION:this._createRootNodeStructure();oConfig.queueProperty(_TEXT,p_oObject.text);oConfig.queueProperty(_DISABLED,p_oObject.disabled);this.value=p_oObject.value;this.srcElement=p_oObject;break;case _OPTGROUP:this._createRootNodeStructure();oConfig.queueProperty(_TEXT,p_oObject.label);oConfig.queueProperty(_DISABLED,p_oObject.disabled);this.srcElement=p_oObject;this._initSubTree();break;case _LI_UPPERCASE:oAnchor=Dom.getFirstChild(p_oObject);
if(oAnchor){sURL=oAnchor.getAttribute(_HREF,2);sTarget=oAnchor.getAttribute(_TARGET);sText=oAnchor.innerHTML}this.srcElement=p_oObject;this.element=p_oObject;this._oAnchor=oAnchor;oConfig.setProperty(_TEXT,sText,true);oConfig.setProperty(_URL,sURL,true);oConfig.setProperty(_TARGET,sTarget,true);this._initSubTree();break}if(this.element){sId=(this.srcElement||this.element).id;if(!sId){sId=this.id||Dom.generateId();this.element.id=sId}this.id=sId;Dom.addClass(this.element,this.CSS_CLASS_NAME);Dom.addClass(this._oAnchor,
this.CSS_LABEL_CLASS_NAME);i=EVENT_TYPES.length-1;do{aEventData=EVENT_TYPES[i];oCustomEvent=this.createEvent(aEventData[1]);oCustomEvent.signature=CustomEvent.LIST;this[aEventData[0]]=oCustomEvent}while(i--);if(p_oConfig)oConfig.applyConfig(p_oConfig);oConfig.fireQueue()}},_createRootNodeStructure:function(){var oElement,oAnchor;if(!m_oMenuItemTemplate){m_oMenuItemTemplate=document.createElement(_LI_LOWERCASE);m_oMenuItemTemplate.innerHTML=_ANCHOR_TEMPLATE}oElement=m_oMenuItemTemplate.cloneNode(true);
oElement.className=this.CSS_CLASS_NAME;oAnchor=oElement.firstChild;oAnchor.className=this.CSS_LABEL_CLASS_NAME;this.element=oElement;this._oAnchor=oAnchor},_initSubTree:function(){var oSrcEl=this.srcElement,oConfig=this.cfg,oNode,aOptions,nOptions,oMenu,n;if(oSrcEl.childNodes.length>0)if(this.parent.lazyLoad&&this.parent.srcElement&&this.parent.srcElement.tagName.toUpperCase()==_SELECT)oConfig.setProperty(_SUBMENU,{id:Dom.generateId(),itemdata:oSrcEl.childNodes});else{oNode=oSrcEl.firstChild;aOptions=
[];do if(oNode&&oNode.tagName)switch(oNode.tagName.toUpperCase()){case _DIV:oConfig.setProperty(_SUBMENU,oNode);break;case _OPTION:aOptions[aOptions.length]=oNode;break}while(oNode=oNode.nextSibling);nOptions=aOptions.length;if(nOptions>0){oMenu=new this.SUBMENU_TYPE(Dom.generateId());oConfig.setProperty(_SUBMENU,oMenu);for(n=0;n<nOptions;n++)oMenu.addItem(new oMenu.ITEM_TYPE(aOptions[n]))}}},configText:function(p_sType,p_aArgs,p_oItem){var sText=p_aArgs[0],oConfig=this.cfg,oAnchor=this._oAnchor,
sHelpText=oConfig.getProperty(_HELP_TEXT),sHelpTextHTML=_EMPTY_STRING,sEmphasisStartTag=_EMPTY_STRING,sEmphasisEndTag=_EMPTY_STRING;if(sText){if(sHelpText)sHelpTextHTML=_START_HELP_TEXT+sHelpText+_END_EM;if(oConfig.getProperty(_EMPHASIS)){sEmphasisStartTag=_START_EM;sEmphasisEndTag=_END_EM}if(oConfig.getProperty(_STRONG_EMPHASIS)){sEmphasisStartTag=_START_STRONG;sEmphasisEndTag=_END_STRONG}oAnchor.innerHTML=sEmphasisStartTag+sText+sEmphasisEndTag+sHelpTextHTML}},configHelpText:function(p_sType,p_aArgs,
p_oItem){this.cfg.refireEvent(_TEXT)},configURL:function(p_sType,p_aArgs,p_oItem){var sURL=p_aArgs[0];if(!sURL)sURL=_HASH;var oAnchor=this._oAnchor;if(UA.opera)oAnchor.removeAttribute(_HREF);oAnchor.setAttribute(_HREF,sURL)},configTarget:function(p_sType,p_aArgs,p_oItem){var sTarget=p_aArgs[0],oAnchor=this._oAnchor;if(sTarget&&sTarget.length>0)oAnchor.setAttribute(_TARGET,sTarget);else oAnchor.removeAttribute(_TARGET)},configEmphasis:function(p_sType,p_aArgs,p_oItem){var bEmphasis=p_aArgs[0],oConfig=
this.cfg;if(bEmphasis&&oConfig.getProperty(_STRONG_EMPHASIS))oConfig.setProperty(_STRONG_EMPHASIS,false);oConfig.refireEvent(_TEXT)},configStrongEmphasis:function(p_sType,p_aArgs,p_oItem){var bStrongEmphasis=p_aArgs[0],oConfig=this.cfg;if(bStrongEmphasis&&oConfig.getProperty(_EMPHASIS))oConfig.setProperty(_EMPHASIS,false);oConfig.refireEvent(_TEXT)},configChecked:function(p_sType,p_aArgs,p_oItem){var bChecked=p_aArgs[0],oConfig=this.cfg;if(bChecked)addClassNameForState.call(this,_CHECKED);else removeClassNameForState.call(this,
_CHECKED);oConfig.refireEvent(_TEXT);if(oConfig.getProperty(_DISABLED))oConfig.refireEvent(_DISABLED);if(oConfig.getProperty(_SELECTED))oConfig.refireEvent(_SELECTED)},configDisabled:function(p_sType,p_aArgs,p_oItem){var bDisabled=p_aArgs[0],oConfig=this.cfg,oSubmenu=oConfig.getProperty(_SUBMENU),bChecked=oConfig.getProperty(_CHECKED);if(bDisabled){if(oConfig.getProperty(_SELECTED))oConfig.setProperty(_SELECTED,false);addClassNameForState.call(this,_DISABLED);if(oSubmenu)addClassNameForState.call(this,
_HAS_SUBMENU_DISABLED);if(bChecked)addClassNameForState.call(this,_CHECKED_DISABLED)}else{removeClassNameForState.call(this,_DISABLED);if(oSubmenu)removeClassNameForState.call(this,_HAS_SUBMENU_DISABLED);if(bChecked)removeClassNameForState.call(this,_CHECKED_DISABLED)}},configSelected:function(p_sType,p_aArgs,p_oItem){var oConfig=this.cfg,oAnchor=this._oAnchor,bSelected=p_aArgs[0],bChecked=oConfig.getProperty(_CHECKED),oSubmenu=oConfig.getProperty(_SUBMENU);if(UA.opera)oAnchor.blur();if(bSelected&&
!oConfig.getProperty(_DISABLED)){addClassNameForState.call(this,_SELECTED);if(oSubmenu)addClassNameForState.call(this,_HAS_SUBMENU_SELECTED);if(bChecked)addClassNameForState.call(this,_CHECKED_SELECTED)}else{removeClassNameForState.call(this,_SELECTED);if(oSubmenu)removeClassNameForState.call(this,_HAS_SUBMENU_SELECTED);if(bChecked)removeClassNameForState.call(this,_CHECKED_SELECTED)}if(this.hasFocus()&&UA.opera)oAnchor.focus()},_onSubmenuBeforeHide:function(p_sType,p_aArgs){var oItem=this.parent,
oMenu;function onHide(){oItem._oAnchor.blur();oMenu.beforeHideEvent.unsubscribe(onHide)}if(oItem.hasFocus()){oMenu=oItem.parent;oMenu.beforeHideEvent.subscribe(onHide)}},configSubmenu:function(p_sType,p_aArgs,p_oItem){var oSubmenu=p_aArgs[0],oConfig=this.cfg,bLazyLoad=this.parent&&this.parent.lazyLoad,oMenu,sSubmenuId,oSubmenuConfig;if(oSubmenu){if(oSubmenu instanceof Menu){oMenu=oSubmenu;oMenu.parent=this;oMenu.lazyLoad=bLazyLoad}else if(Lang.isObject(oSubmenu)&&oSubmenu.id&&!oSubmenu.nodeType){sSubmenuId=
oSubmenu.id;oSubmenuConfig=oSubmenu;oSubmenuConfig.lazyload=bLazyLoad;oSubmenuConfig.parent=this;oMenu=new this.SUBMENU_TYPE(sSubmenuId,oSubmenuConfig);oConfig.setProperty(_SUBMENU,oMenu,true)}else{oMenu=new this.SUBMENU_TYPE(oSubmenu,{lazyload:bLazyLoad,parent:this});oConfig.setProperty(_SUBMENU,oMenu,true)}if(oMenu){oMenu.cfg.setProperty(_PREVENT_CONTEXT_OVERLAP,true);addClassNameForState.call(this,_HAS_SUBMENU);if(oConfig.getProperty(_URL)===_HASH)oConfig.setProperty(_URL,_HASH+oMenu.id);this._oSubmenu=
oMenu;if(UA.opera)oMenu.beforeHideEvent.subscribe(this._onSubmenuBeforeHide)}}else{removeClassNameForState.call(this,_HAS_SUBMENU);if(this._oSubmenu)this._oSubmenu.destroy()}if(oConfig.getProperty(_DISABLED))oConfig.refireEvent(_DISABLED);if(oConfig.getProperty(_SELECTED))oConfig.refireEvent(_SELECTED)},configOnClick:function(p_sType,p_aArgs,p_oItem){var oObject=p_aArgs[0];if(this._oOnclickAttributeValue&&this._oOnclickAttributeValue!=oObject){this.clickEvent.unsubscribe(this._oOnclickAttributeValue.fn,
this._oOnclickAttributeValue.obj);this._oOnclickAttributeValue=null}if(!this._oOnclickAttributeValue&&Lang.isObject(oObject)&&Lang.isFunction(oObject.fn)){this.clickEvent.subscribe(oObject.fn,_OBJ in oObject?oObject.obj:this,_SCOPE in oObject?oObject.scope:null);this._oOnclickAttributeValue=oObject}},configClassName:function(p_sType,p_aArgs,p_oItem){var sClassName=p_aArgs[0];if(this._sClassName)Dom.removeClass(this.element,this._sClassName);Dom.addClass(this.element,sClassName);this._sClassName=sClassName},
_dispatchClickEvent:function(){var oMenuItem=this,oAnchor,oEvent;if(!oMenuItem.cfg.getProperty(_DISABLED)){oAnchor=Dom.getFirstChild(oMenuItem.element);if(UA.ie)oAnchor.fireEvent(_ONCLICK);else{if(UA.gecko&&UA.gecko>=1.9||UA.opera||UA.webkit){oEvent=document.createEvent("HTMLEvents");oEvent.initEvent(_CLICK,true,true)}else{oEvent=document.createEvent("MouseEvents");oEvent.initMouseEvent(_CLICK,true,true,window,0,0,0,0,0,false,false,false,false,0,null)}oAnchor.dispatchEvent(oEvent)}}},_createKeyListener:function(type,
args,keyData){var oMenuItem=this,oMenu=oMenuItem.parent;var oKeyListener=new YAHOO.util.KeyListener(oMenu.element.ownerDocument,keyData,{fn:oMenuItem._dispatchClickEvent,scope:oMenuItem,correctScope:true});if(oMenu.cfg.getProperty(_VISIBLE))oKeyListener.enable();oMenu.subscribe(_SHOW,oKeyListener.enable,null,oKeyListener);oMenu.subscribe(_HIDE,oKeyListener.disable,null,oKeyListener);oMenuItem._keyListener=oKeyListener;oMenu.unsubscribe(_SHOW,oMenuItem._createKeyListener,keyData)},configKeyListener:function(p_sType,
p_aArgs){var oKeyData=p_aArgs[0],oMenuItem=this,oMenu=oMenuItem.parent;if(oMenuItem._keyData){oMenu.unsubscribe(_SHOW,oMenuItem._createKeyListener,oMenuItem._keyData);oMenuItem._keyData=null}if(oMenuItem._keyListener){oMenu.unsubscribe(_SHOW,oMenuItem._keyListener.enable);oMenu.unsubscribe(_HIDE,oMenuItem._keyListener.disable);oMenuItem._keyListener.disable();oMenuItem._keyListener=null}if(oKeyData){oMenuItem._keyData=oKeyData;oMenu.subscribe(_SHOW,oMenuItem._createKeyListener,oKeyData,oMenuItem)}},
initDefaultConfig:function(){var oConfig=this.cfg;oConfig.addProperty(TEXT_CONFIG.key,{handler:this.configText,value:TEXT_CONFIG.value,validator:TEXT_CONFIG.validator,suppressEvent:TEXT_CONFIG.suppressEvent});oConfig.addProperty(HELP_TEXT_CONFIG.key,{handler:this.configHelpText,supercedes:HELP_TEXT_CONFIG.supercedes,suppressEvent:HELP_TEXT_CONFIG.suppressEvent});oConfig.addProperty(URL_CONFIG.key,{handler:this.configURL,value:URL_CONFIG.value,suppressEvent:URL_CONFIG.suppressEvent});oConfig.addProperty(TARGET_CONFIG.key,
{handler:this.configTarget,suppressEvent:TARGET_CONFIG.suppressEvent});oConfig.addProperty(EMPHASIS_CONFIG.key,{handler:this.configEmphasis,value:EMPHASIS_CONFIG.value,validator:EMPHASIS_CONFIG.validator,suppressEvent:EMPHASIS_CONFIG.suppressEvent,supercedes:EMPHASIS_CONFIG.supercedes});oConfig.addProperty(STRONG_EMPHASIS_CONFIG.key,{handler:this.configStrongEmphasis,value:STRONG_EMPHASIS_CONFIG.value,validator:STRONG_EMPHASIS_CONFIG.validator,suppressEvent:STRONG_EMPHASIS_CONFIG.suppressEvent,supercedes:STRONG_EMPHASIS_CONFIG.supercedes});
oConfig.addProperty(CHECKED_CONFIG.key,{handler:this.configChecked,value:CHECKED_CONFIG.value,validator:CHECKED_CONFIG.validator,suppressEvent:CHECKED_CONFIG.suppressEvent,supercedes:CHECKED_CONFIG.supercedes});oConfig.addProperty(DISABLED_CONFIG.key,{handler:this.configDisabled,value:DISABLED_CONFIG.value,validator:DISABLED_CONFIG.validator,suppressEvent:DISABLED_CONFIG.suppressEvent});oConfig.addProperty(SELECTED_CONFIG.key,{handler:this.configSelected,value:SELECTED_CONFIG.value,validator:SELECTED_CONFIG.validator,
suppressEvent:SELECTED_CONFIG.suppressEvent});oConfig.addProperty(SUBMENU_CONFIG.key,{handler:this.configSubmenu,supercedes:SUBMENU_CONFIG.supercedes,suppressEvent:SUBMENU_CONFIG.suppressEvent});oConfig.addProperty(ONCLICK_CONFIG.key,{handler:this.configOnClick,suppressEvent:ONCLICK_CONFIG.suppressEvent});oConfig.addProperty(CLASS_NAME_CONFIG.key,{handler:this.configClassName,value:CLASS_NAME_CONFIG.value,validator:CLASS_NAME_CONFIG.validator,suppressEvent:CLASS_NAME_CONFIG.suppressEvent});oConfig.addProperty(KEY_LISTENER_CONFIG.key,
{handler:this.configKeyListener,value:KEY_LISTENER_CONFIG.value,suppressEvent:KEY_LISTENER_CONFIG.suppressEvent})},getNextSibling:function(){var isUL=function(el){return el.nodeName.toLowerCase()==="ul"},menuitemEl=this.element,next=Dom.getNextSibling(menuitemEl),parent,sibling,list;if(!next){parent=menuitemEl.parentNode;sibling=Dom.getNextSiblingBy(parent,isUL);if(sibling)list=sibling;else list=Dom.getFirstChildBy(parent.parentNode,isUL);next=Dom.getFirstChild(list)}return YAHOO.widget.MenuManager.getMenuItem(next.id)},
getNextEnabledSibling:function(){var next=this.getNextSibling();return next.cfg.getProperty(_DISABLED)||next.element.style.display==_NONE?next.getNextEnabledSibling():next},getPreviousSibling:function(){var isUL=function(el){return el.nodeName.toLowerCase()==="ul"},menuitemEl=this.element,next=Dom.getPreviousSibling(menuitemEl),parent,sibling,list;if(!next){parent=menuitemEl.parentNode;sibling=Dom.getPreviousSiblingBy(parent,isUL);if(sibling)list=sibling;else list=Dom.getLastChildBy(parent.parentNode,
isUL);next=Dom.getLastChild(list)}return YAHOO.widget.MenuManager.getMenuItem(next.id)},getPreviousEnabledSibling:function(){var next=this.getPreviousSibling();return next.cfg.getProperty(_DISABLED)||next.element.style.display==_NONE?next.getPreviousEnabledSibling():next},focus:function(){var oParent=this.parent,oAnchor=this._oAnchor,oActiveItem=oParent.activeItem;function setFocus(){try{if(!(UA.ie&&!document.hasFocus())){if(oActiveItem)oActiveItem.blurEvent.fire();oAnchor.focus();this.focusEvent.fire()}}catch(e){}}
if(!this.cfg.getProperty(_DISABLED)&&oParent&&oParent.cfg.getProperty(_VISIBLE)&&this.element.style.display!=_NONE)Lang.later(0,this,setFocus)},blur:function(){var oParent=this.parent;if(!this.cfg.getProperty(_DISABLED)&&oParent&&oParent.cfg.getProperty(_VISIBLE))Lang.later(0,this,function(){try{this._oAnchor.blur();this.blurEvent.fire()}catch(e){}},0)},hasFocus:function(){return YAHOO.widget.MenuManager.getFocusedMenuItem()==this},destroy:function(){var oEl=this.element,oSubmenu,oParentNode,aEventData,
i;if(oEl){oSubmenu=this.cfg.getProperty(_SUBMENU);if(oSubmenu)oSubmenu.destroy();oParentNode=oEl.parentNode;if(oParentNode){oParentNode.removeChild(oEl);this.destroyEvent.fire()}i=EVENT_TYPES.length-1;do{aEventData=EVENT_TYPES[i];this[aEventData[0]].unsubscribeAll()}while(i--);this.cfg.configChangedEvent.unsubscribeAll()}},toString:function(){var sReturnVal=_MENUITEM,sId=this.id;if(sId)sReturnVal+=_SPACE+sId;return sReturnVal}};Lang.augmentProto(MenuItem,YAHOO.util.EventProvider)})();
(function(){var _XY="xy",_MOUSEDOWN="mousedown",_CONTEXTMENU="ContextMenu",_SPACE=" ";YAHOO.widget.ContextMenu=function(p_oElement,p_oConfig){YAHOO.widget.ContextMenu.superclass.constructor.call(this,p_oElement,p_oConfig)};var Event=YAHOO.util.Event,UA=YAHOO.env.ua,ContextMenu=YAHOO.widget.ContextMenu,EVENT_TYPES={"TRIGGER_CONTEXT_MENU":"triggerContextMenu","CONTEXT_MENU":UA.opera?_MOUSEDOWN:"contextmenu","CLICK":"click"},TRIGGER_CONFIG={key:"trigger",suppressEvent:true};function position(p_sType,
p_aArgs,p_aPos){this.cfg.setProperty(_XY,p_aPos);this.beforeShowEvent.unsubscribe(position,p_aPos)}YAHOO.lang.extend(ContextMenu,YAHOO.widget.Menu,{_oTrigger:null,_bCancelled:false,contextEventTarget:null,triggerContextMenuEvent:null,init:function(p_oElement,p_oConfig){ContextMenu.superclass.init.call(this,p_oElement);this.beforeInitEvent.fire(ContextMenu);if(p_oConfig)this.cfg.applyConfig(p_oConfig,true);this.initEvent.fire(ContextMenu)},initEvents:function(){ContextMenu.superclass.initEvents.call(this);
this.triggerContextMenuEvent=this.createEvent(EVENT_TYPES.TRIGGER_CONTEXT_MENU);this.triggerContextMenuEvent.signature=YAHOO.util.CustomEvent.LIST},cancel:function(){this._bCancelled=true},_removeEventHandlers:function(){var oTrigger=this._oTrigger;if(oTrigger){Event.removeListener(oTrigger,EVENT_TYPES.CONTEXT_MENU,this._onTriggerContextMenu);if(UA.opera)Event.removeListener(oTrigger,EVENT_TYPES.CLICK,this._onTriggerClick)}},_onTriggerClick:function(p_oEvent,p_oMenu){if(p_oEvent.ctrlKey)Event.stopEvent(p_oEvent)},
_onTriggerContextMenu:function(p_oEvent,p_oMenu){var aXY;if(!(p_oEvent.type==_MOUSEDOWN&&!p_oEvent.ctrlKey)){this.contextEventTarget=Event.getTarget(p_oEvent);this.triggerContextMenuEvent.fire(p_oEvent);if(!this._bCancelled){Event.stopEvent(p_oEvent);YAHOO.widget.MenuManager.hideVisible();aXY=Event.getXY(p_oEvent);if(!YAHOO.util.Dom.inDocument(this.element))this.beforeShowEvent.subscribe(position,aXY);else this.cfg.setProperty(_XY,aXY);this.show()}this._bCancelled=false}},toString:function(){var sReturnVal=
_CONTEXTMENU,sId=this.id;if(sId)sReturnVal+=_SPACE+sId;return sReturnVal},initDefaultConfig:function(){ContextMenu.superclass.initDefaultConfig.call(this);this.cfg.addProperty(TRIGGER_CONFIG.key,{handler:this.configTrigger,suppressEvent:TRIGGER_CONFIG.suppressEvent})},destroy:function(){this._removeEventHandlers();ContextMenu.superclass.destroy.call(this)},configTrigger:function(p_sType,p_aArgs,p_oMenu){var oTrigger=p_aArgs[0];if(oTrigger){if(this._oTrigger)this._removeEventHandlers();this._oTrigger=
oTrigger;Event.on(oTrigger,EVENT_TYPES.CONTEXT_MENU,this._onTriggerContextMenu,this,true);if(UA.opera)Event.on(oTrigger,EVENT_TYPES.CLICK,this._onTriggerClick,this,true)}else this._removeEventHandlers()}})})();YAHOO.widget.ContextMenuItem=YAHOO.widget.MenuItem;
(function(){var Lang=YAHOO.lang,_STATIC="static",_DYNAMIC_STATIC="dynamic,"+_STATIC,_DISABLED="disabled",_SELECTED="selected",_AUTO_SUBMENU_DISPLAY="autosubmenudisplay",_SUBMENU="submenu",_VISIBLE="visible",_SPACE=" ",_SUBMENU_TOGGLE_REGION="submenutoggleregion",_MENUBAR="MenuBar";YAHOO.widget.MenuBar=function(p_oElement,p_oConfig){YAHOO.widget.MenuBar.superclass.constructor.call(this,p_oElement,p_oConfig)};function checkPosition(p_sPosition){var returnVal=false;if(Lang.isString(p_sPosition))returnVal=
_DYNAMIC_STATIC.indexOf(p_sPosition.toLowerCase())!=-1;return returnVal}var Event=YAHOO.util.Event,MenuBar=YAHOO.widget.MenuBar,POSITION_CONFIG={key:"position",value:_STATIC,validator:checkPosition,supercedes:[_VISIBLE]},SUBMENU_ALIGNMENT_CONFIG={key:"submenualignment",value:["tl","bl"]},AUTO_SUBMENU_DISPLAY_CONFIG={key:_AUTO_SUBMENU_DISPLAY,value:false,validator:Lang.isBoolean,suppressEvent:true},SUBMENU_TOGGLE_REGION_CONFIG={key:_SUBMENU_TOGGLE_REGION,value:false,validator:Lang.isBoolean};Lang.extend(MenuBar,
YAHOO.widget.Menu,{init:function(p_oElement,p_oConfig){if(!this.ITEM_TYPE)this.ITEM_TYPE=YAHOO.widget.MenuBarItem;MenuBar.superclass.init.call(this,p_oElement);this.beforeInitEvent.fire(MenuBar);if(p_oConfig)this.cfg.applyConfig(p_oConfig,true);this.initEvent.fire(MenuBar)},CSS_CLASS_NAME:"yuimenubar",SUBMENU_TOGGLE_REGION_WIDTH:20,_onKeyDown:function(p_sType,p_aArgs,p_oMenuBar){var oEvent=p_aArgs[0],oItem=p_aArgs[1],oSubmenu,oItemCfg,oNextItem;if(oItem&&!oItem.cfg.getProperty(_DISABLED)){oItemCfg=
oItem.cfg;switch(oEvent.keyCode){case 37:case 39:if(oItem==this.activeItem&&!oItemCfg.getProperty(_SELECTED))oItemCfg.setProperty(_SELECTED,true);else{oNextItem=oEvent.keyCode==37?oItem.getPreviousEnabledSibling():oItem.getNextEnabledSibling();if(oNextItem){this.clearActiveItem();oNextItem.cfg.setProperty(_SELECTED,true);oSubmenu=oNextItem.cfg.getProperty(_SUBMENU);if(oSubmenu){oSubmenu.show();oSubmenu.setInitialFocus()}else oNextItem.focus()}}Event.preventDefault(oEvent);break;case 40:if(this.activeItem!=
oItem){this.clearActiveItem();oItemCfg.setProperty(_SELECTED,true);oItem.focus()}oSubmenu=oItemCfg.getProperty(_SUBMENU);if(oSubmenu)if(oSubmenu.cfg.getProperty(_VISIBLE)){oSubmenu.setInitialSelection();oSubmenu.setInitialFocus()}else{oSubmenu.show();oSubmenu.setInitialFocus()}Event.preventDefault(oEvent);break}}if(oEvent.keyCode==27&&this.activeItem){oSubmenu=this.activeItem.cfg.getProperty(_SUBMENU);if(oSubmenu&&oSubmenu.cfg.getProperty(_VISIBLE)){oSubmenu.hide();this.activeItem.focus()}else{this.activeItem.cfg.setProperty(_SELECTED,
false);this.activeItem.blur()}Event.preventDefault(oEvent)}},_onClick:function(p_sType,p_aArgs,p_oMenuBar){MenuBar.superclass._onClick.call(this,p_sType,p_aArgs,p_oMenuBar);var oItem=p_aArgs[1],bReturnVal=true,oItemEl,oEvent,oTarget,oActiveItem,oConfig,oSubmenu,nMenuItemX,nToggleRegion;var toggleSubmenuDisplay=function(){if(oSubmenu.cfg.getProperty(_VISIBLE))oSubmenu.hide();else oSubmenu.show()};if(oItem&&!oItem.cfg.getProperty(_DISABLED)){oEvent=p_aArgs[0];oTarget=Event.getTarget(oEvent);oActiveItem=
this.activeItem;oConfig=this.cfg;if(oActiveItem&&oActiveItem!=oItem)this.clearActiveItem();oItem.cfg.setProperty(_SELECTED,true);oSubmenu=oItem.cfg.getProperty(_SUBMENU);if(oSubmenu){oItemEl=oItem.element;nMenuItemX=YAHOO.util.Dom.getX(oItemEl);nToggleRegion=nMenuItemX+(oItemEl.offsetWidth-this.SUBMENU_TOGGLE_REGION_WIDTH);if(oConfig.getProperty(_SUBMENU_TOGGLE_REGION)){if(Event.getPageX(oEvent)>nToggleRegion){toggleSubmenuDisplay();Event.preventDefault(oEvent);bReturnVal=false}}else toggleSubmenuDisplay()}}return bReturnVal},
configSubmenuToggle:function(p_sType,p_aArgs){var bSubmenuToggle=p_aArgs[0];if(bSubmenuToggle)this.cfg.setProperty(_AUTO_SUBMENU_DISPLAY,false)},toString:function(){var sReturnVal=_MENUBAR,sId=this.id;if(sId)sReturnVal+=_SPACE+sId;return sReturnVal},initDefaultConfig:function(){MenuBar.superclass.initDefaultConfig.call(this);var oConfig=this.cfg;oConfig.addProperty(POSITION_CONFIG.key,{handler:this.configPosition,value:POSITION_CONFIG.value,validator:POSITION_CONFIG.validator,supercedes:POSITION_CONFIG.supercedes});
oConfig.addProperty(SUBMENU_ALIGNMENT_CONFIG.key,{value:SUBMENU_ALIGNMENT_CONFIG.value,suppressEvent:SUBMENU_ALIGNMENT_CONFIG.suppressEvent});oConfig.addProperty(AUTO_SUBMENU_DISPLAY_CONFIG.key,{value:AUTO_SUBMENU_DISPLAY_CONFIG.value,validator:AUTO_SUBMENU_DISPLAY_CONFIG.validator,suppressEvent:AUTO_SUBMENU_DISPLAY_CONFIG.suppressEvent});oConfig.addProperty(SUBMENU_TOGGLE_REGION_CONFIG.key,{value:SUBMENU_TOGGLE_REGION_CONFIG.value,validator:SUBMENU_TOGGLE_REGION_CONFIG.validator,handler:this.configSubmenuToggle})}})})();
YAHOO.widget.MenuBarItem=function(p_oObject,p_oConfig){YAHOO.widget.MenuBarItem.superclass.constructor.call(this,p_oObject,p_oConfig)};
YAHOO.lang.extend(YAHOO.widget.MenuBarItem,YAHOO.widget.MenuItem,{init:function(p_oObject,p_oConfig){if(!this.SUBMENU_TYPE)this.SUBMENU_TYPE=YAHOO.widget.Menu;YAHOO.widget.MenuBarItem.superclass.init.call(this,p_oObject);var oConfig=this.cfg;if(p_oConfig)oConfig.applyConfig(p_oConfig,true);oConfig.fireQueue()},CSS_CLASS_NAME:"yuimenubaritem",CSS_LABEL_CLASS_NAME:"yuimenubaritemlabel",toString:function(){var sReturnVal="MenuBarItem";if(this.cfg&&this.cfg.getProperty("text"))sReturnVal+=": "+this.cfg.getProperty("text");
return sReturnVal}});YAHOO.register("menu",YAHOO.widget.Menu,{version:"2.8.0r4",build:"2449"});YAHOO.widget.LogMsg=function(oConfigs){this.msg=this.time=this.category=this.source=this.sourceDetail=null;if(oConfigs&&oConfigs.constructor==Object)for(var param in oConfigs)if(oConfigs.hasOwnProperty(param))this[param]=oConfigs[param]};YAHOO.widget.LogWriter=function(sSource){if(!sSource){YAHOO.log("Could not instantiate LogWriter due to invalid source.","error","LogWriter");return}this._source=sSource};
YAHOO.widget.LogWriter.prototype.toString=function(){return"LogWriter "+this._sSource};YAHOO.widget.LogWriter.prototype.log=function(sMsg,sCategory){YAHOO.widget.Logger.log(sMsg,sCategory,this._source)};YAHOO.widget.LogWriter.prototype.getSource=function(){return this._source};YAHOO.widget.LogWriter.prototype.setSource=function(sSource){if(!sSource){YAHOO.log("Could not set source due to invalid source.","error",this.toString());return}else this._source=sSource};
YAHOO.widget.LogWriter.prototype._source=null;
if(!YAHOO.widget.Logger){YAHOO.widget.Logger={loggerEnabled:true,_browserConsoleEnabled:false,categories:["info","warn","error","time","window"],sources:["global"],_stack:[],maxStackEntries:2500,_startTime:(new Date).getTime(),_lastTime:null,_windowErrorsHandled:false,_origOnWindowError:null};YAHOO.widget.Logger.log=function(sMsg,sCategory,sSource){if(this.loggerEnabled){if(!sCategory)sCategory="info";else{sCategory=sCategory.toLocaleLowerCase();if(this._isNewCategory(sCategory))this._createNewCategory(sCategory)}var sClass="global";
var sDetail=null;if(sSource){var spaceIndex=sSource.indexOf(" ");if(spaceIndex>0){sClass=sSource.substring(0,spaceIndex);sDetail=sSource.substring(spaceIndex,sSource.length)}else sClass=sSource;if(this._isNewSource(sClass))this._createNewSource(sClass)}var timestamp=new Date;var logEntry=new YAHOO.widget.LogMsg({msg:sMsg,time:timestamp,category:sCategory,source:sClass,sourceDetail:sDetail});var stack=this._stack;var maxStackEntries=this.maxStackEntries;if(maxStackEntries&&!isNaN(maxStackEntries)&&
stack.length>=maxStackEntries)stack.shift();stack.push(logEntry);this.newLogEvent.fire(logEntry);if(this._browserConsoleEnabled)this._printToBrowserConsole(logEntry);return true}else return false};YAHOO.widget.Logger.reset=function(){this._stack=[];this._startTime=(new Date).getTime();this.loggerEnabled=true;this.log("Logger reset");this.logResetEvent.fire()};YAHOO.widget.Logger.getStack=function(){return this._stack};YAHOO.widget.Logger.getStartTime=function(){return this._startTime};YAHOO.widget.Logger.disableBrowserConsole=
function(){YAHOO.log("Logger output to the function console.log() has been disabled.");this._browserConsoleEnabled=false};YAHOO.widget.Logger.enableBrowserConsole=function(){this._browserConsoleEnabled=true;YAHOO.log("Logger output to the function console.log() has been enabled.")};YAHOO.widget.Logger.handleWindowErrors=function(){if(!YAHOO.widget.Logger._windowErrorsHandled){if(window.error)YAHOO.widget.Logger._origOnWindowError=window.onerror;window.onerror=YAHOO.widget.Logger._onWindowError;YAHOO.widget.Logger._windowErrorsHandled=
true;YAHOO.log("Logger handling of window.onerror has been enabled.")}else YAHOO.log("Logger handling of window.onerror had already been enabled.")};YAHOO.widget.Logger.unhandleWindowErrors=function(){if(YAHOO.widget.Logger._windowErrorsHandled){if(YAHOO.widget.Logger._origOnWindowError){window.onerror=YAHOO.widget.Logger._origOnWindowError;YAHOO.widget.Logger._origOnWindowError=null}else window.onerror=null;YAHOO.widget.Logger._windowErrorsHandled=false;YAHOO.log("Logger handling of window.onerror has been disabled.")}else YAHOO.log("Logger handling of window.onerror had already been disabled.")};
YAHOO.widget.Logger.categoryCreateEvent=new YAHOO.util.CustomEvent("categoryCreate",this,true);YAHOO.widget.Logger.sourceCreateEvent=new YAHOO.util.CustomEvent("sourceCreate",this,true);YAHOO.widget.Logger.newLogEvent=new YAHOO.util.CustomEvent("newLog",this,true);YAHOO.widget.Logger.logResetEvent=new YAHOO.util.CustomEvent("logReset",this,true);YAHOO.widget.Logger._createNewCategory=function(sCategory){this.categories.push(sCategory);this.categoryCreateEvent.fire(sCategory)};YAHOO.widget.Logger._isNewCategory=
function(sCategory){for(var i=0;i<this.categories.length;i++)if(sCategory==this.categories[i])return false;return true};YAHOO.widget.Logger._createNewSource=function(sSource){this.sources.push(sSource);this.sourceCreateEvent.fire(sSource)};YAHOO.widget.Logger._isNewSource=function(sSource){if(sSource){for(var i=0;i<this.sources.length;i++)if(sSource==this.sources[i])return false;return true}};YAHOO.widget.Logger._printToBrowserConsole=function(oEntry){if(window.console&&console.log){var category=
oEntry.category;var label=oEntry.category.substring(0,4).toUpperCase();var time=oEntry.time;var localTime;if(time.toLocaleTimeString)localTime=time.toLocaleTimeString();else localTime=time.toString();var msecs=time.getTime();var elapsedTime=YAHOO.widget.Logger._lastTime?msecs-YAHOO.widget.Logger._lastTime:0;YAHOO.widget.Logger._lastTime=msecs;var output=localTime+" ("+elapsedTime+"ms): "+oEntry.source+": ";if(YAHOO.env.ua.webkit)output+=oEntry.msg;console.log(output,oEntry.msg)}};YAHOO.widget.Logger._onWindowError=
function(sMsg,sUrl,sLine){try{YAHOO.widget.Logger.log(sMsg+" ("+sUrl+", line "+sLine+")","window");if(YAHOO.widget.Logger._origOnWindowError)YAHOO.widget.Logger._origOnWindowError()}catch(e){return false}};YAHOO.widget.Logger.log("Logger initialized")}
(function(){var Logger=YAHOO.widget.Logger,u=YAHOO.util,Dom=u.Dom,Event=u.Event,d=document;function make(el,props){el=d.createElement(el);if(props)for(var p in props)if(props.hasOwnProperty(p))el[p]=props[p];return el}function LogReader(elContainer,oConfigs){this._sName=LogReader._index;LogReader._index++;this._init.apply(this,arguments);if(this.autoRender!==false)this.render()}YAHOO.lang.augmentObject(LogReader,{_index:0,ENTRY_TEMPLATE:function(){return make("pre",{className:"yui-log-entry"})}(),
VERBOSE_TEMPLATE:"<p><span class='{category}'>{label}</span> {totalTime}ms (+{elapsedTime}) {localTime}:</p><p>{sourceAndDetail}</p><p>{message}</p>",BASIC_TEMPLATE:"<p><span class='{category}'>{label}</span> {totalTime}ms (+{elapsedTime}) {localTime}: {sourceAndDetail}: {message}</p>"});LogReader.prototype={logReaderEnabled:true,width:null,height:null,top:null,left:null,right:null,bottom:null,fontSize:null,footerEnabled:true,verboseOutput:true,entryFormat:null,newestOnTop:true,outputBuffer:100,thresholdMax:500,
thresholdMin:100,isCollapsed:false,isPaused:false,draggable:true,toString:function(){return"LogReader instance"+this._sName},pause:function(){this.isPaused=true;this._timeout=null;this.logReaderEnabled=false;if(this._btnPause)this._btnPause.value="Resume"},resume:function(){this.isPaused=false;this.logReaderEnabled=true;this._printBuffer();if(this._btnPause)this._btnPause.value="Pause"},render:function(){if(this.rendered)return;this._initContainerEl();this._initHeaderEl();this._initConsoleEl();this._initFooterEl();
this._initCategories();this._initSources();this._initDragDrop();Logger.newLogEvent.subscribe(this._onNewLog,this);Logger.logResetEvent.subscribe(this._onReset,this);Logger.categoryCreateEvent.subscribe(this._onCategoryCreate,this);Logger.sourceCreateEvent.subscribe(this._onSourceCreate,this);this.rendered=true;this._filterLogs()},destroy:function(){Event.purgeElement(this._elContainer,true);this._elContainer.innerHTML="";this._elContainer.parentNode.removeChild(this._elContainer);this.rendered=false},
hide:function(){this._elContainer.style.display="none"},show:function(){this._elContainer.style.display="block"},collapse:function(){this._elConsole.style.display="none";if(this._elFt)this._elFt.style.display="none";this._btnCollapse.value="Expand";this.isCollapsed=true},expand:function(){this._elConsole.style.display="block";if(this._elFt)this._elFt.style.display="block";this._btnCollapse.value="Collapse";this.isCollapsed=false},getCheckbox:function(filter){return this._filterCheckboxes[filter]},
getCategories:function(){return this._categoryFilters},showCategory:function(sCategory){var filtersArray=this._categoryFilters;if(filtersArray.indexOf){if(filtersArray.indexOf(sCategory)>-1)return}else for(var i=0;i<filtersArray.length;i++)if(filtersArray[i]===sCategory)return;this._categoryFilters.push(sCategory);this._filterLogs();var elCheckbox=this.getCheckbox(sCategory);if(elCheckbox)elCheckbox.checked=true},hideCategory:function(sCategory){var filtersArray=this._categoryFilters;for(var i=0;i<
filtersArray.length;i++)if(sCategory==filtersArray[i]){filtersArray.splice(i,1);break}this._filterLogs();var elCheckbox=this.getCheckbox(sCategory);if(elCheckbox)elCheckbox.checked=false},getSources:function(){return this._sourceFilters},showSource:function(sSource){var filtersArray=this._sourceFilters;if(filtersArray.indexOf){if(filtersArray.indexOf(sSource)>-1)return}else for(var i=0;i<filtersArray.length;i++)if(sSource==filtersArray[i])return;filtersArray.push(sSource);this._filterLogs();var elCheckbox=
this.getCheckbox(sSource);if(elCheckbox)elCheckbox.checked=true},hideSource:function(sSource){var filtersArray=this._sourceFilters;for(var i=0;i<filtersArray.length;i++)if(sSource==filtersArray[i]){filtersArray.splice(i,1);break}this._filterLogs();var elCheckbox=this.getCheckbox(sSource);if(elCheckbox)elCheckbox.checked=false},clearConsole:function(){this._timeout=null;this._buffer=[];this._consoleMsgCount=0;var elConsole=this._elConsole;elConsole.innerHTML=""},setTitle:function(sTitle){this._title.innerHTML=
this.html2Text(sTitle)},getLastTime:function(){return this._lastTime},formatMsg:function(entry){var entryFormat=this.entryFormat||(this.verboseOutput?LogReader.VERBOSE_TEMPLATE:LogReader.BASIC_TEMPLATE),info={category:entry.category,label:entry.category.substring(0,4).toUpperCase(),sourceAndDetail:entry.sourceDetail?entry.source+" "+entry.sourceDetail:entry.source,message:this.html2Text(entry.msg||entry.message||"")};if(entry.time&&entry.time.getTime){info.localTime=entry.time.toLocaleTimeString?
entry.time.toLocaleTimeString():entry.time.toString();info.elapsedTime=entry.time.getTime()-this.getLastTime();info.totalTime=entry.time.getTime()-Logger.getStartTime()}var msg=LogReader.ENTRY_TEMPLATE.cloneNode(true);if(this.verboseOutput)msg.className+=" yui-log-verbose";msg.innerHTML=entryFormat.replace(/\{(\w+)\}/g,function(x,placeholder){return placeholder in info?info[placeholder]:""});return msg},html2Text:function(sHtml){if(sHtml){sHtml+="";return sHtml.replace(/&/g,"&#38;").replace(/</g,
"&#60;").replace(/>/g,"&#62;")}return""},_sName:null,_buffer:null,_consoleMsgCount:0,_lastTime:null,_timeout:null,_filterCheckboxes:null,_categoryFilters:null,_sourceFilters:null,_elContainer:null,_elHd:null,_elCollapse:null,_btnCollapse:null,_title:null,_elConsole:null,_elFt:null,_elBtns:null,_elCategoryFilters:null,_elSourceFilters:null,_btnPause:null,_btnClear:null,_init:function(container,config){this._buffer=[];this._filterCheckboxes={};this._lastTime=Logger.getStartTime();if(config&&config.constructor==
Object)for(var param in config)if(config.hasOwnProperty(param))this[param]=config[param];this._elContainer=Dom.get(container);YAHOO.log("LogReader initialized",null,this.toString())},_initContainerEl:function(){if(!this._elContainer||!/div$/i.test(this._elContainer.tagName)){this._elContainer=d.body.insertBefore(make("div"),d.body.firstChild);Dom.addClass(this._elContainer,"yui-log-container")}Dom.addClass(this._elContainer,"yui-log");var style=this._elContainer.style,styleProps=["width","right",
"top","fontSize"],prop,i;for(i=styleProps.length-1;i>=0;--i){prop=styleProps[i];if(this[prop])style[prop]=this[prop]}if(this.left){style.left=this.left;style.right="auto"}if(this.bottom){style.bottom=this.bottom;style.top="auto"}if(YAHOO.env.ua.opera)d.body.style+=""},_initHeaderEl:function(){if(this._elHd){Event.purgeElement(this._elHd,true);this._elHd.innerHTML=""}this._elHd=make("div",{id:"yui-log-hd"+this._sName,className:"yui-log-hd"});this._elCollapse=make("div",{className:"yui-log-btns"});
this._btnCollapse=make("input",{type:"button",className:"yui-log-button",value:"Collapse"});Event.on(this._btnCollapse,"click",this._onClickCollapseBtn,this);this._title=make("h4",{innerHTML:"Logger Console"});this._elCollapse.appendChild(this._btnCollapse);this._elHd.appendChild(this._elCollapse);this._elHd.appendChild(this._title);this._elContainer.appendChild(this._elHd)},_initConsoleEl:function(){if(this._elConsole){Event.purgeElement(this._elConsole,true);this._elConsole.innerHTML=""}this._elConsole=
make("div",{className:"yui-log-bd"});if(this.height)this._elConsole.style.height=this.height;this._elContainer.appendChild(this._elConsole)},_initFooterEl:function(){if(this.footerEnabled){if(this._elFt){Event.purgeElement(this._elFt,true);this._elFt.innerHTML=""}this._elFt=make("div",{className:"yui-log-ft"});this._elBtns=make("div",{className:"yui-log-btns"});this._btnPause=make("input",{type:"button",className:"yui-log-button",value:"Pause"});Event.on(this._btnPause,"click",this._onClickPauseBtn,
this);this._btnClear=make("input",{type:"button",className:"yui-log-button",value:"Clear"});Event.on(this._btnClear,"click",this._onClickClearBtn,this);this._elCategoryFilters=make("div",{className:"yui-log-categoryfilters"});this._elSourceFilters=make("div",{className:"yui-log-sourcefilters"});this._elBtns.appendChild(this._btnPause);this._elBtns.appendChild(this._btnClear);this._elFt.appendChild(this._elBtns);this._elFt.appendChild(this._elCategoryFilters);this._elFt.appendChild(this._elSourceFilters);
this._elContainer.appendChild(this._elFt)}},_initDragDrop:function(){if(u.DD&&this.draggable&&this._elHd){var ylog_dd=new u.DD(this._elContainer);ylog_dd.setHandleElId(this._elHd.id);this._elHd.style.cursor="move"}},_initCategories:function(){this._categoryFilters=[];var aInitialCategories=Logger.categories;for(var j=0;j<aInitialCategories.length;j++){var sCategory=aInitialCategories[j];this._categoryFilters.push(sCategory);if(this._elCategoryFilters)this._createCategoryCheckbox(sCategory)}},_initSources:function(){this._sourceFilters=
[];var aInitialSources=Logger.sources;for(var j=0;j<aInitialSources.length;j++){var sSource=aInitialSources[j];this._sourceFilters.push(sSource);if(this._elSourceFilters)this._createSourceCheckbox(sSource)}},_createCategoryCheckbox:function(sCategory){if(this._elFt){var filter=make("span",{className:"yui-log-filtergrp"}),check=make("input",{id:"yui-log-filter-"+sCategory+this._sName,className:"yui-log-filter-"+sCategory,type:"checkbox",category:sCategory}),label=make("label",{htmlFor:check.id,className:sCategory,
innerHTML:sCategory});Event.on(check,"click",this._onCheckCategory,this);this._filterCheckboxes[sCategory]=check;filter.appendChild(check);filter.appendChild(label);this._elCategoryFilters.appendChild(filter);check.checked=true}},_createSourceCheckbox:function(sSource){if(this._elFt){var filter=make("span",{className:"yui-log-filtergrp"}),check=make("input",{id:"yui-log-filter-"+sSource+this._sName,className:"yui-log-filter-"+sSource,type:"checkbox",source:sSource}),label=make("label",{htmlFor:check.id,
className:sSource,innerHTML:sSource});Event.on(check,"click",this._onCheckSource,this);this._filterCheckboxes[sSource]=check;filter.appendChild(check);filter.appendChild(label);this._elSourceFilters.appendChild(filter);check.checked=true}},_filterLogs:function(){if(this._elConsole!==null){this.clearConsole();this._printToConsole(Logger.getStack())}},_printBuffer:function(){this._timeout=null;if(this._elConsole!==null){var thresholdMax=this.thresholdMax;thresholdMax=thresholdMax&&!isNaN(thresholdMax)?
thresholdMax:500;if(this._consoleMsgCount<thresholdMax){var entries=[];for(var i=0;i<this._buffer.length;i++)entries[i]=this._buffer[i];this._buffer=[];this._printToConsole(entries)}else this._filterLogs();if(!this.newestOnTop)this._elConsole.scrollTop=this._elConsole.scrollHeight}},_printToConsole:function(aEntries){var entriesLen=aEntries.length,df=d.createDocumentFragment(),msgHTML=[],thresholdMin=this.thresholdMin,sourceFiltersLen=this._sourceFilters.length,categoryFiltersLen=this._categoryFilters.length,
entriesStartIndex,i,j,msg,before;if(isNaN(thresholdMin)||thresholdMin>this.thresholdMax)thresholdMin=0;entriesStartIndex=entriesLen>thresholdMin?entriesLen-thresholdMin:0;for(i=entriesStartIndex;i<entriesLen;i++){var okToPrint=false,okToFilterCats=false,entry=aEntries[i],source=entry.source,category=entry.category;for(j=0;j<sourceFiltersLen;j++)if(source==this._sourceFilters[j]){okToFilterCats=true;break}if(okToFilterCats)for(j=0;j<categoryFiltersLen;j++)if(category==this._categoryFilters[j]){okToPrint=
true;break}if(okToPrint){if(this._consoleMsgCount===0)this._lastTime=entry.time.getTime();msg=this.formatMsg(entry);if(typeof msg==="string")msgHTML[msgHTML.length]=msg;else df.insertBefore(msg,this.newestOnTop?df.firstChild||null:null);this._consoleMsgCount++;this._lastTime=entry.time.getTime()}}if(msgHTML.length){msgHTML.splice(0,0,this._elConsole.innerHTML);this._elConsole.innerHTML=this.newestOnTop?msgHTML.reverse().join(""):msgHTML.join("")}else if(df.firstChild)this._elConsole.insertBefore(df,
this.newestOnTop?this._elConsole.firstChild||null:null)},_onCategoryCreate:function(sType,aArgs,oSelf){var category=aArgs[0];oSelf._categoryFilters.push(category);if(oSelf._elFt)oSelf._createCategoryCheckbox(category)},_onSourceCreate:function(sType,aArgs,oSelf){var source=aArgs[0];oSelf._sourceFilters.push(source);if(oSelf._elFt)oSelf._createSourceCheckbox(source)},_onCheckCategory:function(v,oSelf){var category=this.category;if(!this.checked)oSelf.hideCategory(category);else oSelf.showCategory(category)},
_onCheckSource:function(v,oSelf){var source=this.source;if(!this.checked)oSelf.hideSource(source);else oSelf.showSource(source)},_onClickCollapseBtn:function(v,oSelf){if(!oSelf.isCollapsed)oSelf.collapse();else oSelf.expand()},_onClickPauseBtn:function(v,oSelf){if(!oSelf.isPaused)oSelf.pause();else oSelf.resume()},_onClickClearBtn:function(v,oSelf){oSelf.clearConsole()},_onNewLog:function(sType,aArgs,oSelf){var logEntry=aArgs[0];oSelf._buffer.push(logEntry);if(oSelf.logReaderEnabled===true&&oSelf._timeout===
null)oSelf._timeout=setTimeout(function(){oSelf._printBuffer()},oSelf.outputBuffer)},_onReset:function(sType,aArgs,oSelf){oSelf._filterLogs()}};YAHOO.widget.LogReader=LogReader})();YAHOO.register("logger",YAHOO.widget.Logger,{version:"2.8.0r4",build:"2449"});
(function(){YAHOO.util.Config=function(owner){if(owner)this.init(owner)};var Lang=YAHOO.lang,CustomEvent=YAHOO.util.CustomEvent,Config=YAHOO.util.Config;Config.CONFIG_CHANGED_EVENT="configChanged";Config.BOOLEAN_TYPE="boolean";Config.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(owner){this.owner=owner;this.configChangedEvent=this.createEvent(Config.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=CustomEvent.LIST;
this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(val){return typeof val==Config.BOOLEAN_TYPE},checkNumber:function(val){return!isNaN(val)},fireEvent:function(key,value){var property=this.config[key];if(property&&property.event)property.event.fire(value)},addProperty:function(key,propertyObject){key=key.toLowerCase();this.config[key]=propertyObject;propertyObject.event=this.createEvent(key,{scope:this.owner});propertyObject.event.signature=CustomEvent.LIST;
propertyObject.key=key;if(propertyObject.handler)propertyObject.event.subscribe(propertyObject.handler,this.owner);this.setProperty(key,propertyObject.value,true);if(!propertyObject.suppressEvent)this.queueProperty(key,propertyObject.value)},getConfig:function(){var cfg={},currCfg=this.config,prop,property;for(prop in currCfg)if(Lang.hasOwnProperty(currCfg,prop)){property=currCfg[prop];if(property&&property.event)cfg[prop]=property.value}return cfg},getProperty:function(key){var property=this.config[key.toLowerCase()];
if(property&&property.event)return property.value;else return undefined},resetProperty:function(key){key=key.toLowerCase();var property=this.config[key];if(property&&property.event){if(this.initialConfig[key]&&!Lang.isUndefined(this.initialConfig[key])){this.setProperty(key,this.initialConfig[key]);return true}}else return false},setProperty:function(key,value,silent){var property;key=key.toLowerCase();if(this.queueInProgress&&!silent){this.queueProperty(key,value);return true}else{property=this.config[key];
if(property&&property.event)if(property.validator&&!property.validator(value))return false;else{property.value=value;if(!silent){this.fireEvent(key,value);this.configChangedEvent.fire([key,value])}return true}else return false}},queueProperty:function(key,value){key=key.toLowerCase();var property=this.config[key],foundDuplicate=false,iLen,queueItem,queueItemKey,queueItemValue,sLen,supercedesCheck,qLen,queueItemCheck,queueItemCheckKey,queueItemCheckValue,i,s,q;if(property&&property.event){if(!Lang.isUndefined(value)&&
property.validator&&!property.validator(value))return false;else{if(!Lang.isUndefined(value))property.value=value;else value=property.value;foundDuplicate=false;iLen=this.eventQueue.length;for(i=0;i<iLen;i++){queueItem=this.eventQueue[i];if(queueItem){queueItemKey=queueItem[0];queueItemValue=queueItem[1];if(queueItemKey==key){this.eventQueue[i]=null;this.eventQueue.push([key,!Lang.isUndefined(value)?value:queueItemValue]);foundDuplicate=true;break}}}if(!foundDuplicate&&!Lang.isUndefined(value))this.eventQueue.push([key,
value])}if(property.supercedes){sLen=property.supercedes.length;for(s=0;s<sLen;s++){supercedesCheck=property.supercedes[s];qLen=this.eventQueue.length;for(q=0;q<qLen;q++){queueItemCheck=this.eventQueue[q];if(queueItemCheck){queueItemCheckKey=queueItemCheck[0];queueItemCheckValue=queueItemCheck[1];if(queueItemCheckKey==supercedesCheck.toLowerCase()){this.eventQueue.push([queueItemCheckKey,queueItemCheckValue]);this.eventQueue[q]=null;break}}}}}return true}else return false},refireEvent:function(key){key=
key.toLowerCase();var property=this.config[key];if(property&&property.event&&!Lang.isUndefined(property.value))if(this.queueInProgress)this.queueProperty(key);else this.fireEvent(key,property.value)},applyConfig:function(userConfig,init){var sKey,oConfig;if(init){oConfig={};for(sKey in userConfig)if(Lang.hasOwnProperty(userConfig,sKey))oConfig[sKey.toLowerCase()]=userConfig[sKey];this.initialConfig=oConfig}for(sKey in userConfig)if(Lang.hasOwnProperty(userConfig,sKey))this.queueProperty(sKey,userConfig[sKey])},
refresh:function(){var prop;for(prop in this.config)if(Lang.hasOwnProperty(this.config,prop))this.refireEvent(prop)},fireQueue:function(){var i,queueItem,key,value,property;this.queueInProgress=true;for(i=0;i<this.eventQueue.length;i++){queueItem=this.eventQueue[i];if(queueItem){key=queueItem[0];value=queueItem[1];property=this.config[key];property.value=value;this.eventQueue[i]=null;this.fireEvent(key,value)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(key,handler,
obj,overrideContext){var property=this.config[key.toLowerCase()];if(property&&property.event){if(!Config.alreadySubscribed(property.event,handler,obj))property.event.subscribe(handler,obj,overrideContext);return true}else return false},unsubscribeFromConfigEvent:function(key,handler,obj){var property=this.config[key.toLowerCase()];if(property&&property.event)return property.event.unsubscribe(handler,obj);else return false},toString:function(){var output="Config";if(this.owner)output+=" ["+this.owner.toString()+
"]";return output},outputEventQueue:function(){var output="",queueItem,q,nQueue=this.eventQueue.length;for(q=0;q<nQueue;q++){queueItem=this.eventQueue[q];if(queueItem)output+=queueItem[0]+"="+queueItem[1]+", "}return output},destroy:function(){var oConfig=this.config,sProperty,oProperty;for(sProperty in oConfig)if(Lang.hasOwnProperty(oConfig,sProperty)){oProperty=oConfig[sProperty];oProperty.event.unsubscribeAll();oProperty.event=null}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=
null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};Config.alreadySubscribed=function(evt,fn,obj){var nSubscribers=evt.subscribers.length,subsc,i;if(nSubscribers>0){i=nSubscribers-1;do{subsc=evt.subscribers[i];if(subsc&&subsc.obj==obj&&subsc.fn==fn)return true}while(i--)}return false};YAHOO.lang.augmentProto(Config,YAHOO.util.EventProvider)})();
YAHOO.widget.DateMath={DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1E3*60*60*24,WEEK_ONE_JAN_DATE:1,add:function(date,field,amount){var d=new Date(date.getTime());switch(field){case this.MONTH:var newMonth=date.getMonth()+amount;var years=0;if(newMonth<0)while(newMonth<0){newMonth+=12;years-=1}else if(newMonth>11)while(newMonth>11){newMonth-=12;years+=1}d.setMonth(newMonth);d.setFullYear(date.getFullYear()+years);break;case this.DAY:this._addDays(d,amount);break;case this.YEAR:d.setFullYear(date.getFullYear()+
amount);break;case this.WEEK:this._addDays(d,amount*7);break}return d},_addDays:function(d,nDays){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420)if(nDays<0)for(var min=-128;nDays<min;nDays-=min)d.setDate(d.getDate()+min);else for(var max=96;nDays>max;nDays-=max)d.setDate(d.getDate()+max);d.setDate(d.getDate()+nDays)},subtract:function(date,field,amount){return this.add(date,field,amount*-1)},before:function(date,compareTo){var ms=compareTo.getTime();if(date.getTime()<ms)return true;else return false},
after:function(date,compareTo){var ms=compareTo.getTime();if(date.getTime()>ms)return true;else return false},between:function(date,dateBegin,dateEnd){if(this.after(date,dateBegin)&&this.before(date,dateEnd))return true;else return false},getJan1:function(calendarYear){return this.getDate(calendarYear,0,1)},getDayOffset:function(date,calendarYear){var beginYear=this.getJan1(calendarYear);var dayOffset=Math.ceil((date.getTime()-beginYear.getTime())/this.ONE_DAY_MS);return dayOffset},getWeekNumber:function(date,
firstDayOfWeek,janDate){firstDayOfWeek=firstDayOfWeek||0;janDate=janDate||this.WEEK_ONE_JAN_DATE;var targetDate=this.clearTime(date),startOfWeek,endOfWeek;if(targetDate.getDay()===firstDayOfWeek)startOfWeek=targetDate;else startOfWeek=this.getFirstDayOfWeek(targetDate,firstDayOfWeek);var startYear=startOfWeek.getFullYear();endOfWeek=new Date(startOfWeek.getTime()+6*this.ONE_DAY_MS);var weekNum;if(startYear!==endOfWeek.getFullYear()&&endOfWeek.getDate()>=janDate)weekNum=1;else{var weekOne=this.clearTime(this.getDate(startYear,
0,janDate)),weekOneDayOne=this.getFirstDayOfWeek(weekOne,firstDayOfWeek);var daysDiff=Math.round((targetDate.getTime()-weekOneDayOne.getTime())/this.ONE_DAY_MS);var rem=daysDiff%7;var weeksDiff=(daysDiff-rem)/7;weekNum=weeksDiff+1}return weekNum},getFirstDayOfWeek:function(dt,startOfWeek){startOfWeek=startOfWeek||0;var dayOfWeekIndex=dt.getDay(),dayOfWeek=(dayOfWeekIndex-startOfWeek+7)%7;return this.subtract(dt,this.DAY,dayOfWeek)},isYearOverlapWeek:function(weekBeginDate){var overlaps=false;var nextWeek=
this.add(weekBeginDate,this.DAY,6);if(nextWeek.getFullYear()!=weekBeginDate.getFullYear())overlaps=true;return overlaps},isMonthOverlapWeek:function(weekBeginDate){var overlaps=false;var nextWeek=this.add(weekBeginDate,this.DAY,6);if(nextWeek.getMonth()!=weekBeginDate.getMonth())overlaps=true;return overlaps},findMonthStart:function(date){var start=this.getDate(date.getFullYear(),date.getMonth(),1);return start},findMonthEnd:function(date){var start=this.findMonthStart(date);var nextMonth=this.add(start,
this.MONTH,1);var end=this.subtract(nextMonth,this.DAY,1);return end},clearTime:function(date){date.setHours(12,0,0,0);return date},getDate:function(y,m,d){var dt=null;if(YAHOO.lang.isUndefined(d))d=1;if(y>=100)dt=new Date(y,m,d);else{dt=new Date;dt.setFullYear(y);dt.setMonth(m);dt.setDate(d);dt.setHours(0,0,0,0)}return dt}};
(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang,DateMath=YAHOO.widget.DateMath;function Calendar(id,containerId,config){this.init.apply(this,arguments)}Calendar.IMG_ROOT=null;Calendar.DATE="D";Calendar.MONTH_DAY="MD";Calendar.WEEKDAY="WD";Calendar.RANGE="R";Calendar.MONTH="M";Calendar.DISPLAY_DAYS=42;Calendar.STOP_RENDER="S";Calendar.SHORT="short";Calendar.LONG="long";Calendar.MEDIUM="medium";Calendar.ONE_CHAR="1char";Calendar.DEFAULT_CONFIG={YEAR_OFFSET:{key:"year_offset",
value:0,supercedes:["pagedate","selected","mindate","maxdate"]},TODAY:{key:"today",value:new Date,supercedes:["pagedate"]},PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:[]},TITLE:{key:"title",value:""},CLOSE:{key:"close",value:false},IFRAME:{key:"iframe",value:YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6?true:false},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:false},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",
value:true},SHOW_WEEK_HEADER:{key:"show_week_header",value:false},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:false},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:false},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September",
"October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",
value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"-"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",
value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null},STRINGS:{key:"strings",value:{previousMonth:"Previous Month",nextMonth:"Next Month",close:"Close"},supercedes:["close","title"]}};Calendar._DEFAULT_CONFIG=Calendar.DEFAULT_CONFIG;var DEF_CFG=Calendar.DEFAULT_CONFIG;Calendar._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",
BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",BEFORE_DESTROY:"beforeDestroy",DESTROY:"destroy",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav"};Calendar.STYLES={CSS_ROW_HEADER:"calrowhead",CSS_ROW_FOOTER:"calrowfoot",
CSS_CELL:"calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"previous",CSS_HEADER:"calheader",CSS_HEADER_TEXT:"calhead",CSS_BODY:"calbody",CSS_WEEKDAY_CELL:"calweekdaycell",CSS_WEEKDAY_ROW:"calweekdayrow",CSS_FOOTER:"calfoot",CSS_CALENDAR:"yui-calendar",CSS_SINGLE:"single",CSS_CONTAINER:"yui-calcontainer",CSS_NAV_LEFT:"calnavleft",CSS_NAV_RIGHT:"calnavright",CSS_NAV:"calnav",
CSS_CLOSE:"calclose",CSS_CELL_TOP:"calcelltop",CSS_CELL_LEFT:"calcellleft",CSS_CELL_RIGHT:"calcellright",CSS_CELL_BOTTOM:"calcellbottom",CSS_CELL_HOVER:"calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4",CSS_WITH_TITLE:"withtitle",CSS_FIXED_SIZE:"fixedsize",CSS_LINK_CLOSE:"link-close"};Calendar._STYLES=Calendar.STYLES;Calendar.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,
containerId:null,oDomContainer:null,today:null,renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(args){var nArgs={id:null,container:null,config:null};if(args&&args.length&&args.length>0)switch(args.length){case 1:nArgs.id=null;nArgs.container=args[0];nArgs.config=null;break;case 2:if(Lang.isObject(args[1])&&!args[1].tagName&&!(args[1]instanceof String)){nArgs.id=null;nArgs.container=args[0];nArgs.config=args[1]}else{nArgs.id=args[0];nArgs.container=
args[1];nArgs.config=null}break;default:nArgs.id=args[0];nArgs.container=args[1];nArgs.config=args[2];break}else;return nArgs},init:function(id,container,config){var nArgs=this._parseArgs(arguments);id=nArgs.id;container=nArgs.container;config=nArgs.config;this.oDomContainer=Dom.get(container);if(!this.oDomContainer.id)this.oDomContainer.id=Dom.generateId();if(!id)id=this.oDomContainer.id+"_t";this.id=id;this.containerId=this.oDomContainer.id;this.initEvents();this.cfg=new YAHOO.util.Config(this);
this.Options={};this.Locale={};this.initStyles();Dom.addClass(this.oDomContainer,this.Style.CSS_CONTAINER);Dom.addClass(this.oDomContainer,this.Style.CSS_SINGLE);this.cellDates=[];this.cells=[];this.renderStack=[];this._renderStack=[];this.setupConfig();if(config)this.cfg.applyConfig(config,true);this.cfg.fireQueue();this.today=this.cfg.getProperty("today")},configIframe:function(type,args,obj){var useIframe=args[0];if(!this.parent)if(Dom.inDocument(this.oDomContainer))if(useIframe){var pos=Dom.getStyle(this.oDomContainer,
"position");if(pos=="absolute"||pos=="relative")if(!Dom.inDocument(this.iframe)){this.iframe=document.createElement("iframe");this.iframe.src="javascript:false;";Dom.setStyle(this.iframe,"opacity","0");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6)Dom.addClass(this.iframe,this.Style.CSS_FIXED_SIZE);this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild)}}else if(this.iframe){if(this.iframe.parentNode)this.iframe.parentNode.removeChild(this.iframe);this.iframe=null}},configTitle:function(type,
args,obj){var title=args[0];if(title)this.createTitleBar(title);else{var close=this.cfg.getProperty(DEF_CFG.CLOSE.key);if(!close)this.removeTitleBar();else this.createTitleBar("&#160;")}},configClose:function(type,args,obj){var close=args[0],title=this.cfg.getProperty(DEF_CFG.TITLE.key);if(close){if(!title)this.createTitleBar("&#160;");this.createCloseButton()}else{this.removeCloseButton();if(!title)this.removeTitleBar()}},initEvents:function(){var defEvents=Calendar._EVENT_TYPES,CE=YAHOO.util.CustomEvent,
cal=this;cal.beforeSelectEvent=new CE(defEvents.BEFORE_SELECT);cal.selectEvent=new CE(defEvents.SELECT);cal.beforeDeselectEvent=new CE(defEvents.BEFORE_DESELECT);cal.deselectEvent=new CE(defEvents.DESELECT);cal.changePageEvent=new CE(defEvents.CHANGE_PAGE);cal.beforeRenderEvent=new CE(defEvents.BEFORE_RENDER);cal.renderEvent=new CE(defEvents.RENDER);cal.beforeDestroyEvent=new CE(defEvents.BEFORE_DESTROY);cal.destroyEvent=new CE(defEvents.DESTROY);cal.resetEvent=new CE(defEvents.RESET);cal.clearEvent=
new CE(defEvents.CLEAR);cal.beforeShowEvent=new CE(defEvents.BEFORE_SHOW);cal.showEvent=new CE(defEvents.SHOW);cal.beforeHideEvent=new CE(defEvents.BEFORE_HIDE);cal.hideEvent=new CE(defEvents.HIDE);cal.beforeShowNavEvent=new CE(defEvents.BEFORE_SHOW_NAV);cal.showNavEvent=new CE(defEvents.SHOW_NAV);cal.beforeHideNavEvent=new CE(defEvents.BEFORE_HIDE_NAV);cal.hideNavEvent=new CE(defEvents.HIDE_NAV);cal.beforeRenderNavEvent=new CE(defEvents.BEFORE_RENDER_NAV);cal.renderNavEvent=new CE(defEvents.RENDER_NAV);
cal.beforeSelectEvent.subscribe(cal.onBeforeSelect,this,true);cal.selectEvent.subscribe(cal.onSelect,this,true);cal.beforeDeselectEvent.subscribe(cal.onBeforeDeselect,this,true);cal.deselectEvent.subscribe(cal.onDeselect,this,true);cal.changePageEvent.subscribe(cal.onChangePage,this,true);cal.renderEvent.subscribe(cal.onRender,this,true);cal.resetEvent.subscribe(cal.onReset,this,true);cal.clearEvent.subscribe(cal.onClear,this,true)},doPreviousMonthNav:function(e,cal){Event.preventDefault(e);setTimeout(function(){cal.previousMonth();
var navs=Dom.getElementsByClassName(cal.Style.CSS_NAV_LEFT,"a",cal.oDomContainer);if(navs&&navs[0])try{navs[0].focus()}catch(ex){}},0)},doNextMonthNav:function(e,cal){Event.preventDefault(e);setTimeout(function(){cal.nextMonth();var navs=Dom.getElementsByClassName(cal.Style.CSS_NAV_RIGHT,"a",cal.oDomContainer);if(navs&&navs[0])try{navs[0].focus()}catch(ex){}},0)},doSelectCell:function(e,cal){var cell,d,date,index;var target=Event.getTarget(e),tagName=target.tagName.toLowerCase(),defSelector=false;
while(tagName!="td"&&!Dom.hasClass(target,cal.Style.CSS_CELL_SELECTABLE)){if(!defSelector&&tagName=="a"&&Dom.hasClass(target,cal.Style.CSS_CELL_SELECTOR))defSelector=true;target=target.parentNode;tagName=target.tagName.toLowerCase();if(target==this.oDomContainer||tagName=="html")return}if(defSelector)Event.preventDefault(e);cell=target;if(Dom.hasClass(cell,cal.Style.CSS_CELL_SELECTABLE)){index=cal.getIndexFromId(cell.id);if(index>-1){d=cal.cellDates[index];if(d){date=DateMath.getDate(d[0],d[1]-1,
d[2]);var link;if(cal.Options.MULTI_SELECT){link=cell.getElementsByTagName("a")[0];if(link)link.blur();var cellDate=cal.cellDates[index];var cellDateIndex=cal._indexOfSelectedFieldArray(cellDate);if(cellDateIndex>-1)cal.deselectCell(index);else cal.selectCell(index)}else{link=cell.getElementsByTagName("a")[0];if(link)link.blur();cal.selectCell(index)}}}}},doCellMouseOver:function(e,cal){var target;if(e)target=Event.getTarget(e);else target=this;while(target.tagName&&target.tagName.toLowerCase()!=
"td"){target=target.parentNode;if(!target.tagName||target.tagName.toLowerCase()=="html")return}if(Dom.hasClass(target,cal.Style.CSS_CELL_SELECTABLE))Dom.addClass(target,cal.Style.CSS_CELL_HOVER)},doCellMouseOut:function(e,cal){var target;if(e)target=Event.getTarget(e);else target=this;while(target.tagName&&target.tagName.toLowerCase()!="td"){target=target.parentNode;if(!target.tagName||target.tagName.toLowerCase()=="html")return}if(Dom.hasClass(target,cal.Style.CSS_CELL_SELECTABLE))Dom.removeClass(target,
cal.Style.CSS_CELL_HOVER)},setupConfig:function(){var cfg=this.cfg;cfg.addProperty(DEF_CFG.TODAY.key,{value:new Date(DEF_CFG.TODAY.value.getTime()),supercedes:DEF_CFG.TODAY.supercedes,handler:this.configToday,suppressEvent:true});cfg.addProperty(DEF_CFG.PAGEDATE.key,{value:DEF_CFG.PAGEDATE.value||new Date(DEF_CFG.TODAY.value.getTime()),handler:this.configPageDate});cfg.addProperty(DEF_CFG.SELECTED.key,{value:DEF_CFG.SELECTED.value.concat(),handler:this.configSelected});cfg.addProperty(DEF_CFG.TITLE.key,
{value:DEF_CFG.TITLE.value,handler:this.configTitle});cfg.addProperty(DEF_CFG.CLOSE.key,{value:DEF_CFG.CLOSE.value,handler:this.configClose});cfg.addProperty(DEF_CFG.IFRAME.key,{value:DEF_CFG.IFRAME.value,handler:this.configIframe,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.MINDATE.key,{value:DEF_CFG.MINDATE.value,handler:this.configMinDate});cfg.addProperty(DEF_CFG.MAXDATE.key,{value:DEF_CFG.MAXDATE.value,handler:this.configMaxDate});cfg.addProperty(DEF_CFG.MULTI_SELECT.key,{value:DEF_CFG.MULTI_SELECT.value,
handler:this.configOptions,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.START_WEEKDAY.key,{value:DEF_CFG.START_WEEKDAY.value,handler:this.configOptions,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.SHOW_WEEKDAYS.key,{value:DEF_CFG.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.SHOW_WEEK_HEADER.key,{value:DEF_CFG.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.SHOW_WEEK_FOOTER.key,
{value:DEF_CFG.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.HIDE_BLANK_WEEKS.key,{value:DEF_CFG.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.NAV_ARROW_LEFT.key,{value:DEF_CFG.NAV_ARROW_LEFT.value,handler:this.configOptions});cfg.addProperty(DEF_CFG.NAV_ARROW_RIGHT.key,{value:DEF_CFG.NAV_ARROW_RIGHT.value,handler:this.configOptions});cfg.addProperty(DEF_CFG.MONTHS_SHORT.key,{value:DEF_CFG.MONTHS_SHORT.value,
handler:this.configLocale});cfg.addProperty(DEF_CFG.MONTHS_LONG.key,{value:DEF_CFG.MONTHS_LONG.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.WEEKDAYS_1CHAR.key,{value:DEF_CFG.WEEKDAYS_1CHAR.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.WEEKDAYS_SHORT.key,{value:DEF_CFG.WEEKDAYS_SHORT.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.WEEKDAYS_MEDIUM.key,{value:DEF_CFG.WEEKDAYS_MEDIUM.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.WEEKDAYS_LONG.key,{value:DEF_CFG.WEEKDAYS_LONG.value,
handler:this.configLocale});var refreshLocale=function(){cfg.refireEvent(DEF_CFG.LOCALE_MONTHS.key);cfg.refireEvent(DEF_CFG.LOCALE_WEEKDAYS.key)};cfg.subscribeToConfigEvent(DEF_CFG.START_WEEKDAY.key,refreshLocale,this,true);cfg.subscribeToConfigEvent(DEF_CFG.MONTHS_SHORT.key,refreshLocale,this,true);cfg.subscribeToConfigEvent(DEF_CFG.MONTHS_LONG.key,refreshLocale,this,true);cfg.subscribeToConfigEvent(DEF_CFG.WEEKDAYS_1CHAR.key,refreshLocale,this,true);cfg.subscribeToConfigEvent(DEF_CFG.WEEKDAYS_SHORT.key,
refreshLocale,this,true);cfg.subscribeToConfigEvent(DEF_CFG.WEEKDAYS_MEDIUM.key,refreshLocale,this,true);cfg.subscribeToConfigEvent(DEF_CFG.WEEKDAYS_LONG.key,refreshLocale,this,true);cfg.addProperty(DEF_CFG.LOCALE_MONTHS.key,{value:DEF_CFG.LOCALE_MONTHS.value,handler:this.configLocaleValues});cfg.addProperty(DEF_CFG.LOCALE_WEEKDAYS.key,{value:DEF_CFG.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues});cfg.addProperty(DEF_CFG.YEAR_OFFSET.key,{value:DEF_CFG.YEAR_OFFSET.value,supercedes:DEF_CFG.YEAR_OFFSET.supercedes,
handler:this.configLocale});cfg.addProperty(DEF_CFG.DATE_DELIMITER.key,{value:DEF_CFG.DATE_DELIMITER.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.DATE_FIELD_DELIMITER.key,{value:DEF_CFG.DATE_FIELD_DELIMITER.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.DATE_RANGE_DELIMITER.key,{value:DEF_CFG.DATE_RANGE_DELIMITER.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.MY_MONTH_POSITION.key,{value:DEF_CFG.MY_MONTH_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});
cfg.addProperty(DEF_CFG.MY_YEAR_POSITION.key,{value:DEF_CFG.MY_YEAR_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MD_MONTH_POSITION.key,{value:DEF_CFG.MD_MONTH_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MD_DAY_POSITION.key,{value:DEF_CFG.MD_DAY_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MDY_MONTH_POSITION.key,{value:DEF_CFG.MDY_MONTH_POSITION.value,handler:this.configLocale,
validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MDY_DAY_POSITION.key,{value:DEF_CFG.MDY_DAY_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MDY_YEAR_POSITION.key,{value:DEF_CFG.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MY_LABEL_MONTH_POSITION.key,{value:DEF_CFG.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MY_LABEL_YEAR_POSITION.key,
{value:DEF_CFG.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MY_LABEL_MONTH_SUFFIX.key,{value:DEF_CFG.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.MY_LABEL_YEAR_SUFFIX.key,{value:DEF_CFG.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale});cfg.addProperty(DEF_CFG.NAV.key,{value:DEF_CFG.NAV.value,handler:this.configNavigator});cfg.addProperty(DEF_CFG.STRINGS.key,{value:DEF_CFG.STRINGS.value,handler:this.configStrings,
validator:function(val){return Lang.isObject(val)},supercedes:DEF_CFG.STRINGS.supercedes})},configStrings:function(type,args,obj){var val=Lang.merge(DEF_CFG.STRINGS.value,args[0]);this.cfg.setProperty(DEF_CFG.STRINGS.key,val,true)},configPageDate:function(type,args,obj){this.cfg.setProperty(DEF_CFG.PAGEDATE.key,this._parsePageDate(args[0]),true)},configMinDate:function(type,args,obj){var val=args[0];if(Lang.isString(val)){val=this._parseDate(val);this.cfg.setProperty(DEF_CFG.MINDATE.key,DateMath.getDate(val[0],
val[1]-1,val[2]))}},configMaxDate:function(type,args,obj){var val=args[0];if(Lang.isString(val)){val=this._parseDate(val);this.cfg.setProperty(DEF_CFG.MAXDATE.key,DateMath.getDate(val[0],val[1]-1,val[2]))}},configToday:function(type,args,obj){var val=args[0];if(Lang.isString(val))val=this._parseDate(val);var today=DateMath.clearTime(val);if(!this.cfg.initialConfig[DEF_CFG.PAGEDATE.key])this.cfg.setProperty(DEF_CFG.PAGEDATE.key,today);this.today=today;this.cfg.setProperty(DEF_CFG.TODAY.key,today,true)},
configSelected:function(type,args,obj){var selected=args[0],cfgSelected=DEF_CFG.SELECTED.key;if(selected)if(Lang.isString(selected))this.cfg.setProperty(cfgSelected,this._parseDates(selected),true);if(!this._selectedDates)this._selectedDates=this.cfg.getProperty(cfgSelected)},configOptions:function(type,args,obj){this.Options[type.toUpperCase()]=args[0]},configLocale:function(type,args,obj){this.Locale[type.toUpperCase()]=args[0];this.cfg.refireEvent(DEF_CFG.LOCALE_MONTHS.key);this.cfg.refireEvent(DEF_CFG.LOCALE_WEEKDAYS.key)},
configLocaleValues:function(type,args,obj){type=type.toLowerCase();var val=args[0],cfg=this.cfg,Locale=this.Locale;switch(type){case DEF_CFG.LOCALE_MONTHS.key:switch(val){case Calendar.SHORT:Locale.LOCALE_MONTHS=cfg.getProperty(DEF_CFG.MONTHS_SHORT.key).concat();break;case Calendar.LONG:Locale.LOCALE_MONTHS=cfg.getProperty(DEF_CFG.MONTHS_LONG.key).concat();break}break;case DEF_CFG.LOCALE_WEEKDAYS.key:switch(val){case Calendar.ONE_CHAR:Locale.LOCALE_WEEKDAYS=cfg.getProperty(DEF_CFG.WEEKDAYS_1CHAR.key).concat();
break;case Calendar.SHORT:Locale.LOCALE_WEEKDAYS=cfg.getProperty(DEF_CFG.WEEKDAYS_SHORT.key).concat();break;case Calendar.MEDIUM:Locale.LOCALE_WEEKDAYS=cfg.getProperty(DEF_CFG.WEEKDAYS_MEDIUM.key).concat();break;case Calendar.LONG:Locale.LOCALE_WEEKDAYS=cfg.getProperty(DEF_CFG.WEEKDAYS_LONG.key).concat();break}var START_WEEKDAY=cfg.getProperty(DEF_CFG.START_WEEKDAY.key);if(START_WEEKDAY>0)for(var w=0;w<START_WEEKDAY;++w)Locale.LOCALE_WEEKDAYS.push(Locale.LOCALE_WEEKDAYS.shift());break}},configNavigator:function(type,
args,obj){var val=args[0];if(YAHOO.widget.CalendarNavigator&&(val===true||Lang.isObject(val))){if(!this.oNavigator){this.oNavigator=new YAHOO.widget.CalendarNavigator(this);this.beforeRenderEvent.subscribe(function(){if(!this.pages)this.oNavigator.erase()},this,true)}}else if(this.oNavigator){this.oNavigator.destroy();this.oNavigator=null}},initStyles:function(){var defStyle=Calendar.STYLES;this.Style={CSS_ROW_HEADER:defStyle.CSS_ROW_HEADER,CSS_ROW_FOOTER:defStyle.CSS_ROW_FOOTER,CSS_CELL:defStyle.CSS_CELL,
CSS_CELL_SELECTOR:defStyle.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:defStyle.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:defStyle.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:defStyle.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:defStyle.CSS_CELL_TODAY,CSS_CELL_OOM:defStyle.CSS_CELL_OOM,CSS_CELL_OOB:defStyle.CSS_CELL_OOB,CSS_HEADER:defStyle.CSS_HEADER,CSS_HEADER_TEXT:defStyle.CSS_HEADER_TEXT,CSS_BODY:defStyle.CSS_BODY,CSS_WEEKDAY_CELL:defStyle.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:defStyle.CSS_WEEKDAY_ROW,CSS_FOOTER:defStyle.CSS_FOOTER,
CSS_CALENDAR:defStyle.CSS_CALENDAR,CSS_SINGLE:defStyle.CSS_SINGLE,CSS_CONTAINER:defStyle.CSS_CONTAINER,CSS_NAV_LEFT:defStyle.CSS_NAV_LEFT,CSS_NAV_RIGHT:defStyle.CSS_NAV_RIGHT,CSS_NAV:defStyle.CSS_NAV,CSS_CLOSE:defStyle.CSS_CLOSE,CSS_CELL_TOP:defStyle.CSS_CELL_TOP,CSS_CELL_LEFT:defStyle.CSS_CELL_LEFT,CSS_CELL_RIGHT:defStyle.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:defStyle.CSS_CELL_BOTTOM,CSS_CELL_HOVER:defStyle.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:defStyle.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:defStyle.CSS_CELL_HIGHLIGHT2,
CSS_CELL_HIGHLIGHT3:defStyle.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:defStyle.CSS_CELL_HIGHLIGHT4,CSS_WITH_TITLE:defStyle.CSS_WITH_TITLE,CSS_FIXED_SIZE:defStyle.CSS_FIXED_SIZE,CSS_LINK_CLOSE:defStyle.CSS_LINK_CLOSE}},buildMonthLabel:function(){return this._buildMonthLabel(this.cfg.getProperty(DEF_CFG.PAGEDATE.key))},_buildMonthLabel:function(date){var monthLabel=this.Locale.LOCALE_MONTHS[date.getMonth()]+this.Locale.MY_LABEL_MONTH_SUFFIX,yearLabel=date.getFullYear()+this.Locale.YEAR_OFFSET+this.Locale.MY_LABEL_YEAR_SUFFIX;
if(this.Locale.MY_LABEL_MONTH_POSITION==2||this.Locale.MY_LABEL_YEAR_POSITION==1)return yearLabel+monthLabel;else return monthLabel+yearLabel},buildDayLabel:function(workingDate){return workingDate.getDate()},createTitleBar:function(strTitle){var tDiv=Dom.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");tDiv.className=YAHOO.widget.CalendarGroup.CSS_2UPTITLE;tDiv.innerHTML=strTitle;this.oDomContainer.insertBefore(tDiv,this.oDomContainer.firstChild);
Dom.addClass(this.oDomContainer,this.Style.CSS_WITH_TITLE);return tDiv},removeTitleBar:function(){var tDiv=Dom.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;if(tDiv){Event.purgeElement(tDiv);this.oDomContainer.removeChild(tDiv)}Dom.removeClass(this.oDomContainer,this.Style.CSS_WITH_TITLE)},createCloseButton:function(){var cssClose=YAHOO.widget.CalendarGroup.CSS_2UPCLOSE,cssLinkClose=this.Style.CSS_LINK_CLOSE,DEPR_CLOSE_PATH="us/my/bn/x_d.gif",lnk=
Dom.getElementsByClassName(cssLinkClose,"a",this.oDomContainer)[0],strings=this.cfg.getProperty(DEF_CFG.STRINGS.key),closeStr=strings&&strings.close?strings.close:"";if(!lnk){lnk=document.createElement("a");Event.addListener(lnk,"click",function(e,cal){cal.hide();Event.preventDefault(e)},this)}lnk.href="#";lnk.className=cssLinkClose;if(Calendar.IMG_ROOT!==null){var img=Dom.getElementsByClassName(cssClose,"img",lnk)[0]||document.createElement("img");img.src=Calendar.IMG_ROOT+DEPR_CLOSE_PATH;img.className=
cssClose;lnk.appendChild(img)}else lnk.innerHTML='<span class="'+cssClose+" "+this.Style.CSS_CLOSE+'">'+closeStr+"</span>";this.oDomContainer.appendChild(lnk);return lnk},removeCloseButton:function(){var btn=Dom.getElementsByClassName(this.Style.CSS_LINK_CLOSE,"a",this.oDomContainer)[0]||null;if(btn){Event.purgeElement(btn);this.oDomContainer.removeChild(btn)}},renderHeader:function(html){var colSpan=7,DEPR_NAV_LEFT="us/tr/callt.gif",DEPR_NAV_RIGHT="us/tr/calrt.gif",cfg=this.cfg,pageDate=cfg.getProperty(DEF_CFG.PAGEDATE.key),
strings=cfg.getProperty(DEF_CFG.STRINGS.key),prevStr=strings&&strings.previousMonth?strings.previousMonth:"",nextStr=strings&&strings.nextMonth?strings.nextMonth:"",monthLabel;if(cfg.getProperty(DEF_CFG.SHOW_WEEK_HEADER.key))colSpan+=1;if(cfg.getProperty(DEF_CFG.SHOW_WEEK_FOOTER.key))colSpan+=1;html[html.length]="<thead>";html[html.length]="<tr>";html[html.length]='<th colspan="'+colSpan+'" class="'+this.Style.CSS_HEADER_TEXT+'">';html[html.length]='<div class="'+this.Style.CSS_HEADER+'">';var renderLeft,
renderRight=false;if(this.parent){if(this.index===0)renderLeft=true;if(this.index==this.parent.cfg.getProperty("pages")-1)renderRight=true}else{renderLeft=true;renderRight=true}if(renderLeft){monthLabel=this._buildMonthLabel(DateMath.subtract(pageDate,DateMath.MONTH,1));var leftArrow=cfg.getProperty(DEF_CFG.NAV_ARROW_LEFT.key);if(leftArrow===null&&Calendar.IMG_ROOT!==null)leftArrow=Calendar.IMG_ROOT+DEPR_NAV_LEFT;var leftStyle=leftArrow===null?"":' style="background-image:url('+leftArrow+')"';html[html.length]=
'<a class="'+this.Style.CSS_NAV_LEFT+'"'+leftStyle+' href="#">'+prevStr+" ("+monthLabel+")"+"</a>"}var lbl=this.buildMonthLabel();var cal=this.parent||this;if(cal.cfg.getProperty("navigator"))lbl='<a class="'+this.Style.CSS_NAV+'" href="#">'+lbl+"</a>";html[html.length]=lbl;if(renderRight){monthLabel=this._buildMonthLabel(DateMath.add(pageDate,DateMath.MONTH,1));var rightArrow=cfg.getProperty(DEF_CFG.NAV_ARROW_RIGHT.key);if(rightArrow===null&&Calendar.IMG_ROOT!==null)rightArrow=Calendar.IMG_ROOT+
DEPR_NAV_RIGHT;var rightStyle=rightArrow===null?"":' style="background-image:url('+rightArrow+')"';html[html.length]='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+rightStyle+' href="#">'+nextStr+" ("+monthLabel+")"+"</a>"}html[html.length]="</div>\n</th>\n</tr>";if(cfg.getProperty(DEF_CFG.SHOW_WEEKDAYS.key))html=this.buildWeekdays(html);html[html.length]="</thead>";return html},buildWeekdays:function(html){html[html.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">';if(this.cfg.getProperty(DEF_CFG.SHOW_WEEK_HEADER.key))html[html.length]=
"<th>&#160;</th>";for(var i=0;i<this.Locale.LOCALE_WEEKDAYS.length;++i)html[html.length]='<th class="'+this.Style.CSS_WEEKDAY_CELL+'">'+this.Locale.LOCALE_WEEKDAYS[i]+"</th>";if(this.cfg.getProperty(DEF_CFG.SHOW_WEEK_FOOTER.key))html[html.length]="<th>&#160;</th>";html[html.length]="</tr>";return html},renderBody:function(workingDate,html){var startDay=this.cfg.getProperty(DEF_CFG.START_WEEKDAY.key);this.preMonthDays=workingDate.getDay();if(startDay>0)this.preMonthDays-=startDay;if(this.preMonthDays<
0)this.preMonthDays+=7;this.monthDays=DateMath.findMonthEnd(workingDate).getDate();this.postMonthDays=Calendar.DISPLAY_DAYS-this.preMonthDays-this.monthDays;workingDate=DateMath.subtract(workingDate,DateMath.DAY,this.preMonthDays);var weekNum,weekClass,weekPrefix="w",cellPrefix="_cell",workingDayPrefix="wd",dayPrefix="d",cellRenderers,renderer,t=this.today,cfg=this.cfg,todayYear=t.getFullYear(),todayMonth=t.getMonth(),todayDate=t.getDate(),useDate=cfg.getProperty(DEF_CFG.PAGEDATE.key),hideBlankWeeks=
cfg.getProperty(DEF_CFG.HIDE_BLANK_WEEKS.key),showWeekFooter=cfg.getProperty(DEF_CFG.SHOW_WEEK_FOOTER.key),showWeekHeader=cfg.getProperty(DEF_CFG.SHOW_WEEK_HEADER.key),mindate=cfg.getProperty(DEF_CFG.MINDATE.key),maxdate=cfg.getProperty(DEF_CFG.MAXDATE.key),yearOffset=this.Locale.YEAR_OFFSET;if(mindate)mindate=DateMath.clearTime(mindate);if(maxdate)maxdate=DateMath.clearTime(maxdate);html[html.length]='<tbody class="m'+(useDate.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var i=0,tempDiv=document.createElement("div"),
cell=document.createElement("td");tempDiv.appendChild(cell);var cal=this.parent||this;for(var r=0;r<6;r++){weekNum=DateMath.getWeekNumber(workingDate,startDay);weekClass=weekPrefix+weekNum;if(r!==0&&hideBlankWeeks===true&&workingDate.getMonth()!=useDate.getMonth())break;else{html[html.length]='<tr class="'+weekClass+'">';if(showWeekHeader)html=this.renderRowHeader(weekNum,html);for(var d=0;d<7;d++){cellRenderers=[];this.clearElement(cell);cell.className=this.Style.CSS_CELL;cell.id=this.id+cellPrefix+
i;if(workingDate.getDate()==todayDate&&workingDate.getMonth()==todayMonth&&workingDate.getFullYear()==todayYear)cellRenderers[cellRenderers.length]=cal.renderCellStyleToday;var workingArray=[workingDate.getFullYear(),workingDate.getMonth()+1,workingDate.getDate()];this.cellDates[this.cellDates.length]=workingArray;if(workingDate.getMonth()!=useDate.getMonth())cellRenderers[cellRenderers.length]=cal.renderCellNotThisMonth;else{Dom.addClass(cell,workingDayPrefix+workingDate.getDay());Dom.addClass(cell,
dayPrefix+workingDate.getDate());for(var s=0;s<this.renderStack.length;++s){renderer=null;var rArray=this.renderStack[s],type=rArray[0],month,day,year;switch(type){case Calendar.DATE:month=rArray[1][1];day=rArray[1][2];year=rArray[1][0];if(workingDate.getMonth()+1==month&&workingDate.getDate()==day&&workingDate.getFullYear()==year){renderer=rArray[2];this.renderStack.splice(s,1)}break;case Calendar.MONTH_DAY:month=rArray[1][0];day=rArray[1][1];if(workingDate.getMonth()+1==month&&workingDate.getDate()==
day){renderer=rArray[2];this.renderStack.splice(s,1)}break;case Calendar.RANGE:var date1=rArray[1][0],date2=rArray[1][1],d1month=date1[1],d1day=date1[2],d1year=date1[0],d1=DateMath.getDate(d1year,d1month-1,d1day),d2month=date2[1],d2day=date2[2],d2year=date2[0],d2=DateMath.getDate(d2year,d2month-1,d2day);if(workingDate.getTime()>=d1.getTime()&&workingDate.getTime()<=d2.getTime()){renderer=rArray[2];if(workingDate.getTime()==d2.getTime())this.renderStack.splice(s,1)}break;case Calendar.WEEKDAY:var weekday=
rArray[1][0];if(workingDate.getDay()+1==weekday)renderer=rArray[2];break;case Calendar.MONTH:month=rArray[1][0];if(workingDate.getMonth()+1==month)renderer=rArray[2];break}if(renderer)cellRenderers[cellRenderers.length]=renderer}}if(this._indexOfSelectedFieldArray(workingArray)>-1)cellRenderers[cellRenderers.length]=cal.renderCellStyleSelected;if(mindate&&workingDate.getTime()<mindate.getTime()||maxdate&&workingDate.getTime()>maxdate.getTime())cellRenderers[cellRenderers.length]=cal.renderOutOfBoundsDate;
else{cellRenderers[cellRenderers.length]=cal.styleCellDefault;cellRenderers[cellRenderers.length]=cal.renderCellDefault}for(var x=0;x<cellRenderers.length;++x)if(cellRenderers[x].call(cal,workingDate,cell)==Calendar.STOP_RENDER)break;workingDate.setTime(workingDate.getTime()+DateMath.ONE_DAY_MS);workingDate=DateMath.clearTime(workingDate);if(i>=0&&i<=6)Dom.addClass(cell,this.Style.CSS_CELL_TOP);if(i%7===0)Dom.addClass(cell,this.Style.CSS_CELL_LEFT);if((i+1)%7===0)Dom.addClass(cell,this.Style.CSS_CELL_RIGHT);
var postDays=this.postMonthDays;if(hideBlankWeeks&&postDays>=7){var blankWeeks=Math.floor(postDays/7);for(var p=0;p<blankWeeks;++p)postDays-=7}if(i>=this.preMonthDays+postDays+this.monthDays-7)Dom.addClass(cell,this.Style.CSS_CELL_BOTTOM);html[html.length]=tempDiv.innerHTML;i++}if(showWeekFooter)html=this.renderRowFooter(weekNum,html);html[html.length]="</tr>"}}html[html.length]="</tbody>";return html},renderFooter:function(html){return html},render:function(){this.beforeRenderEvent.fire();var workingDate=
DateMath.findMonthStart(this.cfg.getProperty(DEF_CFG.PAGEDATE.key));this.resetRenderers();this.cellDates.length=0;Event.purgeElement(this.oDomContainer,true);var html=[];html[html.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+(workingDate.getFullYear()+this.Locale.YEAR_OFFSET)+'" id="'+this.id+'">';html=this.renderHeader(html);html=this.renderBody(workingDate,html);html=this.renderFooter(html);html[html.length]="</table>";this.oDomContainer.innerHTML=html.join("\n");this.applyListeners();
this.cells=Dom.getElementsByClassName(this.Style.CSS_CELL,"td",this.id);this.cfg.refireEvent(DEF_CFG.TITLE.key);this.cfg.refireEvent(DEF_CFG.CLOSE.key);this.cfg.refireEvent(DEF_CFG.IFRAME.key);this.renderEvent.fire()},applyListeners:function(){var root=this.oDomContainer,cal=this.parent||this,anchor="a",click="click";var linkLeft=Dom.getElementsByClassName(this.Style.CSS_NAV_LEFT,anchor,root),linkRight=Dom.getElementsByClassName(this.Style.CSS_NAV_RIGHT,anchor,root);if(linkLeft&&linkLeft.length>0){this.linkLeft=
linkLeft[0];Event.addListener(this.linkLeft,click,this.doPreviousMonthNav,cal,true)}if(linkRight&&linkRight.length>0){this.linkRight=linkRight[0];Event.addListener(this.linkRight,click,this.doNextMonthNav,cal,true)}if(cal.cfg.getProperty("navigator")!==null)this.applyNavListeners();if(this.domEventMap){var el,elements;for(var cls in this.domEventMap)if(Lang.hasOwnProperty(this.domEventMap,cls)){var items=this.domEventMap[cls];if(!(items instanceof Array))items=[items];for(var i=0;i<items.length;i++){var item=
items[i];elements=Dom.getElementsByClassName(cls,item.tag,this.oDomContainer);for(var c=0;c<elements.length;c++){el=elements[c];Event.addListener(el,item.event,item.handler,item.scope,item.correct)}}}}Event.addListener(this.oDomContainer,"click",this.doSelectCell,this);Event.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this);Event.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this)},applyNavListeners:function(){var calParent=this.parent||this,cal=this,navBtns=Dom.getElementsByClassName(this.Style.CSS_NAV,
"a",this.oDomContainer);if(navBtns.length>0)Event.addListener(navBtns,"click",function(e,obj){var target=Event.getTarget(e);if(this===target||Dom.isAncestor(this,target))Event.preventDefault(e);var navigator=calParent.oNavigator;if(navigator){var pgdate=cal.cfg.getProperty("pagedate");navigator.setYear(pgdate.getFullYear()+cal.Locale.YEAR_OFFSET);navigator.setMonth(pgdate.getMonth());navigator.show()}})},getDateByCellId:function(id){var date=this.getDateFieldsByCellId(id);return date?DateMath.getDate(date[0],
date[1]-1,date[2]):null},getDateFieldsByCellId:function(id){id=this.getIndexFromId(id);return id>-1?this.cellDates[id]:null},getCellIndex:function(date){var idx=-1;if(date){var m=date.getMonth(),y=date.getFullYear(),d=date.getDate(),dates=this.cellDates;for(var i=0;i<dates.length;++i){var cellDate=dates[i];if(cellDate[0]===y&&cellDate[1]===m+1&&cellDate[2]===d){idx=i;break}}}return idx},getIndexFromId:function(strId){var idx=-1,li=strId.lastIndexOf("_cell");if(li>-1)idx=parseInt(strId.substring(li+
5),10);return idx},renderOutOfBoundsDate:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_OOB);cell.innerHTML=workingDate.getDate();return Calendar.STOP_RENDER},renderRowHeader:function(weekNum,html){html[html.length]='<th class="'+this.Style.CSS_ROW_HEADER+'">'+weekNum+"</th>";return html},renderRowFooter:function(weekNum,html){html[html.length]='<th class="'+this.Style.CSS_ROW_FOOTER+'">'+weekNum+"</th>";return html},renderCellDefault:function(workingDate,cell){cell.innerHTML='<a href="#" class="'+
this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(workingDate)+"</a>"},styleCellDefault:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_SELECTABLE)},renderCellStyleHighlight1:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_HIGHLIGHT1)},renderCellStyleHighlight2:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_HIGHLIGHT2)},renderCellStyleHighlight3:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_HIGHLIGHT3)},renderCellStyleHighlight4:function(workingDate,
cell){Dom.addClass(cell,this.Style.CSS_CELL_HIGHLIGHT4)},renderCellStyleToday:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_TODAY)},renderCellStyleSelected:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_SELECTED)},renderCellNotThisMonth:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL_OOM);cell.innerHTML=workingDate.getDate();return Calendar.STOP_RENDER},renderBodyCellRestricted:function(workingDate,cell){Dom.addClass(cell,this.Style.CSS_CELL);
Dom.addClass(cell,this.Style.CSS_CELL_RESTRICTED);cell.innerHTML=workingDate.getDate();return Calendar.STOP_RENDER},addMonths:function(count){var cfgPageDate=DEF_CFG.PAGEDATE.key,prevDate=this.cfg.getProperty(cfgPageDate),newDate=DateMath.add(prevDate,DateMath.MONTH,count);this.cfg.setProperty(cfgPageDate,newDate);this.resetRenderers();this.changePageEvent.fire(prevDate,newDate)},subtractMonths:function(count){this.addMonths(-1*count)},addYears:function(count){var cfgPageDate=DEF_CFG.PAGEDATE.key,
prevDate=this.cfg.getProperty(cfgPageDate),newDate=DateMath.add(prevDate,DateMath.YEAR,count);this.cfg.setProperty(cfgPageDate,newDate);this.resetRenderers();this.changePageEvent.fire(prevDate,newDate)},subtractYears:function(count){this.addYears(-1*count)},nextMonth:function(){this.addMonths(1)},previousMonth:function(){this.addMonths(-1)},nextYear:function(){this.addYears(1)},previousYear:function(){this.addYears(-1)},reset:function(){this.cfg.resetProperty(DEF_CFG.SELECTED.key);this.cfg.resetProperty(DEF_CFG.PAGEDATE.key);
this.resetEvent.fire()},clear:function(){this.cfg.setProperty(DEF_CFG.SELECTED.key,[]);this.cfg.setProperty(DEF_CFG.PAGEDATE.key,new Date(this.today.getTime()));this.clearEvent.fire()},select:function(date){var aToBeSelected=this._toFieldArray(date),validDates=[],selected=[],cfgSelected=DEF_CFG.SELECTED.key;for(var a=0;a<aToBeSelected.length;++a){var toSelect=aToBeSelected[a];if(!this.isDateOOB(this._toDate(toSelect))){if(validDates.length===0){this.beforeSelectEvent.fire();selected=this.cfg.getProperty(cfgSelected)}validDates.push(toSelect);
if(this._indexOfSelectedFieldArray(toSelect)==-1)selected[selected.length]=toSelect}}if(validDates.length>0){if(this.parent)this.parent.cfg.setProperty(cfgSelected,selected);else this.cfg.setProperty(cfgSelected,selected);this.selectEvent.fire(validDates)}return this.getSelectedDates()},selectCell:function(cellIndex){var cell=this.cells[cellIndex],cellDate=this.cellDates[cellIndex],dCellDate=this._toDate(cellDate),selectable=Dom.hasClass(cell,this.Style.CSS_CELL_SELECTABLE);if(selectable){this.beforeSelectEvent.fire();
var cfgSelected=DEF_CFG.SELECTED.key;var selected=this.cfg.getProperty(cfgSelected);var selectDate=cellDate.concat();if(this._indexOfSelectedFieldArray(selectDate)==-1)selected[selected.length]=selectDate;if(this.parent)this.parent.cfg.setProperty(cfgSelected,selected);else this.cfg.setProperty(cfgSelected,selected);this.renderCellStyleSelected(dCellDate,cell);this.selectEvent.fire([selectDate]);this.doCellMouseOut.call(cell,null,this)}return this.getSelectedDates()},deselect:function(date){var aToBeDeselected=
this._toFieldArray(date),validDates=[],selected=[],cfgSelected=DEF_CFG.SELECTED.key;for(var a=0;a<aToBeDeselected.length;++a){var toDeselect=aToBeDeselected[a];if(!this.isDateOOB(this._toDate(toDeselect))){if(validDates.length===0){this.beforeDeselectEvent.fire();selected=this.cfg.getProperty(cfgSelected)}validDates.push(toDeselect);var index=this._indexOfSelectedFieldArray(toDeselect);if(index!=-1)selected.splice(index,1)}}if(validDates.length>0){if(this.parent)this.parent.cfg.setProperty(cfgSelected,
selected);else this.cfg.setProperty(cfgSelected,selected);this.deselectEvent.fire(validDates)}return this.getSelectedDates()},deselectCell:function(cellIndex){var cell=this.cells[cellIndex],cellDate=this.cellDates[cellIndex],cellDateIndex=this._indexOfSelectedFieldArray(cellDate);var selectable=Dom.hasClass(cell,this.Style.CSS_CELL_SELECTABLE);if(selectable){this.beforeDeselectEvent.fire();var selected=this.cfg.getProperty(DEF_CFG.SELECTED.key),dCellDate=this._toDate(cellDate),selectDate=cellDate.concat();
if(cellDateIndex>-1){if(this.cfg.getProperty(DEF_CFG.PAGEDATE.key).getMonth()==dCellDate.getMonth()&&this.cfg.getProperty(DEF_CFG.PAGEDATE.key).getFullYear()==dCellDate.getFullYear())Dom.removeClass(cell,this.Style.CSS_CELL_SELECTED);selected.splice(cellDateIndex,1)}if(this.parent)this.parent.cfg.setProperty(DEF_CFG.SELECTED.key,selected);else this.cfg.setProperty(DEF_CFG.SELECTED.key,selected);this.deselectEvent.fire([selectDate])}return this.getSelectedDates()},deselectAll:function(){this.beforeDeselectEvent.fire();
var cfgSelected=DEF_CFG.SELECTED.key,selected=this.cfg.getProperty(cfgSelected),count=selected.length,sel=selected.concat();if(this.parent)this.parent.cfg.setProperty(cfgSelected,[]);else this.cfg.setProperty(cfgSelected,[]);if(count>0)this.deselectEvent.fire(sel);return this.getSelectedDates()},_toFieldArray:function(date){var returnDate=[];if(date instanceof Date)returnDate=[[date.getFullYear(),date.getMonth()+1,date.getDate()]];else if(Lang.isString(date))returnDate=this._parseDates(date);else if(Lang.isArray(date))for(var i=
0;i<date.length;++i){var d=date[i];returnDate[returnDate.length]=[d.getFullYear(),d.getMonth()+1,d.getDate()]}return returnDate},toDate:function(dateFieldArray){return this._toDate(dateFieldArray)},_toDate:function(dateFieldArray){if(dateFieldArray instanceof Date)return dateFieldArray;else return DateMath.getDate(dateFieldArray[0],dateFieldArray[1]-1,dateFieldArray[2])},_fieldArraysAreEqual:function(array1,array2){var match=false;if(array1[0]==array2[0]&&array1[1]==array2[1]&&array1[2]==array2[2])match=
true;return match},_indexOfSelectedFieldArray:function(find){var selected=-1,seldates=this.cfg.getProperty(DEF_CFG.SELECTED.key);for(var s=0;s<seldates.length;++s){var sArray=seldates[s];if(find[0]==sArray[0]&&find[1]==sArray[1]&&find[2]==sArray[2]){selected=s;break}}return selected},isDateOOM:function(date){return date.getMonth()!=this.cfg.getProperty(DEF_CFG.PAGEDATE.key).getMonth()},isDateOOB:function(date){var minDate=this.cfg.getProperty(DEF_CFG.MINDATE.key),maxDate=this.cfg.getProperty(DEF_CFG.MAXDATE.key),
dm=DateMath;if(minDate)minDate=dm.clearTime(minDate);if(maxDate)maxDate=dm.clearTime(maxDate);var clearedDate=new Date(date.getTime());clearedDate=dm.clearTime(clearedDate);return minDate&&clearedDate.getTime()<minDate.getTime()||maxDate&&clearedDate.getTime()>maxDate.getTime()},_parsePageDate:function(date){var parsedDate;if(date)if(date instanceof Date)parsedDate=DateMath.findMonthStart(date);else{var month,year,aMonthYear;aMonthYear=date.split(this.cfg.getProperty(DEF_CFG.DATE_FIELD_DELIMITER.key));
month=parseInt(aMonthYear[this.cfg.getProperty(DEF_CFG.MY_MONTH_POSITION.key)-1],10)-1;year=parseInt(aMonthYear[this.cfg.getProperty(DEF_CFG.MY_YEAR_POSITION.key)-1],10)-this.Locale.YEAR_OFFSET;parsedDate=DateMath.getDate(year,month,1)}else parsedDate=DateMath.getDate(this.today.getFullYear(),this.today.getMonth(),1);return parsedDate},onBeforeSelect:function(){if(this.cfg.getProperty(DEF_CFG.MULTI_SELECT.key)===false)if(this.parent){this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED);
this.parent.deselectAll()}else{this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED);this.deselectAll()}},onSelect:function(selected){},onBeforeDeselect:function(){},onDeselect:function(deselected){},onChangePage:function(){this.render()},onRender:function(){},onReset:function(){this.render()},onClear:function(){this.render()},validate:function(){return true},_parseDate:function(sDate){var aDate=sDate.split(this.Locale.DATE_FIELD_DELIMITER),rArray;if(aDate.length==2){rArray=[aDate[this.Locale.MD_MONTH_POSITION-
1],aDate[this.Locale.MD_DAY_POSITION-1]];rArray.type=Calendar.MONTH_DAY}else{rArray=[aDate[this.Locale.MDY_YEAR_POSITION-1]-this.Locale.YEAR_OFFSET,aDate[this.Locale.MDY_MONTH_POSITION-1],aDate[this.Locale.MDY_DAY_POSITION-1]];rArray.type=Calendar.DATE}for(var i=0;i<rArray.length;i++)rArray[i]=parseInt(rArray[i],10);return rArray},_parseDates:function(sDates){var aReturn=[],aDates=sDates.split(this.Locale.DATE_DELIMITER);for(var d=0;d<aDates.length;++d){var sDate=aDates[d];if(sDate.indexOf(this.Locale.DATE_RANGE_DELIMITER)!=
-1){var aRange=sDate.split(this.Locale.DATE_RANGE_DELIMITER),dateStart=this._parseDate(aRange[0]),dateEnd=this._parseDate(aRange[1]),fullRange=this._parseRange(dateStart,dateEnd);aReturn=aReturn.concat(fullRange)}else{var aDate=this._parseDate(sDate);aReturn.push(aDate)}}return aReturn},_parseRange:function(startDate,endDate){var dCurrent=DateMath.add(DateMath.getDate(startDate[0],startDate[1]-1,startDate[2]),DateMath.DAY,1),dEnd=DateMath.getDate(endDate[0],endDate[1]-1,endDate[2]),results=[];results.push(startDate);
while(dCurrent.getTime()<=dEnd.getTime()){results.push([dCurrent.getFullYear(),dCurrent.getMonth()+1,dCurrent.getDate()]);dCurrent=DateMath.add(dCurrent,DateMath.DAY,1)}return results},resetRenderers:function(){this.renderStack=this._renderStack.concat()},removeRenderers:function(){this._renderStack=[];this.renderStack=[]},clearElement:function(cell){cell.innerHTML="&#160;";cell.className=""},addRenderer:function(sDates,fnRender){var aDates=this._parseDates(sDates);for(var i=0;i<aDates.length;++i){var aDate=
aDates[i];if(aDate.length==2)if(aDate[0]instanceof Array)this._addRenderer(Calendar.RANGE,aDate,fnRender);else this._addRenderer(Calendar.MONTH_DAY,aDate,fnRender);else if(aDate.length==3)this._addRenderer(Calendar.DATE,aDate,fnRender)}},_addRenderer:function(type,aDates,fnRender){var add=[type,aDates,fnRender];this.renderStack.unshift(add);this._renderStack=this.renderStack.concat()},addMonthRenderer:function(month,fnRender){this._addRenderer(Calendar.MONTH,[month],fnRender)},addWeekdayRenderer:function(weekday,
fnRender){this._addRenderer(Calendar.WEEKDAY,[weekday],fnRender)},clearAllBodyCellStyles:function(style){for(var c=0;c<this.cells.length;++c)Dom.removeClass(this.cells[c],style)},setMonth:function(month){var cfgPageDate=DEF_CFG.PAGEDATE.key,current=this.cfg.getProperty(cfgPageDate);current.setMonth(parseInt(month,10));this.cfg.setProperty(cfgPageDate,current)},setYear:function(year){var cfgPageDate=DEF_CFG.PAGEDATE.key,current=this.cfg.getProperty(cfgPageDate);current.setFullYear(parseInt(year,10)-
this.Locale.YEAR_OFFSET);this.cfg.setProperty(cfgPageDate,current)},getSelectedDates:function(){var returnDates=[],selected=this.cfg.getProperty(DEF_CFG.SELECTED.key);for(var d=0;d<selected.length;++d){var dateArray=selected[d];var date=DateMath.getDate(dateArray[0],dateArray[1]-1,dateArray[2]);returnDates.push(date)}returnDates.sort(function(a,b){return a-b});return returnDates},hide:function(){if(this.beforeHideEvent.fire()){this.oDomContainer.style.display="none";this.hideEvent.fire()}},show:function(){if(this.beforeShowEvent.fire()){this.oDomContainer.style.display=
"block";this.showEvent.fire()}},browser:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("opera")!=-1)return"opera";else if(ua.indexOf("msie 7")!=-1)return"ie7";else if(ua.indexOf("msie")!=-1)return"ie";else if(ua.indexOf("safari")!=-1)return"safari";else if(ua.indexOf("gecko")!=-1)return"gecko";else return false}(),toString:function(){return"Calendar "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var cal=this;if(cal.navigator)cal.navigator.destroy();if(cal.cfg)cal.cfg.destroy();
Event.purgeElement(cal.oDomContainer,true);Dom.removeClass(cal.oDomContainer,cal.Style.CSS_WITH_TITLE);Dom.removeClass(cal.oDomContainer,cal.Style.CSS_CONTAINER);Dom.removeClass(cal.oDomContainer,cal.Style.CSS_SINGLE);cal.oDomContainer.innerHTML="";cal.oDomContainer=null;cal.cells=null;this.destroyEvent.fire()}}};YAHOO.widget.Calendar=Calendar;YAHOO.widget.Calendar_Core=YAHOO.widget.Calendar;YAHOO.widget.Cal_Core=YAHOO.widget.Calendar})();
(function(){var Dom=YAHOO.util.Dom,DateMath=YAHOO.widget.DateMath,Event=YAHOO.util.Event,Lang=YAHOO.lang,Calendar=YAHOO.widget.Calendar;function CalendarGroup(id,containerId,config){if(arguments.length>0)this.init.apply(this,arguments)}CalendarGroup.DEFAULT_CONFIG=CalendarGroup._DEFAULT_CONFIG=Calendar.DEFAULT_CONFIG;CalendarGroup.DEFAULT_CONFIG.PAGES={key:"pages",value:2};var DEF_CFG=CalendarGroup.DEFAULT_CONFIG;CalendarGroup.prototype={init:function(id,container,config){var nArgs=this._parseArgs(arguments);
id=nArgs.id;container=nArgs.container;config=nArgs.config;this.oDomContainer=Dom.get(container);if(!this.oDomContainer.id)this.oDomContainer.id=Dom.generateId();if(!id)id=this.oDomContainer.id+"_t";this.id=id;this.containerId=this.oDomContainer.id;this.initEvents();this.initStyles();this.pages=[];Dom.addClass(this.oDomContainer,CalendarGroup.CSS_CONTAINER);Dom.addClass(this.oDomContainer,CalendarGroup.CSS_MULTI_UP);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.setupConfig();
if(config)this.cfg.applyConfig(config,true);this.cfg.fireQueue();if(YAHOO.env.ua.opera){this.renderEvent.subscribe(this._fixWidth,this,true);this.showEvent.subscribe(this._fixWidth,this,true)}},setupConfig:function(){var cfg=this.cfg;cfg.addProperty(DEF_CFG.PAGES.key,{value:DEF_CFG.PAGES.value,validator:cfg.checkNumber,handler:this.configPages});cfg.addProperty(DEF_CFG.YEAR_OFFSET.key,{value:DEF_CFG.YEAR_OFFSET.value,handler:this.delegateConfig,supercedes:DEF_CFG.YEAR_OFFSET.supercedes,suppressEvent:true});
cfg.addProperty(DEF_CFG.TODAY.key,{value:new Date(DEF_CFG.TODAY.value.getTime()),supercedes:DEF_CFG.TODAY.supercedes,handler:this.configToday,suppressEvent:false});cfg.addProperty(DEF_CFG.PAGEDATE.key,{value:DEF_CFG.PAGEDATE.value||new Date(DEF_CFG.TODAY.value.getTime()),handler:this.configPageDate});cfg.addProperty(DEF_CFG.SELECTED.key,{value:[],handler:this.configSelected});cfg.addProperty(DEF_CFG.TITLE.key,{value:DEF_CFG.TITLE.value,handler:this.configTitle});cfg.addProperty(DEF_CFG.CLOSE.key,
{value:DEF_CFG.CLOSE.value,handler:this.configClose});cfg.addProperty(DEF_CFG.IFRAME.key,{value:DEF_CFG.IFRAME.value,handler:this.configIframe,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.MINDATE.key,{value:DEF_CFG.MINDATE.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.MAXDATE.key,{value:DEF_CFG.MAXDATE.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.MULTI_SELECT.key,{value:DEF_CFG.MULTI_SELECT.value,handler:this.delegateConfig,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.START_WEEKDAY.key,
{value:DEF_CFG.START_WEEKDAY.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.SHOW_WEEKDAYS.key,{value:DEF_CFG.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.SHOW_WEEK_HEADER.key,{value:DEF_CFG.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.SHOW_WEEK_FOOTER.key,{value:DEF_CFG.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:cfg.checkBoolean});
cfg.addProperty(DEF_CFG.HIDE_BLANK_WEEKS.key,{value:DEF_CFG.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:cfg.checkBoolean});cfg.addProperty(DEF_CFG.NAV_ARROW_LEFT.key,{value:DEF_CFG.NAV_ARROW_LEFT.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.NAV_ARROW_RIGHT.key,{value:DEF_CFG.NAV_ARROW_RIGHT.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.MONTHS_SHORT.key,{value:DEF_CFG.MONTHS_SHORT.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.MONTHS_LONG.key,
{value:DEF_CFG.MONTHS_LONG.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.WEEKDAYS_1CHAR.key,{value:DEF_CFG.WEEKDAYS_1CHAR.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.WEEKDAYS_SHORT.key,{value:DEF_CFG.WEEKDAYS_SHORT.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.WEEKDAYS_MEDIUM.key,{value:DEF_CFG.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.WEEKDAYS_LONG.key,{value:DEF_CFG.WEEKDAYS_LONG.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.LOCALE_MONTHS.key,
{value:DEF_CFG.LOCALE_MONTHS.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.LOCALE_WEEKDAYS.key,{value:DEF_CFG.LOCALE_WEEKDAYS.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.DATE_DELIMITER.key,{value:DEF_CFG.DATE_DELIMITER.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.DATE_FIELD_DELIMITER.key,{value:DEF_CFG.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.DATE_RANGE_DELIMITER.key,{value:DEF_CFG.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig});
cfg.addProperty(DEF_CFG.MY_MONTH_POSITION.key,{value:DEF_CFG.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MY_YEAR_POSITION.key,{value:DEF_CFG.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MD_MONTH_POSITION.key,{value:DEF_CFG.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MD_DAY_POSITION.key,{value:DEF_CFG.MD_DAY_POSITION.value,
handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MDY_MONTH_POSITION.key,{value:DEF_CFG.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MDY_DAY_POSITION.key,{value:DEF_CFG.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MDY_YEAR_POSITION.key,{value:DEF_CFG.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MY_LABEL_MONTH_POSITION.key,
{value:DEF_CFG.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MY_LABEL_YEAR_POSITION.key,{value:DEF_CFG.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:cfg.checkNumber});cfg.addProperty(DEF_CFG.MY_LABEL_MONTH_SUFFIX.key,{value:DEF_CFG.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.MY_LABEL_YEAR_SUFFIX.key,{value:DEF_CFG.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig});cfg.addProperty(DEF_CFG.NAV.key,
{value:DEF_CFG.NAV.value,handler:this.configNavigator});cfg.addProperty(DEF_CFG.STRINGS.key,{value:DEF_CFG.STRINGS.value,handler:this.configStrings,validator:function(val){return Lang.isObject(val)},supercedes:DEF_CFG.STRINGS.supercedes})},initEvents:function(){var me=this,strEvent="Event",CE=YAHOO.util.CustomEvent;var sub=function(fn,obj,bOverride){for(var p=0;p<me.pages.length;++p){var cal=me.pages[p];cal[this.type+strEvent].subscribe(fn,obj,bOverride)}};var unsub=function(fn,obj){for(var p=0;p<
me.pages.length;++p){var cal=me.pages[p];cal[this.type+strEvent].unsubscribe(fn,obj)}};var defEvents=Calendar._EVENT_TYPES;me.beforeSelectEvent=new CE(defEvents.BEFORE_SELECT);me.beforeSelectEvent.subscribe=sub;me.beforeSelectEvent.unsubscribe=unsub;me.selectEvent=new CE(defEvents.SELECT);me.selectEvent.subscribe=sub;me.selectEvent.unsubscribe=unsub;me.beforeDeselectEvent=new CE(defEvents.BEFORE_DESELECT);me.beforeDeselectEvent.subscribe=sub;me.beforeDeselectEvent.unsubscribe=unsub;me.deselectEvent=
new CE(defEvents.DESELECT);me.deselectEvent.subscribe=sub;me.deselectEvent.unsubscribe=unsub;me.changePageEvent=new CE(defEvents.CHANGE_PAGE);me.changePageEvent.subscribe=sub;me.changePageEvent.unsubscribe=unsub;me.beforeRenderEvent=new CE(defEvents.BEFORE_RENDER);me.beforeRenderEvent.subscribe=sub;me.beforeRenderEvent.unsubscribe=unsub;me.renderEvent=new CE(defEvents.RENDER);me.renderEvent.subscribe=sub;me.renderEvent.unsubscribe=unsub;me.resetEvent=new CE(defEvents.RESET);me.resetEvent.subscribe=
sub;me.resetEvent.unsubscribe=unsub;me.clearEvent=new CE(defEvents.CLEAR);me.clearEvent.subscribe=sub;me.clearEvent.unsubscribe=unsub;me.beforeShowEvent=new CE(defEvents.BEFORE_SHOW);me.showEvent=new CE(defEvents.SHOW);me.beforeHideEvent=new CE(defEvents.BEFORE_HIDE);me.hideEvent=new CE(defEvents.HIDE);me.beforeShowNavEvent=new CE(defEvents.BEFORE_SHOW_NAV);me.showNavEvent=new CE(defEvents.SHOW_NAV);me.beforeHideNavEvent=new CE(defEvents.BEFORE_HIDE_NAV);me.hideNavEvent=new CE(defEvents.HIDE_NAV);
me.beforeRenderNavEvent=new CE(defEvents.BEFORE_RENDER_NAV);me.renderNavEvent=new CE(defEvents.RENDER_NAV);me.beforeDestroyEvent=new CE(defEvents.BEFORE_DESTROY);me.destroyEvent=new CE(defEvents.DESTROY)},configPages:function(type,args,obj){var pageCount=args[0],cfgPageDate=DEF_CFG.PAGEDATE.key,sep="_",caldate,firstPageDate=null,groupCalClass="groupcal",firstClass="first-of-type",lastClass="last-of-type";for(var p=0;p<pageCount;++p){var calId=this.id+sep+p,calContainerId=this.containerId+sep+p,childConfig=
this.cfg.getConfig();childConfig.close=false;childConfig.title=false;childConfig.navigator=null;if(p>0){caldate=new Date(firstPageDate);this._setMonthOnDate(caldate,caldate.getMonth()+p);childConfig.pageDate=caldate}var cal=this.constructChild(calId,calContainerId,childConfig);Dom.removeClass(cal.oDomContainer,this.Style.CSS_SINGLE);Dom.addClass(cal.oDomContainer,groupCalClass);if(p===0){firstPageDate=cal.cfg.getProperty(cfgPageDate);Dom.addClass(cal.oDomContainer,firstClass)}if(p==pageCount-1)Dom.addClass(cal.oDomContainer,
lastClass);cal.parent=this;cal.index=p;this.pages[this.pages.length]=cal}},configPageDate:function(type,args,obj){var val=args[0],firstPageDate;var cfgPageDate=DEF_CFG.PAGEDATE.key;for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];if(p===0){firstPageDate=cal._parsePageDate(val);cal.cfg.setProperty(cfgPageDate,firstPageDate)}else{var pageDate=new Date(firstPageDate);this._setMonthOnDate(pageDate,pageDate.getMonth()+p);cal.cfg.setProperty(cfgPageDate,pageDate)}}},configSelected:function(type,
args,obj){var cfgSelected=DEF_CFG.SELECTED.key;this.delegateConfig(type,args,obj);var selected=this.pages.length>0?this.pages[0].cfg.getProperty(cfgSelected):[];this.cfg.setProperty(cfgSelected,selected,true)},delegateConfig:function(type,args,obj){var val=args[0];var cal;for(var p=0;p<this.pages.length;p++){cal=this.pages[p];cal.cfg.setProperty(type,val)}},setChildFunction:function(fnName,fn){var pageCount=this.cfg.getProperty(DEF_CFG.PAGES.key);for(var p=0;p<pageCount;++p)this.pages[p][fnName]=
fn},callChildFunction:function(fnName,args){var pageCount=this.cfg.getProperty(DEF_CFG.PAGES.key);for(var p=0;p<pageCount;++p){var page=this.pages[p];if(page[fnName]){var fn=page[fnName];fn.call(page,args)}}},constructChild:function(id,containerId,config){var container=document.getElementById(containerId);if(!container){container=document.createElement("div");container.id=containerId;this.oDomContainer.appendChild(container)}return new Calendar(id,containerId,config)},setMonth:function(month){month=
parseInt(month,10);var currYear;var cfgPageDate=DEF_CFG.PAGEDATE.key;for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];var pageDate=cal.cfg.getProperty(cfgPageDate);if(p===0)currYear=pageDate.getFullYear();else pageDate.setFullYear(currYear);this._setMonthOnDate(pageDate,month+p);cal.cfg.setProperty(cfgPageDate,pageDate)}},setYear:function(year){var cfgPageDate=DEF_CFG.PAGEDATE.key;year=parseInt(year,10);for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];var pageDate=cal.cfg.getProperty(cfgPageDate);
if(pageDate.getMonth()+1==1&&p>0)year+=1;cal.setYear(year)}},render:function(){this.renderHeader();for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.render()}this.renderFooter()},select:function(date){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.select(date)}return this.getSelectedDates()},selectCell:function(cellIndex){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.selectCell(cellIndex)}return this.getSelectedDates()},deselect:function(date){for(var p=
0;p<this.pages.length;++p){var cal=this.pages[p];cal.deselect(date)}return this.getSelectedDates()},deselectAll:function(){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.deselectAll()}return this.getSelectedDates()},deselectCell:function(cellIndex){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.deselectCell(cellIndex)}return this.getSelectedDates()},reset:function(){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.reset()}},clear:function(){for(var p=
0;p<this.pages.length;++p){var cal=this.pages[p];cal.clear()}this.cfg.setProperty(DEF_CFG.SELECTED.key,[]);this.cfg.setProperty(DEF_CFG.PAGEDATE.key,new Date(this.pages[0].today.getTime()));this.render()},nextMonth:function(){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.nextMonth()}},previousMonth:function(){for(var p=this.pages.length-1;p>=0;--p){var cal=this.pages[p];cal.previousMonth()}},nextYear:function(){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.nextYear()}},
previousYear:function(){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.previousYear()}},getSelectedDates:function(){var returnDates=[];var selected=this.cfg.getProperty(DEF_CFG.SELECTED.key);for(var d=0;d<selected.length;++d){var dateArray=selected[d];var date=DateMath.getDate(dateArray[0],dateArray[1]-1,dateArray[2]);returnDates.push(date)}returnDates.sort(function(a,b){return a-b});return returnDates},addRenderer:function(sDates,fnRender){for(var p=0;p<this.pages.length;++p){var cal=
this.pages[p];cal.addRenderer(sDates,fnRender)}},addMonthRenderer:function(month,fnRender){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.addMonthRenderer(month,fnRender)}},addWeekdayRenderer:function(weekday,fnRender){for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];cal.addWeekdayRenderer(weekday,fnRender)}},removeRenderers:function(){this.callChildFunction("removeRenderers")},renderHeader:function(){},renderFooter:function(){},addMonths:function(count){this.callChildFunction("addMonths",
count)},subtractMonths:function(count){this.callChildFunction("subtractMonths",count)},addYears:function(count){this.callChildFunction("addYears",count)},subtractYears:function(count){this.callChildFunction("subtractYears",count)},getCalendarPage:function(date){var cal=null;if(date){var y=date.getFullYear(),m=date.getMonth();var pages=this.pages;for(var i=0;i<pages.length;++i){var pageDate=pages[i].cfg.getProperty("pagedate");if(pageDate.getFullYear()===y&&pageDate.getMonth()===m){cal=pages[i];break}}}return cal},
_setMonthOnDate:function(date,iMonth){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420&&(iMonth<0||iMonth>11)){var newDate=DateMath.add(date,DateMath.MONTH,iMonth-date.getMonth());date.setTime(newDate.getTime())}else date.setMonth(iMonth)},_fixWidth:function(){var w=0;for(var p=0;p<this.pages.length;++p){var cal=this.pages[p];w+=cal.oDomContainer.offsetWidth}if(w>0)this.oDomContainer.style.width=w+"px"},toString:function(){return"CalendarGroup "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var cal=
this;if(cal.navigator)cal.navigator.destroy();if(cal.cfg)cal.cfg.destroy();Event.purgeElement(cal.oDomContainer,true);Dom.removeClass(cal.oDomContainer,CalendarGroup.CSS_CONTAINER);Dom.removeClass(cal.oDomContainer,CalendarGroup.CSS_MULTI_UP);for(var i=0,l=cal.pages.length;i<l;i++){cal.pages[i].destroy();cal.pages[i]=null}cal.oDomContainer.innerHTML="";cal.oDomContainer=null;this.destroyEvent.fire()}}};CalendarGroup.CSS_CONTAINER="yui-calcontainer";CalendarGroup.CSS_MULTI_UP="multi";CalendarGroup.CSS_2UPTITLE=
"title";CalendarGroup.CSS_2UPCLOSE="close-icon";YAHOO.lang.augmentProto(CalendarGroup,Calendar,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configStrings",
"configToday","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser");YAHOO.widget.CalGrp=CalendarGroup;YAHOO.widget.CalendarGroup=CalendarGroup;YAHOO.widget.Calendar2up=function(id,containerId,config){this.init(id,containerId,config)};YAHOO.extend(YAHOO.widget.Calendar2up,CalendarGroup);YAHOO.widget.Cal2up=YAHOO.widget.Calendar2up})();YAHOO.widget.CalendarNavigator=function(cal){this.init(cal)};
(function(){var CN=YAHOO.widget.CalendarNavigator;CN.CLASSES={NAV:"yui-cal-nav",NAV_VISIBLE:"yui-cal-nav-visible",MASK:"yui-cal-nav-mask",YEAR:"yui-cal-nav-y",MONTH:"yui-cal-nav-m",BUTTONS:"yui-cal-nav-b",BUTTON:"yui-cal-nav-btn",ERROR:"yui-cal-nav-e",YEAR_CTRL:"yui-cal-nav-yc",MONTH_CTRL:"yui-cal-nav-mc",INVALID:"yui-invalid",DEFAULT:"yui-default"};CN.DEFAULT_CONFIG={strings:{month:"Month",year:"Year",submit:"Okay",cancel:"Cancel",invalidYear:"Year needs to be a number"},monthFormat:YAHOO.widget.Calendar.LONG,
initialFocus:"year"};CN._DEFAULT_CFG=CN.DEFAULT_CONFIG;CN.ID_SUFFIX="_nav";CN.MONTH_SUFFIX="_month";CN.YEAR_SUFFIX="_year";CN.ERROR_SUFFIX="_error";CN.CANCEL_SUFFIX="_cancel";CN.SUBMIT_SUFFIX="_submit";CN.YR_MAX_DIGITS=4;CN.YR_MINOR_INC=1;CN.YR_MAJOR_INC=10;CN.UPDATE_DELAY=50;CN.YR_PATTERN=/^\d+$/;CN.TRIM=/^\s*(.*?)\s*$/})();
YAHOO.widget.CalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:false,init:function(cal){var calBox=cal.oDomContainer;this.cal=cal;this.id=calBox.id+YAHOO.widget.CalendarNavigator.ID_SUFFIX;this._doc=calBox.ownerDocument;var ie=YAHOO.env.ua.ie;this.__isIEQuirks=ie&&(ie<=6||this._doc.compatMode=="BackCompat")},show:function(){var CLASSES=YAHOO.widget.CalendarNavigator.CLASSES;
if(this.cal.beforeShowNavEvent.fire()){if(!this.__rendered)this.render();this.clearErrors();this._updateMonthUI();this._updateYearUI();this._show(this.navEl,true);this.setInitialFocus();this.showMask();YAHOO.util.Dom.addClass(this.cal.oDomContainer,CLASSES.NAV_VISIBLE);this.cal.showNavEvent.fire()}},hide:function(){var CLASSES=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeHideNavEvent.fire()){this._show(this.navEl,false);this.hideMask();YAHOO.util.Dom.removeClass(this.cal.oDomContainer,
CLASSES.NAV_VISIBLE);this.cal.hideNavEvent.fire()}},showMask:function(){this._show(this.maskEl,true);if(this.__isIEQuirks)this._syncMask()},hideMask:function(){this._show(this.maskEl,false)},getMonth:function(){return this._month},getYear:function(){return this._year},setMonth:function(nMonth){if(nMonth>=0&&nMonth<12)this._month=nMonth;this._updateMonthUI()},setYear:function(nYear){var yrPattern=YAHOO.widget.CalendarNavigator.YR_PATTERN;if(YAHOO.lang.isNumber(nYear)&&yrPattern.test(nYear+""))this._year=
nYear;this._updateYearUI()},render:function(){this.cal.beforeRenderNavEvent.fire();if(!this.__rendered){this.createNav();this.createMask();this.applyListeners();this.__rendered=true}this.cal.renderNavEvent.fire()},createNav:function(){var NAV=YAHOO.widget.CalendarNavigator;var doc=this._doc;var d=doc.createElement("div");d.className=NAV.CLASSES.NAV;var htmlBuf=this.renderNavContents([]);d.innerHTML=htmlBuf.join("");this.cal.oDomContainer.appendChild(d);this.navEl=d;this.yearEl=doc.getElementById(this.id+
NAV.YEAR_SUFFIX);this.monthEl=doc.getElementById(this.id+NAV.MONTH_SUFFIX);this.errorEl=doc.getElementById(this.id+NAV.ERROR_SUFFIX);this.submitEl=doc.getElementById(this.id+NAV.SUBMIT_SUFFIX);this.cancelEl=doc.getElementById(this.id+NAV.CANCEL_SUFFIX);if(YAHOO.env.ua.gecko&&this.yearEl&&this.yearEl.type=="text")this.yearEl.setAttribute("autocomplete","off");this._setFirstLastElements()},createMask:function(){var C=YAHOO.widget.CalendarNavigator.CLASSES;var d=this._doc.createElement("div");d.className=
C.MASK;this.cal.oDomContainer.appendChild(d);this.maskEl=d},_syncMask:function(){var c=this.cal.oDomContainer;if(c&&this.maskEl){var r=YAHOO.util.Dom.getRegion(c);YAHOO.util.Dom.setStyle(this.maskEl,"width",r.right-r.left+"px");YAHOO.util.Dom.setStyle(this.maskEl,"height",r.bottom-r.top+"px")}},renderNavContents:function(html){var NAV=YAHOO.widget.CalendarNavigator,C=NAV.CLASSES,h=html;h[h.length]='<div class="'+C.MONTH+'">';this.renderMonth(h);h[h.length]="</div>";h[h.length]='<div class="'+C.YEAR+
'">';this.renderYear(h);h[h.length]="</div>";h[h.length]='<div class="'+C.BUTTONS+'">';this.renderButtons(h);h[h.length]="</div>";h[h.length]='<div class="'+C.ERROR+'" id="'+this.id+NAV.ERROR_SUFFIX+'"></div>';return h},renderMonth:function(html){var NAV=YAHOO.widget.CalendarNavigator,C=NAV.CLASSES;var id=this.id+NAV.MONTH_SUFFIX,mf=this.__getCfg("monthFormat"),months=this.cal.cfg.getProperty(mf==YAHOO.widget.Calendar.SHORT?"MONTHS_SHORT":"MONTHS_LONG"),h=html;if(months&&months.length>0){h[h.length]=
'<label for="'+id+'">';h[h.length]=this.__getCfg("month",true);h[h.length]="</label>";h[h.length]='<select name="'+id+'" id="'+id+'" class="'+C.MONTH_CTRL+'">';for(var i=0;i<months.length;i++){h[h.length]='<option value="'+i+'">';h[h.length]=months[i];h[h.length]="</option>"}h[h.length]="</select>"}return h},renderYear:function(html){var NAV=YAHOO.widget.CalendarNavigator,C=NAV.CLASSES;var id=this.id+NAV.YEAR_SUFFIX,size=NAV.YR_MAX_DIGITS,h=html;h[h.length]='<label for="'+id+'">';h[h.length]=this.__getCfg("year",
true);h[h.length]="</label>";h[h.length]='<input type="text" name="'+id+'" id="'+id+'" class="'+C.YEAR_CTRL+'" maxlength="'+size+'"/>';return h},renderButtons:function(html){var C=YAHOO.widget.CalendarNavigator.CLASSES;var h=html;h[h.length]='<span class="'+C.BUTTON+" "+C.DEFAULT+'">';h[h.length]='<button type="button" id="'+this.id+"_submit"+'">';h[h.length]=this.__getCfg("submit",true);h[h.length]="</button>";h[h.length]="</span>";h[h.length]='<span class="'+C.BUTTON+'">';h[h.length]='<button type="button" id="'+
this.id+"_cancel"+'">';h[h.length]=this.__getCfg("cancel",true);h[h.length]="</button>";h[h.length]="</span>";return h},applyListeners:function(){var E=YAHOO.util.Event;function yearUpdateHandler(){if(this.validate())this.setYear(this._getYearFromUI())}function monthUpdateHandler(){this.setMonth(this._getMonthFromUI())}E.on(this.submitEl,"click",this.submit,this,true);E.on(this.cancelEl,"click",this.cancel,this,true);E.on(this.yearEl,"blur",yearUpdateHandler,this,true);E.on(this.monthEl,"change",
monthUpdateHandler,this,true);if(this.__isIEQuirks)YAHOO.util.Event.on(this.cal.oDomContainer,"resize",this._syncMask,this,true);this.applyKeyListeners()},purgeListeners:function(){var E=YAHOO.util.Event;E.removeListener(this.submitEl,"click",this.submit);E.removeListener(this.cancelEl,"click",this.cancel);E.removeListener(this.yearEl,"blur");E.removeListener(this.monthEl,"change");if(this.__isIEQuirks)E.removeListener(this.cal.oDomContainer,"resize",this._syncMask);this.purgeKeyListeners()},applyKeyListeners:function(){var E=
YAHOO.util.Event,ua=YAHOO.env.ua;var arrowEvt=ua.ie||ua.webkit?"keydown":"keypress";var tabEvt=ua.ie||ua.opera||ua.webkit?"keydown":"keypress";E.on(this.yearEl,"keypress",this._handleEnterKey,this,true);E.on(this.yearEl,arrowEvt,this._handleDirectionKeys,this,true);E.on(this.lastCtrl,tabEvt,this._handleTabKey,this,true);E.on(this.firstCtrl,tabEvt,this._handleShiftTabKey,this,true)},purgeKeyListeners:function(){var E=YAHOO.util.Event,ua=YAHOO.env.ua;var arrowEvt=ua.ie||ua.webkit?"keydown":"keypress";
var tabEvt=ua.ie||ua.opera||ua.webkit?"keydown":"keypress";E.removeListener(this.yearEl,"keypress",this._handleEnterKey);E.removeListener(this.yearEl,arrowEvt,this._handleDirectionKeys);E.removeListener(this.lastCtrl,tabEvt,this._handleTabKey);E.removeListener(this.firstCtrl,tabEvt,this._handleShiftTabKey)},submit:function(){if(this.validate()){this.hide();this.setMonth(this._getMonthFromUI());this.setYear(this._getYearFromUI());var cal=this.cal;var delay=YAHOO.widget.CalendarNavigator.UPDATE_DELAY;
if(delay>0){var nav=this;window.setTimeout(function(){nav._update(cal)},delay)}else this._update(cal)}},_update:function(cal){var date=YAHOO.widget.DateMath.getDate(this.getYear()-cal.cfg.getProperty("YEAR_OFFSET"),this.getMonth(),1);cal.cfg.setProperty("pagedate",date);cal.render()},cancel:function(){this.hide()},validate:function(){if(this._getYearFromUI()!==null){this.clearErrors();return true}else{this.setYearError();this.setError(this.__getCfg("invalidYear",true));return false}},setError:function(msg){if(this.errorEl){this.errorEl.innerHTML=
msg;this._show(this.errorEl,true)}},clearError:function(){if(this.errorEl){this.errorEl.innerHTML="";this._show(this.errorEl,false)}},setYearError:function(){YAHOO.util.Dom.addClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearYearError:function(){YAHOO.util.Dom.removeClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearErrors:function(){this.clearError();this.clearYearError()},setInitialFocus:function(){var el=this.submitEl,f=this.__getCfg("initialFocus");
if(f&&f.toLowerCase){f=f.toLowerCase();if(f=="year"){el=this.yearEl;try{this.yearEl.select()}catch(selErr){}}else if(f=="month")el=this.monthEl}if(el&&YAHOO.lang.isFunction(el.focus))try{el.focus()}catch(focusErr){}},erase:function(){if(this.__rendered){this.purgeListeners();this.yearEl=null;this.monthEl=null;this.errorEl=null;this.submitEl=null;this.cancelEl=null;this.firstCtrl=null;this.lastCtrl=null;if(this.navEl)this.navEl.innerHTML="";var p=this.navEl.parentNode;if(p)p.removeChild(this.navEl);
this.navEl=null;var pm=this.maskEl.parentNode;if(pm)pm.removeChild(this.maskEl);this.maskEl=null;this.__rendered=false}},destroy:function(){this.erase();this._doc=null;this.cal=null;this.id=null},_show:function(el,bShow){if(el)YAHOO.util.Dom.setStyle(el,"display",bShow?"block":"none")},_getMonthFromUI:function(){if(this.monthEl)return this.monthEl.selectedIndex;else return 0},_getYearFromUI:function(){var NAV=YAHOO.widget.CalendarNavigator;var yr=null;if(this.yearEl){var value=this.yearEl.value;value=
value.replace(NAV.TRIM,"$1");if(NAV.YR_PATTERN.test(value))yr=parseInt(value,10)}return yr},_updateYearUI:function(){if(this.yearEl&&this._year!==null)this.yearEl.value=this._year},_updateMonthUI:function(){if(this.monthEl)this.monthEl.selectedIndex=this._month},_setFirstLastElements:function(){this.firstCtrl=this.monthEl;this.lastCtrl=this.cancelEl;if(this.__isMac){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){this.firstCtrl=this.monthEl;this.lastCtrl=this.yearEl}if(YAHOO.env.ua.gecko){this.firstCtrl=
this.yearEl;this.lastCtrl=this.yearEl}}},_handleEnterKey:function(e){var KEYS=YAHOO.util.KeyListener.KEY;if(YAHOO.util.Event.getCharCode(e)==KEYS.ENTER){YAHOO.util.Event.preventDefault(e);this.submit()}},_handleDirectionKeys:function(e){var E=YAHOO.util.Event,KEYS=YAHOO.util.KeyListener.KEY,NAV=YAHOO.widget.CalendarNavigator;var value=this.yearEl.value?parseInt(this.yearEl.value,10):null;if(isFinite(value)){var dir=false;switch(E.getCharCode(e)){case KEYS.UP:this.yearEl.value=value+NAV.YR_MINOR_INC;
dir=true;break;case KEYS.DOWN:this.yearEl.value=Math.max(value-NAV.YR_MINOR_INC,0);dir=true;break;case KEYS.PAGE_UP:this.yearEl.value=value+NAV.YR_MAJOR_INC;dir=true;break;case KEYS.PAGE_DOWN:this.yearEl.value=Math.max(value-NAV.YR_MAJOR_INC,0);dir=true;break;default:break}if(dir){E.preventDefault(e);try{this.yearEl.select()}catch(err){}}}},_handleTabKey:function(e){var E=YAHOO.util.Event,KEYS=YAHOO.util.KeyListener.KEY;if(E.getCharCode(e)==KEYS.TAB&&!e.shiftKey)try{E.preventDefault(e);this.firstCtrl.focus()}catch(err){}},
_handleShiftTabKey:function(e){var E=YAHOO.util.Event,KEYS=YAHOO.util.KeyListener.KEY;if(e.shiftKey&&E.getCharCode(e)==KEYS.TAB)try{E.preventDefault(e);this.lastCtrl.focus()}catch(err){}},__getCfg:function(prop,bIsStr){var DEF_CFG=YAHOO.widget.CalendarNavigator.DEFAULT_CONFIG;var cfg=this.cal.cfg.getProperty("navigator");if(bIsStr)return cfg!==true&&cfg.strings&&cfg.strings[prop]?cfg.strings[prop]:DEF_CFG.strings[prop];else return cfg!==true&&cfg[prop]?cfg[prop]:DEF_CFG[prop]},__isMac:navigator.userAgent.toLowerCase().indexOf("macintosh")!=
-1};YAHOO.register("calendar",YAHOO.widget.Calendar,{version:"2.8.0r4",build:"2449"});
(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang,Widget=YAHOO.widget;YAHOO.widget.TreeView=function(id,oConfig){if(id)this.init(id);if(oConfig)this.buildTreeFromObject(oConfig);else if(Lang.trim(this._el.innerHTML))this.buildTreeFromMarkup(id)};var TV=Widget.TreeView;TV.prototype={id:null,_el:null,_nodes:null,locked:false,_expandAnim:null,_collapseAnim:null,_animCount:0,maxAnim:2,_hasDblClickSubscriber:false,_dblClickTimer:null,currentFocus:null,singleNodeHighlight:false,
_currentlyHighlighted:null,setExpandAnim:function(type){this._expandAnim=Widget.TVAnim.isValid(type)?type:null},setCollapseAnim:function(type){this._collapseAnim=Widget.TVAnim.isValid(type)?type:null},animateExpand:function(el,node){if(this._expandAnim&&this._animCount<this.maxAnim){var tree=this;var a=Widget.TVAnim.getAnim(this._expandAnim,el,function(){tree.expandComplete(node)});if(a){++this._animCount;this.fireEvent("animStart",{"node":node,"type":"expand"});a.animate()}return true}return false},
animateCollapse:function(el,node){if(this._collapseAnim&&this._animCount<this.maxAnim){var tree=this;var a=Widget.TVAnim.getAnim(this._collapseAnim,el,function(){tree.collapseComplete(node)});if(a){++this._animCount;this.fireEvent("animStart",{"node":node,"type":"collapse"});a.animate()}return true}return false},expandComplete:function(node){--this._animCount;this.fireEvent("animComplete",{"node":node,"type":"expand"})},collapseComplete:function(node){--this._animCount;this.fireEvent("animComplete",
{"node":node,"type":"collapse"})},init:function(id){this._el=Dom.get(id);this.id=Dom.generateId(this._el,"yui-tv-auto-id-");this.createEvent("animStart",this);this.createEvent("animComplete",this);this.createEvent("collapse",this);this.createEvent("collapseComplete",this);this.createEvent("expand",this);this.createEvent("expandComplete",this);this.createEvent("enterKeyPressed",this);this.createEvent("clickEvent",this);this.createEvent("focusChanged",this);var self=this;this.createEvent("dblClickEvent",
{scope:this,onSubscribeCallback:function(){self._hasDblClickSubscriber=true}});this.createEvent("labelClick",this);this.createEvent("highlightEvent",this);this._nodes=[];TV.trees[this.id]=this;this.root=new Widget.RootNode(this);var LW=Widget.LogWriter;if(this._initEditor)this._initEditor()},buildTreeFromObject:function(oConfig){var build=function(parent,oConfig){var i,item,node,children,type,NodeType,ThisType;for(i=0;i<oConfig.length;i++){item=oConfig[i];if(Lang.isString(item))node=new Widget.TextNode(item,
parent);else if(Lang.isObject(item)){children=item.children;delete item.children;type=item.type||"text";delete item.type;switch(Lang.isString(type)&&type.toLowerCase()){case "text":node=new Widget.TextNode(item,parent);break;case "menu":node=new Widget.MenuNode(item,parent);break;case "html":node=new Widget.HTMLNode(item,parent);break;default:if(Lang.isString(type))NodeType=Widget[type];else NodeType=type;if(Lang.isObject(NodeType)){for(ThisType=NodeType;ThisType&&ThisType!==Widget.Node;ThisType=
ThisType.superclass.constructor);if(ThisType)node=new NodeType(item,parent);else;}else;}if(children)build(node,children)}else;}};if(!Lang.isArray(oConfig))oConfig=[oConfig];build(this.root,oConfig)},buildTreeFromMarkup:function(id){var build=function(markup){var el,child,branch=[],config={},label,yuiConfig;for(el=Dom.getFirstChild(markup);el;el=Dom.getNextSibling(el))switch(el.tagName.toUpperCase()){case "LI":label="";config={expanded:Dom.hasClass(el,"expanded"),title:el.title||el.alt||null,className:Lang.trim(el.className.replace(/\bexpanded\b/,
""))||null};child=el.firstChild;if(child.nodeType==3){label=Lang.trim(child.nodeValue.replace(/[\n\t\r]*/g,""));if(label){config.type="text";config.label=label}else child=Dom.getNextSibling(child)}if(!label)if(child.tagName.toUpperCase()=="A"){config.type="text";config.label=child.innerHTML;config.href=child.href;config.target=child.target;config.title=child.title||child.alt||config.title}else{config.type="html";var d=document.createElement("div");d.appendChild(child.cloneNode(true));config.html=
d.innerHTML;config.hasIcon=true}child=Dom.getNextSibling(child);switch(child&&child.tagName.toUpperCase()){case "UL":case "OL":config.children=build(child);break}if(YAHOO.lang.JSON){yuiConfig=el.getAttribute("yuiConfig");if(yuiConfig){yuiConfig=YAHOO.lang.JSON.parse(yuiConfig);config=YAHOO.lang.merge(config,yuiConfig)}}branch.push(config);break;case "UL":case "OL":config={type:"text",label:"",children:build(child)};branch.push(config);break}return branch};var markup=Dom.getChildrenBy(Dom.get(id),
function(el){var tag=el.tagName.toUpperCase();return tag=="UL"||tag=="OL"});if(markup.length)this.buildTreeFromObject(build(markup[0]));else;},_getEventTargetTdEl:function(ev){var target=Event.getTarget(ev);while(target&&!(target.tagName.toUpperCase()=="TD"&&Dom.hasClass(target.parentNode,"ygtvrow")))target=Dom.getAncestorByTagName(target,"td");if(Lang.isNull(target))return null;if(/\bygtv(blank)?depthcell/.test(target.className))return null;if(target.id){var m=target.id.match(/\bygtv([^\d]*)(.*)/);
if(m&&m[2]&&this._nodes[m[2]])return target}return null},_onClickEvent:function(ev){var self=this,td=this._getEventTargetTdEl(ev),node,target,toggle=function(force){node.focus();if(force||!node.href){node.toggle();try{Event.preventDefault(ev)}catch(e){}}};if(!td)return;node=this.getNodeByElement(td);if(!node)return;target=Event.getTarget(ev);if(Dom.hasClass(target,node.labelStyle)||Dom.getAncestorByClassName(target,node.labelStyle))this.fireEvent("labelClick",node);if(/\bygtv[tl][mp]h?h?/.test(td.className))toggle(true);
else if(this._dblClickTimer){window.clearTimeout(this._dblClickTimer);this._dblClickTimer=null}else if(this._hasDblClickSubscriber)this._dblClickTimer=window.setTimeout(function(){self._dblClickTimer=null;if(self.fireEvent("clickEvent",{event:ev,node:node})!==false)toggle()},200);else if(self.fireEvent("clickEvent",{event:ev,node:node})!==false)toggle()},_onDblClickEvent:function(ev){if(!this._hasDblClickSubscriber)return;var td=this._getEventTargetTdEl(ev);if(!td)return;if(!/\bygtv[tl][mp]h?h?/.test(td.className)){this.fireEvent("dblClickEvent",
{event:ev,node:this.getNodeByElement(td)});if(this._dblClickTimer){window.clearTimeout(this._dblClickTimer);this._dblClickTimer=null}}},_onMouseOverEvent:function(ev){var target;if((target=this._getEventTargetTdEl(ev))&&(target=this.getNodeByElement(target))&&(target=target.getToggleEl()))target.className=target.className.replace(/\bygtv([lt])([mp])\b/gi,"ygtv$1$2h")},_onMouseOutEvent:function(ev){var target;if((target=this._getEventTargetTdEl(ev))&&(target=this.getNodeByElement(target))&&(target=
target.getToggleEl()))target.className=target.className.replace(/\bygtv([lt])([mp])h\b/gi,"ygtv$1$2")},_onKeyDownEvent:function(ev){var target=Event.getTarget(ev),node=this.getNodeByElement(target),newNode=node,KEY=YAHOO.util.KeyListener.KEY;switch(ev.keyCode){case KEY.UP:do if(newNode.previousSibling)newNode=newNode.previousSibling;else newNode=newNode.parent;while(newNode&&!newNode._canHaveFocus());if(newNode)newNode.focus();Event.preventDefault(ev);break;case KEY.DOWN:do if(newNode.nextSibling)newNode=
newNode.nextSibling;else{newNode.expand();newNode=(newNode.children.length||null)&&newNode.children[0]}while(newNode&&!newNode._canHaveFocus);if(newNode)newNode.focus();Event.preventDefault(ev);break;case KEY.LEFT:do if(newNode.parent)newNode=newNode.parent;else newNode=newNode.previousSibling;while(newNode&&!newNode._canHaveFocus());if(newNode)newNode.focus();Event.preventDefault(ev);break;case KEY.RIGHT:var self=this,moveFocusRight,focusOnExpand=function(newNode){self.unsubscribe("expandComplete",
focusOnExpand);moveFocusRight(newNode)};moveFocusRight=function(newNode){do if(newNode.isDynamic()&&!newNode.childrenRendered){self.subscribe("expandComplete",focusOnExpand);newNode.expand();newNode=null;break}else{newNode.expand();if(newNode.children.length)newNode=newNode.children[0];else newNode=newNode.nextSibling}while(newNode&&!newNode._canHaveFocus());if(newNode)newNode.focus()};moveFocusRight(newNode);Event.preventDefault(ev);break;case KEY.ENTER:if(node.href)if(node.target)window.open(node.href,
node.target);else window.location(node.href);else node.toggle();this.fireEvent("enterKeyPressed",node);Event.preventDefault(ev);break;case KEY.HOME:newNode=this.getRoot();if(newNode.children.length)newNode=newNode.children[0];if(newNode._canHaveFocus())newNode.focus();Event.preventDefault(ev);break;case KEY.END:newNode=newNode.parent.children;newNode=newNode[newNode.length-1];if(newNode._canHaveFocus())newNode.focus();Event.preventDefault(ev);break;case 107:if(ev.shiftKey)node.parent.expandAll();
else node.expand();break;case 109:if(ev.shiftKey)node.parent.collapseAll();else node.collapse();break;default:break}},render:function(){var html=this.root.getHtml(),el=this.getEl();el.innerHTML=html;if(!this._hasEvents){Event.on(el,"click",this._onClickEvent,this,true);Event.on(el,"dblclick",this._onDblClickEvent,this,true);Event.on(el,"mouseover",this._onMouseOverEvent,this,true);Event.on(el,"mouseout",this._onMouseOutEvent,this,true);Event.on(el,"keydown",this._onKeyDownEvent,this,true)}this._hasEvents=
true},getEl:function(){if(!this._el)this._el=Dom.get(this.id);return this._el},regNode:function(node){this._nodes[node.index]=node},getRoot:function(){return this.root},setDynamicLoad:function(fnDataLoader,iconMode){this.root.setDynamicLoad(fnDataLoader,iconMode)},expandAll:function(){if(!this.locked)this.root.expandAll()},collapseAll:function(){if(!this.locked)this.root.collapseAll()},getNodeByIndex:function(nodeIndex){var n=this._nodes[nodeIndex];return n?n:null},getNodeByProperty:function(property,
value){for(var i in this._nodes)if(this._nodes.hasOwnProperty(i)){var n=this._nodes[i];if(property in n&&n[property]==value||n.data&&value==n.data[property])return n}return null},getNodesByProperty:function(property,value){var values=[];for(var i in this._nodes)if(this._nodes.hasOwnProperty(i)){var n=this._nodes[i];if(property in n&&n[property]==value||n.data&&value==n.data[property])values.push(n)}return values.length?values:null},getNodesBy:function(fn){var values=[];for(var i in this._nodes)if(this._nodes.hasOwnProperty(i)){var n=
this._nodes[i];if(fn(n))values.push(n)}return values.length?values:null},getNodeByElement:function(el){var p=el,m,re=/ygtv([^\d]*)(.*)/;do{if(p&&p.id){m=p.id.match(re);if(m&&m[2])return this.getNodeByIndex(m[2])}p=p.parentNode;if(!p||!p.tagName)break}while(p.id!==this.id&&p.tagName.toLowerCase()!=="body");return null},getHighlightedNode:function(){return this._currentlyHighlighted},removeNode:function(node,autoRefresh){if(node.isRoot())return false;var p=node.parent;if(p.parent)p=p.parent;this._deleteNode(node);
if(autoRefresh&&p&&p.childrenRendered)p.refresh();return true},_removeChildren_animComplete:function(o){this.unsubscribe(this._removeChildren_animComplete);this.removeChildren(o.node)},removeChildren:function(node){if(node.expanded){if(this._collapseAnim){this.subscribe("animComplete",this._removeChildren_animComplete,this,true);Widget.Node.prototype.collapse.call(node);return}node.collapse()}while(node.children.length)this._deleteNode(node.children[0]);if(node.isRoot())Widget.Node.prototype.expand.call(node);
node.childrenRendered=false;node.dynamicLoadComplete=false;node.updateIcon()},_deleteNode:function(node){this.removeChildren(node);this.popNode(node)},popNode:function(node){var p=node.parent;var a=[];for(var i=0,len=p.children.length;i<len;++i)if(p.children[i]!=node)a[a.length]=p.children[i];p.children=a;p.childrenRendered=false;if(node.previousSibling)node.previousSibling.nextSibling=node.nextSibling;if(node.nextSibling)node.nextSibling.previousSibling=node.previousSibling;if(this.currentFocus==
node)this.currentFocus=null;if(this._currentlyHighlighted==node)this._currentlyHighlighted=null;node.parent=null;node.previousSibling=null;node.nextSibling=null;node.tree=null;delete this._nodes[node.index]},destroy:function(){if(this._destroyEditor)this._destroyEditor();var el=this.getEl();Event.removeListener(el,"click");Event.removeListener(el,"dblclick");Event.removeListener(el,"mouseover");Event.removeListener(el,"mouseout");Event.removeListener(el,"keydown");for(var i=0;i<this._nodes.length;i++){var node=
this._nodes[i];if(node&&node.destroy)node.destroy()}el.innerHTML="";this._hasEvents=false},toString:function(){return"TreeView "+this.id},getNodeCount:function(){return this.getRoot().getNodeCount()},getTreeDefinition:function(){return this.getRoot().getNodeDefinition()},onExpand:function(node){},onCollapse:function(node){},setNodesProperty:function(name,value,refresh){this.root.setNodesProperty(name,value);if(refresh)this.root.refresh()},onEventToggleHighlight:function(oArgs){var node;if("node"in
oArgs&&oArgs.node instanceof Widget.Node)node=oArgs.node;else if(oArgs instanceof Widget.Node)node=oArgs;else return false;node.toggleHighlight();return false}};var PROT=TV.prototype;PROT.draw=PROT.render;YAHOO.augment(TV,YAHOO.util.EventProvider);TV.nodeCount=0;TV.trees=[];TV.getTree=function(treeId){var t=TV.trees[treeId];return t?t:null};TV.getNode=function(treeId,nodeIndex){var t=TV.getTree(treeId);return t?t.getNodeByIndex(nodeIndex):null};TV.FOCUS_CLASS_NAME="ygtvfocus"})();
(function(){var Dom=YAHOO.util.Dom,Lang=YAHOO.lang,Event=YAHOO.util.Event;YAHOO.widget.Node=function(oData,oParent,expanded){if(oData)this.init(oData,oParent,expanded)};YAHOO.widget.Node.prototype={index:0,children:null,tree:null,data:null,parent:null,depth:-1,expanded:false,multiExpand:true,renderHidden:false,childrenRendered:false,dynamicLoadComplete:false,previousSibling:null,nextSibling:null,_dynLoad:false,dataLoader:null,isLoading:false,hasIcon:true,iconMode:0,nowrap:false,isLeaf:false,contentStyle:"",
contentElId:null,enableHighlight:true,highlightState:0,propagateHighlightUp:false,propagateHighlightDown:false,className:null,_type:"Node",init:function(oData,oParent,expanded){this.data={};this.children=[];this.index=YAHOO.widget.TreeView.nodeCount;++YAHOO.widget.TreeView.nodeCount;this.contentElId="ygtvcontentel"+this.index;if(Lang.isObject(oData))for(var property in oData)if(oData.hasOwnProperty(property))if(property.charAt(0)!="_"&&!Lang.isUndefined(this[property])&&!Lang.isFunction(this[property]))this[property]=
oData[property];else this.data[property]=oData[property];if(!Lang.isUndefined(expanded))this.expanded=expanded;this.createEvent("parentChange",this);if(oParent)oParent.appendChild(this)},applyParent:function(parentNode){if(!parentNode)return false;this.tree=parentNode.tree;this.parent=parentNode;this.depth=parentNode.depth+1;this.tree.regNode(this);parentNode.childrenRendered=false;for(var i=0,len=this.children.length;i<len;++i)this.children[i].applyParent(this);this.fireEvent("parentChange");return true},
appendChild:function(childNode){if(this.hasChildren()){var sib=this.children[this.children.length-1];sib.nextSibling=childNode;childNode.previousSibling=sib}this.children[this.children.length]=childNode;childNode.applyParent(this);if(this.childrenRendered&&this.expanded)this.getChildrenEl().style.display="";return childNode},appendTo:function(parentNode){return parentNode.appendChild(this)},insertBefore:function(node){var p=node.parent;if(p){if(this.tree)this.tree.popNode(this);var refIndex=node.isChildOf(p);
p.children.splice(refIndex,0,this);if(node.previousSibling)node.previousSibling.nextSibling=this;this.previousSibling=node.previousSibling;this.nextSibling=node;node.previousSibling=this;this.applyParent(p)}return this},insertAfter:function(node){var p=node.parent;if(p){if(this.tree)this.tree.popNode(this);var refIndex=node.isChildOf(p);if(!node.nextSibling){this.nextSibling=null;return this.appendTo(p)}p.children.splice(refIndex+1,0,this);node.nextSibling.previousSibling=this;this.previousSibling=
node;this.nextSibling=node.nextSibling;node.nextSibling=this;this.applyParent(p)}return this},isChildOf:function(parentNode){if(parentNode&&parentNode.children)for(var i=0,len=parentNode.children.length;i<len;++i)if(parentNode.children[i]===this)return i;return-1},getSiblings:function(){var sib=this.parent.children.slice(0);for(var i=0;i<sib.length&&sib[i]!=this;i++);sib.splice(i,1);if(sib.length)return sib;return null},showChildren:function(){if(!this.tree.animateExpand(this.getChildrenEl(),this))if(this.hasChildren())this.getChildrenEl().style.display=
""},hideChildren:function(){if(!this.tree.animateCollapse(this.getChildrenEl(),this))this.getChildrenEl().style.display="none"},getElId:function(){return"ygtv"+this.index},getChildrenElId:function(){return"ygtvc"+this.index},getToggleElId:function(){return"ygtvt"+this.index},getEl:function(){return Dom.get(this.getElId())},getChildrenEl:function(){return Dom.get(this.getChildrenElId())},getToggleEl:function(){return Dom.get(this.getToggleElId())},getContentEl:function(){return Dom.get(this.contentElId)},
collapse:function(){if(!this.expanded)return;var ret=this.tree.onCollapse(this);if(false===ret)return;ret=this.tree.fireEvent("collapse",this);if(false===ret)return;if(!this.getEl())this.expanded=false;else{this.hideChildren();this.expanded=false;this.updateIcon()}ret=this.tree.fireEvent("collapseComplete",this)},expand:function(lazySource){if(this.isLoading||this.expanded&&!lazySource)return;var ret=true;if(!lazySource){ret=this.tree.onExpand(this);if(false===ret)return;ret=this.tree.fireEvent("expand",
this)}if(false===ret)return;if(!this.getEl()){this.expanded=true;return}if(!this.childrenRendered)this.getChildrenEl().innerHTML=this.renderChildren();else;this.expanded=true;this.updateIcon();if(this.isLoading){this.expanded=false;return}if(!this.multiExpand){var sibs=this.getSiblings();for(var i=0;sibs&&i<sibs.length;++i)if(sibs[i]!=this&&sibs[i].expanded)sibs[i].collapse()}this.showChildren();ret=this.tree.fireEvent("expandComplete",this)},updateIcon:function(){if(this.hasIcon){var el=this.getToggleEl();
if(el)el.className=el.className.replace(/\bygtv(([tl][pmn]h?)|(loading))\b/gi,this.getStyle())}},getStyle:function(){if(this.isLoading)return"ygtvloading";else{var loc=this.nextSibling?"t":"l";var type="n";if(this.hasChildren(true)||this.isDynamic()&&!this.getIconMode())type=this.expanded?"m":"p";return"ygtv"+loc+type}},getHoverStyle:function(){var s=this.getStyle();if(this.hasChildren(true)&&!this.isLoading)s+="h";return s},expandAll:function(){var l=this.children.length;for(var i=0;i<l;++i){var c=
this.children[i];if(c.isDynamic())break;else if(!c.multiExpand)break;else{c.expand();c.expandAll()}}},collapseAll:function(){for(var i=0;i<this.children.length;++i){this.children[i].collapse();this.children[i].collapseAll()}},setDynamicLoad:function(fnDataLoader,iconMode){if(fnDataLoader){this.dataLoader=fnDataLoader;this._dynLoad=true}else{this.dataLoader=null;this._dynLoad=false}if(iconMode)this.iconMode=iconMode},isRoot:function(){return this==this.tree.root},isDynamic:function(){if(this.isLeaf)return false;
else return!this.isRoot()&&(this._dynLoad||this.tree.root._dynLoad)},getIconMode:function(){return this.iconMode||this.tree.root.iconMode},hasChildren:function(checkForLazyLoad){if(this.isLeaf)return false;else return this.children.length>0||checkForLazyLoad&&this.isDynamic()&&!this.dynamicLoadComplete},toggle:function(){if(!this.tree.locked&&(this.hasChildren(true)||this.isDynamic()))if(this.expanded)this.collapse();else this.expand()},getHtml:function(){this.childrenRendered=false;return['<div class="ygtvitem" id="',
this.getElId(),'">',this.getNodeHtml(),this.getChildrenHtml(),"</div>"].join("")},getChildrenHtml:function(){var sb=[];sb[sb.length]='<div class="ygtvchildren" id="'+this.getChildrenElId()+'"';if(!this.expanded||!this.hasChildren())sb[sb.length]=' style="display:none;"';sb[sb.length]=">";if(this.hasChildren(true)&&this.expanded||this.renderHidden&&!this.isDynamic())sb[sb.length]=this.renderChildren();sb[sb.length]="</div>";return sb.join("")},renderChildren:function(){var node=this;if(this.isDynamic()&&
!this.dynamicLoadComplete){this.isLoading=true;this.tree.locked=true;if(this.dataLoader)setTimeout(function(){node.dataLoader(node,function(){node.loadComplete()})},10);else if(this.tree.root.dataLoader)setTimeout(function(){node.tree.root.dataLoader(node,function(){node.loadComplete()})},10);else return"Error: data loader not found or not specified.";return""}else return this.completeRender()},completeRender:function(){var sb=[];for(var i=0;i<this.children.length;++i)sb[sb.length]=this.children[i].getHtml();
this.childrenRendered=true;return sb.join("")},loadComplete:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.propagateHighlightDown)if(this.highlightState===1&&!this.tree.singleNodeHighlight)for(var i=0;i<this.children.length;i++)this.children[i].highlight(true);else if(this.highlightState===0||this.tree.singleNodeHighlight)for(i=0;i<this.children.length;i++)this.children[i].unhighlight(true);this.dynamicLoadComplete=true;this.isLoading=false;this.expand(true);this.tree.locked=
false},getAncestor:function(depth){if(depth>=this.depth||depth<0)return null;var p=this.parent;while(p.depth>depth)p=p.parent;return p},getDepthStyle:function(depth){return this.getAncestor(depth).nextSibling?"ygtvdepthcell":"ygtvblankdepthcell"},getNodeHtml:function(){var sb=[];sb[sb.length]='<table id="ygtvtableel'+this.index+'" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth'+this.depth;if(this.enableHighlight)sb[sb.length]=" ygtv-highlight"+this.highlightState;if(this.className)sb[sb.length]=
" "+this.className;sb[sb.length]='"><tr class="ygtvrow">';for(var i=0;i<this.depth;++i)sb[sb.length]='<td class="ygtvcell '+this.getDepthStyle(i)+'"><div class="ygtvspacer"></div></td>';if(this.hasIcon){sb[sb.length]='<td id="'+this.getToggleElId();sb[sb.length]='" class="ygtvcell ';sb[sb.length]=this.getStyle();sb[sb.length]='"><a href="#" class="ygtvspacer">&#160;</a></td>'}sb[sb.length]='<td id="'+this.contentElId;sb[sb.length]='" class="ygtvcell ';sb[sb.length]=this.contentStyle+' ygtvcontent" ';
sb[sb.length]=this.nowrap?' nowrap="nowrap" ':"";sb[sb.length]=" >";sb[sb.length]=this.getContentHtml();sb[sb.length]="</td></tr></table>";return sb.join("")},getContentHtml:function(){return""},refresh:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.hasIcon){var el=this.getToggleEl();if(el)el.className=el.className.replace(/\bygtv[lt][nmp]h*\b/gi,this.getStyle())}},toString:function(){return this._type+" ("+this.index+")"},_focusHighlightedItems:[],_focusedItem:null,_canHaveFocus:function(){return this.getEl().getElementsByTagName("a").length>
0},_removeFocus:function(){if(this._focusedItem){Event.removeListener(this._focusedItem,"blur");this._focusedItem=null}var el;while(el=this._focusHighlightedItems.shift())Dom.removeClass(el,YAHOO.widget.TreeView.FOCUS_CLASS_NAME)},focus:function(){var focused=false,self=this;if(this.tree.currentFocus)this.tree.currentFocus._removeFocus();var expandParent=function(node){if(node.parent){expandParent(node.parent);node.parent.expand()}};expandParent(this);Dom.getElementsBy(function(el){return/ygtv(([tl][pmn]h?)|(content))/.test(el.className)},
"td",self.getEl().firstChild,function(el){Dom.addClass(el,YAHOO.widget.TreeView.FOCUS_CLASS_NAME);if(!focused){var aEl=el.getElementsByTagName("a");if(aEl.length){aEl=aEl[0];aEl.focus();self._focusedItem=aEl;Event.on(aEl,"blur",function(){self.tree.fireEvent("focusChanged",{oldNode:self.tree.currentFocus,newNode:null});self.tree.currentFocus=null;self._removeFocus()});focused=true}}self._focusHighlightedItems.push(el)});if(focused){this.tree.fireEvent("focusChanged",{oldNode:this.tree.currentFocus,
newNode:this});this.tree.currentFocus=this}else{this.tree.fireEvent("focusChanged",{oldNode:self.tree.currentFocus,newNode:null});this.tree.currentFocus=null;this._removeFocus()}return focused},getNodeCount:function(){for(var i=0,count=0;i<this.children.length;i++)count+=this.children[i].getNodeCount();return count+1},getNodeDefinition:function(){if(this.isDynamic())return false;var def,defs=Lang.merge(this.data),children=[];if(this.expanded)defs.expanded=this.expanded;if(!this.multiExpand)defs.multiExpand=
this.multiExpand;if(!this.renderHidden)defs.renderHidden=this.renderHidden;if(!this.hasIcon)defs.hasIcon=this.hasIcon;if(this.nowrap)defs.nowrap=this.nowrap;if(this.className)defs.className=this.className;if(this.editable)defs.editable=this.editable;if(this.enableHighlight)defs.enableHighlight=this.enableHighlight;if(this.highlightState)defs.highlightState=this.highlightState;if(this.propagateHighlightUp)defs.propagateHighlightUp=this.propagateHighlightUp;if(this.propagateHighlightDown)defs.propagateHighlightDown=
this.propagateHighlightDown;defs.type=this._type;for(var i=0;i<this.children.length;i++){def=this.children[i].getNodeDefinition();if(def===false)return false;children.push(def)}if(children.length)defs.children=children;return defs},getToggleLink:function(){return"return false;"},setNodesProperty:function(name,value,refresh){if(name.charAt(0)!="_"&&!Lang.isUndefined(this[name])&&!Lang.isFunction(this[name]))this[name]=value;else this.data[name]=value;for(var i=0;i<this.children.length;i++)this.children[i].setNodesProperty(name,
value);if(refresh)this.refresh()},toggleHighlight:function(){if(this.enableHighlight)if(this.highlightState==1)this.unhighlight();else this.highlight()},highlight:function(_silent){if(this.enableHighlight){if(this.tree.singleNodeHighlight){if(this.tree._currentlyHighlighted)this.tree._currentlyHighlighted.unhighlight(_silent);this.tree._currentlyHighlighted=this}this.highlightState=1;this._setHighlightClassName();if(!this.tree.singleNodeHighlight){if(this.propagateHighlightDown)for(var i=0;i<this.children.length;i++)this.children[i].highlight(true);
if(this.propagateHighlightUp)if(this.parent)this.parent._childrenHighlighted()}if(!_silent)this.tree.fireEvent("highlightEvent",this)}},unhighlight:function(_silent){if(this.enableHighlight){this.tree._currentlyHighlighted=null;this.highlightState=0;this._setHighlightClassName();if(!this.tree.singleNodeHighlight){if(this.propagateHighlightDown)for(var i=0;i<this.children.length;i++)this.children[i].unhighlight(true);if(this.propagateHighlightUp)if(this.parent)this.parent._childrenHighlighted()}if(!_silent)this.tree.fireEvent("highlightEvent",
this)}},_childrenHighlighted:function(){var yes=false,no=false;if(this.enableHighlight){for(var i=0;i<this.children.length;i++)switch(this.children[i].highlightState){case 0:no=true;break;case 1:yes=true;break;case 2:yes=no=true;break}if(yes&&no)this.highlightState=2;else if(yes)this.highlightState=1;else this.highlightState=0;this._setHighlightClassName();if(this.propagateHighlightUp)if(this.parent)this.parent._childrenHighlighted()}},_setHighlightClassName:function(){var el=Dom.get("ygtvtableel"+
this.index);if(el)el.className=el.className.replace(/\bygtv-highlight\d\b/gi,"ygtv-highlight"+this.highlightState)}};YAHOO.augment(YAHOO.widget.Node,YAHOO.util.EventProvider)})();YAHOO.widget.RootNode=function(oTree){this.init(null,null,true);this.tree=oTree};
YAHOO.extend(YAHOO.widget.RootNode,YAHOO.widget.Node,{_type:"RootNode",getNodeHtml:function(){return""},toString:function(){return this._type},loadComplete:function(){this.tree.draw()},getNodeCount:function(){for(var i=0,count=0;i<this.children.length;i++)count+=this.children[i].getNodeCount();return count},getNodeDefinition:function(){for(var def,defs=[],i=0;i<this.children.length;i++){def=this.children[i].getNodeDefinition();if(def===false)return false;defs.push(def)}return defs},collapse:function(){},
expand:function(){},getSiblings:function(){return null},focus:function(){}});
(function(){var Dom=YAHOO.util.Dom,Lang=YAHOO.lang,Event=YAHOO.util.Event;YAHOO.widget.TextNode=function(oData,oParent,expanded){if(oData){if(Lang.isString(oData))oData={label:oData};this.init(oData,oParent,expanded);this.setUpLabel(oData)}};YAHOO.extend(YAHOO.widget.TextNode,YAHOO.widget.Node,{labelStyle:"ygtvlabel",labelElId:null,label:null,title:null,href:null,target:"_self",_type:"TextNode",setUpLabel:function(oData){if(Lang.isString(oData))oData={label:oData};else if(oData.style)this.labelStyle=
oData.style;this.label=oData.label;this.labelElId="ygtvlabelel"+this.index},getLabelEl:function(){return Dom.get(this.labelElId)},getContentHtml:function(){var sb=[];sb[sb.length]=this.href?"<a":"<span";sb[sb.length]=' id="'+this.labelElId+'"';sb[sb.length]=' class="'+this.labelStyle+'"';if(this.href){sb[sb.length]=' href="'+this.href+'"';sb[sb.length]=' target="'+this.target+'"'}if(this.title)sb[sb.length]=' title="'+this.title+'"';sb[sb.length]=" >";sb[sb.length]=this.label;sb[sb.length]=this.href?
"</a>":"</span>";return sb.join("")},getNodeDefinition:function(){var def=YAHOO.widget.TextNode.superclass.getNodeDefinition.call(this);if(def===false)return false;def.label=this.label;if(this.labelStyle!="ygtvlabel")def.style=this.labelStyle;if(this.title)def.title=this.title;if(this.href)def.href=this.href;if(this.target!="_self")def.target=this.target;return def},toString:function(){return YAHOO.widget.TextNode.superclass.toString.call(this)+": "+this.label},onLabelClick:function(){return false},
refresh:function(){YAHOO.widget.TextNode.superclass.refresh.call(this);var label=this.getLabelEl();label.innerHTML=this.label;if(label.tagName.toUpperCase()=="A"){label.href=this.href;label.target=this.target}}})})();YAHOO.widget.MenuNode=function(oData,oParent,expanded){YAHOO.widget.MenuNode.superclass.constructor.call(this,oData,oParent,expanded);this.multiExpand=false};YAHOO.extend(YAHOO.widget.MenuNode,YAHOO.widget.TextNode,{_type:"MenuNode"});
(function(){var Dom=YAHOO.util.Dom,Lang=YAHOO.lang,Event=YAHOO.util.Event;YAHOO.widget.HTMLNode=function(oData,oParent,expanded,hasIcon){if(oData){this.init(oData,oParent,expanded);this.initContent(oData,hasIcon)}};YAHOO.extend(YAHOO.widget.HTMLNode,YAHOO.widget.Node,{contentStyle:"ygtvhtml",html:null,_type:"HTMLNode",initContent:function(oData,hasIcon){this.setHtml(oData);this.contentElId="ygtvcontentel"+this.index;if(!Lang.isUndefined(hasIcon))this.hasIcon=hasIcon},setHtml:function(o){this.html=
typeof o==="string"?o:o.html;var el=this.getContentEl();if(el)el.innerHTML=this.html},getContentHtml:function(){return this.html},getNodeDefinition:function(){var def=YAHOO.widget.HTMLNode.superclass.getNodeDefinition.call(this);if(def===false)return false;def.html=this.html;return def}})})();
(function(){var Dom=YAHOO.util.Dom,Lang=YAHOO.lang,Event=YAHOO.util.Event,Calendar=YAHOO.widget.Calendar;YAHOO.widget.DateNode=function(oData,oParent,expanded){YAHOO.widget.DateNode.superclass.constructor.call(this,oData,oParent,expanded)};YAHOO.extend(YAHOO.widget.DateNode,YAHOO.widget.TextNode,{_type:"DateNode",calendarConfig:null,fillEditorContainer:function(editorData){var cal,container=editorData.inputContainer;if(Lang.isUndefined(Calendar)){Dom.replaceClass(editorData.editorPanel,"ygtv-edit-DateNode",
"ygtv-edit-TextNode");YAHOO.widget.DateNode.superclass.fillEditorContainer.call(this,editorData);return}if(editorData.nodeType!=this._type){editorData.nodeType=this._type;editorData.saveOnEnter=false;editorData.node.destroyEditorContents(editorData);editorData.inputObject=cal=new Calendar(container.appendChild(document.createElement("div")));if(this.calendarConfig){cal.cfg.applyConfig(this.calendarConfig,true);cal.cfg.fireQueue()}cal.selectEvent.subscribe(function(){this.tree._closeEditor(true)},
this,true)}else cal=editorData.inputObject;editorData.oldValue=this.label;cal.cfg.setProperty("selected",this.label,false);var delim=cal.cfg.getProperty("DATE_FIELD_DELIMITER");var pageDate=this.label.split(delim);cal.cfg.setProperty("pagedate",pageDate[cal.cfg.getProperty("MDY_MONTH_POSITION")-1]+delim+pageDate[cal.cfg.getProperty("MDY_YEAR_POSITION")-1]);cal.cfg.fireQueue();cal.render();cal.oDomContainer.focus()},getEditorValue:function(editorData){if(Lang.isUndefined(Calendar))return editorData.inputElement.value;
else{var cal=editorData.inputObject,date=cal.getSelectedDates()[0],dd=[];dd[cal.cfg.getProperty("MDY_DAY_POSITION")-1]=date.getDate();dd[cal.cfg.getProperty("MDY_MONTH_POSITION")-1]=date.getMonth()+1;dd[cal.cfg.getProperty("MDY_YEAR_POSITION")-1]=date.getFullYear();return dd.join(cal.cfg.getProperty("DATE_FIELD_DELIMITER"))}},displayEditedValue:function(value,editorData){var node=editorData.node;node.label=value;node.getLabelEl().innerHTML=value},getNodeDefinition:function(){var def=YAHOO.widget.DateNode.superclass.getNodeDefinition.call(this);
if(def===false)return false;if(this.calendarConfig)def.calendarConfig=this.calendarConfig;return def}})})();
(function(){var Dom=YAHOO.util.Dom,Lang=YAHOO.lang,Event=YAHOO.util.Event,TV=YAHOO.widget.TreeView,TVproto=TV.prototype;TV.editorData={active:false,whoHasIt:null,nodeType:null,editorPanel:null,inputContainer:null,buttonsContainer:null,node:null,saveOnEnter:true,oldValue:undefined};TVproto.validator=null;TVproto._initEditor=function(){this.createEvent("editorSaveEvent",this);this.createEvent("editorCancelEvent",this)};TVproto._nodeEditing=function(node){if(node.fillEditorContainer&&node.editable){var ed,
topLeft,buttons,button,editorData=TV.editorData;editorData.active=true;editorData.whoHasIt=this;if(!editorData.nodeType){editorData.editorPanel=ed=document.body.appendChild(document.createElement("div"));Dom.addClass(ed,"ygtv-label-editor");buttons=editorData.buttonsContainer=ed.appendChild(document.createElement("div"));Dom.addClass(buttons,"ygtv-button-container");button=buttons.appendChild(document.createElement("button"));Dom.addClass(button,"ygtvok");button.innerHTML=" ";button=buttons.appendChild(document.createElement("button"));
Dom.addClass(button,"ygtvcancel");button.innerHTML=" ";Event.on(buttons,"click",function(ev){var target=Event.getTarget(ev);var node=TV.editorData.node;if(Dom.hasClass(target,"ygtvok")){Event.stopEvent(ev);this._closeEditor(true)}if(Dom.hasClass(target,"ygtvcancel")){Event.stopEvent(ev);this._closeEditor(false)}},this,true);editorData.inputContainer=ed.appendChild(document.createElement("div"));Dom.addClass(editorData.inputContainer,"ygtv-input");Event.on(ed,"keydown",function(ev){var editorData=
TV.editorData,KEY=YAHOO.util.KeyListener.KEY;switch(ev.keyCode){case KEY.ENTER:Event.stopEvent(ev);if(editorData.saveOnEnter)this._closeEditor(true);break;case KEY.ESCAPE:Event.stopEvent(ev);this._closeEditor(false);break}},this,true)}else ed=editorData.editorPanel;editorData.node=node;if(editorData.nodeType)Dom.removeClass(ed,"ygtv-edit-"+editorData.nodeType);Dom.addClass(ed," ygtv-edit-"+node._type);topLeft=Dom.getXY(node.getContentEl());Dom.setStyle(ed,"left",topLeft[0]+"px");Dom.setStyle(ed,"top",
topLeft[1]+"px");Dom.setStyle(ed,"display","block");ed.focus();node.fillEditorContainer(editorData);return true}};TVproto.onEventEditNode=function(oArgs){if(oArgs instanceof YAHOO.widget.Node)oArgs.editNode();else if(oArgs.node instanceof YAHOO.widget.Node)oArgs.node.editNode()};TVproto._closeEditor=function(save){var ed=TV.editorData,node=ed.node,close=true;if(save)close=ed.node.saveEditorValue(ed)!==false;else this.fireEvent("editorCancelEvent",node);if(close){Dom.setStyle(ed.editorPanel,"display",
"none");ed.active=false;node.focus()}};TVproto._destroyEditor=function(){var ed=TV.editorData;if(ed&&ed.nodeType&&(!ed.active||ed.whoHasIt===this)){Event.removeListener(ed.editorPanel,"keydown");Event.removeListener(ed.buttonContainer,"click");ed.node.destroyEditorContents(ed);document.body.removeChild(ed.editorPanel);ed.nodeType=ed.editorPanel=ed.inputContainer=ed.buttonsContainer=ed.whoHasIt=ed.node=null;ed.active=false}};var Nproto=YAHOO.widget.Node.prototype;Nproto.editable=false;Nproto.editNode=
function(){this.tree._nodeEditing(this)};Nproto.fillEditorContainer=null;Nproto.destroyEditorContents=function(editorData){Event.purgeElement(editorData.inputContainer,true);editorData.inputContainer.innerHTML=""};Nproto.saveEditorValue=function(editorData){var node=editorData.node,value,validator=node.tree.validator;value=this.getEditorValue(editorData);if(Lang.isFunction(validator)){value=validator(value,editorData.oldValue,node);if(Lang.isUndefined(value))return false}if(this.tree.fireEvent("editorSaveEvent",
{newValue:value,oldValue:editorData.oldValue,node:node})!==false)this.displayEditedValue(value,editorData)};Nproto.getEditorValue=function(editorData){};Nproto.displayEditedValue=function(value,editorData){};var TNproto=YAHOO.widget.TextNode.prototype;TNproto.fillEditorContainer=function(editorData){var input;if(editorData.nodeType!=this._type){editorData.nodeType=this._type;editorData.saveOnEnter=true;editorData.node.destroyEditorContents(editorData);editorData.inputElement=input=editorData.inputContainer.appendChild(document.createElement("input"))}else input=
editorData.inputElement;editorData.oldValue=this.label;input.value=this.label;input.focus();input.select()};TNproto.getEditorValue=function(editorData){return editorData.inputElement.value};TNproto.displayEditedValue=function(value,editorData){var node=editorData.node;node.label=value;node.getLabelEl().innerHTML=value};TNproto.destroyEditorContents=function(editorData){editorData.inputContainer.innerHTML=""}})();
YAHOO.widget.TVAnim=function(){return{FADE_IN:"TVFadeIn",FADE_OUT:"TVFadeOut",getAnim:function(type,el,callback){if(YAHOO.widget[type])return new YAHOO.widget[type](el,callback);else return null},isValid:function(type){return YAHOO.widget[type]}}}();YAHOO.widget.TVFadeIn=function(el,callback){this.el=el;this.callback=callback};
YAHOO.widget.TVFadeIn.prototype={animate:function(){var tvanim=this;var s=this.el.style;s.opacity=0.1;s.filter="alpha(opacity=10)";s.display="";var dur=0.4;var a=new YAHOO.util.Anim(this.el,{opacity:{from:0.1,to:1,unit:""}},dur);a.onComplete.subscribe(function(){tvanim.onComplete()});a.animate()},onComplete:function(){this.callback()},toString:function(){return"TVFadeIn"}};YAHOO.widget.TVFadeOut=function(el,callback){this.el=el;this.callback=callback};
YAHOO.widget.TVFadeOut.prototype={animate:function(){var tvanim=this;var dur=0.4;var a=new YAHOO.util.Anim(this.el,{opacity:{from:1,to:0.1,unit:""}},dur);a.onComplete.subscribe(function(){tvanim.onComplete()});a.animate()},onComplete:function(){var s=this.el.style;s.display="none";s.opacity=1;s.filter="alpha(opacity=100)";this.callback()},toString:function(){return"TVFadeOut"}};YAHOO.register("treeview",YAHOO.widget.TreeView,{version:"2.8.0r4",build:"2449"});
(function(){var l=YAHOO.lang,isFunction=l.isFunction,isObject=l.isObject,isArray=l.isArray,_toStr=Object.prototype.toString,Native=(YAHOO.env.ua.caja?window:this).JSON,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
_CHARS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},UNDEFINED="undefined",OBJECT="object",NULL="null",STRING="string",NUMBER="number",BOOLEAN="boolean",DATE="date",_allowable={"undefined":UNDEFINED,"string":STRING,"[object String]":STRING,"number":NUMBER,"[object Number]":NUMBER,"boolean":BOOLEAN,"[object Boolean]":BOOLEAN,"[object Date]":DATE,"[object RegExp]":OBJECT},EMPTY="",OPEN_O="{",CLOSE_O="}",OPEN_A="[",CLOSE_A="]",COMMA=",",COMMA_CR=",\n",CR="\n",COLON=":",
COLON_SP=": ",QUOTE='"';Native=_toStr.call(Native)==="[object JSON]"&&Native;function _char(c){if(!_CHARS[c])_CHARS[c]="\\u"+("0000"+(+c.charCodeAt(0)).toString(16)).slice(-4);return _CHARS[c]}function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==="object")for(k in value)if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined)delete value[k];else value[k]=v}return reviver.call(o,key,value)};return typeof reviver==="function"?walk({"":data},""):
data}function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char)}function _isSafe(str){return l.isString(str)&&_UNSAFE.test(str.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""))}function _parse(s,reviver){s=_prepare(s);if(_isSafe(s))return _revive(eval("("+s+")"),reviver);throw new SyntaxError("JSON.parse");}function _type(o){var t=typeof o;return _allowable[t]||_allowable[_toStr.call(o)]||(t===OBJECT?o?OBJECT:NULL:UNDEFINED)}function _string(s){return QUOTE+s.replace(_SPECIAL_CHARS,
_char)+QUOTE}function _indent(s,space){return s.replace(/^/gm,space)}function _stringify(o,w,space){if(o===undefined)return undefined;var replacer=isFunction(w)?w:null,format=_toStr.call(space).match(/String|Number/)||[],_date=YAHOO.lang.JSON.dateToString,stack=[],tmp,i,len;if(replacer||!isArray(w))w=undefined;if(w){tmp={};for(i=0,len=w.length;i<len;++i)tmp[w[i]]=true;w=tmp}space=format[0]==="Number"?(new Array(Math.min(Math.max(0,space),10)+1)).join(" "):(space||EMPTY).slice(0,10);function _serialize(h,
key){var value=h[key],t=_type(value),a=[],colon=space?COLON_SP:COLON,arr,i,keys,k,v;if(isObject(value)&&isFunction(value.toJSON))value=value.toJSON(key);else if(t===DATE)value=_date(value);if(isFunction(replacer))value=replacer.call(h,key,value);if(value!==h[key])t=_type(value);switch(t){case DATE:case OBJECT:break;case STRING:return _string(value);case NUMBER:return isFinite(value)?value+EMPTY:NULL;case BOOLEAN:return value+EMPTY;case NULL:return NULL;default:return undefined}for(i=stack.length-
1;i>=0;--i)if(stack[i]===value)throw new Error("JSON.stringify. Cyclical reference");arr=isArray(value);stack.push(value);if(arr)for(i=value.length-1;i>=0;--i)a[i]=_serialize(value,i)||NULL;else{keys=w||value;i=0;for(k in keys)if(keys.hasOwnProperty(k)){v=_serialize(value,k);if(v)a[i++]=_string(k)+colon+v}}stack.pop();if(space&&a.length)return arr?OPEN_A+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_A:OPEN_O+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_O;else return arr?OPEN_A+a.join(COMMA)+CLOSE_A:
OPEN_O+a.join(COMMA)+CLOSE_O}return _serialize({"":o},"")}YAHOO.lang.JSON={useNativeParse:!!Native,useNativeStringify:!!Native,isSafe:function(s){return _isSafe(_prepare(s))},parse:function(s,reviver){return Native&&YAHOO.lang.JSON.useNativeParse?Native.parse(s,reviver):_parse(s,reviver)},stringify:function(o,w,space){return Native&&YAHOO.lang.JSON.useNativeStringify?Native.stringify(o,w,space):_stringify(o,w,space)},dateToString:function(d){function _zeroPad(v){return v<10?"0"+v:v}return d.getUTCFullYear()+
"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+COLON+_zeroPad(d.getUTCMinutes())+COLON+_zeroPad(d.getUTCSeconds())+"Z"},stringToDate:function(str){var m=str.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(m){var d=new Date;d.setUTCFullYear(m[1],m[2]-1,m[3]);d.setUTCHours(m[4],m[5],m[6],m[7]||0);return d}return str}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2449"});
(function(){var D=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang;var Resize=function(el,config){var oConfig={element:el,attributes:config||{}};Resize.superclass.constructor.call(this,oConfig.element,oConfig.attributes)};Resize._instances={};Resize.getResizeById=function(id){if(Resize._instances[id])return Resize._instances[id];return false};YAHOO.extend(Resize,YAHOO.util.Element,{CSS_RESIZE:"yui-resize",CSS_DRAG:"yui-draggable",CSS_HOVER:"yui-resize-hover",CSS_PROXY:"yui-resize-proxy",CSS_WRAP:"yui-resize-wrap",
CSS_KNOB:"yui-resize-knob",CSS_HIDDEN:"yui-resize-hidden",CSS_HANDLE:"yui-resize-handle",CSS_STATUS:"yui-resize-status",CSS_GHOST:"yui-resize-ghost",CSS_RESIZING:"yui-resize-resizing",_resizeEvent:null,dd:null,browser:YAHOO.env.ua,_locked:null,_positioned:null,_dds:null,_wrap:null,_proxy:null,_handles:null,_currentHandle:null,_currentDD:null,_cache:null,_active:null,_createProxy:function(){if(this.get("proxy")){this._proxy=document.createElement("div");this._proxy.className=this.CSS_PROXY;this._proxy.style.height=
this.get("element").clientHeight+"px";this._proxy.style.width=this.get("element").clientWidth+"px";this._wrap.parentNode.appendChild(this._proxy)}else this.set("animate",false)},_createWrap:function(){this._positioned=false;if(this.get("wrap")===false)switch(this.get("element").tagName.toLowerCase()){case "img":case "textarea":case "input":case "iframe":case "select":this.set("wrap",true);break}if(this.get("wrap")===true){this._wrap=document.createElement("div");this._wrap.id=this.get("element").id+
"_wrap";this._wrap.className=this.CSS_WRAP;if(this.get("element").tagName.toLowerCase()=="textarea")D.addClass(this._wrap,"yui-resize-textarea");D.setStyle(this._wrap,"width",this.get("width")+"px");D.setStyle(this._wrap,"height",this.get("height")+"px");D.setStyle(this._wrap,"z-index",this.getStyle("z-index"));this.setStyle("z-index",0);var pos=D.getStyle(this.get("element"),"position");D.setStyle(this._wrap,"position",pos=="static"?"relative":pos);D.setStyle(this._wrap,"top",D.getStyle(this.get("element"),
"top"));D.setStyle(this._wrap,"left",D.getStyle(this.get("element"),"left"));if(D.getStyle(this.get("element"),"position")=="absolute"){this._positioned=true;D.setStyle(this.get("element"),"position","relative");D.setStyle(this.get("element"),"top","0");D.setStyle(this.get("element"),"left","0")}var par=this.get("element").parentNode;par.replaceChild(this._wrap,this.get("element"));this._wrap.appendChild(this.get("element"))}else{this._wrap=this.get("element");if(D.getStyle(this._wrap,"position")==
"absolute")this._positioned=true}if(this.get("draggable"))this._setupDragDrop();if(this.get("hover"))D.addClass(this._wrap,this.CSS_HOVER);if(this.get("knobHandles"))D.addClass(this._wrap,this.CSS_KNOB);if(this.get("hiddenHandles"))D.addClass(this._wrap,this.CSS_HIDDEN);D.addClass(this._wrap,this.CSS_RESIZE)},_setupDragDrop:function(){D.addClass(this._wrap,this.CSS_DRAG);this.dd=new YAHOO.util.DD(this._wrap,this.get("id")+"-resize",{dragOnly:true,useShim:this.get("useShim")});this.dd.on("dragEvent",
function(){this.fireEvent("dragEvent",arguments)},this,true)},_createHandles:function(){this._handles={};this._dds={};var h=this.get("handles");for(var i=0;i<h.length;i++){this._handles[h[i]]=document.createElement("div");this._handles[h[i]].id=D.generateId(this._handles[h[i]]);this._handles[h[i]].className=this.CSS_HANDLE+" "+this.CSS_HANDLE+"-"+h[i];var k=document.createElement("div");k.className=this.CSS_HANDLE+"-inner-"+h[i];this._handles[h[i]].appendChild(k);this._wrap.appendChild(this._handles[h[i]]);
Event.on(this._handles[h[i]],"mouseover",this._handleMouseOver,this,true);Event.on(this._handles[h[i]],"mouseout",this._handleMouseOut,this,true);this._dds[h[i]]=new YAHOO.util.DragDrop(this._handles[h[i]],this.get("id")+"-handle-"+h,{useShim:this.get("useShim")});this._dds[h[i]].setPadding(15,15,15,15);this._dds[h[i]].on("startDragEvent",this._handleStartDrag,this._dds[h[i]],this);this._dds[h[i]].on("mouseDownEvent",this._handleMouseDown,this._dds[h[i]],this)}this._status=document.createElement("span");
this._status.className=this.CSS_STATUS;document.body.insertBefore(this._status,document.body.firstChild)},_ieSelectFix:function(){return false},_ieSelectBack:null,_setAutoRatio:function(ev){if(this.get("autoRatio"))if(ev&&ev.shiftKey)this.set("ratio",true);else this.set("ratio",this._configs.ratio._initialConfig.value)},_handleMouseDown:function(ev){if(this._locked)return false;if(D.getStyle(this._wrap,"position")=="absolute")this._positioned=true;if(ev)this._setAutoRatio(ev);if(this.browser.ie){this._ieSelectBack=
document.body.onselectstart;document.body.onselectstart=this._ieSelectFix}},_handleMouseOver:function(ev){if(this._locked)return false;D.removeClass(this._wrap,this.CSS_RESIZE);if(this.get("hover"))D.removeClass(this._wrap,this.CSS_HOVER);var tar=Event.getTarget(ev);if(!D.hasClass(tar,this.CSS_HANDLE))tar=tar.parentNode;if(D.hasClass(tar,this.CSS_HANDLE)&&!this._active){D.addClass(tar,this.CSS_HANDLE+"-active");for(var i in this._handles)if(Lang.hasOwnProperty(this._handles,i))if(this._handles[i]==
tar){D.addClass(tar,this.CSS_HANDLE+"-"+i+"-active");break}}D.addClass(this._wrap,this.CSS_RESIZE)},_handleMouseOut:function(ev){D.removeClass(this._wrap,this.CSS_RESIZE);if(this.get("hover")&&!this._active)D.addClass(this._wrap,this.CSS_HOVER);var tar=Event.getTarget(ev);if(!D.hasClass(tar,this.CSS_HANDLE))tar=tar.parentNode;if(D.hasClass(tar,this.CSS_HANDLE)&&!this._active){D.removeClass(tar,this.CSS_HANDLE+"-active");for(var i in this._handles)if(Lang.hasOwnProperty(this._handles,i))if(this._handles[i]==
tar){D.removeClass(tar,this.CSS_HANDLE+"-"+i+"-active");break}}D.addClass(this._wrap,this.CSS_RESIZE)},_handleStartDrag:function(args,dd){var tar=dd.getDragEl();if(D.hasClass(tar,this.CSS_HANDLE)){if(D.getStyle(this._wrap,"position")=="absolute")this._positioned=true;this._active=true;this._currentDD=dd;if(this._proxy){this._proxy.style.visibility="visible";this._proxy.style.zIndex="1000";this._proxy.style.height=this.get("element").clientHeight+"px";this._proxy.style.width=this.get("element").clientWidth+
"px"}for(var i in this._handles)if(Lang.hasOwnProperty(this._handles,i))if(this._handles[i]==tar){this._currentHandle=i;var handle="_handle_for_"+i;D.addClass(tar,this.CSS_HANDLE+"-"+i+"-active");dd.on("dragEvent",this[handle],this,true);dd.on("mouseUpEvent",this._handleMouseUp,this,true);break}D.addClass(tar,this.CSS_HANDLE+"-active");if(this.get("proxy")){var xy=D.getXY(this.get("element"));D.setXY(this._proxy,xy);if(this.get("ghost"))this.addClass(this.CSS_GHOST)}D.addClass(this._wrap,this.CSS_RESIZING);
this._setCache();this._updateStatus(this._cache.height,this._cache.width,this._cache.top,this._cache.left);this.fireEvent("startResize",{type:"startresize",target:this})}},_setCache:function(){this._cache.xy=D.getXY(this._wrap);D.setXY(this._wrap,this._cache.xy);this._cache.height=this.get("clientHeight");this._cache.width=this.get("clientWidth");this._cache.start.height=this._cache.height;this._cache.start.width=this._cache.width;this._cache.start.top=this._cache.xy[1];this._cache.start.left=this._cache.xy[0];
this._cache.top=this._cache.xy[1];this._cache.left=this._cache.xy[0];this.set("height",this._cache.height,true);this.set("width",this._cache.width,true)},_handleMouseUp:function(ev){this._active=false;var handle="_handle_for_"+this._currentHandle;this._currentDD.unsubscribe("dragEvent",this[handle],this,true);this._currentDD.unsubscribe("mouseUpEvent",this._handleMouseUp,this,true);if(this._proxy){this._proxy.style.visibility="hidden";this._proxy.style.zIndex="-1";if(this.get("setSize"))this.resize(ev,
this._cache.height,this._cache.width,this._cache.top,this._cache.left,true);else this.fireEvent("resize",{ev:"resize",target:this,height:this._cache.height,width:this._cache.width,top:this._cache.top,left:this._cache.left});if(this.get("ghost"))this.removeClass(this.CSS_GHOST)}if(this.get("hover"))D.addClass(this._wrap,this.CSS_HOVER);if(this._status)D.setStyle(this._status,"display","none");if(this.browser.ie)document.body.onselectstart=this._ieSelectBack;if(this.browser.ie)D.removeClass(this._wrap,
this.CSS_RESIZE);for(var i in this._handles)if(Lang.hasOwnProperty(this._handles,i))D.removeClass(this._handles[i],this.CSS_HANDLE+"-active");if(this.get("hover")&&!this._active)D.addClass(this._wrap,this.CSS_HOVER);D.removeClass(this._wrap,this.CSS_RESIZING);D.removeClass(this._handles[this._currentHandle],this.CSS_HANDLE+"-"+this._currentHandle+"-active");D.removeClass(this._handles[this._currentHandle],this.CSS_HANDLE+"-active");if(this.browser.ie)D.addClass(this._wrap,this.CSS_RESIZE);this._resizeEvent=
null;this._currentHandle=null;if(!this.get("animate")){this.set("height",this._cache.height,true);this.set("width",this._cache.width,true)}this.fireEvent("endResize",{ev:"endResize",target:this,height:this._cache.height,width:this._cache.width,top:this._cache.top,left:this._cache.left})},_setRatio:function(h,w,t,l){var oh=h,ow=w;if(this.get("ratio")){var orgH=this._cache.height,orgW=this._cache.width,nh=parseInt(this.get("height"),10),nw=parseInt(this.get("width"),10),maxH=this.get("maxHeight"),minH=
this.get("minHeight"),maxW=this.get("maxWidth"),minW=this.get("minWidth");switch(this._currentHandle){case "l":h=nh*(w/nw);h=Math.min(Math.max(minH,h),maxH);w=nw*(h/nh);t=this._cache.start.top- -((nh-h)/2);l=this._cache.start.left- -(nw-w);break;case "r":h=nh*(w/nw);h=Math.min(Math.max(minH,h),maxH);w=nw*(h/nh);t=this._cache.start.top- -((nh-h)/2);break;case "t":w=nw*(h/nh);h=nh*(w/nw);l=this._cache.start.left- -((nw-w)/2);t=this._cache.start.top- -(nh-h);break;case "b":w=nw*(h/nh);h=nh*(w/nw);l=
this._cache.start.left- -((nw-w)/2);break;case "bl":h=nh*(w/nw);w=nw*(h/nh);l=this._cache.start.left- -(nw-w);break;case "br":h=nh*(w/nw);w=nw*(h/nh);break;case "tl":h=nh*(w/nw);w=nw*(h/nh);l=this._cache.start.left- -(nw-w);t=this._cache.start.top- -(nh-h);break;case "tr":h=nh*(w/nw);w=nw*(h/nh);l=this._cache.start.left;t=this._cache.start.top- -(nh-h);break}oh=this._checkHeight(h);ow=this._checkWidth(w);if(oh!=h||ow!=w){t=0;l=0;if(oh!=h)ow=this._cache.width;if(ow!=w)oh=this._cache.height}}return[oh,
ow,t,l]},_updateStatus:function(h,w,t,l){if(this._resizeEvent&&!Lang.isString(this._resizeEvent)){h=h===0?this._cache.start.height:h;w=w===0?this._cache.start.width:w;var h1=parseInt(this.get("height"),10),w1=parseInt(this.get("width"),10);if(isNaN(h1))h1=parseInt(h,10);if(isNaN(w1))w1=parseInt(w,10);var diffH=parseInt(h,10)-h1;var diffW=parseInt(w,10)-w1;this._cache.offsetHeight=diffH;this._cache.offsetWidth=diffW;if(this.get("status")){D.setStyle(this._status,"display","inline");this._status.innerHTML=
"<strong>"+parseInt(h,10)+" x "+parseInt(w,10)+"</strong><em>"+(diffH>0?"+":"")+diffH+" x "+(diffW>0?"+":"")+diffW+"</em>";D.setXY(this._status,[Event.getPageX(this._resizeEvent)+12,Event.getPageY(this._resizeEvent)+12])}}},lock:function(dd){this._locked=true;if(dd&&this.dd){D.removeClass(this._wrap,"yui-draggable");this.dd.lock()}return this},unlock:function(dd){this._locked=false;if(dd&&this.dd){D.addClass(this._wrap,"yui-draggable");this.dd.unlock()}return this},isLocked:function(){return this._locked},
reset:function(){this.resize(null,this._cache.start.height,this._cache.start.width,this._cache.start.top,this._cache.start.left,true);return this},resize:function(ev,h,w,t,l,force,silent){if(this._locked)return false;this._resizeEvent=ev;var el=this._wrap,anim=this.get("animate"),set=true;if(this._proxy&&!force){el=this._proxy;anim=false}this._setAutoRatio(ev);if(this._positioned)if(this._proxy){t=this._cache.top-t;l=this._cache.left-l}var ratio=this._setRatio(h,w,t,l);h=parseInt(ratio[0],10);w=parseInt(ratio[1],
10);t=parseInt(ratio[2],10);l=parseInt(ratio[3],10);if(t==0)t=D.getY(el);if(l==0)l=D.getX(el);if(this._positioned)if(this._proxy&&force)if(!anim){el.style.top=this._proxy.style.top;el.style.left=this._proxy.style.left}else{t=this._proxy.style.top;l=this._proxy.style.left}else{if(!this.get("ratio")&&!this._proxy){t=this._cache.top+-t;l=this._cache.left+-l}if(t){if(this.get("minY"))if(t<this.get("minY"))t=this.get("minY");if(this.get("maxY"))if(t>this.get("maxY"))t=this.get("maxY")}if(l){if(this.get("minX"))if(l<
this.get("minX"))l=this.get("minX");if(this.get("maxX"))if(l+w>this.get("maxX"))l=this.get("maxX")-w}}if(!silent){var beforeReturn=this.fireEvent("beforeResize",{ev:"beforeResize",target:this,height:h,width:w,top:t,left:l});if(beforeReturn===false)return false}this._updateStatus(h,w,t,l);if(this._positioned)if(this._proxy&&force);else{if(t){D.setY(el,t);this._cache.top=t}if(l){D.setX(el,l);this._cache.left=l}}if(h){if(!anim){set=true;if(this._proxy&&force)if(!this.get("setSize"))set=false;if(set)el.style.height=
h+"px";if(this._proxy&&force||!this._proxy)if(this._wrap!=this.get("element"))this.get("element").style.height=h+"px"}this._cache.height=h}if(w){this._cache.width=w;if(!anim){set=true;if(this._proxy&&force)if(!this.get("setSize"))set=false;if(set)el.style.width=w+"px";if(this._proxy&&force||!this._proxy)if(this._wrap!=this.get("element"))this.get("element").style.width=w+"px"}}if(anim){if(YAHOO.util.Anim){var _anim=new YAHOO.util.Anim(el,{height:{to:this._cache.height},width:{to:this._cache.width}},
this.get("animateDuration"),this.get("animateEasing"));if(this._positioned){if(t)_anim.attributes.top={to:parseInt(t,10)};if(l)_anim.attributes.left={to:parseInt(l,10)}}if(this._wrap!=this.get("element"))_anim.onTween.subscribe(function(){this.get("element").style.height=el.style.height;this.get("element").style.width=el.style.width},this,true);_anim.onComplete.subscribe(function(){this.set("height",h);this.set("width",w);this.fireEvent("resize",{ev:"resize",target:this,height:h,width:w,top:t,left:l})},
this,true);_anim.animate()}}else if(this._proxy&&!force)this.fireEvent("proxyResize",{ev:"proxyresize",target:this,height:h,width:w,top:t,left:l});else this.fireEvent("resize",{ev:"resize",target:this,height:h,width:w,top:t,left:l});return this},_handle_for_br:function(args){var newW=this._setWidth(args.e);var newH=this._setHeight(args.e);this.resize(args.e,newH,newW,0,0)},_handle_for_bl:function(args){var newW=this._setWidth(args.e,true);var newH=this._setHeight(args.e);var l=newW-this._cache.width;
this.resize(args.e,newH,newW,0,l)},_handle_for_tl:function(args){var newW=this._setWidth(args.e,true);var newH=this._setHeight(args.e,true);var t=newH-this._cache.height;var l=newW-this._cache.width;this.resize(args.e,newH,newW,t,l)},_handle_for_tr:function(args){var newW=this._setWidth(args.e);var newH=this._setHeight(args.e,true);var t=newH-this._cache.height;this.resize(args.e,newH,newW,t,0)},_handle_for_r:function(args){this._dds.r.setYConstraint(0,0);var newW=this._setWidth(args.e);this.resize(args.e,
0,newW,0,0)},_handle_for_l:function(args){this._dds.l.setYConstraint(0,0);var newW=this._setWidth(args.e,true);var l=newW-this._cache.width;this.resize(args.e,0,newW,0,l)},_handle_for_b:function(args){this._dds.b.setXConstraint(0,0);var newH=this._setHeight(args.e);this.resize(args.e,newH,0,0,0)},_handle_for_t:function(args){this._dds.t.setXConstraint(0,0);var newH=this._setHeight(args.e,true);var t=newH-this._cache.height;this.resize(args.e,newH,0,t,0)},_setWidth:function(ev,flip){var xy=this._cache.xy[0],
w=this._cache.width,x=Event.getPageX(ev),nw=x-xy;if(flip)nw=xy-x+parseInt(this.get("width"),10);nw=this._snapTick(nw,this.get("xTicks"));nw=this._checkWidth(nw);return nw},_checkWidth:function(w){if(this.get("minWidth"))if(w<=this.get("minWidth"))w=this.get("minWidth");if(this.get("maxWidth"))if(w>=this.get("maxWidth"))w=this.get("maxWidth");return w},_checkHeight:function(h){if(this.get("minHeight"))if(h<=this.get("minHeight"))h=this.get("minHeight");if(this.get("maxHeight"))if(h>=this.get("maxHeight"))h=
this.get("maxHeight");return h},_setHeight:function(ev,flip){var xy=this._cache.xy[1],h=this._cache.height,y=Event.getPageY(ev),nh=y-xy;if(flip)nh=xy-y+parseInt(this.get("height"),10);nh=this._snapTick(nh,this.get("yTicks"));nh=this._checkHeight(nh);return nh},_snapTick:function(size,pix){if(!size||!pix)return size;var _s=size;var _x=size%pix;if(_x>0)if(_x>pix/2)_s=size+(pix-_x);else _s=size-_x;return _s},init:function(p_oElement,p_oAttributes){this._locked=false;this._cache={xy:[],height:0,width:0,
top:0,left:0,offsetHeight:0,offsetWidth:0,start:{height:0,width:0,top:0,left:0}};Resize.superclass.init.call(this,p_oElement,p_oAttributes);this.set("setSize",this.get("setSize"));if(p_oAttributes.height)this.set("height",parseInt(p_oAttributes.height,10));else{var h=this.getStyle("height");if(h=="auto")this.set("height",parseInt(this.get("element").offsetHeight,10))}if(p_oAttributes.width)this.set("width",parseInt(p_oAttributes.width,10));else{var w=this.getStyle("width");if(w=="auto")this.set("width",
parseInt(this.get("element").offsetWidth,10))}var id=p_oElement;if(!Lang.isString(id))id=D.generateId(id);Resize._instances[id]=this;this._active=false;this._createWrap();this._createProxy();this._createHandles()},getProxyEl:function(){return this._proxy},getWrapEl:function(){return this._wrap},getStatusEl:function(){return this._status},getActiveHandleEl:function(){return this._handles[this._currentHandle]},isActive:function(){return this._active?true:false},initAttributes:function(attr){Resize.superclass.initAttributes.call(this,
attr);this.setAttributeConfig("useShim",{value:attr.useShim===true?true:false,validator:YAHOO.lang.isBoolean,method:function(u){for(var i in this._dds)if(Lang.hasOwnProperty(this._dds,i))this._dds[i].useShim=u;if(this.dd)this.dd.useShim=u}});this.setAttributeConfig("setSize",{value:attr.setSize===false?false:true,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("wrap",{writeOnce:true,validator:YAHOO.lang.isBoolean,value:attr.wrap||false});this.setAttributeConfig("handles",{writeOnce:true,
value:attr.handles||["r","b","br"],validator:function(handles){if(Lang.isString(handles)&&handles.toLowerCase()=="all")handles=["t","b","r","l","bl","br","tl","tr"];if(!Lang.isArray(handles)){handles=handles.replace(/, /g,",");handles=handles.split(",")}this._configs.handles.value=handles}});this.setAttributeConfig("width",{value:attr.width||parseInt(this.getStyle("width"),10),validator:YAHOO.lang.isNumber,method:function(width){width=parseInt(width,10);if(width>0){if(this.get("setSize"))this.setStyle("width",
width+"px");this._cache.width=width;this._configs.width.value=width}}});this.setAttributeConfig("height",{value:attr.height||parseInt(this.getStyle("height"),10),validator:YAHOO.lang.isNumber,method:function(height){height=parseInt(height,10);if(height>0){if(this.get("setSize"))this.setStyle("height",height+"px");this._cache.height=height;this._configs.height.value=height}}});this.setAttributeConfig("minWidth",{value:attr.minWidth||15,validator:YAHOO.lang.isNumber});this.setAttributeConfig("minHeight",
{value:attr.minHeight||15,validator:YAHOO.lang.isNumber});this.setAttributeConfig("maxWidth",{value:attr.maxWidth||1E4,validator:YAHOO.lang.isNumber});this.setAttributeConfig("maxHeight",{value:attr.maxHeight||1E4,validator:YAHOO.lang.isNumber});this.setAttributeConfig("minY",{value:attr.minY||false});this.setAttributeConfig("minX",{value:attr.minX||false});this.setAttributeConfig("maxY",{value:attr.maxY||false});this.setAttributeConfig("maxX",{value:attr.maxX||false});this.setAttributeConfig("animate",
{value:attr.animate||false,validator:function(value){var ret=true;if(!YAHOO.util.Anim)ret=false;return ret}});this.setAttributeConfig("animateEasing",{value:attr.animateEasing||function(){var easing=false;if(YAHOO.util.Easing&&YAHOO.util.Easing.easeOut)easing=YAHOO.util.Easing.easeOut;return easing}()});this.setAttributeConfig("animateDuration",{value:attr.animateDuration||0.5});this.setAttributeConfig("proxy",{value:attr.proxy||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("ratio",
{value:attr.ratio||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("ghost",{value:attr.ghost||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("draggable",{value:attr.draggable||false,validator:YAHOO.lang.isBoolean,method:function(dd){if(dd&&this._wrap)this._setupDragDrop();else if(this.dd){D.removeClass(this._wrap,this.CSS_DRAG);this.dd.unreg()}}});this.setAttributeConfig("hover",{value:attr.hover||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("hiddenHandles",
{value:attr.hiddenHandles||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("knobHandles",{value:attr.knobHandles||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("xTicks",{value:attr.xTicks||false});this.setAttributeConfig("yTicks",{value:attr.yTicks||false});this.setAttributeConfig("status",{value:attr.status||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("autoRatio",{value:attr.autoRatio||false,validator:YAHOO.lang.isBoolean})},destroy:function(){for(var h in this._handles)if(Lang.hasOwnProperty(this._handles,
h)){Event.purgeElement(this._handles[h]);this._handles[h].parentNode.removeChild(this._handles[h])}if(this._proxy)this._proxy.parentNode.removeChild(this._proxy);if(this._status)this._status.parentNode.removeChild(this._status);if(this.dd){this.dd.unreg();D.removeClass(this._wrap,this.CSS_DRAG)}if(this._wrap!=this.get("element")){this.setStyle("position","");this.setStyle("top","");this.setStyle("left","");this._wrap.parentNode.replaceChild(this.get("element"),this._wrap)}this.removeClass(this.CSS_RESIZE);
delete YAHOO.util.Resize._instances[this.get("id")];for(var i in this)if(Lang.hasOwnProperty(this,i)){this[i]=null;delete this[i]}},toString:function(){if(this.get)return"Resize (#"+this.get("id")+")";return"Resize Utility"}});YAHOO.util.Resize=Resize})();YAHOO.register("resize",YAHOO.util.Resize,{version:"2.8.0r4",build:"2449"});
(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang;var Layout=function(el,config){if(Lang.isObject(el)&&!el.tagName){config=el;el=null}if(Lang.isString(el))if(Dom.get(el))el=Dom.get(el);if(!el)el=document.body;var oConfig={element:el,attributes:config||{}};Layout.superclass.constructor.call(this,oConfig.element,oConfig.attributes)};Layout._instances={};Layout.getLayoutById=function(id){if(Layout._instances[id])return Layout._instances[id];return false};YAHOO.extend(Layout,YAHOO.util.Element,
{browser:function(){var b=YAHOO.env.ua;b.standardsMode=false;b.secure=false;return b}(),_units:null,_rendered:null,_zIndex:null,_sizes:null,_setBodySize:function(set){var h=0,w=0;set=set===false?false:true;if(this._isBody){h=Dom.getClientHeight();w=Dom.getClientWidth()}else{h=parseInt(this.getStyle("height"),10);w=parseInt(this.getStyle("width"),10);if(isNaN(w))w=this.get("element").clientWidth;if(isNaN(h))h=this.get("element").clientHeight}if(this.get("minWidth"))if(w<this.get("minWidth"))w=this.get("minWidth");
if(this.get("minHeight"))if(h<this.get("minHeight"))h=this.get("minHeight");if(set){if(h<0)h=0;if(w<0)w=0;Dom.setStyle(this._doc,"height",h+"px");Dom.setStyle(this._doc,"width",w+"px")}this._sizes.doc={h:h,w:w};this._setSides(set)},_setSides:function(set){var h1=this._units.top?this._units.top.get("height"):0,h2=this._units.bottom?this._units.bottom.get("height"):0,h=this._sizes.doc.h,w=this._sizes.doc.w;set=set===false?false:true;this._sizes.top={h:h1,w:this._units.top?w:0,t:0};this._sizes.bottom=
{h:h2,w:this._units.bottom?w:0};var newH=h-(h1+h2);this._sizes.left={h:newH,w:this._units.left?this._units.left.get("width"):0};this._sizes.right={h:newH,w:this._units.right?this._units.right.get("width"):0,l:this._units.right?w-this._units.right.get("width"):0,t:this._units.top?this._sizes.top.h:0};if(this._units.right&&set){this._units.right.set("top",this._sizes.right.t);if(!this._units.right._collapsing)this._units.right.set("left",this._sizes.right.l);this._units.right.set("height",this._sizes.right.h,
true)}if(this._units.left){this._sizes.left.l=0;if(this._units.top)this._sizes.left.t=this._sizes.top.h;else this._sizes.left.t=0;if(set){this._units.left.set("top",this._sizes.left.t);this._units.left.set("height",this._sizes.left.h,true);this._units.left.set("left",0)}}if(this._units.bottom){this._sizes.bottom.t=this._sizes.top.h+this._sizes.left.h;if(set){this._units.bottom.set("top",this._sizes.bottom.t);this._units.bottom.set("width",this._sizes.bottom.w,true)}}if(this._units.top)if(set)this._units.top.set("width",
this._sizes.top.w,true);this._setCenter(set)},_setCenter:function(set){set=set===false?false:true;var h=this._sizes.left.h;var w=this._sizes.doc.w-(this._sizes.left.w+this._sizes.right.w);if(set){this._units.center.set("height",h,true);this._units.center.set("width",w,true);this._units.center.set("top",this._sizes.top.h);this._units.center.set("left",this._sizes.left.w)}this._sizes.center={h:h,w:w,t:this._sizes.top.h,l:this._sizes.left.w}},getSizes:function(){return this._sizes},getUnitById:function(id){return YAHOO.widget.LayoutUnit.getLayoutUnitById(id)},
getUnitByPosition:function(pos){if(pos){pos=pos.toLowerCase();if(this._units[pos])return this._units[pos];return false}return false},removeUnit:function(unit){delete this._units[unit.get("position")];this.resize()},addUnit:function(cfg){if(!cfg.position)return false;if(this._units[cfg.position])return false;var element=null,el=null;if(cfg.id)if(Dom.get(cfg.id)){element=Dom.get(cfg.id);delete cfg.id}if(cfg.element)element=cfg.element;if(!el){el=document.createElement("div");var id=Dom.generateId();
el.id=id}if(!element)element=document.createElement("div");Dom.addClass(element,"yui-layout-wrap");if(this.browser.ie&&!this.browser.standardsMode){el.style.zoom=1;element.style.zoom=1}if(el.firstChild)el.insertBefore(element,el.firstChild);else el.appendChild(element);this._doc.appendChild(el);var h=false,w=false;if(cfg.height)h=parseInt(cfg.height,10);if(cfg.width)w=parseInt(cfg.width,10);var unitConfig={};YAHOO.lang.augmentObject(unitConfig,cfg);unitConfig.parent=this;unitConfig.wrap=element;unitConfig.height=
h;unitConfig.width=w;var unit=new YAHOO.widget.LayoutUnit(el,unitConfig);unit.on("heightChange",this.resize,{unit:unit},this);unit.on("widthChange",this.resize,{unit:unit},this);unit.on("gutterChange",this.resize,{unit:unit},this);this._units[cfg.position]=unit;if(this._rendered)this.resize();return unit},_createUnits:function(){var units=this.get("units");for(var i in units)if(Lang.hasOwnProperty(units,i))this.addUnit(units[i])},resize:function(set,info){var ev=set;if(ev&&ev.prevValue&&ev.newValue)if(ev.prevValue==
ev.newValue)if(info)if(info.unit)if(!info.unit.get("animate"))set=false;set=set===false?false:true;if(set){var retVal=this.fireEvent("beforeResize");if(retVal===false)set=false;if(this.browser.ie)if(this._isBody){Dom.removeClass(document.documentElement,"yui-layout");Dom.addClass(document.documentElement,"yui-layout")}else{this.removeClass("yui-layout");this.addClass("yui-layout")}}this._setBodySize(set);if(set)this.fireEvent("resize",{target:this,sizes:this._sizes,event:ev});return this},_setupBodyElements:function(){this._doc=
Dom.get("layout-doc");if(!this._doc){this._doc=document.createElement("div");this._doc.id="layout-doc";if(document.body.firstChild)document.body.insertBefore(this._doc,document.body.firstChild);else document.body.appendChild(this._doc)}this._createUnits();this._setBodySize();Event.on(window,"resize",this.resize,this,true);Dom.addClass(this._doc,"yui-layout-doc")},_setupElements:function(){this._doc=this.getElementsByClassName("yui-layout-doc")[0];if(!this._doc){this._doc=document.createElement("div");
this.get("element").appendChild(this._doc)}this._createUnits();this._setBodySize();Dom.addClass(this._doc,"yui-layout-doc")},_isBody:null,_doc:null,init:function(p_oElement,p_oAttributes){this._zIndex=0;Layout.superclass.init.call(this,p_oElement,p_oAttributes);if(this.get("parent"))this._zIndex=this.get("parent")._zIndex+10;this._sizes={};this._units={};var id=p_oElement;if(!Lang.isString(id))id=Dom.generateId(id);Layout._instances[id]=this},render:function(){this._stamp();var el=this.get("element");
if(el&&el.tagName&&el.tagName.toLowerCase()=="body"){this._isBody=true;Dom.addClass(document.body,"yui-layout");if(Dom.hasClass(document.body,"yui-skin-sam")){Dom.addClass(document.documentElement,"yui-skin-sam");Dom.removeClass(document.body,"yui-skin-sam")}this._setupBodyElements()}else{this._isBody=false;this.addClass("yui-layout");this._setupElements()}this.resize();this._rendered=true;this.fireEvent("render");return this},_stamp:function(){if(document.compatMode=="CSS1Compat")this.browser.standardsMode=
true;if(window.location.href.toLowerCase().indexOf("https")===0){Dom.addClass(document.documentElement,"secure");this.browser.secure=true}},initAttributes:function(attr){Layout.superclass.initAttributes.call(this,attr);this.setAttributeConfig("units",{writeOnce:true,validator:YAHOO.lang.isArray,value:attr.units||[]});this.setAttributeConfig("minHeight",{value:attr.minHeight||false,validator:YAHOO.lang.isNumber});this.setAttributeConfig("minWidth",{value:attr.minWidth||false,validator:YAHOO.lang.isNumber});
this.setAttributeConfig("height",{value:attr.height||false,validator:YAHOO.lang.isNumber,method:function(h){if(h<0)h=0;this.setStyle("height",h+"px")}});this.setAttributeConfig("width",{value:attr.width||false,validator:YAHOO.lang.isNumber,method:function(w){if(w<0)w=0;this.setStyle("width",w+"px")}});this.setAttributeConfig("parent",{writeOnce:true,value:attr.parent||false,method:function(p){if(p)p.on("resize",this.resize,this,true)}})},destroy:function(){var par=this.get("parent");if(par)par.removeListener("resize",
this.resize,this,true);Event.removeListener(window,"resize",this.resize,this,true);this.unsubscribeAll();for(var u in this._units)if(Lang.hasOwnProperty(this._units,u))if(this._units[u])this._units[u].destroy(true);Event.purgeElement(this.get("element"));this.get("parentNode").removeChild(this.get("element"));delete YAHOO.widget.Layout._instances[this.get("id")];for(var i in this)if(Lang.hasOwnProperty(this,i)){this[i]=null;delete this[i]}if(par)par.resize()},toString:function(){if(this.get)return"Layout #"+
this.get("id");return"Layout"}});YAHOO.widget.Layout=Layout})();
(function(){var Dom=YAHOO.util.Dom,Sel=YAHOO.util.Selector,Event=YAHOO.util.Event,Lang=YAHOO.lang;var LayoutUnit=function(el,config){var oConfig={element:el,attributes:config||{}};LayoutUnit.superclass.constructor.call(this,oConfig.element,oConfig.attributes)};LayoutUnit._instances={};LayoutUnit.getLayoutUnitById=function(id){if(LayoutUnit._instances[id])return LayoutUnit._instances[id];return false};YAHOO.extend(LayoutUnit,YAHOO.util.Element,{STR_CLOSE:"Click to close this pane.",STR_COLLAPSE:"Click to collapse this pane.",
STR_EXPAND:"Click to expand this pane.",LOADING_CLASSNAME:"loading",browser:null,_sizes:null,_anim:null,_resize:null,_clip:null,_gutter:null,header:null,body:null,footer:null,_collapsed:null,_collapsing:null,_lastWidth:null,_lastHeight:null,_lastTop:null,_lastLeft:null,_lastScroll:null,_lastCenterScroll:null,_lastScrollTop:null,resize:function(force){var retVal=this.fireEvent("beforeResize");if(retVal===false)return this;if(!this._collapsing||force===true){var scroll=this.get("scroll");this.set("scroll",
false);var hd=this._getBoxSize(this.header),ft=this._getBoxSize(this.footer),box=[this.get("height"),this.get("width")];var nh=box[0]-hd[0]-ft[0]-(this._gutter.top+this._gutter.bottom),nw=box[1]-(this._gutter.left+this._gutter.right);var wrapH=nh+(hd[0]+ft[0]),wrapW=nw;if(this._collapsed&&!this._collapsing){this._setHeight(this._clip,wrapH);this._setWidth(this._clip,wrapW);Dom.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px");Dom.setStyle(this._clip,"left",this.get("left")+this._gutter.left+
"px")}else if(!this._collapsed||this._collapsed&&this._collapsing){wrapH=this._setHeight(this.get("wrap"),wrapH);wrapW=this._setWidth(this.get("wrap"),wrapW);this._sizes.wrap.h=wrapH;this._sizes.wrap.w=wrapW;Dom.setStyle(this.get("wrap"),"top",this._gutter.top+"px");Dom.setStyle(this.get("wrap"),"left",this._gutter.left+"px");this._sizes.header.w=this._setWidth(this.header,wrapW);this._sizes.header.h=hd[0];this._sizes.footer.w=this._setWidth(this.footer,wrapW);this._sizes.footer.h=ft[0];Dom.setStyle(this.footer,
"bottom","0px");this._sizes.body.h=this._setHeight(this.body,wrapH-(hd[0]+ft[0]));this._sizes.body.w=this._setWidth(this.body,wrapW);Dom.setStyle(this.body,"top",hd[0]+"px");this.set("scroll",scroll);this.fireEvent("resize")}}return this},_setWidth:function(el,w){if(el){var b=this._getBorderSizes(el);w=w-(b[1]+b[3]);w=this._fixQuirks(el,w,"w");if(w<0)w=0;Dom.setStyle(el,"width",w+"px")}return w},_setHeight:function(el,h){if(el){var b=this._getBorderSizes(el);h=h-(b[0]+b[2]);h=this._fixQuirks(el,h,
"h");if(h<0)h=0;Dom.setStyle(el,"height",h+"px")}return h},_fixQuirks:function(el,dim,side){var i1=0,i2=2;if(side=="w"){i1=1;i2=3}if(this.browser.ie<8&&!this.browser.standardsMode){var b=this._getBorderSizes(el),bp=this._getBorderSizes(el.parentNode);if(b[i1]===0&&b[i2]===0){if(bp[i1]!==0&&bp[i2]!==0)dim=dim-(bp[i1]+bp[i2])}else if(bp[i1]===0&&bp[i2]===0)dim=dim+(b[i1]+b[i2])}return dim},_getBoxSize:function(el){var size=[0,0];if(el){if(this.browser.ie&&!this.browser.standardsMode)el.style.zoom=1;
var b=this._getBorderSizes(el);size[0]=el.clientHeight+(b[0]+b[2]);size[1]=el.clientWidth+(b[1]+b[3])}return size},_getBorderSizes:function(el){var s=[];el=el||this.get("element");if(this.browser.ie&&!this.browser.standardsMode)el.style.zoom=1;s[0]=parseInt(Dom.getStyle(el,"borderTopWidth"),10);s[1]=parseInt(Dom.getStyle(el,"borderRightWidth"),10);s[2]=parseInt(Dom.getStyle(el,"borderBottomWidth"),10);s[3]=parseInt(Dom.getStyle(el,"borderLeftWidth"),10);for(var i=0;i<s.length;i++)if(isNaN(s[i]))s[i]=
0;return s},_createClip:function(){if(!this._clip){this._clip=document.createElement("div");this._clip.className="yui-layout-clip yui-layout-clip-"+this.get("position");this._clip.innerHTML='<div class="collapse"></div>';var c=this._clip.firstChild;c.title=this.STR_EXPAND;Event.on(c,"click",this.expand,this,true);this.get("element").parentNode.appendChild(this._clip)}},_toggleClip:function(){if(!this._collapsed){var hd=this._getBoxSize(this.header),ft=this._getBoxSize(this.footer),box=[this.get("height"),
this.get("width")];var nh=box[0]-hd[0]-ft[0]-(this._gutter.top+this._gutter.bottom),nw=box[1]-(this._gutter.left+this._gutter.right),wrapH=nh+(hd[0]+ft[0]);switch(this.get("position")){case "top":case "bottom":this._setWidth(this._clip,nw);this._setHeight(this._clip,this.get("collapseSize"));Dom.setStyle(this._clip,"left",this._lastLeft+this._gutter.left+"px");if(this.get("position")=="bottom")Dom.setStyle(this._clip,"top",this._lastTop+this._lastHeight-(this.get("collapseSize")-this._gutter.top)+
"px");else Dom.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px");break;case "left":case "right":this._setWidth(this._clip,this.get("collapseSize"));this._setHeight(this._clip,wrapH);Dom.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px");if(this.get("position")=="right")Dom.setStyle(this._clip,"left",this._lastLeft+this._lastWidth-this.get("collapseSize")-this._gutter.left+"px");else Dom.setStyle(this._clip,"left",this.get("left")+this._gutter.left+"px");break}Dom.setStyle(this._clip,
"display","block");this.setStyle("display","none")}else Dom.setStyle(this._clip,"display","none")},getSizes:function(){return this._sizes},toggle:function(){if(this._collapsed)this.expand();else this.collapse();return this},expand:function(){if(!this._collapsed)return this;var retVal=this.fireEvent("beforeExpand");if(retVal===false)return this;this._collapsing=true;this.setStyle("zIndex",this.get("parent")._zIndex+1);if(this._anim){this.setStyle("display","none");var attr={},s;switch(this.get("position")){case "left":case "right":this.set("width",
this._lastWidth,true);this.setStyle("width",this._lastWidth+"px");this.get("parent").resize(false);s=this.get("parent").getSizes()[this.get("position")];this.set("height",s.h,true);var left=s.l;attr={left:{to:left}};if(this.get("position")=="left"){attr.left.from=left-s.w;this.setStyle("left",left-s.w+"px")}break;case "top":case "bottom":this.set("height",this._lastHeight,true);this.setStyle("height",this._lastHeight+"px");this.get("parent").resize(false);s=this.get("parent").getSizes()[this.get("position")];
this.set("width",s.w,true);var top=s.t;attr={top:{to:top}};if(this.get("position")=="top"){this.setStyle("top",top-s.h+"px");attr.top.from=top-s.h}break}this._anim.attributes=attr;var exStart=function(){this.setStyle("display","block");this.resize(true);this._anim.onStart.unsubscribe(exStart,this,true)};var expand=function(){this._collapsing=false;this.setStyle("zIndex",this.get("parent")._zIndex);this.set("width",this._lastWidth);this.set("height",this._lastHeight);this._collapsed=false;this.resize();
this.set("scroll",this._lastScroll);if(this._lastScrollTop>0)this.body.scrollTop=this._lastScrollTop;this._anim.onComplete.unsubscribe(expand,this,true);this.fireEvent("expand")};this._anim.onStart.subscribe(exStart,this,true);this._anim.onComplete.subscribe(expand,this,true);this._anim.animate();this._toggleClip()}else{this._collapsing=false;this._toggleClip();this._collapsed=false;this.setStyle("zIndex",this.get("parent")._zIndex);this.setStyle("display","block");this.set("width",this._lastWidth);
this.set("height",this._lastHeight);this.resize();this.set("scroll",this._lastScroll);if(this._lastScrollTop>0)this.body.scrollTop=this._lastScrollTop;this.fireEvent("expand")}return this},collapse:function(){if(this._collapsed)return this;var retValue=this.fireEvent("beforeCollapse");if(retValue===false)return this;if(!this._clip)this._createClip();this._collapsing=true;var w=this.get("width"),h=this.get("height"),attr={};this._lastWidth=w;this._lastHeight=h;this._lastScroll=this.get("scroll");this._lastScrollTop=
this.body.scrollTop;this.set("scroll",false,true);this._lastLeft=parseInt(this.get("element").style.left,10);this._lastTop=parseInt(this.get("element").style.top,10);if(isNaN(this._lastTop)){this._lastTop=0;this.set("top",0)}if(isNaN(this._lastLeft)){this._lastLeft=0;this.set("left",0)}this.setStyle("zIndex",this.get("parent")._zIndex+1);var pos=this.get("position");switch(pos){case "top":case "bottom":this.set("height",this.get("collapseSize")+(this._gutter.top+this._gutter.bottom));attr={top:{to:this.get("top")-
h}};if(pos=="bottom")attr.top.to=this.get("top")+h;break;case "left":case "right":this.set("width",this.get("collapseSize")+(this._gutter.left+this._gutter.right));attr={left:{to:-this._lastWidth}};if(pos=="right")attr.left={to:this.get("left")+w};break}if(this._anim){this._anim.attributes=attr;var collapse=function(){this._collapsing=false;this._toggleClip();this.setStyle("zIndex",this.get("parent")._zIndex);this._collapsed=true;this.get("parent").resize();this._anim.onComplete.unsubscribe(collapse,
this,true);this.fireEvent("collapse")};this._anim.onComplete.subscribe(collapse,this,true);this._anim.animate()}else{this._collapsing=false;this.setStyle("display","none");this._toggleClip();this.setStyle("zIndex",this.get("parent")._zIndex);this.get("parent").resize();this._collapsed=true;this.fireEvent("collapse")}return this},close:function(){this.setStyle("display","none");this.get("parent").removeUnit(this);this.fireEvent("close");if(this._clip){this._clip.parentNode.removeChild(this._clip);
this._clip=null}return this.get("parent")},loadHandler:{success:function(o){this.body.innerHTML=o.responseText;this.resize(true)},failure:function(o){}},dataConnection:null,_loading:false,loadContent:function(){if(YAHOO.util.Connect&&this.get("dataSrc")&&!this._loading&&!this.get("dataLoaded")){this._loading=true;Dom.addClass(this.body,this.LOADING_CLASSNAME);this.dataConnection=YAHOO.util.Connect.asyncRequest(this.get("loadMethod"),this.get("dataSrc"),{success:function(o){this.loadHandler.success.call(this,
o);this.set("dataLoaded",true);this.dataConnection=null;Dom.removeClass(this.body,this.LOADING_CLASSNAME);this._loading=false;this.fireEvent("load")},failure:function(o){this.loadHandler.failure.call(this,o);this.dataConnection=null;Dom.removeClass(this.body,this.LOADING_CLASSNAME);this._loading=false;this.fireEvent("loadError",{error:o})},scope:this,timeout:this.get("dataTimeout")});return this.dataConnection}return false},init:function(p_oElement,p_oAttributes){this._gutter={left:0,right:0,top:0,
bottom:0};this._sizes={wrap:{h:0,w:0},header:{h:0,w:0},body:{h:0,w:0},footer:{h:0,w:0}};LayoutUnit.superclass.init.call(this,p_oElement,p_oAttributes);this.browser=this.get("parent").browser;var id=p_oElement;if(!Lang.isString(id))id=Dom.generateId(id);LayoutUnit._instances[id]=this;this.setStyle("position","absolute");this.addClass("yui-layout-unit");this.addClass("yui-layout-unit-"+this.get("position"));var header=this.getElementsByClassName("yui-layout-hd","div")[0];if(header)this.header=header;
var body=this.getElementsByClassName("yui-layout-bd","div")[0];if(body)this.body=body;var footer=this.getElementsByClassName("yui-layout-ft","div")[0];if(footer)this.footer=footer;this.on("contentChange",this.resize,this,true);this._lastScrollTop=0;this.set("animate",this.get("animate"))},initAttributes:function(attr){LayoutUnit.superclass.initAttributes.call(this,attr);this.setAttributeConfig("wrap",{value:attr.wrap||null,method:function(w){if(w){var id=Dom.generateId(w);LayoutUnit._instances[id]=
this}}});this.setAttributeConfig("grids",{value:attr.grids||false});this.setAttributeConfig("top",{value:attr.top||0,validator:Lang.isNumber,method:function(t){if(!this._collapsing)this.setStyle("top",t+"px")}});this.setAttributeConfig("left",{value:attr.left||0,validator:Lang.isNumber,method:function(l){if(!this._collapsing)this.setStyle("left",l+"px")}});this.setAttributeConfig("minWidth",{value:attr.minWidth||false,method:function(v){if(this._resize)this._resize.set("minWidth",v)},validator:YAHOO.lang.isNumber});
this.setAttributeConfig("maxWidth",{value:attr.maxWidth||false,method:function(v){if(this._resize)this._resize.set("maxWidth",v)},validator:YAHOO.lang.isNumber});this.setAttributeConfig("minHeight",{value:attr.minHeight||false,method:function(v){if(this._resize)this._resize.set("minHeight",v)},validator:YAHOO.lang.isNumber});this.setAttributeConfig("maxHeight",{value:attr.maxHeight||false,method:function(v){if(this._resize)this._resize.set("maxHeight",v)},validator:YAHOO.lang.isNumber});this.setAttributeConfig("height",
{value:attr.height,validator:Lang.isNumber,method:function(h){if(!this._collapsing){if(h<0)h=0;this.setStyle("height",h+"px")}}});this.setAttributeConfig("width",{value:attr.width,validator:Lang.isNumber,method:function(w){if(!this._collapsing){if(w<0)w=0;this.setStyle("width",w+"px")}}});this.setAttributeConfig("zIndex",{value:attr.zIndex||false,method:function(z){this.setStyle("zIndex",z)}});this.setAttributeConfig("position",{value:attr.position});this.setAttributeConfig("gutter",{value:attr.gutter||
0,validator:YAHOO.lang.isString,method:function(gutter){var p=gutter.split(" ");if(p.length){this._gutter.top=parseInt(p[0],10);if(p[1])this._gutter.right=parseInt(p[1],10);else this._gutter.right=this._gutter.top;if(p[2])this._gutter.bottom=parseInt(p[2],10);else this._gutter.bottom=this._gutter.top;if(p[3])this._gutter.left=parseInt(p[3],10);else if(p[1])this._gutter.left=this._gutter.right;else this._gutter.left=this._gutter.top}}});this.setAttributeConfig("parent",{writeOnce:true,value:attr.parent||
false,method:function(p){if(p)p.on("resize",this.resize,this,true)}});this.setAttributeConfig("collapseSize",{value:attr.collapseSize||25,validator:YAHOO.lang.isNumber});this.setAttributeConfig("duration",{value:attr.duration||0.5});this.setAttributeConfig("easing",{value:attr.easing||(YAHOO.util&&YAHOO.util.Easing?YAHOO.util.Easing.BounceIn:"false")});this.setAttributeConfig("animate",{value:attr.animate===false?false:true,validator:function(){var anim=false;if(YAHOO.util.Anim)anim=true;return anim},
method:function(anim){if(anim)this._anim=new YAHOO.util.Anim(this.get("element"),{},this.get("duration"),this.get("easing"));else this._anim=false}});this.setAttributeConfig("header",{value:attr.header||false,method:function(txt){if(txt===false){if(this.header){Dom.addClass(this.body,"yui-layout-bd-nohd");this.header.parentNode.removeChild(this.header);this.header=null}}else{if(!this.header){var header=this.getElementsByClassName("yui-layout-hd","div")[0];if(!header)header=this._createHeader();this.header=
header}var h=this.header.getElementsByTagName("h2")[0];if(!h){h=document.createElement("h2");this.header.appendChild(h)}h.innerHTML=txt;if(this.body)Dom.removeClass(this.body,"yui-layout-bd-nohd")}this.fireEvent("contentChange",{target:"header"})}});this.setAttributeConfig("proxy",{writeOnce:true,value:attr.proxy===false?false:true});this.setAttributeConfig("body",{value:attr.body||false,method:function(content){if(!this.body){var body=this.getElementsByClassName("yui-layout-bd","div")[0];if(body)this.body=
body;else{body=document.createElement("div");body.className="yui-layout-bd";this.body=body;this.get("wrap").appendChild(body)}}if(!this.header)Dom.addClass(this.body,"yui-layout-bd-nohd");Dom.addClass(this.body,"yui-layout-bd-noft");var el=null;if(Lang.isString(content))el=Dom.get(content);else if(content&&content.tagName)el=content;if(el){var id=Dom.generateId(el);LayoutUnit._instances[id]=this;this.body.appendChild(el)}else this.body.innerHTML=content;this._cleanGrids();this.fireEvent("contentChange",
{target:"body"})}});this.setAttributeConfig("footer",{value:attr.footer||false,method:function(content){if(content===false){if(this.footer){Dom.addClass(this.body,"yui-layout-bd-noft");this.footer.parentNode.removeChild(this.footer);this.footer=null}}else{if(!this.footer){var ft=this.getElementsByClassName("yui-layout-ft","div")[0];if(!ft){ft=document.createElement("div");ft.className="yui-layout-ft";this.footer=ft;this.get("wrap").appendChild(ft)}else this.footer=ft}var el=null;if(Lang.isString(content))el=
Dom.get(content);else if(content&&content.tagName)el=content;if(el)this.footer.appendChild(el);else this.footer.innerHTML=content;Dom.removeClass(this.body,"yui-layout-bd-noft")}this.fireEvent("contentChange",{target:"footer"})}});this.setAttributeConfig("close",{value:attr.close||false,method:function(close){if(this.get("position")=="center")return false;if(!this.header&&close)this._createHeader();var c=Dom.getElementsByClassName("close","div",this.header)[0];if(close){if(!this.get("header"))this.set("header",
"&nbsp;");if(!c){c=document.createElement("div");c.className="close";this.header.appendChild(c);Event.on(c,"click",this.close,this,true)}c.title=this.STR_CLOSE}else if(c&&c.parentNode){Event.purgeElement(c);c.parentNode.removeChild(c)}this._configs.close.value=close;this.set("collapse",this.get("collapse"))}});this.setAttributeConfig("collapse",{value:attr.collapse||false,method:function(collapse){if(this.get("position")=="center")return false;if(!this.header&&collapse)this._createHeader();var c=
Dom.getElementsByClassName("collapse","div",this.header)[0];if(collapse){if(!this.get("header"))this.set("header","&nbsp;");if(!c){c=document.createElement("div");this.header.appendChild(c);Event.on(c,"click",this.collapse,this,true)}c.title=this.STR_COLLAPSE;c.className="collapse"+(this.get("close")?" collapse-close":"")}else if(c&&c.parentNode){Event.purgeElement(c);c.parentNode.removeChild(c)}}});this.setAttributeConfig("scroll",{value:attr.scroll===true||attr.scroll===false||attr.scroll===null?
attr.scroll:false,method:function(scroll){if(scroll===false&&!this._collapsed)if(this.body)if(this.body.scrollTop>0)this._lastScrollTop=this.body.scrollTop;if(scroll===true){this.addClass("yui-layout-scroll");this.removeClass("yui-layout-noscroll");if(this._lastScrollTop>0)if(this.body)this.body.scrollTop=this._lastScrollTop}else if(scroll===false){this.removeClass("yui-layout-scroll");this.addClass("yui-layout-noscroll")}else if(scroll===null){this.removeClass("yui-layout-scroll");this.removeClass("yui-layout-noscroll")}}});
this.setAttributeConfig("hover",{writeOnce:true,value:attr.hover||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("useShim",{value:attr.useShim||false,validator:YAHOO.lang.isBoolean,method:function(u){if(this._resize)this._resize.set("useShim",u)}});this.setAttributeConfig("resize",{value:attr.resize||false,validator:function(r){if(YAHOO.util&&YAHOO.util.Resize)return true;return false},method:function(resize){if(resize&&!this._resize){if(this.get("position")=="center")return false;
var handle=false;switch(this.get("position")){case "top":handle="b";break;case "bottom":handle="t";break;case "right":handle="l";break;case "left":handle="r";break}this.setStyle("position","absolute");if(handle){this._resize=new YAHOO.util.Resize(this.get("element"),{proxy:this.get("proxy"),hover:this.get("hover"),status:false,autoRatio:false,handles:[handle],minWidth:this.get("minWidth"),maxWidth:this.get("maxWidth"),minHeight:this.get("minHeight"),maxHeight:this.get("maxHeight"),height:this.get("height"),
width:this.get("width"),setSize:false,useShim:this.get("useShim"),wrap:false});this._resize._handles[handle].innerHTML='<div class="yui-layout-resize-knob"></div>';if(this.get("proxy")){var proxy=this._resize.getProxyEl();proxy.innerHTML='<div class="yui-layout-handle-'+handle+'"></div>'}this._resize.on("startResize",function(ev){this._lastScroll=this.get("scroll");this.set("scroll",false);if(this.get("parent")){this.get("parent").fireEvent("startResize");var c=this.get("parent").getUnitByPosition("center");
this._lastCenterScroll=c.get("scroll");c.addClass(this._resize.CSS_RESIZING);c.set("scroll",false)}this.fireEvent("startResize")},this,true);this._resize.on("resize",function(ev){this.set("height",ev.height);this.set("width",ev.width)},this,true);this._resize.on("endResize",function(ev){this.set("scroll",this._lastScroll);if(this.get("parent")){var c=this.get("parent").getUnitByPosition("center");c.set("scroll",this._lastCenterScroll);c.removeClass(this._resize.CSS_RESIZING)}this.resize();this.fireEvent("endResize")},
this,true)}}else if(this._resize)this._resize.destroy()}});this.setAttributeConfig("dataSrc",{value:attr.dataSrc});this.setAttributeConfig("loadMethod",{value:attr.loadMethod||"GET",validator:YAHOO.lang.isString});this.setAttributeConfig("dataLoaded",{value:false,validator:YAHOO.lang.isBoolean,writeOnce:true});this.setAttributeConfig("dataTimeout",{value:attr.dataTimeout||null,validator:YAHOO.lang.isNumber})},_cleanGrids:function(){if(this.get("grids")){var b=Sel.query("div.yui-b",this.body,true);
if(b)Dom.removeClass(b,"yui-b");Event.onAvailable("yui-main",function(){Dom.setStyle(Sel.query("#yui-main"),"margin-left","0");Dom.setStyle(Sel.query("#yui-main"),"margin-right","0")})}},_createHeader:function(){var header=document.createElement("div");header.className="yui-layout-hd";if(this.get("firstChild"))this.get("wrap").insertBefore(header,this.get("wrap").firstChild);else this.get("wrap").appendChild(header);this.header=header;return header},destroy:function(force){if(this._resize)this._resize.destroy();
var par=this.get("parent");this.setStyle("display","none");if(this._clip){this._clip.parentNode.removeChild(this._clip);this._clip=null}if(!force)par.removeUnit(this);if(par)par.removeListener("resize",this.resize,this,true);this.unsubscribeAll();Event.purgeElement(this.get("element"));this.get("parentNode").removeChild(this.get("element"));delete YAHOO.widget.LayoutUnit._instances[this.get("id")];for(var i in this)if(Lang.hasOwnProperty(this,i)){this[i]=null;delete this[i]}return par},toString:function(){if(this.get)return"LayoutUnit #"+
this.get("id")+" ("+this.get("position")+")";return"LayoutUnit"}});YAHOO.widget.LayoutUnit=LayoutUnit})();YAHOO.register("layout",YAHOO.widget.Layout,{version:"2.8.0r4",build:"2449"});
(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang,UA=YAHOO.env.ua,Overlay=YAHOO.widget.Overlay,Menu=YAHOO.widget.Menu,m_oButtons={},m_oOverlayManager=null,m_oSubmitTrigger=null,m_oFocusedButton=null;function createInputElement(p_sType,p_sName,p_sValue,p_bChecked){var oInput,sInput;if(Lang.isString(p_sType)&&Lang.isString(p_sName)){if(UA.ie){sInput='<input type="'+p_sType+'" name="'+p_sName+'"';if(p_bChecked)sInput+=" checked";sInput+=">";oInput=document.createElement(sInput)}else{oInput=
document.createElement("input");oInput.name=p_sName;oInput.type=p_sType;if(p_bChecked)oInput.checked=true}oInput.value=p_sValue}return oInput}function setAttributesFromSrcElement(p_oElement,p_oAttributes){var sSrcElementNodeName=p_oElement.nodeName.toUpperCase(),sClass=this.CLASS_NAME_PREFIX+this.CSS_CLASS_NAME,me=this,oAttribute,oRootNode,sText;function setAttributeFromDOMAttribute(p_sAttribute){if(!(p_sAttribute in p_oAttributes)){oAttribute=p_oElement.getAttributeNode(p_sAttribute);if(oAttribute&&
"value"in oAttribute)p_oAttributes[p_sAttribute]=oAttribute.value}}function setFormElementProperties(){setAttributeFromDOMAttribute("type");if(p_oAttributes.type=="button")p_oAttributes.type="push";if(!("disabled"in p_oAttributes))p_oAttributes.disabled=p_oElement.disabled;setAttributeFromDOMAttribute("name");setAttributeFromDOMAttribute("value");setAttributeFromDOMAttribute("title")}switch(sSrcElementNodeName){case "A":p_oAttributes.type="link";setAttributeFromDOMAttribute("href");setAttributeFromDOMAttribute("target");
break;case "INPUT":setFormElementProperties();if(!("checked"in p_oAttributes))p_oAttributes.checked=p_oElement.checked;break;case "BUTTON":setFormElementProperties();oRootNode=p_oElement.parentNode.parentNode;if(Dom.hasClass(oRootNode,sClass+"-checked"))p_oAttributes.checked=true;if(Dom.hasClass(oRootNode,sClass+"-disabled"))p_oAttributes.disabled=true;p_oElement.removeAttribute("value");p_oElement.setAttribute("type","button");break}p_oElement.removeAttribute("id");p_oElement.removeAttribute("name");
if(!("tabindex"in p_oAttributes))p_oAttributes.tabindex=p_oElement.tabIndex;if(!("label"in p_oAttributes)){sText=sSrcElementNodeName=="INPUT"?p_oElement.value:p_oElement.innerHTML;if(sText&&sText.length>0)p_oAttributes.label=sText}}function initConfig(p_oConfig){var oAttributes=p_oConfig.attributes,oSrcElement=oAttributes.srcelement,sSrcElementNodeName=oSrcElement.nodeName.toUpperCase(),me=this;if(sSrcElementNodeName==this.NODE_NAME){p_oConfig.element=oSrcElement;p_oConfig.id=oSrcElement.id;Dom.getElementsBy(function(p_oElement){switch(p_oElement.nodeName.toUpperCase()){case "BUTTON":case "A":case "INPUT":setAttributesFromSrcElement.call(me,
p_oElement,oAttributes);break}},"*",oSrcElement)}else switch(sSrcElementNodeName){case "BUTTON":case "A":case "INPUT":setAttributesFromSrcElement.call(this,oSrcElement,oAttributes);break}}YAHOO.widget.Button=function(p_oElement,p_oAttributes){if(!Overlay&&YAHOO.widget.Overlay)Overlay=YAHOO.widget.Overlay;if(!Menu&&YAHOO.widget.Menu)Menu=YAHOO.widget.Menu;var fnSuperClass=YAHOO.widget.Button.superclass.constructor,oConfig,oElement;if(arguments.length==1&&!Lang.isString(p_oElement)&&!p_oElement.nodeName){if(!p_oElement.id)p_oElement.id=
Dom.generateId();fnSuperClass.call(this,this.createButtonElement(p_oElement.type),p_oElement)}else{oConfig={element:null,attributes:p_oAttributes||{}};if(Lang.isString(p_oElement)){oElement=Dom.get(p_oElement);if(oElement){if(!oConfig.attributes.id)oConfig.attributes.id=p_oElement;oConfig.attributes.srcelement=oElement;initConfig.call(this,oConfig);if(!oConfig.element)oConfig.element=this.createButtonElement(oConfig.attributes.type);fnSuperClass.call(this,oConfig.element,oConfig.attributes)}}else if(p_oElement.nodeName){if(!oConfig.attributes.id)if(p_oElement.id)oConfig.attributes.id=
p_oElement.id;else oConfig.attributes.id=Dom.generateId();oConfig.attributes.srcelement=p_oElement;initConfig.call(this,oConfig);if(!oConfig.element)oConfig.element=this.createButtonElement(oConfig.attributes.type);fnSuperClass.call(this,oConfig.element,oConfig.attributes)}}};YAHOO.extend(YAHOO.widget.Button,YAHOO.util.Element,{_button:null,_menu:null,_hiddenFields:null,_onclickAttributeValue:null,_activationKeyPressed:false,_activationButtonPressed:false,_hasKeyEventHandlers:false,_hasMouseEventHandlers:false,
_nOptionRegionX:0,CLASS_NAME_PREFIX:"yui-",NODE_NAME:"SPAN",CHECK_ACTIVATION_KEYS:[32],ACTIVATION_KEYS:[13,32],OPTION_AREA_WIDTH:20,CSS_CLASS_NAME:"button",_setType:function(p_sType){if(p_sType=="split")this.on("option",this._onOption)},_setLabel:function(p_sLabel){this._button.innerHTML=p_sLabel;var sClass,nGeckoVersion=UA.gecko;if(nGeckoVersion&&nGeckoVersion<1.9&&Dom.inDocument(this.get("element"))){sClass=this.CLASS_NAME_PREFIX+this.CSS_CLASS_NAME;this.removeClass(sClass);Lang.later(0,this,this.addClass,
sClass)}},_setTabIndex:function(p_nTabIndex){this._button.tabIndex=p_nTabIndex},_setTitle:function(p_sTitle){if(this.get("type")!="link")this._button.title=p_sTitle},_setDisabled:function(p_bDisabled){if(this.get("type")!="link")if(p_bDisabled){if(this._menu)this._menu.hide();if(this.hasFocus())this.blur();this._button.setAttribute("disabled","disabled");this.addStateCSSClasses("disabled");this.removeStateCSSClasses("hover");this.removeStateCSSClasses("active");this.removeStateCSSClasses("focus")}else{this._button.removeAttribute("disabled");
this.removeStateCSSClasses("disabled")}},_setHref:function(p_sHref){if(this.get("type")=="link")this._button.href=p_sHref},_setTarget:function(p_sTarget){if(this.get("type")=="link")this._button.setAttribute("target",p_sTarget)},_setChecked:function(p_bChecked){var sType=this.get("type");if(sType=="checkbox"||sType=="radio")if(p_bChecked)this.addStateCSSClasses("checked");else this.removeStateCSSClasses("checked")},_setMenu:function(p_oMenu){var bLazyLoad=this.get("lazyloadmenu"),oButtonElement=this.get("element"),
sMenuCSSClassName,bInstance=false,oMenu,oMenuElement,oSrcElement;function onAppendTo(){oMenu.render(oButtonElement.parentNode);this.removeListener("appendTo",onAppendTo)}function setMenuContainer(){oMenu.cfg.queueProperty("container",oButtonElement.parentNode);this.removeListener("appendTo",setMenuContainer)}function initMenu(){var oContainer;if(oMenu){Dom.addClass(oMenu.element,this.get("menuclassname"));Dom.addClass(oMenu.element,this.CLASS_NAME_PREFIX+this.get("type")+"-button-menu");oMenu.showEvent.subscribe(this._onMenuShow,
null,this);oMenu.hideEvent.subscribe(this._onMenuHide,null,this);oMenu.renderEvent.subscribe(this._onMenuRender,null,this);if(Menu&&oMenu instanceof Menu){if(bLazyLoad){oContainer=this.get("container");if(oContainer)oMenu.cfg.queueProperty("container",oContainer);else this.on("appendTo",setMenuContainer)}oMenu.cfg.queueProperty("clicktohide",false);oMenu.keyDownEvent.subscribe(this._onMenuKeyDown,this,true);oMenu.subscribe("click",this._onMenuClick,this,true);this.on("selectedMenuItemChange",this._onSelectedMenuItemChange);
oSrcElement=oMenu.srcElement;if(oSrcElement&&oSrcElement.nodeName.toUpperCase()=="SELECT"){oSrcElement.style.display="none";oSrcElement.parentNode.removeChild(oSrcElement)}}else if(Overlay&&oMenu instanceof Overlay){if(!m_oOverlayManager)m_oOverlayManager=new YAHOO.widget.OverlayManager;m_oOverlayManager.register(oMenu)}this._menu=oMenu;if(!bInstance&&!bLazyLoad)if(Dom.inDocument(oButtonElement))oMenu.render(oButtonElement.parentNode);else this.on("appendTo",onAppendTo)}}if(Overlay){if(Menu)sMenuCSSClassName=
Menu.prototype.CSS_CLASS_NAME;if(p_oMenu&&Menu&&p_oMenu instanceof Menu){oMenu=p_oMenu;bInstance=true;initMenu.call(this)}else if(Overlay&&p_oMenu&&p_oMenu instanceof Overlay){oMenu=p_oMenu;bInstance=true;oMenu.cfg.queueProperty("visible",false);initMenu.call(this)}else if(Menu&&Lang.isArray(p_oMenu)){oMenu=new Menu(Dom.generateId(),{lazyload:bLazyLoad,itemdata:p_oMenu});this._menu=oMenu;this.on("appendTo",initMenu)}else if(Lang.isString(p_oMenu)){oMenuElement=Dom.get(p_oMenu);if(oMenuElement)if(Menu&&
Dom.hasClass(oMenuElement,sMenuCSSClassName)||oMenuElement.nodeName.toUpperCase()=="SELECT"){oMenu=new Menu(p_oMenu,{lazyload:bLazyLoad});initMenu.call(this)}else if(Overlay){oMenu=new Overlay(p_oMenu,{visible:false});initMenu.call(this)}}else if(p_oMenu&&p_oMenu.nodeName)if(Menu&&Dom.hasClass(p_oMenu,sMenuCSSClassName)||p_oMenu.nodeName.toUpperCase()=="SELECT"){oMenu=new Menu(p_oMenu,{lazyload:bLazyLoad});initMenu.call(this)}else if(Overlay){if(!p_oMenu.id)Dom.generateId(p_oMenu);oMenu=new Overlay(p_oMenu,
{visible:false});initMenu.call(this)}}},_setOnClick:function(p_oObject){if(this._onclickAttributeValue&&this._onclickAttributeValue!=p_oObject){this.removeListener("click",this._onclickAttributeValue.fn);this._onclickAttributeValue=null}if(!this._onclickAttributeValue&&Lang.isObject(p_oObject)&&Lang.isFunction(p_oObject.fn)){this.on("click",p_oObject.fn,p_oObject.obj,p_oObject.scope);this._onclickAttributeValue=p_oObject}},_isActivationKey:function(p_nKeyCode){var sType=this.get("type"),aKeyCodes=
sType=="checkbox"||sType=="radio"?this.CHECK_ACTIVATION_KEYS:this.ACTIVATION_KEYS,nKeyCodes=aKeyCodes.length,bReturnVal=false,i;if(nKeyCodes>0){i=nKeyCodes-1;do if(p_nKeyCode==aKeyCodes[i]){bReturnVal=true;break}while(i--)}return bReturnVal},_isSplitButtonOptionKey:function(p_oEvent){var bShowMenu=Event.getCharCode(p_oEvent)==40;var onKeyPress=function(p_oEvent){Event.preventDefault(p_oEvent);this.removeListener("keypress",onKeyPress)};if(bShowMenu){if(UA.opera)this.on("keypress",onKeyPress);Event.preventDefault(p_oEvent)}return bShowMenu},
_addListenersToForm:function(){var oForm=this.getForm(),onFormKeyPress=YAHOO.widget.Button.onFormKeyPress,bHasKeyPressListener,oSrcElement,aListeners,nListeners,i;if(oForm){Event.on(oForm,"reset",this._onFormReset,null,this);Event.on(oForm,"submit",this._onFormSubmit,null,this);oSrcElement=this.get("srcelement");if(this.get("type")=="submit"||oSrcElement&&oSrcElement.type=="submit"){aListeners=Event.getListeners(oForm,"keypress");bHasKeyPressListener=false;if(aListeners){nListeners=aListeners.length;
if(nListeners>0){i=nListeners-1;do if(aListeners[i].fn==onFormKeyPress){bHasKeyPressListener=true;break}while(i--)}}if(!bHasKeyPressListener)Event.on(oForm,"keypress",onFormKeyPress)}}},_showMenu:function(p_oEvent){if(YAHOO.widget.MenuManager)YAHOO.widget.MenuManager.hideVisible();if(m_oOverlayManager)m_oOverlayManager.hideAll();var oMenu=this._menu,aMenuAlignment=this.get("menualignment"),bFocusMenu=this.get("focusmenu"),fnFocusMethod;if(this._renderedMenu){oMenu.cfg.setProperty("context",[this.get("element"),
aMenuAlignment[0],aMenuAlignment[1]]);oMenu.cfg.setProperty("preventcontextoverlap",true);oMenu.cfg.setProperty("constraintoviewport",true)}else{oMenu.cfg.queueProperty("context",[this.get("element"),aMenuAlignment[0],aMenuAlignment[1]]);oMenu.cfg.queueProperty("preventcontextoverlap",true);oMenu.cfg.queueProperty("constraintoviewport",true)}this.focus();if(Menu&&oMenu&&oMenu instanceof Menu){fnFocusMethod=oMenu.focus;oMenu.focus=function(){};if(this._renderedMenu){oMenu.cfg.setProperty("minscrollheight",
this.get("menuminscrollheight"));oMenu.cfg.setProperty("maxheight",this.get("menumaxheight"))}else{oMenu.cfg.queueProperty("minscrollheight",this.get("menuminscrollheight"));oMenu.cfg.queueProperty("maxheight",this.get("menumaxheight"))}oMenu.show();oMenu.focus=fnFocusMethod;oMenu.align();if(p_oEvent.type=="mousedown")Event.stopPropagation(p_oEvent);if(bFocusMenu)oMenu.focus()}else if(Overlay&&oMenu&&oMenu instanceof Overlay){if(!this._renderedMenu)oMenu.render(this.get("element").parentNode);oMenu.show();
oMenu.align()}},_hideMenu:function(){var oMenu=this._menu;if(oMenu)oMenu.hide()},_onMouseOver:function(p_oEvent){var sType=this.get("type"),oElement,nOptionRegionX;if(sType==="split"){oElement=this.get("element");nOptionRegionX=Dom.getX(oElement)+(oElement.offsetWidth-this.OPTION_AREA_WIDTH);this._nOptionRegionX=nOptionRegionX}if(!this._hasMouseEventHandlers){if(sType==="split")this.on("mousemove",this._onMouseMove);this.on("mouseout",this._onMouseOut);this._hasMouseEventHandlers=true}this.addStateCSSClasses("hover");
if(sType==="split"&&Event.getPageX(p_oEvent)>nOptionRegionX)this.addStateCSSClasses("hoveroption");if(this._activationButtonPressed)this.addStateCSSClasses("active");if(this._bOptionPressed)this.addStateCSSClasses("activeoption");if(this._activationButtonPressed||this._bOptionPressed)Event.removeListener(document,"mouseup",this._onDocumentMouseUp)},_onMouseMove:function(p_oEvent){var nOptionRegionX=this._nOptionRegionX;if(nOptionRegionX)if(Event.getPageX(p_oEvent)>nOptionRegionX)this.addStateCSSClasses("hoveroption");
else this.removeStateCSSClasses("hoveroption")},_onMouseOut:function(p_oEvent){var sType=this.get("type");this.removeStateCSSClasses("hover");if(sType!="menu")this.removeStateCSSClasses("active");if(this._activationButtonPressed||this._bOptionPressed)Event.on(document,"mouseup",this._onDocumentMouseUp,null,this);if(sType==="split"&&Event.getPageX(p_oEvent)>this._nOptionRegionX)this.removeStateCSSClasses("hoveroption")},_onDocumentMouseUp:function(p_oEvent){this._activationButtonPressed=false;this._bOptionPressed=
false;var sType=this.get("type"),oTarget,oMenuElement;if(sType=="menu"||sType=="split"){oTarget=Event.getTarget(p_oEvent);oMenuElement=this._menu.element;if(oTarget!=oMenuElement&&!Dom.isAncestor(oMenuElement,oTarget)){this.removeStateCSSClasses(sType=="menu"?"active":"activeoption");this._hideMenu()}}Event.removeListener(document,"mouseup",this._onDocumentMouseUp)},_onMouseDown:function(p_oEvent){var sType,bReturnVal=true;function onMouseUp(){this._hideMenu();this.removeListener("mouseup",onMouseUp)}
if((p_oEvent.which||p_oEvent.button)==1){if(!this.hasFocus())this.focus();sType=this.get("type");if(sType=="split")if(Event.getPageX(p_oEvent)>this._nOptionRegionX){this.fireEvent("option",p_oEvent);bReturnVal=false}else{this.addStateCSSClasses("active");this._activationButtonPressed=true}else if(sType=="menu")if(this.isActive()){this._hideMenu();this._activationButtonPressed=false}else{this._showMenu(p_oEvent);this._activationButtonPressed=true}else{this.addStateCSSClasses("active");this._activationButtonPressed=
true}if(sType=="split"||sType=="menu")this._hideMenuTimer=Lang.later(250,this,this.on,["mouseup",onMouseUp])}return bReturnVal},_onMouseUp:function(p_oEvent){var sType=this.get("type"),oHideMenuTimer=this._hideMenuTimer,bReturnVal=true;if(oHideMenuTimer)oHideMenuTimer.cancel();if(sType=="checkbox"||sType=="radio")this.set("checked",!this.get("checked"));this._activationButtonPressed=false;if(sType!="menu")this.removeStateCSSClasses("active");if(sType=="split"&&Event.getPageX(p_oEvent)>this._nOptionRegionX)bReturnVal=
false;return bReturnVal},_onFocus:function(p_oEvent){var oElement;this.addStateCSSClasses("focus");if(this._activationKeyPressed)this.addStateCSSClasses("active");m_oFocusedButton=this;if(!this._hasKeyEventHandlers){oElement=this._button;Event.on(oElement,"blur",this._onBlur,null,this);Event.on(oElement,"keydown",this._onKeyDown,null,this);Event.on(oElement,"keyup",this._onKeyUp,null,this);this._hasKeyEventHandlers=true}this.fireEvent("focus",p_oEvent)},_onBlur:function(p_oEvent){this.removeStateCSSClasses("focus");
if(this.get("type")!="menu")this.removeStateCSSClasses("active");if(this._activationKeyPressed)Event.on(document,"keyup",this._onDocumentKeyUp,null,this);m_oFocusedButton=null;this.fireEvent("blur",p_oEvent)},_onDocumentKeyUp:function(p_oEvent){if(this._isActivationKey(Event.getCharCode(p_oEvent))){this._activationKeyPressed=false;Event.removeListener(document,"keyup",this._onDocumentKeyUp)}},_onKeyDown:function(p_oEvent){var oMenu=this._menu;if(this.get("type")=="split"&&this._isSplitButtonOptionKey(p_oEvent))this.fireEvent("option",
p_oEvent);else if(this._isActivationKey(Event.getCharCode(p_oEvent)))if(this.get("type")=="menu")this._showMenu(p_oEvent);else{this._activationKeyPressed=true;this.addStateCSSClasses("active")}if(oMenu&&oMenu.cfg.getProperty("visible")&&Event.getCharCode(p_oEvent)==27){oMenu.hide();this.focus()}},_onKeyUp:function(p_oEvent){var sType;if(this._isActivationKey(Event.getCharCode(p_oEvent))){sType=this.get("type");if(sType=="checkbox"||sType=="radio")this.set("checked",!this.get("checked"));this._activationKeyPressed=
false;if(this.get("type")!="menu")this.removeStateCSSClasses("active")}},_onClick:function(p_oEvent){var sType=this.get("type"),oForm,oSrcElement,bReturnVal;switch(sType){case "submit":if(p_oEvent.returnValue!==false)this.submitForm();break;case "reset":oForm=this.getForm();if(oForm)oForm.reset();break;case "split":if(this._nOptionRegionX>0&&Event.getPageX(p_oEvent)>this._nOptionRegionX)bReturnVal=false;else{this._hideMenu();oSrcElement=this.get("srcelement");if(oSrcElement&&oSrcElement.type=="submit"&&
p_oEvent.returnValue!==false)this.submitForm()}break}return bReturnVal},_onDblClick:function(p_oEvent){var bReturnVal=true;if(this.get("type")=="split"&&Event.getPageX(p_oEvent)>this._nOptionRegionX)bReturnVal=false;return bReturnVal},_onAppendTo:function(p_oEvent){Lang.later(0,this,this._addListenersToForm)},_onFormReset:function(p_oEvent){var sType=this.get("type"),oMenu=this._menu;if(sType=="checkbox"||sType=="radio")this.resetValue("checked");if(Menu&&oMenu&&oMenu instanceof Menu)this.resetValue("selectedMenuItem")},
_onFormSubmit:function(p_oEvent){this.createHiddenFields()},_onDocumentMouseDown:function(p_oEvent){var oTarget=Event.getTarget(p_oEvent),oButtonElement=this.get("element"),oMenuElement=this._menu.element;if(oTarget!=oButtonElement&&!Dom.isAncestor(oButtonElement,oTarget)&&oTarget!=oMenuElement&&!Dom.isAncestor(oMenuElement,oTarget)){this._hideMenu();if(UA.ie&&oTarget.focus)oTarget.setActive();Event.removeListener(document,"mousedown",this._onDocumentMouseDown)}},_onOption:function(p_oEvent){if(this.hasClass(this.CLASS_NAME_PREFIX+
"split-button-activeoption")){this._hideMenu();this._bOptionPressed=false}else{this._showMenu(p_oEvent);this._bOptionPressed=true}},_onMenuShow:function(p_sType){Event.on(document,"mousedown",this._onDocumentMouseDown,null,this);var sState=this.get("type")=="split"?"activeoption":"active";this.addStateCSSClasses(sState)},_onMenuHide:function(p_sType){var sState=this.get("type")=="split"?"activeoption":"active";this.removeStateCSSClasses(sState);if(this.get("type")=="split")this._bOptionPressed=false},
_onMenuKeyDown:function(p_sType,p_aArgs){var oEvent=p_aArgs[0];if(Event.getCharCode(oEvent)==27){this.focus();if(this.get("type")=="split")this._bOptionPressed=false}},_onMenuRender:function(p_sType){var oButtonElement=this.get("element"),oButtonParent=oButtonElement.parentNode,oMenu=this._menu,oMenuElement=oMenu.element,oSrcElement=oMenu.srcElement,oItem;if(oButtonParent!=oMenuElement.parentNode)oButtonParent.appendChild(oMenuElement);this._renderedMenu=true;if(oSrcElement&&oSrcElement.nodeName.toLowerCase()===
"select"&&oSrcElement.value){oItem=oMenu.getItem(oSrcElement.selectedIndex);this.set("selectedMenuItem",oItem,true);this._onSelectedMenuItemChange({newValue:oItem})}},_onMenuClick:function(p_sType,p_aArgs){var oItem=p_aArgs[1],oSrcElement;if(oItem){this.set("selectedMenuItem",oItem);oSrcElement=this.get("srcelement");if(oSrcElement&&oSrcElement.type=="submit")this.submitForm();this._hideMenu()}},_onSelectedMenuItemChange:function(event){var oSelected=event.prevValue,oItem=event.newValue,sPrefix=this.CLASS_NAME_PREFIX;
if(oSelected)Dom.removeClass(oSelected.element,sPrefix+"button-selectedmenuitem");if(oItem)Dom.addClass(oItem.element,sPrefix+"button-selectedmenuitem")},_onLabelClick:function(event){this.focus();var sType=this.get("type");if(sType=="radio"||sType=="checkbox")this.set("checked",!this.get("checked"))},createButtonElement:function(p_sType){var sNodeName=this.NODE_NAME,oElement=document.createElement(sNodeName);oElement.innerHTML="<"+sNodeName+' class="first-child">'+(p_sType=="link"?"<a></a>":'<button type="button"></button>')+
"</"+sNodeName+">";return oElement},addStateCSSClasses:function(p_sState){var sType=this.get("type"),sPrefix=this.CLASS_NAME_PREFIX;if(Lang.isString(p_sState)){if(p_sState!="activeoption"&&p_sState!="hoveroption")this.addClass(sPrefix+this.CSS_CLASS_NAME+("-"+p_sState));this.addClass(sPrefix+sType+("-button-"+p_sState))}},removeStateCSSClasses:function(p_sState){var sType=this.get("type"),sPrefix=this.CLASS_NAME_PREFIX;if(Lang.isString(p_sState)){this.removeClass(sPrefix+this.CSS_CLASS_NAME+("-"+
p_sState));this.removeClass(sPrefix+sType+("-button-"+p_sState))}},createHiddenFields:function(){this.removeHiddenFields();var oForm=this.getForm(),oButtonField,sType,bCheckable,oMenu,oMenuItem,sButtonName,oValue,oMenuField,oReturnVal,sMenuFieldName,oMenuSrcElement,bMenuSrcElementIsSelect=false;if(oForm&&!this.get("disabled")){sType=this.get("type");bCheckable=sType=="checkbox"||sType=="radio";if(bCheckable&&this.get("checked")||m_oSubmitTrigger==this){oButtonField=createInputElement(bCheckable?sType:
"hidden",this.get("name"),this.get("value"),this.get("checked"));if(oButtonField){if(bCheckable)oButtonField.style.display="none";oForm.appendChild(oButtonField)}}oMenu=this._menu;if(Menu&&oMenu&&oMenu instanceof Menu){oMenuItem=this.get("selectedMenuItem");oMenuSrcElement=oMenu.srcElement;bMenuSrcElementIsSelect=oMenuSrcElement&&oMenuSrcElement.nodeName.toUpperCase()=="SELECT";if(oMenuItem){oValue=oMenuItem.value===null||oMenuItem.value===""?oMenuItem.cfg.getProperty("text"):oMenuItem.value;sButtonName=
this.get("name");if(bMenuSrcElementIsSelect)sMenuFieldName=oMenuSrcElement.name;else if(sButtonName)sMenuFieldName=sButtonName+"_options";if(oValue&&sMenuFieldName){oMenuField=createInputElement("hidden",sMenuFieldName,oValue);oForm.appendChild(oMenuField)}}else if(bMenuSrcElementIsSelect)oMenuField=oForm.appendChild(oMenuSrcElement)}if(oButtonField&&oMenuField)this._hiddenFields=[oButtonField,oMenuField];else if(!oButtonField&&oMenuField)this._hiddenFields=oMenuField;else if(oButtonField&&!oMenuField)this._hiddenFields=
oButtonField;oReturnVal=this._hiddenFields}return oReturnVal},removeHiddenFields:function(){var oField=this._hiddenFields,nFields,i;function removeChild(p_oElement){if(Dom.inDocument(p_oElement))p_oElement.parentNode.removeChild(p_oElement)}if(oField){if(Lang.isArray(oField)){nFields=oField.length;if(nFields>0){i=nFields-1;do removeChild(oField[i]);while(i--)}}else removeChild(oField);this._hiddenFields=null}},submitForm:function(){var oForm=this.getForm(),oSrcElement=this.get("srcelement"),bSubmitForm=
false,oEvent;if(oForm){if(this.get("type")=="submit"||oSrcElement&&oSrcElement.type=="submit")m_oSubmitTrigger=this;if(UA.ie)bSubmitForm=oForm.fireEvent("onsubmit");else{oEvent=document.createEvent("HTMLEvents");oEvent.initEvent("submit",true,true);bSubmitForm=oForm.dispatchEvent(oEvent)}if((UA.ie||UA.webkit)&&bSubmitForm)oForm.submit()}return bSubmitForm},init:function(p_oElement,p_oAttributes){var sNodeName=p_oAttributes.type=="link"?"a":"button",oSrcElement=p_oAttributes.srcelement,oButton=p_oElement.getElementsByTagName(sNodeName)[0],
oInput;if(!oButton){oInput=p_oElement.getElementsByTagName("input")[0];if(oInput){oButton=document.createElement("button");oButton.setAttribute("type","button");oInput.parentNode.replaceChild(oButton,oInput)}}this._button=oButton;YAHOO.widget.Button.superclass.init.call(this,p_oElement,p_oAttributes);var sId=this.get("id"),sButtonId=sId+"-button";oButton.id=sButtonId;var aLabels,oLabel;var hasLabel=function(element){return element.htmlFor===sId};var setLabel=function(){oLabel.setAttribute(UA.ie?"htmlFor":
"for",sButtonId)};if(oSrcElement&&this.get("type")!="link"){aLabels=Dom.getElementsBy(hasLabel,"label");if(Lang.isArray(aLabels)&&aLabels.length>0)oLabel=aLabels[0]}m_oButtons[sId]=this;var sPrefix=this.CLASS_NAME_PREFIX;this.addClass(sPrefix+this.CSS_CLASS_NAME);this.addClass(sPrefix+this.get("type")+"-button");Event.on(this._button,"focus",this._onFocus,null,this);this.on("mouseover",this._onMouseOver);this.on("mousedown",this._onMouseDown);this.on("mouseup",this._onMouseUp);this.on("click",this._onClick);
var fnOnClick=this.get("onclick");this.set("onclick",null);this.set("onclick",fnOnClick);this.on("dblclick",this._onDblClick);var oParentNode;if(oLabel)if(this.get("replaceLabel")){this.set("label",oLabel.innerHTML);oParentNode=oLabel.parentNode;oParentNode.removeChild(oLabel)}else{this.on("appendTo",setLabel);Event.on(oLabel,"click",this._onLabelClick,null,this);this._label=oLabel}this.on("appendTo",this._onAppendTo);var oContainer=this.get("container"),oElement=this.get("element"),bElInDoc=Dom.inDocument(oElement);
if(oContainer){if(oSrcElement&&oSrcElement!=oElement){oParentNode=oSrcElement.parentNode;if(oParentNode)oParentNode.removeChild(oSrcElement)}if(Lang.isString(oContainer))Event.onContentReady(oContainer,this.appendTo,oContainer,this);else this.on("init",function(){Lang.later(0,this,this.appendTo,oContainer)})}else if(!bElInDoc&&oSrcElement&&oSrcElement!=oElement){oParentNode=oSrcElement.parentNode;if(oParentNode){this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:oParentNode});oParentNode.replaceChild(oElement,
oSrcElement);this.fireEvent("appendTo",{type:"appendTo",target:oParentNode})}}else if(this.get("type")!="link"&&bElInDoc&&oSrcElement&&oSrcElement==oElement)this._addListenersToForm();this.fireEvent("init",{type:"init",target:this})},initAttributes:function(p_oAttributes){var oAttributes=p_oAttributes||{};YAHOO.widget.Button.superclass.initAttributes.call(this,oAttributes);this.setAttributeConfig("type",{value:oAttributes.type||"push",validator:Lang.isString,writeOnce:true,method:this._setType});
this.setAttributeConfig("label",{value:oAttributes.label,validator:Lang.isString,method:this._setLabel});this.setAttributeConfig("value",{value:oAttributes.value});this.setAttributeConfig("name",{value:oAttributes.name,validator:Lang.isString});this.setAttributeConfig("tabindex",{value:oAttributes.tabindex,validator:Lang.isNumber,method:this._setTabIndex});this.configureAttribute("title",{value:oAttributes.title,validator:Lang.isString,method:this._setTitle});this.setAttributeConfig("disabled",{value:oAttributes.disabled||
false,validator:Lang.isBoolean,method:this._setDisabled});this.setAttributeConfig("href",{value:oAttributes.href,validator:Lang.isString,method:this._setHref});this.setAttributeConfig("target",{value:oAttributes.target,validator:Lang.isString,method:this._setTarget});this.setAttributeConfig("checked",{value:oAttributes.checked||false,validator:Lang.isBoolean,method:this._setChecked});this.setAttributeConfig("container",{value:oAttributes.container,writeOnce:true});this.setAttributeConfig("srcelement",
{value:oAttributes.srcelement,writeOnce:true});this.setAttributeConfig("menu",{value:null,method:this._setMenu,writeOnce:true});this.setAttributeConfig("lazyloadmenu",{value:oAttributes.lazyloadmenu===false?false:true,validator:Lang.isBoolean,writeOnce:true});this.setAttributeConfig("menuclassname",{value:oAttributes.menuclassname||this.CLASS_NAME_PREFIX+"button-menu",validator:Lang.isString,method:this._setMenuClassName,writeOnce:true});this.setAttributeConfig("menuminscrollheight",{value:oAttributes.menuminscrollheight||
90,validator:Lang.isNumber});this.setAttributeConfig("menumaxheight",{value:oAttributes.menumaxheight||0,validator:Lang.isNumber});this.setAttributeConfig("menualignment",{value:oAttributes.menualignment||["tl","bl"],validator:Lang.isArray});this.setAttributeConfig("selectedMenuItem",{value:null});this.setAttributeConfig("onclick",{value:oAttributes.onclick,method:this._setOnClick});this.setAttributeConfig("focusmenu",{value:oAttributes.focusmenu===false?false:true,validator:Lang.isBoolean});this.setAttributeConfig("replaceLabel",
{value:false,validator:Lang.isBoolean,writeOnce:true})},focus:function(){if(!this.get("disabled"))this._button.focus()},blur:function(){if(!this.get("disabled"))this._button.blur()},hasFocus:function(){return m_oFocusedButton==this},isActive:function(){return this.hasClass(this.CLASS_NAME_PREFIX+this.CSS_CLASS_NAME+"-active")},getMenu:function(){return this._menu},getForm:function(){var oButton=this._button,oForm;if(oButton)oForm=oButton.form;return oForm},getHiddenFields:function(){return this._hiddenFields},
destroy:function(){var oElement=this.get("element"),oMenu=this._menu,oLabel=this._label,oParentNode,aButtons;if(oMenu){if(m_oOverlayManager&&m_oOverlayManager.find(oMenu))m_oOverlayManager.remove(oMenu);oMenu.destroy()}Event.purgeElement(oElement);Event.purgeElement(this._button);Event.removeListener(document,"mouseup",this._onDocumentMouseUp);Event.removeListener(document,"keyup",this._onDocumentKeyUp);Event.removeListener(document,"mousedown",this._onDocumentMouseDown);if(oLabel){Event.removeListener(oLabel,
"click",this._onLabelClick);oParentNode=oLabel.parentNode;oParentNode.removeChild(oLabel)}var oForm=this.getForm();if(oForm){Event.removeListener(oForm,"reset",this._onFormReset);Event.removeListener(oForm,"submit",this._onFormSubmit)}this.unsubscribeAll();oParentNode=oElement.parentNode;if(oParentNode)oParentNode.removeChild(oElement);delete m_oButtons[this.get("id")];var sClass=this.CLASS_NAME_PREFIX+this.CSS_CLASS_NAME;aButtons=Dom.getElementsByClassName(sClass,this.NODE_NAME,oForm);if(Lang.isArray(aButtons)&&
aButtons.length===0)Event.removeListener(oForm,"keypress",YAHOO.widget.Button.onFormKeyPress)},fireEvent:function(p_sType,p_aArgs){var sType=arguments[0];if(this.DOM_EVENTS[sType]&&this.get("disabled"))return false;return YAHOO.widget.Button.superclass.fireEvent.apply(this,arguments)},toString:function(){return"Button "+this.get("id")}});YAHOO.widget.Button.onFormKeyPress=function(p_oEvent){var oTarget=Event.getTarget(p_oEvent),nCharCode=Event.getCharCode(p_oEvent),sNodeName=oTarget.nodeName&&oTarget.nodeName.toUpperCase(),
sType=oTarget.type,bFormContainsYUIButtons=false,oButton,oYUISubmitButton,oPrecedingSubmitButton,oEvent;function isSubmitButton(p_oElement){var sId,oSrcElement;switch(p_oElement.nodeName.toUpperCase()){case "INPUT":case "BUTTON":if(p_oElement.type=="submit"&&!p_oElement.disabled)if(!bFormContainsYUIButtons&&!oPrecedingSubmitButton)oPrecedingSubmitButton=p_oElement;break;default:sId=p_oElement.id;if(sId){oButton=m_oButtons[sId];if(oButton){bFormContainsYUIButtons=true;if(!oButton.get("disabled")){oSrcElement=
oButton.get("srcelement");if(!oYUISubmitButton&&(oButton.get("type")=="submit"||oSrcElement&&oSrcElement.type=="submit"))oYUISubmitButton=oButton}}}break}}if(nCharCode==13&&(sNodeName=="INPUT"&&(sType=="text"||sType=="password"||sType=="checkbox"||sType=="radio"||sType=="file")||sNodeName=="SELECT")){Dom.getElementsBy(isSubmitButton,"*",this);if(oPrecedingSubmitButton)oPrecedingSubmitButton.focus();else if(!oPrecedingSubmitButton&&oYUISubmitButton){Event.preventDefault(p_oEvent);if(UA.ie)oYUISubmitButton.get("element").fireEvent("onclick");
else{oEvent=document.createEvent("HTMLEvents");oEvent.initEvent("click",true,true);if(UA.gecko<1.9)oYUISubmitButton.fireEvent("click",oEvent);else oYUISubmitButton.get("element").dispatchEvent(oEvent)}}}};YAHOO.widget.Button.addHiddenFieldsToForm=function(p_oForm){var proto=YAHOO.widget.Button.prototype,aButtons=Dom.getElementsByClassName(proto.CLASS_NAME_PREFIX+proto.CSS_CLASS_NAME,"*",p_oForm),nButtons=aButtons.length,oButton,sId,i;if(nButtons>0)for(i=0;i<nButtons;i++){sId=aButtons[i].id;if(sId){oButton=
m_oButtons[sId];if(oButton)oButton.createHiddenFields()}}};YAHOO.widget.Button.getButton=function(p_sId){return m_oButtons[p_sId]}})();
(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang,Button=YAHOO.widget.Button,m_oButtons={};YAHOO.widget.ButtonGroup=function(p_oElement,p_oAttributes){var fnSuperClass=YAHOO.widget.ButtonGroup.superclass.constructor,sNodeName,oElement,sId;if(arguments.length==1&&!Lang.isString(p_oElement)&&!p_oElement.nodeName){if(!p_oElement.id){sId=Dom.generateId();p_oElement.id=sId}fnSuperClass.call(this,this._createGroupElement(),p_oElement)}else if(Lang.isString(p_oElement)){oElement=
Dom.get(p_oElement);if(oElement)if(oElement.nodeName.toUpperCase()==this.NODE_NAME)fnSuperClass.call(this,oElement,p_oAttributes)}else{sNodeName=p_oElement.nodeName.toUpperCase();if(sNodeName&&sNodeName==this.NODE_NAME){if(!p_oElement.id)p_oElement.id=Dom.generateId();fnSuperClass.call(this,p_oElement,p_oAttributes)}}};YAHOO.extend(YAHOO.widget.ButtonGroup,YAHOO.util.Element,{_buttons:null,NODE_NAME:"DIV",CLASS_NAME_PREFIX:"yui-",CSS_CLASS_NAME:"buttongroup",_createGroupElement:function(){var oElement=
document.createElement(this.NODE_NAME);return oElement},_setDisabled:function(p_bDisabled){var nButtons=this.getCount(),i;if(nButtons>0){i=nButtons-1;do this._buttons[i].set("disabled",p_bDisabled);while(i--)}},_onKeyDown:function(p_oEvent){var oTarget=Event.getTarget(p_oEvent),nCharCode=Event.getCharCode(p_oEvent),sId=oTarget.parentNode.parentNode.id,oButton=m_oButtons[sId],nIndex=-1;if(nCharCode==37||nCharCode==38)nIndex=oButton.index===0?this._buttons.length-1:oButton.index-1;else if(nCharCode==
39||nCharCode==40)nIndex=oButton.index===this._buttons.length-1?0:oButton.index+1;if(nIndex>-1){this.check(nIndex);this.getButton(nIndex).focus()}},_onAppendTo:function(p_oEvent){var aButtons=this._buttons,nButtons=aButtons.length,i;for(i=0;i<nButtons;i++)aButtons[i].appendTo(this.get("element"))},_onButtonCheckedChange:function(p_oEvent,p_oButton){var bChecked=p_oEvent.newValue,oCheckedButton=this.get("checkedButton");if(bChecked&&oCheckedButton!=p_oButton){if(oCheckedButton)oCheckedButton.set("checked",
false,true);this.set("checkedButton",p_oButton);this.set("value",p_oButton.get("value"))}else if(oCheckedButton&&!oCheckedButton.set("checked"))oCheckedButton.set("checked",true,true)},init:function(p_oElement,p_oAttributes){this._buttons=[];YAHOO.widget.ButtonGroup.superclass.init.call(this,p_oElement,p_oAttributes);this.addClass(this.CLASS_NAME_PREFIX+this.CSS_CLASS_NAME);var sClass=YAHOO.widget.Button.prototype.CLASS_NAME_PREFIX+"radio-button",aButtons=this.getElementsByClassName(sClass);if(aButtons.length>
0)this.addButtons(aButtons);function isRadioButton(p_oElement){return p_oElement.type=="radio"}aButtons=Dom.getElementsBy(isRadioButton,"input",this.get("element"));if(aButtons.length>0)this.addButtons(aButtons);this.on("keydown",this._onKeyDown);this.on("appendTo",this._onAppendTo);var oContainer=this.get("container");if(oContainer)if(Lang.isString(oContainer))Event.onContentReady(oContainer,function(){this.appendTo(oContainer)},null,this);else this.appendTo(oContainer)},initAttributes:function(p_oAttributes){var oAttributes=
p_oAttributes||{};YAHOO.widget.ButtonGroup.superclass.initAttributes.call(this,oAttributes);this.setAttributeConfig("name",{value:oAttributes.name,validator:Lang.isString});this.setAttributeConfig("disabled",{value:oAttributes.disabled||false,validator:Lang.isBoolean,method:this._setDisabled});this.setAttributeConfig("value",{value:oAttributes.value});this.setAttributeConfig("container",{value:oAttributes.container,writeOnce:true});this.setAttributeConfig("checkedButton",{value:null})},addButton:function(p_oButton){var oButton,
oButtonElement,oGroupElement,nIndex,sButtonName,sGroupName;if(p_oButton instanceof Button&&p_oButton.get("type")=="radio")oButton=p_oButton;else if(!Lang.isString(p_oButton)&&!p_oButton.nodeName){p_oButton.type="radio";oButton=new Button(p_oButton)}else oButton=new Button(p_oButton,{type:"radio"});if(oButton){nIndex=this._buttons.length;sButtonName=oButton.get("name");sGroupName=this.get("name");oButton.index=nIndex;this._buttons[nIndex]=oButton;m_oButtons[oButton.get("id")]=oButton;if(sButtonName!=
sGroupName)oButton.set("name",sGroupName);if(this.get("disabled"))oButton.set("disabled",true);if(oButton.get("checked"))this.set("checkedButton",oButton);oButtonElement=oButton.get("element");oGroupElement=this.get("element");if(oButtonElement.parentNode!=oGroupElement)oGroupElement.appendChild(oButtonElement);oButton.on("checkedChange",this._onButtonCheckedChange,oButton,this)}return oButton},addButtons:function(p_aButtons){var nButtons,oButton,aButtons,i;if(Lang.isArray(p_aButtons)){nButtons=p_aButtons.length;
aButtons=[];if(nButtons>0)for(i=0;i<nButtons;i++){oButton=this.addButton(p_aButtons[i]);if(oButton)aButtons[aButtons.length]=oButton}}return aButtons},removeButton:function(p_nIndex){var oButton=this.getButton(p_nIndex),nButtons,i;if(oButton){this._buttons.splice(p_nIndex,1);delete m_oButtons[oButton.get("id")];oButton.removeListener("checkedChange",this._onButtonCheckedChange);oButton.destroy();nButtons=this._buttons.length;if(nButtons>0){i=this._buttons.length-1;do this._buttons[i].index=i;while(i--)}}},
getButton:function(p_nIndex){return this._buttons[p_nIndex]},getButtons:function(){return this._buttons},getCount:function(){return this._buttons.length},focus:function(p_nIndex){var oButton,nButtons,i;if(Lang.isNumber(p_nIndex)){oButton=this._buttons[p_nIndex];if(oButton)oButton.focus()}else{nButtons=this.getCount();for(i=0;i<nButtons;i++){oButton=this._buttons[i];if(!oButton.get("disabled")){oButton.focus();break}}}},check:function(p_nIndex){var oButton=this.getButton(p_nIndex);if(oButton)oButton.set("checked",
true)},destroy:function(){var nButtons=this._buttons.length,oElement=this.get("element"),oParentNode=oElement.parentNode,i;if(nButtons>0){i=this._buttons.length-1;do this._buttons[i].destroy();while(i--)}Event.purgeElement(oElement);oParentNode.removeChild(oElement)},toString:function(){return"ButtonGroup "+this.get("id")}})})();YAHOO.register("button",YAHOO.widget.Button,{version:"2.8.0r4",build:"2449"});
(function(window,undefined){var document=window.document,navigator=window.navigator,location=window.location;var jQuery=function(){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=
/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/ig,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,
push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(selector==="body"&&!context&&document.body){this.context=document;this[0]=document.body;this.selector=selector;this.length=1;return this}if(typeof selector===
"string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3)match=[null,selector,null];else match=quickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){context=context instanceof jQuery?context[0]:context;doc=context?context.ownerDocument||context:document;ret=rsingleTag.exec(selector);if(ret)if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true)}else selector=[doc.createElement(ret[1])];
else{ret=jQuery.buildFragment([match[1]],[doc]);selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes}return jQuery.merge(this,selector)}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);else return this.constructor(context).find(selector)}else if(jQuery.isFunction(selector))return rootjQuery.ready(selector);
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return num==null?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems))push.apply(ret,elems);else jQuery.merge(ret,elems);ret.prevObject=
this;ret.context=this.context;if(name==="find")ret.selector=this.selector+(this.selector?" ":"")+selector;else if(name)ret.selector=this.selector+"."+name+"("+selector+")";return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){jQuery.bindReady();readyList.add(fn);return this},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,
arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=
arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target))target={};if(length===i){target=this;--i}for(;i<length;i++)if((options=arguments[i])!=null)for(name in options){src=target[name];copy=options[name];if(target===copy)continue;if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==
undefined)target[name]=copy}return target};jQuery.extend({noConflict:function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery},isReady:false,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(true)},ready:function(wait){if(wait===true&&!--jQuery.readyWait||wait!==true&&!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0)return;readyList.fireWith(document,
[jQuery]);if(jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")}},bindReady:function(){if(readyList)return;readyList=jQuery.Callbacks("once memory");if(document.readyState==="complete")return setTimeout(jQuery.ready,1);if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",
jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null}catch(e){}if(document.documentElement.doScroll&&toplevel)doScrollCheck()}},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||
jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj))return false;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj)return false;return true},error:function(msg){throw new Error(msg);},parseJSON:function(data){if(typeof data!=="string"||!data)return null;data=jQuery.trim(data);
if(window.JSON&&window.JSON.parse)return window.JSON.parse(data);if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return(new Function("return "+data))();jQuery.error("Invalid JSON: "+data)},parseXML:function(data){if(typeof data!=="string"||!data)return null;var xml,tmp;try{if(window.DOMParser){tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=
undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data))(window.execScript||function(data){window["eval"].call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,
callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args)if(isObj)for(name in object){if(callback.apply(object[name],args)===false)break}else for(;i<length;){if(callback.apply(object[i++],args)===false)break}else if(isObj)for(name in object){if(callback.call(object[name],name,object[name])===false)break}else for(;i<length;)if(callback.call(object[i],i,object[i++])===false)break;return object},trim:trim?function(text){return text==null?"":trim.call(text)}:
function(text){return text==null?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);if(array.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(array))push.call(ret,array);else jQuery.merge(ret,array)}return ret},inArray:function(elem,array,i){var len;if(array){if(indexOf)return indexOf.call(array,elem,i);len=array.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<
len;i++)if(i in array&&array[i]===elem)return i}return-1},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number")for(var l=second.length;j<l;j++)first[i++]=second[j];else while(second[j]!==undefined)first[i++]=second[j++];first.length=i;return first},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal)ret.push(elems[i])}return ret},map:function(elems,callback,arg){var value,
key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&(length>0&&elems[0]&&elems[length-1]||length===0||jQuery.isArray(elems));if(isArray)for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null)ret[ret.length]=value}else for(key in elems){value=callback(elems[key],key,arg);if(value!=null)ret[ret.length]=value}return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if(typeof context==="string"){var tmp=fn[context];context=
fn;fn=tmp}if(!jQuery.isFunction(fn))return undefined;var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key)jQuery.access(elems,fn,i,key[i],1,emptyGet,value);chainable=1}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);
if(bulk)if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value)}}else{fn.call(elems,value);fn=null}if(fn)for(;i<length;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);chainable=1}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||
[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub))context=jQuerySub(context);return jQuery.fn.init.call(this,selector,
context,rootjQuerySub)};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}});jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version}if(jQuery.browser.webkit)jQuery.browser.safari=true;if(rnotwhite.test(" ")){trimLeft=
/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/}rootjQuery=jQuery(document);if(document.addEventListener)DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready()};else if(document.attachEvent)DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready()}};function doScrollCheck(){if(jQuery.isReady)return;try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,
1);return}jQuery.ready()}return jQuery}();var flagsCache={};function createFlags(flags){var object=flagsCache[flags]={},i,length;flags=flags.split(/\s+/);for(i=0,length=flags.length;i<length;i++)object[flags[i]]=true;return object}jQuery.Callbacks=function(flags){flags=flags?flagsCache[flags]||createFlags(flags):{};var list=[],stack=[],memory,fired,firing,firingStart,firingLength,firingIndex,add=function(args){var i,length,elem,type,actual;for(i=0,length=args.length;i<length;i++){elem=args[i];type=
jQuery.type(elem);if(type==="array")add(elem);else if(type==="function")if(!flags.unique||!self.has(elem))list.push(elem)}},fire=function(context,args){args=args||[];memory=!flags.memory||[context,args];fired=true;firing=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;for(;list&&firingIndex<firingLength;firingIndex++)if(list[firingIndex].apply(context,args)===false&&flags.stopOnFalse){memory=true;break}firing=false;if(list)if(!flags.once){if(stack&&stack.length){memory=stack.shift();
self.fireWith(memory[0],memory[1])}}else if(memory===true)self.disable();else list=[]},self={add:function(){if(list){var length=list.length;add(arguments);if(firing)firingLength=list.length;else if(memory&&memory!==true){firingStart=length;fire(memory[0],memory[1])}}return this},remove:function(){if(list){var args=arguments,argIndex=0,argLength=args.length;for(;argIndex<argLength;argIndex++)for(var i=0;i<list.length;i++)if(args[argIndex]===list[i]){if(firing)if(i<=firingLength){firingLength--;if(i<=
firingIndex)firingIndex--}list.splice(i--,1);if(flags.unique)break}}return this},has:function(fn){if(list){var i=0,length=list.length;for(;i<length;i++)if(fn===list[i])return true}return false},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory||memory===true)self.disable();return this},locked:function(){return!stack},fireWith:function(context,args){if(stack)if(firing){if(!flags.once)stack.push([context,
args])}else if(!(flags.once&&memory))fire(context,args);return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};var sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,
state:function(){return state},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks);return this},always:function(){deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments);return this},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},
function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn))deferred[handler](function(){returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify);else newDefer[action+"With"](this===deferred?newDefer:this,[returned])});else deferred[handler](newDefer[action])})}).promise()},promise:function(obj){if(obj==null)obj=promise;else for(var key in promise)obj[key]=promise[key];return obj}},
deferred=promise.promise({}),key;for(key in lists){deferred[key]=lists[key].fire;deferred[key+"With"]=lists[key].fireWith}deferred.done(function(){state="resolved"},failList.disable,progressList.lock).fail(function(){state="rejected"},doneList.disable,progressList.lock);if(func)func.call(deferred,deferred);return deferred},when:function(firstParam){var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,pCount=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?
firstParam:jQuery.Deferred(),promise=deferred.promise();function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;if(!--count)deferred.resolveWith(deferred,args)}}function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;deferred.notifyWith(promise,pValues)}}if(length>1){for(;i<length;i++)if(args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise))args[i].promise().then(resolveFunc(i),
deferred.reject,progressFunc(i));else--count;if(!count)deferred.resolveWith(deferred,args)}else if(deferred!==firstParam)deferred.resolveWith(deferred,length?[firstParam]:[]);return promise}});jQuery.support=function(){var support,all,a,select,opt,input,fragment,tds,events,eventName,i,isSupported,div=document.createElement("div"),documentElement=document.documentElement;div.setAttribute("className","t");div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a)return{};select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.55/.test(a.style.opacity),
cssFloat:!!a.style.cssFloat,checkOn:input.value==="on",optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,pixelMargin:true};jQuery.boxModel=support.boxModel=document.compatMode==="CSS1Compat";
input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=false}if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false});div.cloneNode(true).fireEvent("onclick")}input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked",
"checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent)for(i in{submit:1,change:1,focusin:1}){eventName="on"+i;isSupported=eventName in div;if(!isSupported){div.setAttribute(eventName,"return;");isSupported=typeof div[eventName]===
"function"}support[i+"Bubbles"]=isSupported}fragment.removeChild(div);fragment=select=opt=div=input=null;jQuery(function(){var container,outer,inner,table,td,offsetSupport,marginDiv,conMarginTop,style,html,positionTopLeftWidthHeight,paddingMarginBorderVisibility,paddingMarginBorder,body=document.getElementsByTagName("body")[0];if(!body)return;conMarginTop=1;paddingMarginBorder="padding:0;margin:0;border:";positionTopLeftWidthHeight="position:absolute;top:0;left:0;width:1px;height:1px;";paddingMarginBorderVisibility=
paddingMarginBorder+"0;visibility:hidden;";style="style='"+positionTopLeftWidthHeight+paddingMarginBorder+"5px solid #000;";html="<div "+style+"display:block;'><div style='"+paddingMarginBorder+"0;display:block;overflow:hidden;'></div></div>"+"<table "+style+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";container=document.createElement("div");container.style.cssText=paddingMarginBorderVisibility+"width:0;height:0;position:static;top:0;margin-top:"+conMarginTop+"px";body.insertBefore(container,
body.firstChild);div=document.createElement("div");container.appendChild(div);div.innerHTML="<table><tr><td style='"+paddingMarginBorder+"0;display:none'></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");isSupported=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&tds[0].offsetHeight===0;if(window.getComputedStyle){div.innerHTML="";marginDiv=document.createElement("div");marginDiv.style.width="0";marginDiv.style.marginRight=
"0";div.style.width="2px";div.appendChild(marginDiv);support.reliableMarginRight=(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)===0}if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.width=div.style.padding="1px";div.style.border=0;div.style.overflow="hidden";div.style.display="inline";div.style.zoom=1;support.inlineBlockNeedsLayout=div.offsetWidth===3;div.style.display="block";div.style.overflow="visible";div.innerHTML="<div style='width:5px;'></div>";
support.shrinkWrapBlocks=div.offsetWidth!==3}div.style.cssText=positionTopLeftWidthHeight+paddingMarginBorderVisibility;div.innerHTML=html;outer=div.firstChild;inner=outer.firstChild;td=outer.nextSibling.firstChild.firstChild;offsetSupport={doesNotAddBorder:inner.offsetTop!==5,doesAddBorderForTableAndCells:td.offsetTop===5};inner.style.position="fixed";inner.style.top="20px";offsetSupport.fixedPosition=inner.offsetTop===20||inner.offsetTop===15;inner.style.position=inner.style.top="";outer.style.overflow=
"hidden";outer.style.position="relative";offsetSupport.subtractsBorderForOverflowNotVisible=inner.offsetTop===-5;offsetSupport.doesNotIncludeMarginInBodyOffset=body.offsetTop!==conMarginTop;if(window.getComputedStyle){div.style.marginTop="1%";support.pixelMargin=(window.getComputedStyle(div,null)||{marginTop:0}).marginTop!=="1%"}if(typeof container.style.zoom!=="undefined")container.style.zoom=1;body.removeChild(container);marginDiv=div=container=null;jQuery.extend(support,offsetSupport)});return support}();
var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem))return;var privateCache,thisCache,ret,internalKey=jQuery.expando,
getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents=name==="events";if((!id||!cache[id]||!isEvents&&!pvt&&!cache[id].data)&&getByName&&data===undefined)return;if(!id)if(isNode)elem[internalKey]=id=++jQuery.uuid;else id=internalKey;if(!cache[id]){cache[id]={};if(!isNode)cache[id].toJSON=jQuery.noop}if(typeof name==="object"||typeof name==="function")if(pvt)cache[id]=jQuery.extend(cache[id],name);else cache[id].data=
jQuery.extend(cache[id].data,name);privateCache=thisCache=cache[id];if(!pvt){if(!thisCache.data)thisCache.data={};thisCache=thisCache.data}if(data!==undefined)thisCache[jQuery.camelCase(name)]=data;if(isEvents&&!thisCache[name])return privateCache.events;if(getByName){ret=thisCache[name];if(ret==null)ret=thisCache[jQuery.camelCase(name)]}else ret=thisCache;return ret},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem))return;var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,
cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(!cache[id])return;if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name))if(name in thisCache)name=[name];else{name=jQuery.camelCase(name);if(name in thisCache)name=[name];else name=name.split(" ")}for(i=0,l=name.length;i<l;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id]))return}if(jQuery.support.deleteExpando||
!cache.setInterval)delete cache[id];else cache[id]=null;if(isNode)if(jQuery.support.deleteExpando)delete elem[internalKey];else if(elem.removeAttribute)elem.removeAttribute(internalKey);else elem[internalKey]=null},_data:function(elem,name,data){return jQuery.data(elem,name,data,true)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match)return!(match===true||elem.getAttribute("classid")!==match)}return true}});jQuery.fn.extend({data:function(key,
value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object")return this.each(function(){jQuery.data(this,key)});parts=key.split(".",2);parts[1]=
parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data)}return data===undefined&&parts[1]?this.data(parts[0]):data}parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts)})},null,value,arguments.length>
1,null,false)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:jQuery.isNumeric(data)?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}
function isEmptyDataObject(obj){for(var name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name]))continue;if(name!=="toJSON")return false}return true}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);if(defer&&(src==="queue"||!jQuery._data(elem,queueDataKey))&&(src==="mark"||!jQuery._data(elem,markDataKey)))setTimeout(function(){if(!jQuery._data(elem,queueDataKey)&&!jQuery._data(elem,
markDataKey)){jQuery.removeData(elem,deferDataKey,true);defer.fire()}},0)}jQuery.extend({_mark:function(elem,type){if(elem){type=(type||"fx")+"mark";jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1)}},_unmark:function(force,elem,type){if(force!==true){type=elem;elem=force;force=false}if(elem){type=type||"fx";var key=type+"mark",count=force?0:(jQuery._data(elem,key)||1)-1;if(count)jQuery._data(elem,key,count);else{jQuery.removeData(elem,key,true);handleQueueMarkDefer(elem,type,"mark")}}},queue:function(elem,
type,data){var q;if(elem){type=(type||"fx")+"queue";q=jQuery._data(elem,type);if(data)if(!q||jQuery.isArray(data))q=jQuery._data(elem,type,jQuery.makeArray(data));else q.push(data);return q||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};if(fn==="inprogress")fn=queue.shift();if(fn){if(type==="fx")queue.unshift("inprogress");jQuery._data(elem,type+".run",hooks);fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)}if(!queue.length){jQuery.removeData(elem,
type+"queue "+type+".run",true);handleQueueMarkDefer(elem,type,"queue")}}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter)return jQuery.queue(this[0],type);return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress")jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,
type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){if(typeof type!=="string"){object=type;type=undefined}type=type||"fx";var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",
tmp;function resolve(){if(!--count)defer.resolveWith(elements,[elements])}while(i--)if(tmp=jQuery.data(elements[i],deferDataKey,undefined,true)||(jQuery.data(elements[i],queueDataKey,undefined,true)||jQuery.data(elements[i],markDataKey,undefined,true))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),true)){count++;tmp.add(resolve)}resolve();return defer.promise(object)}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,
rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,nodeHook,boolHook,fixSpecified;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,
name,value,arguments.length>1)},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&typeof value==="string"){classNames=value.split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1)if(!elem.className&&
classNames.length===1)elem.className=value;else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++)if(!~setClass.indexOf(" "+classNames[c]+" "))setClass+=classNames[c]+" ";elem.className=jQuery.trim(setClass)}}}return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&typeof value==="string"||value===undefined){classNames=(value||
"").split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className)if(value){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=classNames.length;c<cl;c++)className=className.replace(" "+classNames[c]+" "," ");elem.className=jQuery.trim(className)}else elem.className=""}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,
i,this.className,stateVal),stateVal)});return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while(className=classNames[i++]){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else if(type==="undefined"||type==="boolean"){if(this.className)jQuery._data(this,"__className__",this.className);this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}})},
hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1)return true;return false},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;ret=elem.value;return typeof ret==="string"?
ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val;if(this.nodeType!==1)return;if(isFunction)val=value.call(this,i,self.val());else val=value;if(val==null)val="";else if(typeof val==="number")val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return value==null?"":value+""});hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,
val,"value")===undefined)this.value=val})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0)return null;i=one?index:0;max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===
null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one)return value;values.push(value)}}if(one&&!values.length&&options.length)return jQuery(options[index]).val();return values},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});if(!values.length)elem.selectedIndex=-1;return values}}},attrFn:{val:true,css:true,html:true,
text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2)return;if(pass&&name in jQuery.attrFn)return jQuery(elem)[name](value);if(typeof elem.getAttribute==="undefined")return jQuery.prop(elem,name,value);notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined)if(value===
null){jQuery.removeAttr(elem,name);return}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else{elem.setAttribute(name,""+value);return value}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null)return ret;else{ret=elem.getAttribute(name);return ret===null?undefined:ret}},removeAttr:function(elem,value){var propName,attrNames,name,l,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.toLowerCase().split(rspace);l=attrNames.length;
for(;i<l;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool)jQuery.attr(elem,name,"");elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem)elem[propName]=false}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",
value);if(val)elem.value=val;return value}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.get(elem,name);return name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.set(elem,value,name);elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2)return;notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined)if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem[name]=value;else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==
null)return ret;else return elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex;boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&
attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false)jQuery.removeAttr(elem,name);else{propName=jQuery.propFix[name]||name;if(propName in elem)elem[propName]=true;elem.setAttribute(name,name.toLowerCase())}return name}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.nodeValue!=="":ret.specified)?
ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return ret.nodeValue=value+""}};jQuery.attrHooks.tabindex.set=nodeHook.set;jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,
value,name){if(value==="")value="false";nodeHook.set(elem,value,name)}}}if(!jQuery.support.hrefNormalized)jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})});if(!jQuery.support.style)jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}};if(!jQuery.support.optSelected)jQuery.propHooks.selected=
jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode)parent.parentNode.selectedIndex}return null}});if(!jQuery.support.enctype)jQuery.propFix.enctype="encoding";if(!jQuery.support.checkOn)jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],
{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/(?:^|\s)hover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);if(quick){quick[1]=(quick[1]||"").toLowerCase();
quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)")}return quick},quickIs=function(elem,m){var attrs=elem.attributes||{};return(!m[1]||elem.nodeName.toLowerCase()===m[1])&&(!m[2]||(attrs.id||{}).value===m[2])&&(!m[3]||m[3].test((attrs["class"]||{}).value))},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,
handleObj,handleObjIn,quick,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem)))return;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid)handler.guid=jQuery.guid++;events=elemData.events;if(!events)elemData.events=events={};eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?
jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,
quick:selector&&quickParse(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false)if(elem.addEventListener)elem.addEventListener(type,eventHandle,false);else if(elem.attachEvent)elem.attachEvent("on"+type,eventHandle)}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid)handleObj.handler.guid=handler.guid}if(selector)handlers.splice(handlers.delegateCount++,
0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=true}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var elemData=jQuery.hasData(elem)&&jQuery._data(elem),t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj;if(!elemData||!(events=elemData.events))return;types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events)jQuery.event.remove(elem,
type+types[t],handler,selector,true);continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&
(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector)eventType.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}}if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces)===false)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){handle=elemData.handle;if(handle)handle.elem=null;jQuery.removeData(elem,
["events","handle"],true)}},customEvent:{"getData":true,"setData":true,"changeData":true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8))return;var type=event.type||event,namespaces=[],cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}if((!elem||
jQuery.event.customEvent[type])&&!jQuery.event.global[type])return;event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache)if(cache[i].events&&cache[i].events[type])jQuery.event.trigger(event,
data,cache[i].handle.elem,true);return}event.result=undefined;if(!event.target)event.target=elem;data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false)return;eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;old=null;for(;cur;cur=cur.parentNode){eventPath.push([cur,
bubbleType]);old=cur}if(old&&old===elem.ownerDocument)eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle)handle.apply(cur,data);handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===false)event.preventDefault()}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented())if((!special._default||
special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem))if(ontype&&elem[type]&&(type!=="focus"&&type!=="blur"||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old)elem[ontype]=null;jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old)elem[ontype]=old}return event.result},dispatch:function(event){event=jQuery.event.fix(event||window.event);var handlers=(jQuery._data(this,"events")||
{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[],i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,related;args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false)return;if(delegateCount&&!(event.button&&event.type==="click")){jqcur=jQuery(this);jqcur.context=this.ownerDocument||this;for(cur=event.target;cur!=
this;cur=cur.parentNode||this)if(cur.disabled!==true){selMatch={};matches=[];jqcur[0]=cur;for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined)selMatch[sel]=handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel);if(selMatch[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,matches:matches})}}if(handlers.length>delegateCount)handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});for(i=0;i<handlerQueue.length&&
!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=
ret;if(ret===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch)special.postDispatch.call(this,event);return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null)event.which=original.charCode!=null?original.charCode:
original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||
body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement)event.relatedTarget=fromElement===event.target?original.toElement:fromElement;if(!event.which&&button!==undefined)event.which=button&1?1:button&2?3:button&4?2:0;return event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?
this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop]}if(!event.target)event.target=originalEvent.srcElement||document;if(event.target.nodeType===3)event.target=event.target.parentNode;if(event.metaKey===undefined)event.metaKey=event.ctrlKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{ready:{setup:jQuery.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},
beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this))this.onbeforeunload=eventHandle},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle)this.onbeforeunload=null}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}};jQuery.event.handle=
jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,false)}:function(elem,type,handle){if(elem.detachEvent)elem.detachEvent("on"+type,handle)};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&
src.getPreventDefault()?returnTrue:returnFalse}else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};function returnFalse(){return false}function returnTrue(){return true}jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=
this.originalEvent;if(!e)return;if(e.stopPropagation)e.stopPropagation();e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var target=this,related=event.relatedTarget,
handleObj=event.handleObj,selector=handleObj.selector,ret;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!jQuery.support.submitBubbles)jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?
elem.form:undefined;if(form&&!form._submit_attached){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true});form._submit_attached=true}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger)jQuery.event.simulate("submit",this.parentNode,event,true)}},teardown:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.remove(this,"._submit")}};if(!jQuery.support.changeBubbles)jQuery.event.special.change=
{setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked")this._just_changed=true});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false;jQuery.event.simulate("change",this,event,true)}})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&
!elem._change_attached){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger)jQuery.event.simulate("change",this.parentNode,event,true)});elem._change_attached=true}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox")return event.handleObj.handler.apply(this,arguments)},teardown:function(){jQuery.event.remove(this,"._change");return rformElems.test(this.nodeName)}};
if(!jQuery.support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){if(attaches++===0)document.addEventListener(orig,handler,true)},teardown:function(){if(--attaches===0)document.removeEventListener(orig,handler,true)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!==
"string"){data=data||selector;selector=undefined}for(type in types)this.on(type,selector,data,types[type],one);return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null)if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}if(fn===false)fn=returnFalse;else if(!fn)return this;if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,
types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(var type in types)this.off(type,selector,types[type]);return this}if(selector===false||
typeof selector==="function"){fn=selector;selector=undefined}if(fn===false)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this},die:function(types,fn){jQuery(this.context).off(types,this.selector||"**",fn);return this},delegate:function(selector,
types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length==1?this.off(selector,"**"):this.off(types,selector,fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0])return jQuery.event.trigger(type,data,this[0],true)},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+
fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),
function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null}return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)};if(jQuery.attrFn)jQuery.attrFn[name]=true;if(rkeyEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.keyHooks;if(rmouseEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.mouseHooks});(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9)return[];if(!selector||typeof selector!=="string")return results;var m,set,checkSet,extra,ret,
cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}}while(m);if(parts.length>1&&origPOS.exec(selector))if(parts.length===2&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context,seed);else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector])selector+=parts.shift();set=posProcess(selector,
set,seed)}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):
ret.set;if(parts.length>0)checkSet=makeArray(set);else prune=false;while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur])cur="";else pop=parts.pop();if(pop==null)pop=context;Expr.relative[cur](checkSet,pop,contextXML)}}else checkSet=parts=[]}if(!checkSet)checkSet=set;if(!checkSet)Sizzle.error(cur||selector);if(toString.call(checkSet)==="[object Array]")if(!prune)results.push.apply(results,checkSet);else if(context&&context.nodeType===1)for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===
true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i])))results.push(set[i])}else for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1)results.push(set[i])}else makeArray(checkSet,results);if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate)for(var i=1;i<results.length;i++)if(results[i]===results[i-1])results.splice(i--,
1)}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0};Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr)return[];for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if(match=Expr.leftMatch[type].exec(expr)){left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rBackslash,"");set=Expr.find[type](match,
context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set)set=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName("*"):[];return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(type in Expr.filter)if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){filter=Expr.filter[type];
left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\")continue;if(curLoop===result)result=[];if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match)anyFound=found=true;else if(match===true)continue}if(match)for(i=0;(item=curLoop[i])!=null;i++)if(item){found=filter(item,match,i,curLoop);pass=not^found;if(inplace&&found!=null)if(pass)anyFound=true;else curLoop[i]=false;else if(pass){result.push(item);anyFound=true}}if(found!==
undefined){if(!inplace)curLoop=result;expr=expr.replace(Expr.match[type],"");if(!anyFound)return[];break}}if(expr===old)if(anyFound==null)Sizzle.error(expr);else break;old=expr}return curLoop};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType)if(nodeType===1||nodeType===9||nodeType===11)if(typeof elem.textContent==="string")return elem.textContent;else if(typeof elem.innerText===
"string")return elem.innerText.replace(rReturn,"");else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else{if(nodeType===3||nodeType===4)return elem.nodeValue}else for(i=0;node=elem[i];i++)if(node.nodeType!==8)ret+=getText(node);return ret};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,
part){var isPartStr=typeof part==="string",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag)part=part.toLowerCase();for(var i=0,l=checkSet.length,elem;i<l;i++)if(elem=checkSet[i]){while((elem=elem.previousSibling)&&elem.nodeType!==1);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}if(isPartStrNotTag)Sizzle.filter(part,checkSet,true)},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;
if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(;i<l;i++){elem=checkSet[i];if(elem)checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}if(isPartStr)Sizzle.filter(part,checkSet,true)}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=
part;checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?
[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++)if(results[i].getAttribute("name")===match[1])ret.push(results[i]);return ret.length===0?null:ret}},TAG:function(match,context){if(typeof context.getElementsByTagName!=="undefined")return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(rBackslash,
"")+" ";if(isXML)return match;for(var i=0,elem;(elem=curLoop[i])!=null;i++)if(elem)if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace)result.push(elem)}else if(inplace)curLoop[i]=false;return false},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if(match[1]==="nth"){if(!match[2])Sizzle.error(match[0]);match[2]=match[2].replace(/^\+|\s*/g,
"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0;match[3]=test[3]-0}else if(match[2])Sizzle.error(match[0]);match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name])match[1]=Expr.attrMap[name];match[4]=(match[4]||match[5]||"").replace(rBackslash,"");if(match[2]==="~=")match[4]=
" "+match[4]+" ";return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not")if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3]))match[3]=Sizzle(match[3],null,null,curLoop);else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace)result.push.apply(result,ret);return false}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return true;return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===
false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===true},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),
type=elem.type;return elem.nodeName.toLowerCase()==="input"&&"text"===type&&(attr===type||attr===null)},radio:function(elem){return elem.nodeName.toLowerCase()==="input"&&"radio"===elem.type},checkbox:function(elem){return elem.nodeName.toLowerCase()==="input"&&"checkbox"===elem.type},file:function(elem){return elem.nodeName.toLowerCase()==="input"&&"file"===elem.type},password:function(elem){return elem.nodeName.toLowerCase()==="input"&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();
return(name==="input"||name==="button")&&"submit"===elem.type},image:function(elem){return elem.nodeName.toLowerCase()==="input"&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&"button"===elem.type||name==="button"},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)},focus:function(elem){return elem===
elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];
if(filter)return filter(elem,i,match,array);else if(name==="contains")return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++)if(not[j]===elem)return false;return true}else Sizzle.error(name)},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case "only":case "first":while(node=node.previousSibling)if(node.nodeType===1)return false;if(type===
"first")return true;node=elem;case "last":while(node=node.nextSibling)if(node.nodeType===1)return false;return true;case "nth":first=match[2];last=match[3];if(first===1&&last===0)return true;doneName=match[0];parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.nodeIndex)){count=0;for(node=parent.firstChild;node;node=node.nextSibling)if(node.nodeType===1)node.nodeIndex=++count;parent[expando]=doneName}diff=elem.nodeIndex-last;if(first===0)return diff===0;else return diff%first===0&&
diff/first>=0}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return match==="*"&&elem.nodeType===1||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),
value=result+"",type=match[2],check=match[4];return result==null?type==="!=":!type&&Sizzle.attr?result!=null:type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=
Expr.setFilters[name];if(filter)return filter(elem,i,match,array)}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape))}Expr.match.globalPOS=origPOS;var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,
array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]")Array.prototype.push.apply(ret,array);else if(typeof array.length==="number")for(var l=array.length;i<l;i++)ret.push(array[i]);else for(;array[i];i++)ret.push(array[i]);return ret}}var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition)sortOrder=function(a,
b){if(a===b){hasDuplicate=true;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1};else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}else if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);else if(!aup)return-1;else if(!bup)return 1;while(cur){ap.unshift(cur);cur=cur.parentNode}cur=
bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};siblingCheck=function(a,b,ret){if(a===b)return ret;var cur=a.nextSibling;while(cur){if(cur===b)return-1;cur=cur.nextSibling}return 1}}(function(){var form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";
root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===
match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0)Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++)if(results[i].nodeType===1)tmp.push(results[i]);results=tmp}return results};div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&
div.firstChild.getAttribute("href")!=="#")Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)};div=null})();if(document.querySelectorAll)(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0)return;Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);
if(match&&(context.nodeType===1||context.nodeType===9))if(match[1])return makeArray(context.getElementsByTagName(query),extra);else if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName)return makeArray(context.getElementsByClassName(match[2]),extra);if(context.nodeType===9){if(query==="body"&&context.body)return makeArray([context.body],extra);else if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3])return makeArray([elem],extra)}else return makeArray([],
extra)}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old)context.setAttribute("id",nid);else nid=nid.replace(/'/g,"\\$&");if(relativeHierarchySelector&&hasParent)context=context.parentNode;try{if(!relativeHierarchySelector||hasParent)return makeArray(context.querySelectorAll("[id='"+
nid+"'] "+query),extra)}catch(pseudoError){}finally{if(!old)oldContext.removeAttribute("id")}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null})();(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=false;try{matches.call(document.documentElement,
"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=true}Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node))try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&node.document.nodeType!==11)return ret}}catch(e){}return Sizzle(expr,null,null,[node]).length>0}}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0)return;div.lastChild.className="e";if(div.getElementsByClassName("e").length===1)return;Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML)return context.getElementsByClassName(match[1])};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=
false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem[expando]=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===
1){if(!isXML){elem[expando]=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}elem=elem[dir]}checkSet[i]=match}}}if(document.documentElement.contains)Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true)};else if(document.documentElement.compareDocumentPosition)Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)};else Sizzle.contains=function(){return false};Sizzle.isXML=
function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context,seed){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while(match=Expr.match.PSEUDO.exec(selector)){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++)Sizzle(selector,root[i],tmpSet,seed);
return Sizzle.filter(later,tmpSet)};Sizzle.attr=jQuery.attr;Sizzle.selectors.attrMap={};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.globalPOS,guaranteedUnique={children:true,contents:true,
next:true,prev:true};jQuery.fn.extend({find:function(selector){var self=this,i,l;if(typeof selector!=="string")return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++)if(jQuery.contains(self[i],this))return true});var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0)for(n=length;n<ret.length;n++)for(r=0;r<length;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}}return ret},has:function(target){var targets=
jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++)if(jQuery.contains(this,targets[i]))return true})},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector)},is:function(selector){return!!selector&&(typeof selector==="string"?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>
0)},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var level=1;while(cur&&cur.ownerDocument&&cur!==context){for(i=0;i<selectors.length;i++)if(jQuery(cur).is(selectors[i]))ret.push({selector:selectors[i],elem:cur,level:level});cur=cur.parentNode;level++}return ret}var pos=POS.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur)if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,
selectors)){ret.push(cur);break}else{cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context||cur.nodeType===11)break}}ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof elem==="string")return jQuery.inArray(this[0],jQuery(elem));return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,
context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}});function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,
"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",
until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name))selector=until;if(selector&&typeof selector==="string")ret=jQuery.filter(selector,
ret);ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name))ret=ret.reverse();return this.pushStack(ret,name,slice.call(arguments).join(","))}});jQuery.extend({filter:function(expr,elems,not){if(not)expr=":not("+expr+")";return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==
9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1)matched.push(cur);cur=cur[dir]}return matched},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir])if(cur.nodeType===1&&++num===result)break;return cur},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling)if(n.nodeType===1&&n!==elem)r.push(n);return r}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier))return jQuery.grep(elements,
function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});else if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);else qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=
0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)while(list.length)safeFrag.createElement(list.pop());return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>",
"</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize)wrapMap._default=[1,"div<div>","</div>"];jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):
this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1)elem=elem.firstChild;return elem}).append(this)}return this},
wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()},
append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1)this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1)this.insertBefore(elem,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this)});else if(arguments.length){var set=jQuery.clean(arguments);set.push.apply(set,this.toArray());return this.pushStack(set,
"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});else if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery.clean(arguments));return set}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++)if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));
jQuery.cleanData([elem])}if(elem.parentNode)elem.parentNode.removeChild(elem)}return this},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1)jQuery.cleanData(elem.getElementsByTagName("*"));while(elem.firstChild)elem.removeChild(elem.firstChild)}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,
dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):null;if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===
1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value}}elem=0}catch(e){}}if(elem)this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))});if(typeof value!=="string")value=jQuery(value).detach();return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();
if(next)jQuery(next).before(value);else jQuery(parent).append(value)})}else return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,
callback,true)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback)});if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length)results={fragment:parent};else results=jQuery.buildFragment(args,this,scripts);fragment=results.fragment;if(fragment.childNodes.length===1)first=fragment=fragment.firstChild;
else first=fragment.firstChild;if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++)callback.call(table?root(this[i],first):this[i],results.cacheable||l>1&&i<lastIndex?jQuery.clone(fragment,true,true):fragment)}if(scripts.length)jQuery.each(scripts,function(i,elem){if(elem.src)jQuery.ajax({type:"GET",global:false,url:elem.src,async:false,dataType:"script"});else jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/"));
if(elem.parentNode)elem.parentNode.removeChild(elem)})}return this}});function root(elem,cur){return jQuery.nodeName(elem,"table")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events)for(i=0,l=events[type].length;i<
l;i++)jQuery.event.add(dest,type,events[type][i])}if(curData.data)curData.data=jQuery.extend({},curData.data)}function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1)return;if(dest.clearAttributes)dest.clearAttributes();if(dest.mergeAttributes)dest.mergeAttributes(src);nodeName=dest.nodeName.toLowerCase();if(nodeName==="object")dest.outerHTML=src.outerHTML;else if(nodeName==="input"&&(src.type==="checkbox"||src.type==="radio")){if(src.checked)dest.defaultChecked=dest.checked=src.checked;
if(dest.value!==src.value)dest.value=src.value}else if(nodeName==="option")dest.selected=src.defaultSelected;else if(nodeName==="input"||nodeName==="textarea")dest.defaultValue=src.defaultValue;else if(nodeName==="script"&&dest.text!==src.text)dest.text=src.text;dest.removeAttribute(jQuery.expando);dest.removeAttribute("_submit_attached");dest.removeAttribute("_change_attached")}jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];if(nodes&&nodes[0])doc=
nodes[0].ownerDocument||nodes[0];if(!doc.createDocumentFragment)doc=document;if(args.length===1&&typeof first==="string"&&first.length<512&&doc===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;cacheresults=jQuery.fragments[first];if(cacheresults&&cacheresults!==1)fragment=cacheresults}if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,
scripts)}if(cacheable)jQuery.fragments[first]=cacheresults?fragment:1;return{fragment:fragment,cacheable:cacheable}};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);
return this}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined")return elem.getElementsByTagName("*");else if(typeof elem.querySelectorAll!=="undefined")return elem.querySelectorAll("*");else return[]}function fixDefaultChecked(elem){if(elem.type==="checkbox"||elem.type==="radio")elem.defaultChecked=
elem.checked}function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();if(nodeName==="input")fixDefaultChecked(elem);else if(nodeName!=="script"&&typeof elem.getElementsByTagName!=="undefined")jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}function shimCloneNode(elem){var div=document.createElement("div");safeFragment.appendChild(div);div.innerHTML=elem.outerHTML;return div.firstChild}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,
destElements,i,clone=jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?elem.cloneNode(true):shimCloneNode(elem);if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i)if(destElements[i])cloneFixAttributes(srcElements[i],destElements[i])}if(dataAndEvents){cloneCopyEvent(elem,
clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i])}}srcElements=destElements=null;return clone},clean:function(elems,context,fragment,scripts){var checkScriptType,script,j,ret=[];context=context||document;if(typeof context.createElement==="undefined")context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number")elem+=
"";if(!elem)continue;if(typeof elem==="string")if(!rhtml.test(elem))elem=context.createTextNode(elem);else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div"),safeChildNodes=safeFragment.childNodes,remove;if(context===document)safeFragment.appendChild(div);else createSafeFragment(context).appendChild(div);div.innerHTML=wrap[1]+elem+wrap[2];while(depth--)div=div.lastChild;
if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j)if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length)tbody[j].parentNode.removeChild(tbody[j])}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem))div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);elem=div.childNodes;if(div){div.parentNode.removeChild(div);
if(safeChildNodes.length>0){remove=safeChildNodes[safeChildNodes.length-1];if(remove&&remove.parentNode)remove.parentNode.removeChild(remove)}}}var len;if(!jQuery.support.appendChecked)if(elem[0]&&typeof(len=elem.length)==="number")for(j=0;j<len;j++)findInputs(elem[j]);else findInputs(elem);if(elem.nodeType)ret.push(elem);else ret=jQuery.merge(ret,elem)}if(fragment){checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type)};for(i=0;ret[i];i++){script=ret[i];if(scripts&&jQuery.nodeName(script,
"script")&&(!script.type||rscriptType.test(script.type)))scripts.push(script.parentNode?script.parentNode.removeChild(script):script);else{if(script.nodeType===1){var jsTags=jQuery.grep(script.getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(script)}}}return ret},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&
jQuery.noData[elem.nodeName.toLowerCase()])continue;id=elem[jQuery.expando];if(id){data=cache[id];if(data&&data.events){for(var type in data.events)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(data.handle)data.handle.elem=null}if(deleteExpando)delete elem[jQuery.expando];else if(elem.removeAttribute)elem.removeAttribute(jQuery.expando);delete cache[id]}}}});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnum=/^[\-+]?(?:\d*\.)?\d+$/i,
rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rrelNum=/^([\-+])=([\-+.\de]+)/,rmargin=/^margin/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssExpand=["Top","Right","Bottom","Left"],curCSS,getComputedStyle,currentStyle;jQuery.fn.css=function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)};jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=
curCSS(elem,"opacity");return ret===""?"1":ret}else return elem.style.opacity}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style)return;var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||
origName;if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=+(ret[1]+1)*+ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||type==="number"&&isNaN(value))return;if(type==="number"&&!jQuery.cssNumber[origName])value+="px";if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value))!==undefined)try{style[name]=value}catch(e){}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined)return ret;return style[name]}},css:function(elem,
name,extra){var ret,hooks;name=jQuery.camelCase(name);hooks=jQuery.cssHooks[name];name=jQuery.cssProps[name]||name;if(name==="cssFloat")name="float";if(hooks&&"get"in hooks&&(ret=hooks.get(elem,true,extra))!==undefined)return ret;else if(curCSS)return curCSS(elem,name)},swap:function(elem,options,callback){var old={},ret,name;for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.call(elem);for(name in options)elem.style[name]=old[name];return ret}});jQuery.curCSS=
jQuery.css;if(document.defaultView&&document.defaultView.getComputedStyle)getComputedStyle=function(elem,name){var ret,defaultView,computedStyle,width,style=elem.style;name=name.replace(rupper,"-$1").toLowerCase();if((defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null))){ret=computedStyle.getPropertyValue(name);if(ret===""&&!jQuery.contains(elem.ownerDocument.documentElement,elem))ret=jQuery.style(elem,name)}if(!jQuery.support.pixelMargin&&computedStyle&&
rmargin.test(name)&&rnumnonpx.test(ret)){width=style.width;style.width=ret;ret=computedStyle.width;style.width=width}return ret};if(document.documentElement.currentStyle)currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&(uncomputed=style[name]))ret=uncomputed;if(rnumnonpx.test(ret)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft)elem.runtimeStyle.left=elem.currentStyle.left;style.left=
name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft)elem.runtimeStyle.left=rsLeft}return ret===""?"auto":ret};curCSS=getComputedStyle||currentStyle;function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,i=name==="width"?1:0,len=4;if(val>0){if(extra!=="border")for(;i<len;i+=2){if(!extra)val-=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0;if(extra==="margin")val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0;else val-=
parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0}return val+"px"}val=curCSS(elem,name);if(val<0||val==null)val=elem.style[name];if(rnumnonpx.test(val))return val;val=parseFloat(val)||0;if(extra)for(;i<len;i+=2){val+=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding")val+=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0;if(extra==="margin")val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0}return val+"px"}jQuery.each(["height","width"],function(i,
name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)if(elem.offsetWidth!==0)return getWidthOrHeight(elem,name,extra);else return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)})},set:function(elem,value){return rnum.test(value)?value+"px":value}}});if(!jQuery.support.opacity)jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?parseFloat(RegExp.$1)/
100+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter)return}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}};jQuery(function(){if(!jQuery.support.reliableMarginRight)jQuery.cssHooks.marginRight=
{get:function(elem,computed){return jQuery.swap(elem,{"display":"inline-block"},function(){if(computed)return curCSS(elem,"margin-right");else return elem.style.marginRight})}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return width===0&&height===0||!jQuery.support.reliableHiddenOffsets&&(elem.style&&elem.style.display||jQuery.css(elem,"display"))==="none"};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}}jQuery.each({margin:"",
padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");
ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}if(jQuery.isFunction(func)){var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);
if(placeBefore)dataType=dataType.substr(1)||"*";list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func)}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters,selection;for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,
originalOptions,jqXHR);if(typeof selection==="string")if(!executeOnly||inspected[selection])selection=undefined;else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)}}if((executeOnly||!selection)&&!inspected["*"])selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);return selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||
{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(true,target,deep)}jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"&&_load)return _load.apply(this,arguments);else if(!this.length)return this;var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";if(params)if(jQuery.isFunction(params)){callback=params;params=undefined}else if(typeof params==="object"){params=
jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST"}var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText;if(jqXHR.isResolved()){jqXHR.done(function(r){responseText=r});self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)}if(callback)self.each(callback,[responseText,status,jqXHR])}});return this},serialize:function(){return jQuery.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,
settings){if(settings)ajaxExtend(target,jQuery.ajaxSettings);else{settings=target;target=jQuery.ajaxSettings}ajaxExtend(target,settings);return target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,
json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=
callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||
name;requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=match[2]}match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},abort:function(statusText){statusText=
statusText||"abort";if(transport)transport.abort(statusText);done(0,statusText);return this}};function done(status,nativeStatusText,responses,headers){if(state===2)return;state=2;if(timeoutTimer)clearTimeout(timeoutTimer);transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&status<300||status===304){if(s.ifModified){if(lastModified=
jqXHR.getResponseHeader("Last-Modified"))jQuery.lastModified[ifModifiedKey]=lastModified;if(etag=jqXHR.getResponseHeader("Etag"))jQuery.etag[ifModifiedKey]=etag}if(status===304){statusText="notmodified";isSuccess=true}else try{success=ajaxConvert(s,response);statusText="success";isSuccess=true}catch(e){statusText="parsererror";error=e}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0)status=0}}jqXHR.status=status;jqXHR.statusText=""+(nativeStatusText||statusText);if(isSuccess)deferred.resolveWith(callbackContext,
[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals)globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active)jQuery.event.trigger("ajaxStop")}}deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=
jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else{tmp=map[jqXHR.status];jqXHR.then(tmp,tmp)}}return this};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=
ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))))}if(s.data&&s.processData&&typeof s.data!=="string")s.data=jQuery.param(s.data,s.traditional);inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2)return false;fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0)jQuery.event.trigger("ajaxStart");if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?
"&":"?")+s.data;delete s.data}ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);if(jQuery.etag[ifModifiedKey])jqXHR.setRequestHeader("If-None-Match",
jQuery.etag[ifModifiedKey])}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){jqXHR.abort();return false}for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport)done(-1,
"No Transport");else{jqXHR.readyState=1;if(fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2)done(-1,e);else throw e;}}return jqXHR},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined)traditional=
jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(var prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")}});function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)});else if(!traditional&&
jQuery.type(obj)==="object")for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}jQuery.extend({active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields)if(type in responses)jqXHR[responseFields[type]]=responses[type];while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined)ct=s.mimeType||
jqXHR.getResponseHeader("content-type")}if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,
response){if(s.dataFilter)response=s.dataFilter(response,s.dataType);var dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;i<length;i++){if(i===1)for(key in s.converters)if(typeof key==="string")converters[key.toLowerCase()]=s.converters[key];prev=current;current=dataTypes[i];if(current==="*")current=prev;else if(prev!=="*"&&prev!==current){conversion=prev+" "+current;conv=converters[conversion]||converters["* "+current];
if(!conv){conv2=undefined;for(conv1 in converters){tmp=conv1.split(" ");if(tmp[0]===prev||tmp[0]==="*"){conv2=converters[tmp[1]+" "+current];if(conv2){conv1=converters[conv1];if(conv1===true)conv=conv2;else if(conv2===true)conv=conv1;break}}}}if(!(conv||conv2))jQuery.error("No conversion from "+conversion.replace(" "," to "));if(conv!==true)response=conv?conv(response):conv2(conv1(response))}}return response}var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+
"_"+jsc++}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData=typeof s.data==="string"&&/^application\/x\-www\-form\-urlencoded/.test(s.contentType);if(s.dataTypes[0]==="jsonp"||s.jsonp!==false&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";if(s.jsonp!==
false){url=url.replace(jsre,replace);if(s.url===url){if(inspectData)data=data.replace(jsre,replace);if(s.data===data)url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback}}s.url=url;s.data=data;window[jsonpCallback]=function(response){responseContainer=[response]};jqXHR.always(function(){window[jsonpCallback]=previous;if(responseContainer&&jQuery.isFunction(previous))window[jsonpCallback](responseContainer[0])});s.converters["script json"]=function(){if(!responseContainer)jQuery.error(jsonpCallback+
" was not called");return responseContainer[0]};s.dataTypes[0]="json";return"script"}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined)s.cache=false;if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,
head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset)script.charset=s.scriptCharset;script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode)head.removeChild(script);script=undefined;if(!isAbort)callback(200,
"success")}};head.insertBefore(script,head.firstChild)},abort:function(){if(script)script.onload(0,1)}}}});var xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:false,xhrId=0,xhrCallbacks;function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||
createActiveXHR()}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax)jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;if(s.username)xhr.open(s.type,s.url,s.async,s.username,s.password);else xhr.open(s.type,s.url,s.async);if(s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];if(s.mimeType&&
xhr.overrideMimeType)xhr.overrideMimeType(s.mimeType);if(!s.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}xhr.send(s.hasContent&&s.data||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort)delete xhrCallbacks[handle]}if(isAbort){if(xhr.readyState!==
4)xhr.abort()}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement)responses.xml=xml;try{responses.text=xhr.responseText}catch(_){}try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&s.isLocal&&!s.crossDomain)status=responses.text?200:404;else if(status===1223)status=204}}}catch(firefoxAccessException){if(!isAbort)complete(-1,firefoxAccessException)}if(responses)complete(status,statusText,responses,responseHeaders)};
if(!s.async||xhr.readyState===4)callback();else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}},abort:function(){if(callback)callback(0,1)}}}});var elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight",
"paddingLeft","paddingRight"],["opacity"]],fxNow;jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||speed===0)return this.animate(genFx("show",3),speed,easing,callback);else{for(var i=0,j=this.length;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(!jQuery._data(elem,"olddisplay")&&display==="none")display=elem.style.display="";if(display===""&&jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument.documentElement,elem))jQuery._data(elem,
"olddisplay",defaultDisplay(elem.nodeName))}}for(i=0;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(display===""||display==="none")elem.style.display=jQuery._data(elem,"olddisplay")||""}}return this}},hide:function(speed,easing,callback){if(speed||speed===0)return this.animate(genFx("hide",3),speed,easing,callback);else{var elem,display,i=0,j=this.length;for(;i<j;i++){elem=this[i];if(elem.style){display=jQuery.css(elem,"display");if(display!=="none"&&!jQuery._data(elem,"olddisplay"))jQuery._data(elem,
"olddisplay",display)}}for(i=0;i<j;i++)if(this[i].style)this[i].style.display="none";return this}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2))this._toggle.apply(this,arguments);else if(fn==null||bool)this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()});else this.animate(genFx("toggle",3),fn,fn2,callback);return this},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",
0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop))return this.each(optall.complete,[false]);prop=jQuery.extend({},prop);function doAnimation(){if(optall.queue===false)jQuery._mark(this);var opt=jQuery.extend({},optall),isElement=this.nodeType===1,hidden=isElement&&jQuery(this).is(":hidden"),name,val,p,e,hooks,replace,parts,start,end,unit,method;opt.animatedProperties=
{};for(p in prop){name=jQuery.camelCase(p);if(p!==name){prop[name]=prop[p];delete prop[p]}if((hooks=jQuery.cssHooks[name])&&"expand"in hooks){replace=hooks.expand(prop[name]);delete prop[name];for(p in replace)if(!(p in prop))prop[p]=replace[p]}}for(name in prop){val=prop[name];if(jQuery.isArray(val)){opt.animatedProperties[name]=val[1];val=prop[name]=val[0]}else opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||"swing";if(val==="hide"&&hidden||val==="show"&&!hidden)return opt.complete.call(this);
if(isElement&&(name==="height"||name==="width")){opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(jQuery.css(this,"display")==="inline"&&jQuery.css(this,"float")==="none")if(!jQuery.support.inlineBlockNeedsLayout||defaultDisplay(this.nodeName)==="inline")this.style.display="inline-block";else this.style.zoom=1}}if(opt.overflow!=null)this.style.overflow="hidden";for(p in prop){e=new jQuery.fx(this,opt,p);val=prop[p];if(rfxtypes.test(val)){method=jQuery._data(this,"toggle"+
p)||(val==="toggle"?hidden?"show":"hide":0);if(method){jQuery._data(this,"toggle"+p,method==="show"?"hide":"show");e[method]()}else e[val]()}else{parts=rfxnum.exec(val);start=e.cur();if(parts){end=parseFloat(parts[2]);unit=parts[3]||(jQuery.cssNumber[p]?"":"px");if(unit!=="px"){jQuery.style(this,p,(end||1)+unit);start=(end||1)/e.cur()*start;jQuery.style(this,p,start+unit)}if(parts[1])end=(parts[1]==="-="?-1:1)*end+start;e.custom(start,end,unit)}else e.custom(start,val,"")}}return true}return optall.queue===
false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false)this.queue(type||"fx",[]);return this.each(function(){var index,hadTimers=false,timers=jQuery.timers,data=jQuery._data(this);if(!gotoEnd)jQuery._unmark(true,this);function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,true);hooks.stop(gotoEnd)}if(type==null)for(index in data){if(data[index]&&
data[index].stop&&index.indexOf(".run")===index.length-4)stopQueue(this,data,index)}else if(data[index=type+".run"]&&data[index].stop)stopQueue(this,data,index);for(index=timers.length;index--;)if(timers[index].elem===this&&(type==null||timers[index].queue===type)){if(gotoEnd)timers[index](true);else timers[index].saveState();hadTimers=true;timers.splice(index,1)}if(!(gotoEnd&&hadTimers))jQuery.dequeue(this,type)})}});function createFxNow(){setTimeout(clearFxNow,0);return fxNow=jQuery.now()}function clearFxNow(){fxNow=
undefined}function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type});return obj}jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed===
"object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true)opt.queue="fx";opt.old=opt.complete;opt.complete=function(noUnmark){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,
opt.queue);else if(noUnmark!==false)jQuery._unmark(this)};return opt},easing:{linear:function(p){return p},swing:function(p){return-Math.cos(p*Math.PI)/2+0.5}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;options.orig=options.orig||{}}});jQuery.fx.prototype={update:function(){if(this.options.step)this.options.step.call(this.elem,this.now,this);(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||
this.elem.style[this.prop]==null))return this.elem[this.prop];var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||r==="auto"?0:r:parsed},custom:function(from,to,unit){var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow();this.end=to;this.now=this.start=from;this.pos=this.state=0;this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px");function t(gotoEnd){return self.step(gotoEnd)}t.queue=this.options.queue;t.elem=this.elem;t.saveState=function(){if(jQuery._data(self.elem,
"fxshow"+self.prop)===undefined)if(self.options.hide)jQuery._data(self.elem,"fxshow"+self.prop,self.start);else if(self.options.show)jQuery._data(self.elem,"fxshow"+self.prop,self.end)};if(t()&&jQuery.timers.push(t)&&!timerId)timerId=setInterval(fx.tick,fx.interval)},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop);this.options.show=true;if(dataShow!==undefined)this.custom(this.cur(),dataShow);else this.custom(this.prop===
"width"||this.prop==="height"?1:0,this.cur());jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=true,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();options.animatedProperties[this.prop]=true;for(p in options.animatedProperties)if(options.animatedProperties[p]!==
true)done=false;if(done){if(options.overflow!=null&&!jQuery.support.shrinkWrapBlocks)jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index]});if(options.hide)jQuery(elem).hide();if(options.hide||options.show)for(p in options.animatedProperties){jQuery.style(elem,p,options.orig[p]);jQuery.removeData(elem,"fxshow"+p,true);jQuery.removeData(elem,"toggle"+p,true)}complete=options.complete;if(complete){options.complete=false;complete.call(elem)}}return false}else{if(options.duration==
Infinity)this.now=t;else{n=t-this.startTime;this.state=n/options.duration;this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update()}return true}};jQuery.extend(jQuery.fx,{tick:function(){var timer,timers=jQuery.timers,i=0;for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer)timers.splice(i--,1)}if(!timers.length)jQuery.fx.stop()},interval:13,stop:function(){clearInterval(timerId);
timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null)fx.elem.style[fx.prop]=fx.now+fx.unit;else fx.elem[fx.prop]=fx.now}}});jQuery.each(fxAttrs.concat.apply([],fxAttrs),function(i,prop){if(prop.indexOf("margin"))jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit)}});if(jQuery.expr&&jQuery.expr.filters)jQuery.expr.filters.animated=
function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove();if(display==="none"||display===""){if(!iframe){iframe=document.createElement("iframe");iframe.frameBorder=iframe.width=iframe.height=0}body.appendChild(iframe);if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;
iframeDoc.write((jQuery.support.boxModel?"<!doctype html>":"")+"<html><body>");iframeDoc.close()}elem=iframeDoc.createElement(nodeName);iframeDoc.body.appendChild(elem);display=jQuery.css(elem,"display");body.removeChild(iframe)}elemdisplay[nodeName]=display}return elemdisplay[nodeName]}var getOffset,rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if("getBoundingClientRect"in document.documentElement)getOffset=function(elem,doc,docElem,box){try{box=elem.getBoundingClientRect()}catch(e){}if(!box||
!jQuery.contains(docElem,elem))return box?{top:box.top,left:box.left}:{top:0,left:0};var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left}};else getOffset=
function(elem,doc,docElem){var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed")break;computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;
left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.support.doesNotAddBorder&&!(jQuery.support.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0}prevOffsetParent=offsetParent;offsetParent=elem.offsetParent}if(jQuery.support.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||
0;left+=parseFloat(computedStyle.borderLeftWidth)||0}prevComputedStyle=computedStyle}if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft}if(jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft)}return{top:top,left:left}};jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,
options,i)});var elem=this[0],doc=elem&&elem.ownerDocument;if(!doc)return null;if(elem===doc.body)return jQuery.offset.bodyOffset(elem);return getOffset(elem,doc,doc.documentElement)};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0}return{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,
"position");if(position==="static")elem.style.position="relative";var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||
0}if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(options.top!=null)props.top=options.top-curOffset.top+curTop;if(options.left!=null)props.left=options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,props);else curElem.css(props)}};jQuery.fn.extend({position:function(){if(!this[0])return null;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();
offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&!rroot.test(offsetParent.nodeName)&&
jQuery.css(offsetParent,"position")==="static")offsetParent=offsetParent.offsetParent;return offsetParent})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];if(win)win.scrollTo(!top?
val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());else elem[method]=val},method,val,arguments.length,null)}});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.each({Height:"height",Width:"width"},function(name,type){var clientProp="client"+name,scrollProp="scroll"+name,offsetProp="offset"+name;jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):
this[type]():null};jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null};jQuery.fn[type]=function(value){return jQuery.access(this,function(elem,type,value){var doc,docElemProp,orig,ret;if(jQuery.isWindow(elem)){doc=elem.document;docElemProp=doc.documentElement[clientProp];return jQuery.support.boxModel&&docElemProp||doc.body&&doc.body[clientProp]||docElemProp}if(elem.nodeType===9){doc=elem.documentElement;
if(doc[clientProp]>=doc[scrollProp])return doc[clientProp];return Math.max(elem.body[scrollProp],doc[scrollProp],elem.body[offsetProp],doc[offsetProp])}if(value===undefined){orig=jQuery.css(elem,type);ret=parseFloat(orig);return jQuery.isNumeric(ret)?ret:orig}jQuery(elem).css(type,value)},type,value,arguments.length,null)}});window.jQuery=window.$=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery)define("jquery",[],function(){return jQuery})})(window);
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.20",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=
this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,
outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);
return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];
if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&
a.ui.isOverAxis(c,e,g)}})})(jQuery);
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=
function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):
e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},
this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",
b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);
(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName),a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(c)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=
!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);
(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,
left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=
k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left",
"top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),
e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),
f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,
left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=
g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2E3:0),f.fractions=i>21&&i<22}()})(jQuery);
(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?
!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=
this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,
this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");
if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=
!1);var d=this.element[0],e=!1;while(d&&(d=d.parentNode))d==document&&(e=!0);if(!e&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},
_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==
b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],
top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:
window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+
(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&
a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),
b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<
h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():
e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,
offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.20"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},
c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),
e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",
!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,
d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&
this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&
(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||
e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&
(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):
a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,
width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&
n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),
r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-
d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,
e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;
d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),
b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),
this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=
a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),
this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.20"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case "fit":return i<=e&&f<=
j&&k<=g&&h<=l;case "intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case "pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case "touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||
e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++){if(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))continue;for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible=d[h].element.css("display")!=
"none";if(!d[h].visible)continue;e=="mousedown"&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight}}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],
b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var d=a.ui.intersect(b,this,this.options.tolerance),
e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),
b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}})(jQuery);
(function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles=
{};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}if(!a(this.handles[c]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){if(c.disabled)return;a(this).removeClass("ui-resizable-autohide"),b._handles.show()},function(){if(c.disabled)return;b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),
f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:
{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",
i=="auto"?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);return l=this._respectSize(l,b),this._propagate("resize",
b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,
i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",
b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b=this.options,c,e,f,g,h;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=
e),g<h.maxHeight&&(h.maxHeight=g);this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,e=this.position,f=this.size,g=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),g=="sw"&&(a.left=e.left+(f.width-
a.width),a.top=null),g=="nw"&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){var c=this.helper,e=this._vBoundaries,f=this._aspectRatio||b.shiftKey,g=this.axis,h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight);var l=
this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var b=this.options;if(!this._proportionallyResizeElements.length)return;var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=
this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(!a.browser.msie||!a(c).is(":hidden")&&!a(c).parents(":hidden").length)e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-
this.borderDif[1]-this.borderDif[3]||0});else continue}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),
this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,
arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.20"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};
typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},
g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a,b){i(a,b)}):i(e.alsoResize)},stop:function(b,c){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,
g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),
height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!i)return;e.containerElement=a(i);if(/document/.test(h)||h==document)e.containerOffset=
{left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,
o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),
j&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+
d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,
h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),
d.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable",
"grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):
/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(a,b){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,
selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=
this;this.opos=[b.pageX,b.pageY];if(this.options.disabled)return;var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),
d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})},_mouseDrag:function(b){var c=
this;this.dragged=!0;if(this.options.disabled)return;var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!i||i.element==c.element[0])return;var j=!1;d.tolerance=="touch"?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):d.tolerance=="fit"&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),
i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",
b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}),!1},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",
b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.20"})})(jQuery);
(function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),
this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,
c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var e=null,f=this,g=a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==f)return e=a(this),!1});a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target));if(!e)return!1;
if(this.options.handle&&!c){var h=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)});if(!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],
parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",
e.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),
this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<
c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-
c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=
this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],
g):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(!b)return;a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();
d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,
dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=
this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=
"pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=this.options.axis==="x"||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=this.options.axis==="y"||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=
this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||
e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this,d=[],
e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,
this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}}for(var g=e.length-1;g>=0;g--){var k=e[g][1],l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,
instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&
this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;
if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){if(e&&!d.forcePlaceholderSize)return;b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||
0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&
a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){var f=1E4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"];
for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.items[i][this.containers[d].floating?"left":"top"];Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i])}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,
this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;return d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,
height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&
(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=
this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),
left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment==
"document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),
e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,
c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*
d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),
b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-
this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+
(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[],e=this;
!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=
this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,
this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&
a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),
a.extend(a.ui.sortable,{version:"1.8.20"})})(jQuery);
(function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=
b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",
function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=
this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),
this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),
c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey)return;var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?
(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow",
"auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(d.disabled)return;if(!b.target){if(!d.collapsible)return;
this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?!1:this.headers.index(h);if(this.running||
!d.collapsible&&i)return;var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),
h.next().addClass("ui-accordion-content-active"));return},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(!g)return;return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data),g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};h.collapsible&&e?j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=
h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),
b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),a.extend(a.ui.accordion,{version:"1.8.20",animations:{slide:function(b,
c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i,j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||
0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){c.prop=="height"&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||
b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1E3:200})}}})})(jQuery);
(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||
b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=
b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||
"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),
f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},
a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||
"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,
b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&
a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||
b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=
this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;
c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();
c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&
!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,
d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,
d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);
(function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),
e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i=this.type==="checkbox"||this.type==="radio",
l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";h.label===null&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){if(h.disabled)return;a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(h.disabled)return;a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",
function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){if(f)return;b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(h.disabled)return;f=!1,d=a.pageX,e=a.pageY}).bind("mouseup.button",function(a){if(h.disabled)return;if(d!==a.pageX||e!==a.pageY)f=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),
b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,
a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",
h.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||
(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),
this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled"){c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(i),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),
d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),
a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?
"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})})(jQuery);
(function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,
position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+
d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),
j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span></span>").addClass("ui-dialog-title").attr("id",
f).html(e).prependTo(i);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),
a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1===c._trigger("beforeClose",b))return;return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&
(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",
a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return e.focus(1),
!1}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=
a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){if(a==="click")return;a in f?e[a](b):e.attr(a,b)}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,d=a(document),e;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",
containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,
originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof c=="string"?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",
a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):
[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in
d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case "beforeclose":b="beforeClose";break;case "buttons":e._createButtons(d);break;case "closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case "dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case "disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case "draggable":var g=
f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case "position":e._position(d);break;case "resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&typeof d=="string"&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case "title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",
minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",
this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.20",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&
a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});
return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,
document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),
height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=
null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&d.values.length!==2&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(d.range==="min"||
d.range==="max"?" ui-slider-range-"+d.range:"")));for(var i=e.length;i<g;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),
this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e=a(this).data("index.ui-slider-handle"),f,g,h,i;if(b.options.disabled)return;switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:d.preventDefault();if(!b._keySliding){b._keySliding=!0,a(this).addClass("ui-state-active"),f=b._start(d,e);
if(f===!1)return}}i=b.options.step,b.options.values&&b.options.values.length?g=h=b.values(e):g=h=b.value();switch(d.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===
b._valueMin())return;h=b._trimAlignValue(g-i)}b._slide(d,e,h)}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),
this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options,d,e,f,g,h,i,j,k,l;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),j=this._start(b,
i),j===!1?!1:(this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0,!0))},_mouseStart:function(a){return!0},
_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,
c,d,e,f;return this.orientation==="horizontal"?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),this.orientation==="vertical"&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&
(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&c>d||b===1&&c<d)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],
value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=
this._trimAlignValue(a),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(b,c){var d,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);return}if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();d=this.options.values,e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,
f);this._refreshValue()},_setOption:function(b,c){var d,e=0;a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation),this._refreshValue();break;case "value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case "values":this._animateOff=!0,this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a),a},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b),b;c=this.options.values.slice();for(d=0;d<c.length;d+=
1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return Math.abs(c)*2>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,c=this.options,d=this,e=this._animateOff?!1:c.animate,
f,g={},h,i,j,k;this.options.values&&this.options.values.length?this.handles.each(function(b,i){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),d.options.range===!0&&(d.orientation==="horizontal"?(b===0&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({width:f-h+"%"},{queue:!1,duration:c.animate})):(b===0&&d.range.stop(1,1)[e?"animate":
"css"]({bottom:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),b==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),b==="max"&&this.orientation==="horizontal"&&this.range[e?"animate":"css"]({width:100-
f+"%"},{queue:!1,duration:c.animate}),b==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),b==="max"&&this.orientation==="vertical"&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.20"})})(jQuery);
(function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&
b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=
a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var g=a(c).attr("href"),h=g.split("#")[0],i;h&&(h===location.toString().split("#")[0]||
(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g);if(f.test(g))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&g!=="#"){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",!0)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return e.selected=a,!1}),typeof e.selected!="number"&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),typeof e.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):e.selected===null&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return d.lis.index(a)}))).sort(),a.inArray(e.selected,e.disabled)!=-1&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),
e.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),
this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var g=0,h;h=this.lis[g];g++)a(h)[a.inArray(g,e.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");e.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(e.event!=="mouseover"){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+
a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,
l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+
".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1)return this.blur(),!1;e.selected=d.anchors.index(this),d.abort();if(e.collapsible){if(c.hasClass("ui-tabs-selected"))return e.selected=-1,e.cookie&&d._cookie(e.selected,
e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}e.cookie&&d._cookie(e.selected,e.cookie);if(g.length)f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),
this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,
"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),
this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),
j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a,b){return a>=e?++a:a}),this._tabify(),this.anchors.length==1&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);
var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)==-1)return;return this.lis.eq(b).removeClass("ui-state-disabled"),
c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;
else return this;return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,
g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,
2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.20"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),
f=c._unrotate||(c._unrotate=b?function(a){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})})(jQuery);
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",
this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri",
"Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length)return;c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length)return;d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),
d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.20"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,
log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),
inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+
' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName))return;this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,
b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");
b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):
$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,
b){var c=$(a);if(c.hasClass(this.markerClassName))return;c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=
1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=
document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],
PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=
$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==
a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=
$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},
$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),
this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),
c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?
b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&
$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||
a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=
$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},
_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a)return;var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1)return;extendRemove(b.settings,
d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=
null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],
top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));
var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,
"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),
parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=
Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a)))a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME))return;if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),
e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=
!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst)return;var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&
$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0]))return;this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=
d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0]))return;var f=this._getInst(e[0]);
f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),
d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+
4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:
null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),
f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase())return f=c[0],r+=d.length,!1});if(f!=-1)return f+1;throw"Unknown name at position "+r;},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0;for(var s=0;s<a.length;s++)if(m)a.charAt(s)=="'"&&!n("'")?m=!1:q();else switch(a.charAt(s)){case "d":k=o("d");break;case "D":p("D",e,f);break;case "o":l=o("o");break;case "m":j=o("m");break;case "M":j=p("M",g,h);break;case "y":i=
o("y");break;case "@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case "!":var t=new Date((o("!")-this._ticksTo1970)/1E4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case "'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=
u)break;j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(a,b,c){if(!b)return"";
var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))while(d.length<c)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m);else switch(a.charAt(m)){case "d":k+=
i("d",b.getDate(),2);break;case "D":k+=j("D",b.getDay(),d,e);break;case "o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":k+=i("m",b.getMonth()+1,2);break;case "M":k+=j("M",b.getMonth(),f,g);break;case "y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":k+=b.getTime();break;case "!":k+=b.getTime()*1E4+this._ticksTo1970;break;case "'":h("'")?k+="'":l=!0;break;
default:k+=a.charAt(m)}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++)if(c)a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,
b){if(a.input.val()==a.lastVal)return;var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,
this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case "d":case "D":g+=
parseInt(i[1],10);break;case "w":case "W":g+=parseInt(i[1],10)*7;break;case "m":case "M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case "y":case "Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),
this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&
a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,
"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p)n--,n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=
o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\""+' title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\""+' title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
dpuuid+".datepicker._gotoToday('#"+a.id+"');\""+">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";
for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+
P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&
n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+
6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+
a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':
""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==
c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" "+">";for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=
function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" "+">";for(;t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",
l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,
b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,
b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=
this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+
a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.20",window["DP_jQuery_"+dpuuid]=$})(jQuery);
(function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),
this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.20"})})(jQuery);
jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],
16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&
a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),
a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],
function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],
darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,
224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var g=
a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?
a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,
[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.20",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")==
"static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),
c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);
return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],
function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+
c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=
2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+
2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+
c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*0.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/
g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*0.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,
e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+0.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+0.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+0.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*0.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*0.5+e*0.5+d}})}(jQuery);
(function(a,b){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=f=="vertical"?"height":"width",i=f=="vertical"?g.height():g.width();e=="show"&&g.css(h,0);var j={};j[h]=e=="show"?i:0,g.animate(j,b.duration,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,
d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);
(function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",g=b.options.distance||(j=="top"?c.outerHeight({margin:!0})/3:c.outerWidth({margin:!0})/
3);e=="show"&&c.css("opacity",0).css(j,k=="pos"?-g:g),e=="hide"&&(g=g/(h*2)),e!="hide"&&h--;if(e=="show"){var l={opacity:1};l[j]=(k=="pos"?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g=g/2,h--}for(var m=0;m<h;m++){var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing),g=e=="hide"?g*2:g/2}if(e=="hide"){var l={opacity:0};l[j]=(k=="pos"?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,
d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);
(function(a,b){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=c[0].tagName=="IMG"?g:c,i={size:f=="vertical"?"height":"width",position:f=="vertical"?"top":"left"},j=f=="vertical"?h.height():h.width();e=="show"&&(h.css(i.size,0),h.css(i.position,j/2));
var k={};k[i.size]=e=="show"?j:0,k[i.position]=e=="show"?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}})(jQuery);
(function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);e=="show"&&c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e==
"show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
(function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;var g=e.outerWidth(!0),h=e.outerHeight(!0);for(var i=0;i<c;i++)for(var j=
0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+(b.options.mode=="show"?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+j*(g/d)+(b.options.mode=="show"?0:(j-Math.floor(d/2))*(g/d)),top:f.top+
i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);
(function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
(function(a,b){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j=e=="show"!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],
10)/100*l[e=="hide"?0:1]),e=="show"&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},p={};n[k[0]]=e=="show"?l[0]:f,p[k[1]]=e=="show"?l[1]:0,i.animate(n,h,b.options.easing).animate(p,h,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);
(function(a,b){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};e=="hide"&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),e=="show"&&!a.support.opacity&&
this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
(function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=(b.options.times||5)*2-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),(d=="hide"&&g||d=="show"&&!g)&&e--;for(var i=0;i<e;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){h==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",
function(){c.dequeue()}).dequeue()})}})(jQuery);
(function(a,b){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:d=="hide"?e:100,from:d=="hide"?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,
b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:e=="hide"?0:100),g=b.options.direction||"both",h=b.options.origin;e!="effect"&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||(e=="show"?{height:0,width:0}:i);var j={y:g!="horizontal"?f/100:1,x:g!="vertical"?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&(e=="show"&&(c.from.opacity=0,c.to.opacity=1),e=="hide"&&(c.from.opacity=
1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};c.from=b.options.from||n,c.to=b.options.to||n;if(m){var p=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*p.y,c.from.left=(n.width-c.from.width)*p.x,c.to.top=(n.height-c.to.height)*p.y,c.to.left=(n.width-c.to.width)*p.x}var q={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};
if(l=="box"||l=="both")q.from.y!=q.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to));(l=="content"||l=="both")&&q.from.y!=q.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,q.from.y,c.from),c.to=a.effects.setTransition(c,g,q.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),
c.css("overflow","hidden").css(c.from);if(l=="content"||l=="both")h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){var c=a(this);k&&a.effects.save(c,f);var d={height:c.height(),width:c.width()};c.from={height:d.height*q.from.y,width:d.width*q.from.x},c.to={height:d.height*q.to.y,width:d.width*q.to.x},q.from.y!=q.to.y&&(c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,
h,q.to.y,c.to)),q.from.x!=q.to.x&&(c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})});c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity),j=="hide"&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
(function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g,m[j]=(k=="pos"?"+=":"-=")+g*2,n[j]=(k==
"pos"?"-=":"+=")+g*2,c.animate(l,i,b.options.easing);for(var p=1;p<h;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);
(function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0}):c.outerWidth({margin:!0}));e=="show"&&c.css(g,h=="pos"?isNaN(i)?"-"+i:-i:i);var j={};
j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
(function(a,b){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),
c.dequeue()})})}})(jQuery);
(function($){$.uiTableFilter=function(jq,phrase,column,ifHidden){var new_hidden=false;if(this.last_phrase===phrase)return false;var phrase_length=phrase.length;var words=phrase.toLowerCase().split(" ");var matches=function(elem){elem.show()};var noMatch=function(elem){elem.hide();new_hidden=true};var getText=function(elem){return elem.text()};if(column){var index=null;jq.find("thead > tr:last > th").each(function(i){if($.trim($(this).text())==column){index=i;return false}});if(index==null)throw"given column: "+
column+" not found";getText=function(elem){return $(elem.find("td:eq("+index+")")).text()}}if(words.size>1&&phrase.substr(0,phrase_length-1)===this.last_phrase){if(phrase[-1]===" "){this.last_phrase=phrase;return false}var words=words[-1];matches=function(elem){};var elems=jq.find("tbody:first > tr:visible")}else{new_hidden=true;var elems=jq.find("tbody:first > tr")}elems.each(function(){var elem=$(this);$.uiTableFilter.has_words(getText(elem),words,false)?matches(elem):noMatch(elem)});last_phrase=
phrase;if(ifHidden&&new_hidden)ifHidden();return jq};$.uiTableFilter.last_phrase="";$.uiTableFilter.has_words=function(str,words,caseSensitive){var text=caseSensitive?str:str.toLowerCase();for(var i=0;i<words.length;i++)if(text.indexOf(words[i])===-1)return false;return true}})(jQuery);
(function($){function toIntegersAtLease(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(date){return this.getUTCFullYear()+"-"+toIntegersAtLease(this.getUTCMonth())+"-"+toIntegersAtLease(this.getUTCDate())};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.quoteString=function(string){if(escapeable.test(string))return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string")return c;c=a.charCodeAt();
return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"';return'"'+string+'"'};$.toJSON=function(o,compact){var type=typeof o;if(type=="undefined")return"undefined";else if(type=="number"||type=="boolean")return o+"";else if(o===null)return"null";if(type=="string")return $.quoteString(o);if(type=="object"&&typeof o.toJSON=="function")return o.toJSON(compact);if(type!="function"&&typeof o.length=="number"){var ret=[];for(var i=0;i<o.length;i++)ret.push($.toJSON(o[i],compact));if(compact)return"["+
ret.join(",")+"]";else return"["+ret.join(", ")+"]"}if(type=="function")throw new TypeError("Unable to convert object of type 'function' to json.");var ret=[];for(var k in o){var name;type=typeof k;if(type=="number")name='"'+k+'"';else if(type=="string")name=$.quoteString(k);else continue;var val=$.toJSON(o[k],compact);if(typeof val!="string")continue;if(compact)ret.push(name+":"+val);else ret.push(name+": "+val)}return"{"+ret.join(", ")+"}"};$.compactJSON=function(o){return $.toJSON(o,true)};$.evalJSON=
function(src){return eval("("+src+")")};$.secureEvalJSON=function(src){var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");else throw new SyntaxError("Error parsing JSON, source is not valid.");}})(jQuery);
(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this;initializing=false;for(var name in prop)prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}}(name,prop[name]):
prop[name];function Class(){if(!initializing&&this.init)this.init.apply(this,arguments)}Class.prototype=prototype;Class.constructor=Class;Class.extend=arguments.callee;return Class}})();
(function($){this.jStoreDelegate=Class.extend({init:function(parent){this.parent=parent;this.callbacks={}},bind:function(event,callback){if(!$.isFunction(callback))return this;if(!this.callbacks[event])this.callbacks[event]=[];this.callbacks[event].push(callback);return this},trigger:function(){var parent=this.parent,args=[].slice.call(arguments),event=args.shift(),handlers=this.callbacks[event];if(!handlers)return false;$.each(handlers,function(){this.apply(parent,args)});return this}})})(jQuery);
(function($){var rxJson;try{rxJson=new RegExp('^("(\\\\.|[^"\\\\\\n\\r])*?"|[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t])+?$')}catch(e){rxJson=/^(true|false|null|\[.*\]|\{.*\}|".*"|\d+|\d+\.\d+)$/}$.jStore={};$.extend($.jStore,{EngineOrder:[],Availability:{},Engines:{},Instances:{},CurrentEngine:null,defaults:{project:null,engine:null,autoload:true,flash:"jStore.Flash.html"},isReady:false,isFlashReady:false,delegate:(new jStoreDelegate($.jStore)).bind("jStore-ready",function(engine){$.jStore.isReady=true;
if($.jStore.defaults.autoload)engine.connect()}).bind("flash-ready",function(){$.jStore.isFlashReady=true}),ready:function(callback){if($.jStore.isReady)callback.apply($.jStore,[$.jStore.CurrentEngine]);else $.jStore.delegate.bind("jStore-ready",callback)},fail:function(callback){$.jStore.delegate.bind("jStore-failure",callback)},flashReady:function(callback){if($.jStore.isFlashReady)callback.apply($.jStore,[$.jStore.CurrentEngine]);else $.jStore.delegate.bind("flash-ready",callback)},use:function(engine,
project,identifier){project=project||$.jStore.defaults.project||location.hostname.replace(/\./g,"-")||"unknown";var e=$.jStore.Engines[engine.toLowerCase()]||null,name=(identifier?identifier+".":"")+project+"."+engine;if(!e)throw"JSTORE_ENGINE_UNDEFINED";e=new e(project,name);if($.jStore.Instances[name])throw"JSTORE_JRI_CONFLICT";if(e.isAvailable()){$.jStore.Instances[name]=e;if(!$.jStore.CurrentEngine)$.jStore.CurrentEngine=e;$.jStore.delegate.trigger("jStore-ready",e)}else if(!e.autoload)throw"JSTORE_ENGINE_UNAVILABLE";
else e.included(function(){if(this.isAvailable()){$.jStore.Instances[name]=this;if(!$.jStore.CurrentEngine)$.jStore.CurrentEngine=this;$.jStore.delegate.trigger("jStore-ready",this)}else $.jStore.delegate.trigger("jStore-failure",this)}).include()},setCurrentEngine:function(name){if(!$.jStore.Instances.length)return $.jStore.FindEngine();if(!name&&$.jStore.Instances.length>=1){$.jStore.delegate.trigger("jStore-ready",$.jStore.Instances[0]);return $.jStore.CurrentEngine=$.jStore.Instances[0]}if(name&&
$.jStore.Instances[name]){$.jStore.delegate.trigger("jStore-ready",$.jStore.Instances[name]);return $.jStore.CurrentEngine=$.jStore.Instances[name]}throw"JSTORE_JRI_NO_MATCH";},FindEngine:function(){$.each($.jStore.EngineOrder,function(k){if($.jStore.Availability[this]()){$.jStore.use(this,$.jStore.defaults.project,"default");return false}})},load:function(){if($.jStore.defaults.engine)return $.jStore.use($.jStore.defaults.engine,$.jStore.defaults.project,"default");try{$.jStore.FindEngine()}catch(e){}},
safeStore:function(value){switch(typeof value){case "object":case "function":return $.jStore.compactJSON(value);case "number":case "boolean":case "string":case "xml":return value;case "undefined":default:return""}},safeResurrect:function(value){return rxJson.test(value)?$.evalJSON(value):value},store:function(key,value){if(!$.jStore.CurrentEngine)return false;if(!value)return $.jStore.CurrentEngine.get(key);return $.jStore.CurrentEngine.set(key,value)},remove:function(key){if(!$.jStore.CurrentEngine)return false;
return $.jStore.CurrentEngine.rem(key)},get:function(key){return $.jStore.store(key)},set:function(key,value){return $.jStore.store(key,value)}});$.extend($.fn,{store:function(key,value){if(!$.jStore.CurrentEngine)return this;var result=$.jStore.store(key,value);return!value?result:this},removeStore:function(key){$.jStore.remove(key);return this},getStore:function(key){return $.jStore.store(key)},setStore:function(key,value){$.jStore.store(key,value);return this}})})(jQuery);
(function($){this.StorageEngine=Class.extend({init:function(project,name){this.project=project;this.jri=name;this.data={};this.limit=-1;this.includes=[];this.delegate=(new jStoreDelegate(this)).bind("engine-ready",function(){this.isReady=true}).bind("engine-included",function(){this.hasIncluded=true});this.autoload=false;this.isReady=false;this.hasIncluded=false},include:function(){var self=this,total=this.includes.length,count=0;$.each(this.includes,function(){$.ajax({type:"get",url:this,dataType:"script",
cache:true,success:function(){count++;if(count==total)self.delegate.trigger("engine-included")}})})},isAvailable:function(){return false},interruptAccess:function(){if(!this.isReady)throw"JSTORE_ENGINE_NOT_READY";},ready:function(callback){if(this.isReady)callback.apply(this);else this.delegate.bind("engine-ready",callback);return this},included:function(callback){if(this.hasIncluded)callback.apply(this);else this.delegate.bind("engine-included",callback);return this},get:function(key){this.interruptAccess();
return this.data[key]||null},set:function(key,value){this.interruptAccess();this.data[key]=value;return value},rem:function(key){this.interruptAccess();var beforeDelete=this.data[key];this.data[key]=null;return beforeDelete}})})(jQuery);
(function($){var sessionAvailability=$.jStore.Availability.session=function(){return!!window.sessionStorage},localAvailability=$.jStore.Availability.local=function(){return!!(window.localStorage||window.globalStorage)};this.jStoreDom=StorageEngine.extend({init:function(project,name){this._super(project,name);this.type="DOM";this.limit=5*1024*1024},connect:function(){this.delegate.trigger("engine-ready")},get:function(key){this.interruptAccess();var out=this.db.getItem(key);return $.jStore.safeResurrect(out&&
out.value?out.value:out)},set:function(key,value){this.interruptAccess();this.db.setItem(key,$.jStore.safeStore(value));return value},rem:function(key){this.interruptAccess();var out=this.get(key);this.db.removeItem(key);return out}});this.jStoreLocal=jStoreDom.extend({connect:function(){this.db=!window.globalStorage?window.localStorage:window.globalStorage[location.hostname];this._super()},isAvailable:localAvailability});this.jStoreSession=jStoreDom.extend({connect:function(){this.db=sessionStorage;
this._super()},isAvailable:sessionAvailability});$.jStore.Engines.local=jStoreLocal;$.jStore.Engines.session=jStoreSession;$.jStore.EngineOrder[1]="local"})(jQuery);
(function($){var avilability=$.jStore.Availability.flash=function(){return!!$.jStore.hasFlash("8.0.0")};this.jStoreFlash=StorageEngine.extend({init:function(project,name){this._super(project,name);this.type="Flash";var self=this;$.jStore.flashReady(function(){self.flashReady()})},connect:function(){var name="jstore-flash-embed-"+this.project;$(document.body).append('<iframe style="height:1px;width:1px;position:absolute;left:0;top:0;margin-left:-100px;" '+'id="jStoreFlashFrame" src="'+$.jStore.defaults.flash+
'"></iframe>')},flashReady:function(e){var iFrame=$("#jStoreFlashFrame")[0];if(iFrame.Document&&$.isFunction(iFrame.Document["jStoreFlash"].f_get_cookie))this.db=iFrame.Document["jStoreFlash"];else if(iFrame.contentWindow&&iFrame.contentWindow.document){var doc=iFrame.contentWindow.document;if($.isFunction($("object",$(doc))[0].f_get_cookie))this.db=$("object",$(doc))[0];else if($.isFunction($("embed",$(doc))[0].f_get_cookie))this.db=$("embed",$(doc))[0]}if(this.db)this.delegate.trigger("engine-ready")},
isAvailable:avilability,get:function(key){this.interruptAccess();var out=this.db.f_get_cookie(key);return out=="null"?null:$.jStore.safeResurrect(out)},set:function(key,value){this.interruptAccess();this.db.f_set_cookie(key,$.jStore.safeStore(value));return value},rem:function(key){this.interruptAccess();var beforeDelete=this.get(key);this.db.f_delete_cookie(key);return beforeDelete}});$.jStore.Engines.flash=jStoreFlash;$.jStore.EngineOrder[2]="flash";$.jStore.hasFlash=function(version){var pv=$.jStore.flashVersion().match(/\d+/g),
rv=version.match(/\d+/g);for(var i=0;i<3;i++){pv[i]=parseInt(pv[i]||0);rv[i]=parseInt(rv[i]||0);if(pv[i]<rv[i])return false;if(pv[i]>rv[i])return true}return true};$.jStore.flashVersion=function(){try{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{axo.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}return(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||
navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){}}return"0,0,0"}})(jQuery);function flash_ready(){$.jStore.delegate.trigger("flash-ready")}
(function($){var avilability=$.jStore.Availability.gears=function(){return!!(window.google&&window.google.gears)};this.jStoreGears=StorageEngine.extend({init:function(project,name){this._super(project,name);this.type="Google Gears";this.includes.push("http://code.google.com/apis/gears/gears_init.js");this.autoload=true},connect:function(){var db=this.db=google.gears.factory.create("beta.database");db.open("jstore-"+this.project);db.execute("CREATE TABLE IF NOT EXISTS jstore (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)");
this.updateCache()},updateCache:function(){var result=this.db.execute("SELECT k,v FROM jstore");while(result.isValidRow()){this.data[result.field(0)]=$.jStore.safeResurrect(result.field(1));result.next()}result.close();this.delegate.trigger("engine-ready")},isAvailable:avilability,set:function(key,value){this.interruptAccess();var db=this.db;db.execute("BEGIN");db.execute("INSERT OR REPLACE INTO jstore(k, v) VALUES (?, ?)",[key,$.jStore.safeStore(value)]);db.execute("COMMIT");return this._super(key,
value)},rem:function(key){this.interruptAccess();var db=this.db;db.execute("BEGIN");db.execute("DELETE FROM jstore WHERE k = ?",[key]);db.execute("COMMIT");return this._super(key)}});$.jStore.Engines.gears=jStoreGears;$.jStore.EngineOrder[3]="gears"})(jQuery);
(function($){var avilability=$.jStore.Availability.html5=function(){return!!window.openDatabase};this.jStoreHtml5=StorageEngine.extend({init:function(project,name){this._super(project,name);this.type="HTML5";this.limit=1024*200},connect:function(){var db=this.db=openDatabase("jstore-"+this.project,"1.0",this.project,this.limit);if(!db)throw"JSTORE_ENGINE_HTML5_NODB";db.transaction(function(db){db.executeSql("CREATE TABLE IF NOT EXISTS jstore (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)")});
this.updateCache()},updateCache:function(){var self=this;this.db.transaction(function(db){db.executeSql("SELECT k,v FROM jstore",[],function(db,result){var rows=result.rows,i=0,row;for(;i<rows.length;++i){row=rows.item(i);self.data[row.k]=$.jStore.safeResurrect(row.v)}self.delegate.trigger("engine-ready")})})},isAvailable:avilability,set:function(key,value){this.interruptAccess();this.db.transaction(function(db){db.executeSql("INSERT OR REPLACE INTO jstore(k, v) VALUES (?, ?)",[key,$.jStore.safeStore(value)])});
return this._super(key,value)},rem:function(key){this.interruptAccess();this.db.transaction(function(db){db.executeSql("DELETE FROM jstore WHERE k = ?",[key])});return this._super(key)}});$.jStore.Engines.html5=jStoreHtml5;$.jStore.EngineOrder[0]="html5"})(jQuery);
(function($){var avilability=$.jStore.Availability.ie=function(){return!!window.ActiveXObject};this.jStoreIE=StorageEngine.extend({init:function(project,name){this._super(project,name);this.type="IE";this.limit=64*1024},connect:function(){this.db=$('<div style="display:none;behavior:url(\'#default#userData\')" id="jstore-'+this.project+'"></div>').appendTo(document.body).get(0);this.delegate.trigger("engine-ready")},isAvailable:avilability,get:function(key){this.interruptAccess();this.db.load(this.project);
return $.jStore.safeResurrect(this.db.getAttribute(key))},set:function(key,value){this.interruptAccess();this.db.setAttribute(key,$.jStore.safeStore(value));this.db.save(this.project);return value},rem:function(key){this.interruptAccess();var beforeDelete=this.get(key);this.db.removeAttribute(key);this.db.save(this.project);return beforeDelete}});$.jStore.Engines.ie=jStoreIE;$.jStore.EngineOrder[4]="ie"})(jQuery);
jQuery.cookie=function(name,value,options){if(typeof value!="undefined"){options=options||{};if(value===null){value="";options.expires=-1}var expires="";if(options.expires&&(typeof options.expires=="number"||options.expires.toUTCString)){var date;if(typeof options.expires=="number"){date=new Date;date.setTime(date.getTime()+options.expires*24*60*60*1E3)}else date=options.expires;expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"";var domain=options.domain?"; domain="+
options.domain:"";var secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")}else{var cookieValue=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}};
(function($){$.layout={version:"1.3.rc29.15",revision:0.032915,language:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpenTip:"Not enough room to show this pane.",pane:"pane",selector:"selector",errButton:"Error Adding Button \n\nInvalid ",errContainerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",errCenterPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",
errContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!"},browser:{mozilla:!!$.browser.mozilla,webkit:!!$.browser.webkit||!!$.browser.safari,msie:!!$.browser.msie,isIE6:!!$.browser.msie&&$.browser.version==6,boxModel:false},scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},
getScrollbarSize:function(dim){var $c=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body");var d={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return dim.match(/^(width|height)$/i)?d[dim]:d},showInvisibly:function($E,force){if(!$E)return{};if(!$E.jquery)$E=$($E);var CSS={display:$E.css("display"),visibility:$E.css("visibility")};
if(force||CSS.display=="none"){$E.css({display:"block",visibility:"hidden"});return CSS}else return{}},getElementDimensions:function($E){var d={},x=d.css={},i={},b,p,N=$.layout.cssNum,off=$E.offset();d.offsetLeft=off.left;d.offsetTop=off.top;$.each("Left,Right,Top,Bottom".split(","),function(idx,e){b=x["border"+e]=$.layout.borderWidth($E,e);p=x["padding"+e]=$.layout.cssNum($E,"padding"+e);i[e]=b+p;d["inset"+e]=p});d.offsetWidth=$E.innerWidth();d.offsetHeight=$E.innerHeight();d.outerWidth=$E.outerWidth();
d.outerHeight=$E.outerHeight();d.innerWidth=Math.max(0,d.outerWidth-i.Left-i.Right);d.innerHeight=Math.max(0,d.outerHeight-i.Top-i.Bottom);x.width=$E.width();x.height=$E.height();x.top=N($E,"top",true);x.bottom=N($E,"bottom",true);x.left=N($E,"left",true);x.right=N($E,"right",true);return d},getElementCSS:function($E,list){var CSS={},style=$E[0].style,props=list.split(","),sides="Top,Bottom,Left,Right".split(","),attrs="Color,Style,Width".split(","),p,s,a,i,j,k;for(i=0;i<props.length;i++){p=props[i];
if(p.match(/(border|padding|margin)$/))for(j=0;j<4;j++){s=sides[j];if(p=="border")for(k=0;k<3;k++){a=attrs[k];CSS[p+s+a]=style[p+s+a]}else CSS[p+s]=style[p+s]}else CSS[p]=style[p]}return CSS},cssWidth:function($E,outerWidth){var b=$.layout.borderWidth,n=$.layout.cssNum;if(outerWidth<=0)return 0;if(!$.layout.browser.boxModel)return outerWidth;var W=outerWidth-b($E,"Left")-b($E,"Right")-n($E,"paddingLeft")-n($E,"paddingRight");return Math.max(0,W)},cssHeight:function($E,outerHeight){var b=$.layout.borderWidth,
n=$.layout.cssNum;if(outerHeight<=0)return 0;if(!$.layout.browser.boxModel)return outerHeight;var H=outerHeight-b($E,"Top")-b($E,"Bottom")-n($E,"paddingTop")-n($E,"paddingBottom");return Math.max(0,H)},cssNum:function($E,prop,allowAuto){if(!$E.jquery)$E=$($E);var CSS=$.layout.showInvisibly($E),p=$.curCSS($E[0],prop,true),v=allowAuto&&p=="auto"?p:parseInt(p,10)||0;$E.css(CSS);return v},borderWidth:function(el,side){if(el.jquery)el=el[0];var b="border"+side.substr(0,1).toUpperCase()+side.substr(1);
return $.curCSS(el,b+"Style",true)=="none"?0:parseInt($.curCSS(el,b+"Width",true),10)||0},isMouseOverElem:function(evt,el){var $E=$(el||this),d=$E.offset(),T=d.top,L=d.left,R=L+$E.outerWidth(),B=T+$E.outerHeight(),x=evt.pageX,y=evt.pageY;return $.layout.browser.msie&&x<0&&y<0||x>=L&&x<=R&&y>=T&&y<=B}};$.fn.layout=function(opts){var lang=$.layout.language,options={name:"",containerClass:"ui-layout-container",scrollToBookmarkOnLoad:true,resizeWithWindow:true,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,
onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,autoBindCustomButtons:false,zIndex:null,initPanes:true,showErrorMessages:true,defaults:{applyDemoStyles:false,closable:true,resizable:true,slidable:true,initClosed:false,initHidden:false,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:false,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",
minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:lang.Close,togglerTip_closed:lang.Open,togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:true,autoResize:true,autoReopen:true,resizerDragOpacity:1,maskIframesOnResize:true,resizeNestedLayout:true,resizeWhileDragging:false,resizeContentWhileDragging:false,noRoomToOpenTip:lang.noRoomToOpenTip,resizerTip:lang.Resize,
sliderTip:lang.Slide,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:false,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:false,showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:true,triggerEventsOnLoad:false,triggerEventsWhileDragging:true,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,
onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",
size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0},useStateCookie:false,cookie:{name:"",autoSave:true,autoLoad:true,domain:"",path:"",expires:"",secure:false,keys:"north.size,south.size,east.size,west.size,"+"north.isClosed,south.isClosed,east.isClosed,west.isClosed,"+"north.isHidden,south.isHidden,east.isHidden,west.isHidden"}},effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}},state={id:"layout"+(new Date).getTime(),initialized:false,container:{},north:{},south:{},east:{},west:{},center:{},cookie:{}},_c={allPanes:"north,south,west,east,center",borderPanes:"north,south,west,east",altSide:{north:"south",south:"north",east:"west",west:"east"},hidden:{visibility:"hidden"},visible:{visibility:"visible"},
zIndex:{pane_normal:1,resizer_normal:2,iframe_mask:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},
cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"Top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"},pins:[]},south:{side:"Bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"},pins:[]},east:{side:"Right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",
height:"auto"},pins:[]},west:{side:"Left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"},pins:[]},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},timer={data:{},set:function(s,fn,ms){timer.clear(s);timer.data[s]=setTimeout(fn,ms)},clear:function(s){var t=timer.data;if(t[s]){clearTimeout(t[s]);delete t[s]}}},isStr=function(o){try{return typeof o=="string"||typeof o=="object"&&o.constructor.toString().match(/string/i)!==
null}catch(e){return false}},str=function(o){return isStr(o)?$.trim(o):o==undefined||o==null?"":o},min=function(x,y){return Math.min(x,y)},max=function(x,y){return Math.max(x,y)},_transformData=function(d){var a,json={cookie:{},defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};d=d||{};if(d.effects||d.cookie||d.defaults||d.north||d.south||d.west||d.east||d.center)json=$.extend(true,json,d);else $.each(d,function(key,
val){a=key.split("__");if(!a[1]||json[a[0]])json[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=val});return json},_queue=function(action,pane,param){var tried=[];$.each(_c.borderPanes.split(","),function(i,p){if(_c[p].isMoving){bindCallback(p);return false}});function bindCallback(p){var c=_c[p];if(!c.doCallback){c.doCallback=true;c.callback=action+","+pane+","+(param?1:0)}else{tried.push(p);var cbPane=c.callback.split(",")[1];if(cbPane!=pane&&!$.inArray(cbPane,tried)>=0)bindCallback(cbPane)}}},_dequeue=
function(pane){var c=_c[pane];_c.isLayoutBusy=false;delete c.isMoving;if(!c.doCallback||!c.callback)return;c.doCallback=false;var cb=c.callback.split(","),param=cb[2]>0?true:false;if(cb[0]=="open")open(cb[1],param);else if(cb[0]=="close")close(cb[1],param);if(!c.doCallback)c.callback=null},_execCallback=function(pane,v_fn){if(!v_fn)return;var fn;try{if(typeof v_fn=="function")fn=v_fn;else if(!isStr(v_fn))return;else if(v_fn.match(/,/)){var args=v_fn.split(",");fn=eval(args[0]);if(typeof fn=="function"&&
args.length>1)return fn(args[1])}else fn=eval(v_fn);if(typeof fn=="function")if(pane&&$Ps[pane])return fn(pane,$Ps[pane],state[pane],options[pane],options.name);else return fn(Instance,state,options,options.name)}catch(ex){}},_fixIframe=function(pane){if($.layout.browser.mozilla)return;var $P=$Ps[pane];if(state[pane].tagName=="IFRAME")$P.css(_c.hidden).css(_c.visible);else $P.find("IFRAME").css(_c.hidden).css(_c.visible)},cssW=function(el,outerWidth){var str=isStr(el),$E=str?$Ps[el]:$(el);if(!$E.length)return 0;
if(isNaN(outerWidth))outerWidth=str?getPaneSize(el):$E.outerWidth();return $.layout.cssWidth($E,outerWidth)},cssH=function(el,outerHeight){var str=isStr(el),$E=str?$Ps[el]:$(el);if(!$E.length)return 0;if(isNaN(outerHeight))outerHeight=str?getPaneSize(el):$E.outerHeight();return $.layout.cssHeight($E,outerHeight)},cssSize=function(pane,outerSize){if(_c[pane].dir=="horz")return cssH(pane,outerSize);else return cssW(pane,outerSize)},cssMinDims=function(pane){var dir=_c[pane].dir,d={minWidth:1001-cssW(pane,
1E3),minHeight:1001-cssH(pane,1E3)};if(dir=="horz")d.minSize=d.minHeight;if(dir=="vert")d.minSize=d.minWidth;return d},setOuterWidth=function(el,outerWidth,autoHide){var $E=el,w;if(isStr(el))$E=$Ps[el];else if(!el.jquery)$E=$(el);w=cssW($E,outerWidth);$E.css({width:w});if(w>0){if(autoHide&&$E.data("autoHidden")&&$E.innerHeight()>0){$E.show().data("autoHidden",false);if(!$.layout.browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&!$E.data("autoHidden"))$E.hide().data("autoHidden",
true)},setOuterHeight=function(el,outerHeight,autoHide){var $E=el,h;if(isStr(el))$E=$Ps[el];else if(!el.jquery)$E=$(el);h=cssH($E,outerHeight);$E.css({height:h,visibility:"visible"});if(h>0&&$E.innerWidth()>0){if(autoHide&&$E.data("autoHidden")){$E.show().data("autoHidden",false);if(!$.layout.browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&!$E.data("autoHidden"))$E.hide().data("autoHidden",true)},setOuterSize=function(el,outerSize,autoHide){if(_c[pane].dir=="horz")setOuterHeight(el,
outerSize,autoHide);else setOuterWidth(el,outerSize,autoHide)},_parseSize=function(pane,size,dir){if(!dir)dir=_c[pane].dir;if(isStr(size)&&size.match(/%/))size=parseInt(size,10)/100;if(size===0)return 0;else if(size>=1)return parseInt(size,10);else if(size>0){var o=options,avail;if(dir=="horz")avail=sC.innerHeight-($Ps.north?o.north.spacing_open:0)-($Ps.south?o.south.spacing_open:0);else if(dir=="vert")avail=sC.innerWidth-($Ps.west?o.west.spacing_open:0)-($Ps.east?o.east.spacing_open:0);return Math.floor(avail*
size)}else if(pane=="center")return 0;else{var $P=$Ps[pane],dim=dir=="horz"?"height":"width",vis=$.layout.showInvisibly($P),s=$P.css(dim);$P.css(dim,"auto");size=dim=="height"?$P.outerHeight():$P.outerWidth();$P.css(dim,s).css(vis);return size}},getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=inclSpace?o.spacing_open:0,cSp=inclSpace?o.spacing_closed:0;if(!$P||s.isHidden)return 0;else if(s.isClosed||s.isSliding&&inclSpace)return cSp;else if(_c[pane].dir=="horz")return $P.outerHeight()+
oSp;else return $P.outerWidth()+oSp},setSizeLimits=function(pane,slide){if(!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,side=c.side.toLowerCase(),type=c.sizeType.toLowerCase(),isSliding=slide!=undefined?slide:s.isSliding,$P=$Ps[pane],paneSpacing=o.spacing_open,altPane=_c.altSide[pane],altS=state[altPane],$altP=$Ps[altPane],altPaneSize=!$altP||altS.isVisible===false||altS.isSliding?0:dir=="horz"?$altP.outerHeight():$altP.outerWidth(),altPaneSpacing=(!$altP||altS.isHidden?
0:options[altPane][altS.isClosed!==false?"spacing_closed":"spacing_open"])||0,containerSize=dir=="horz"?sC.innerHeight:sC.innerWidth,minCenterDims=cssMinDims("center"),minCenterSize=dir=="horz"?max(options.center.minHeight,minCenterDims.minHeight):max(options.center.minWidth,minCenterDims.minWidth),limitSize=containerSize-paneSpacing-(isSliding?0:_parseSize("center",minCenterSize,dir)+altPaneSize+altPaneSpacing),minSize=s.minSize=max(_parseSize(pane,o.minSize),cssMinDims(pane).minSize),maxSize=s.maxSize=
min(o.maxSize?_parseSize(pane,o.maxSize):1E5,limitSize),r=s.resizerPosition={},top=sC.insetTop,left=sC.insetLeft,W=sC.innerWidth,H=sC.innerHeight,rW=o.spacing_open;switch(pane){case "north":r.min=top+minSize;r.max=top+maxSize;break;case "west":r.min=left+minSize;r.max=left+maxSize;break;case "south":r.min=top+H-maxSize-rW;r.max=top+H-minSize-rW;break;case "east":r.min=left+W-maxSize-rW;r.max=left+W-minSize-rW;break}},calcNewCenterPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",
true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};d.width=sC.innerWidth-d.left-d.right;d.height=sC.innerHeight-d.bottom-d.top;d.top+=sC.insetTop;d.bottom+=sC.insetBottom;d.left+=sC.insetLeft;d.right+=sC.insetRight;return d},elDims=function($E){return $.layout.getElementDimensions($E)},elCSS=function($E,list){return $.layout.getElementCSS($E,list)},getHoverClasses=function(el,allStates){var $El=$(el),type=$El.data("layoutRole"),pane=$El.data("layoutEdge"),o=options[pane],
root=o[type+"Class"],_pane="-"+pane,_open="-open",_closed="-closed",_slide="-sliding",_hover="-hover ",_state=$El.hasClass(root+_closed)?_closed:_open,_alt=_state==_closed?_open:_closed,classes=root+_hover+(root+_pane+_hover)+(root+_state+_hover)+(root+_pane+_state+_hover);if(allStates)classes+=root+_alt+_hover+(root+_pane+_alt+_hover);if(type=="resizer"&&$El.hasClass(root+_slide))classes+=root+_slide+_hover+(root+_pane+_slide+_hover);return $.trim(classes)},addHover=function(evt,el){var $E=$(el||
this);if(evt&&$E.data("layoutRole")=="toggler")evt.stopPropagation();$E.addClass(getHoverClasses($E))},removeHover=function(evt,el){var $E=$(el||this);$E.removeClass(getHoverClasses($E,true))},onResizerEnter=function(evt){$("body").disableSelection();addHover(evt,this)},onResizerLeave=function(evt,el){var e=el||this,pane=$(e).data("layoutEdge"),name=pane+"ResizerLeave";timer.clear(pane+"_openSlider");timer.clear(name);if(!el){removeHover(evt,this);timer.set(name,function(){onResizerLeave(evt,e)},
200)}else if(!state[pane].isResizing)$("body").enableSelection()},_create=function(){initOptions();var o=options;$.layout.browser.boxModel=$.support.boxModel;if(o.useStateCookie&&o.cookie.autoLoad)loadCookie();state.creatingLayout=true;if(false===_execCallback(null,o.onload_start))return"cancel";_initContainer();initHotkeys();if(o.autoBindCustomButtons)initButtons();$(window).bind("unload."+sID,unload);if(o.initPanes)_initLayoutElements();delete state.creatingLayout;return state.initialized},isInitialized=
function(){if(state.initialized||state.creatingLayout)return true;else return _initLayoutElements()},_initLayoutElements=function(){var o=options;if(!$N.is(":visible"))return false;if(!getPane("center").length){if(o.showErrorMessages)alert(lang.errCenterPaneMissing);return false}state.creatingLayout=true;$.extend(sC,elDims($N));initPanes();sizeContent();if(o.scrollToBookmarkOnLoad){var l=self.location;if(l.hash)l.replace(l.hash)}if(o.resizeWithWindow&&!$N.data("layoutRole"))$(window).bind("resize."+
sID,windowResize);delete state.creatingLayout;state.initialized=true;_execCallback(null,o.onload_end||o.onload);return true},windowResize=function(){var delay=Number(options.resizeWithWindowDelay);if(delay<10)delay=100;timer.clear("winResize");timer.set("winResize",function(){timer.clear("winResize");timer.clear("winResizeRepeater");var dims=elDims($N);if(dims.innerWidth!==sC.innerWidth||dims.innerHeight!==sC.innerHeight)resizeAll()},delay);if(!timer.data["winResizeRepeater"])setWindowResizeRepeater()},
setWindowResizeRepeater=function(){var delay=Number(options.resizeWithWindowMaxDelay);if(delay>0)timer.set("winResizeRepeater",function(){setWindowResizeRepeater();resizeAll()},delay)},unload=function(){var o=options;state.cookie=getState();_execCallback(null,o.onunload_start);if(o.useStateCookie&&o.cookie.autoSave)saveCookie();_execCallback(null,o.onunload_end||o.onunload)},_initContainer=function(){var tag=sC.tagName=$N[0].tagName,o=options,fullPage=tag=="BODY",props="overflow,position,margin,padding,border",
CSS={},hid="hidden",isVis=$N.is(":visible");sC.selector=$N.selector.split(".slice")[0];sC.ref=tag+"/"+sC.selector;$N.data("layout",Instance).data("layoutContainer",sID).addClass(o.containerClass);if(!$N.data("layoutCSS")){if(fullPage){CSS=$.extend(elCSS($N,props),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")});var $H=$("html");$H.data("layoutCSS",{height:"auto",overflow:$H.css("overflow"),overflowX:$H.css("overflowX"),overflowY:$H.css("overflowY")})}else CSS=
elCSS($N,props+",top,bottom,left,right,width,height,overflow,overflowX,overflowY");$N.data("layoutCSS",CSS)}try{if(fullPage){$("html").css({height:"100%",overflow:hid,overflowX:hid,overflowY:hid});$("body").css({position:"relative",height:"100%",overflow:hid,overflowX:hid,overflowY:hid,margin:0,padding:0,border:"none"});$.extend(sC,elDims($N))}else{CSS={overflow:hid,overflowX:hid,overflowY:hid};var p=$N.css("position"),h=$N.css("height");if(!$N.data("layoutRole"))if(!p||!p.match(/fixed|absolute|relative/))CSS.position=
"relative";$N.css(CSS);if(isVis){$.extend(sC,elDims($N));if(o.showErrorMessages&&sC.innerHeight<2)alert(lang.errContainerHeight.replace(/CONTAINER/,sC.ref))}}}catch(ex){}},initHotkeys=function(panes){if(!panes||panes=="all")panes=_c.borderPanes;$.each(panes.split(","),function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).bind("keydown."+sID,keyDown);return false}})},initOptions=function(){opts=_transformData(opts);var newOpts={applyDefaultStyles:"applyDemoStyles"};
renameOpts(opts.defaults);$.each(_c.allPanes.split(","),function(i,pane){renameOpts(opts[pane])});if(opts.effects){$.extend(effects,opts.effects);delete opts.effects}$.extend(options.cookie,opts.cookie);var globals="name,containerClass,zIndex,scrollToBookmarkOnLoad,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,"+"onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end,"+"autoBindCustomButtons,useStateCookie,showErrorMessages";
$.each(globals.split(","),function(i,key){if(opts[key]!==undefined)options[key]=opts[key];else if(opts.defaults[key]!==undefined){options[key]=opts.defaults[key];delete opts.defaults[key]}});$.each("paneSelector,resizerCursor,customHotkey".split(","),function(i,key){delete opts.defaults[key]});$.extend(true,options.defaults,opts.defaults);_c.center=$.extend(true,{},_c.panes,_c.center);var z=options.zIndex;if(z===0||z>0){_c.zIndex.pane_normal=z;_c.zIndex.resizer_normal=z+1;_c.zIndex.iframe_mask=z+
1}$.extend(options.center,opts.center);var o_Center=$.extend(true,{},options.defaults,opts.defaults,options.center);var optionsCenter=("paneClass,contentSelector,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,"+"onresize,onresize_start,onresize_end,resizeNestedLayout,resizeContentWhileDragging,findNestedContent,"+"onsizecontent,onsizecontent_start,onsizecontent_end").split(",");$.each(optionsCenter,function(i,key){options.center[key]=o_Center[key]});var o,defs=options.defaults;$.each(_c.borderPanes.split(","),
function(i,pane){_c[pane]=$.extend(true,{},_c.panes,_c[pane]);o=options[pane]=$.extend(true,{},options.defaults,options[pane],opts.defaults,opts[pane]);if(!o.paneClass)o.paneClass="ui-layout-pane";if(!o.resizerClass)o.resizerClass="ui-layout-resizer";if(!o.togglerClass)o.togglerClass="ui-layout-toggler";$.each(["_open","_close",""],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n;o[sName]=opts[pane][sName]||opts[pane].fxName||opts.defaults[sName]||opts.defaults.fxName||
o[sName]||o.fxName||defs[sName]||defs.fxName||"none";var fxName=o[sName];if(fxName=="none"||!$.effects||!$.effects[fxName]||!effects[fxName]&&!o[sSettings]&&!o.fxSettings)fxName=o[sName]="none";var fx=effects[fxName]||{},fx_all=fx.all||{},fx_pane=fx[pane]||{};o[sSettings]=$.extend({},fx_all,fx_pane,defs.fxSettings||{},defs[sSettings]||{},o.fxSettings,o[sSettings],opts.defaults.fxSettings,opts.defaults[sSettings]||{},opts[pane].fxSettings,opts[pane][sSettings]||{});o[sSpeed]=opts[pane][sSpeed]||opts[pane].fxSpeed||
opts.defaults[sSpeed]||opts.defaults.fxSpeed||o[sSpeed]||o[sSettings].duration||o.fxSpeed||o.fxSettings.duration||defs.fxSpeed||defs.fxSettings.duration||fx_pane.duration||fx_all.duration||"normal"})});function renameOpts(O){for(var key in newOpts)if(O[key]!=undefined){O[newOpts[key]]=O[key];delete O[key]}}},getPane=function(pane){var sel=options[pane].paneSelector;if(sel.substr(0,1)==="#")return $N.find(sel).eq(0);else{var $P=$N.children(sel).eq(0);return $P.length?$P:$N.children("form:first").children(sel).eq(0)}},
initPanes=function(){$.each(_c.allPanes.split(","),function(idx,pane){addPane(pane,true)});initHandles();$.each(_c.borderPanes.split(","),function(i,pane){if($Ps[pane]&&state[pane].isVisible){setSizeLimits(pane);makePaneFit(pane)}});sizeMidPanes("center");setTimeout(function(){$.each(_c.allPanes.split(","),function(i,pane){var o=options[pane];if($Ps[pane]&&state[pane].isVisible){if(o.triggerEventsOnLoad)_execCallback(pane,o.onresize_end||o.onresize);resizeNestedLayout(pane)}})},50);if(options.showErrorMessages&&
$N.innerHeight()<2)alert(lang.errContainerHeight.replace(/CONTAINER/,sC.ref))},addPane=function(pane,force){if(!force&&!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],fx=s.fx,dir=c.dir,spacing=o.spacing_open||0,isCenter=pane=="center",CSS={},$P=$Ps[pane],size,minSize,maxSize;if($P)removePane(pane);else $Cs[pane]=false;$P=$Ps[pane]=getPane(pane);if(!$P.length){$Ps[pane]=false;return}if(!$P.data("layoutCSS")){var props="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";
$P.data("layoutCSS",elCSS($P,props))}$P.data("parentLayout",Instance).data("layoutRole","pane").data("layoutEdge",pane).css(c.cssReq).css("zIndex",_c.zIndex.pane_normal).css(o.applyDemoStyles?c.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+pane).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);initContent(pane,false);if(!isCenter){size=s.size=_parseSize(pane,o.size);minSize=_parseSize(pane,o.minSize)||1;maxSize=_parseSize(pane,o.maxSize)||1E5;if(size>0)size=max(min(size,
maxSize),minSize);s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false}s.tagName=$P[0].tagName;s.edge=pane;s.noRoom=false;s.isVisible=true;switch(pane){case "north":CSS.top=sC.insetTop;CSS.left=sC.insetLeft;CSS.right=sC.insetRight;break;case "south":CSS.bottom=sC.insetBottom;CSS.left=sC.insetLeft;CSS.right=sC.insetRight;break;case "west":CSS.left=sC.insetLeft;break;case "east":CSS.right=sC.insetRight;break;case "center":}if(dir=="horz")CSS.height=max(1,cssH(pane,size));else if(dir==
"vert")CSS.width=max(1,cssW(pane,size));$P.css(CSS);if(dir!="horz")sizeMidPanes(pane,true);if(o.initClosed&&o.closable&&!o.initHidden)close(pane,true,true);else if(o.initHidden||o.initClosed)hide(pane);else if(!s.noRoom)$P.css("display","block");$P.css("visibility","visible");if(o.showOverflowOnHover)$P.hover(allowOverflow,resetOverflow);if(state.initialized){initHandles(pane);initHotkeys(pane);resizeAll();if(s.isVisible){if(o.triggerEventsOnLoad)_execCallback(pane,o.onresize_end||o.onresize);resizeNestedLayout(pane)}}},
initHandles=function(panes){if(!panes||panes=="all")panes=_c.borderPanes;$.each(panes.split(","),function(i,pane){var $P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P)return;var o=options[pane],s=state[pane],c=_c[pane],rClass=o.resizerClass,tClass=o.togglerClass,side=c.side.toLowerCase(),spacing=s.isVisible?o.spacing_open:o.spacing_closed,_pane="-"+pane,_state=s.isVisible?"-open":"-closed",$R=$Rs[pane]=$("<div></div>"),$T=o.closable?$Ts[pane]=$("<div></div>"):false;if(!s.isVisible&&o.slidable)$R.attr("title",
o.sliderTip).css("cursor",o.sliderCursor);$R.attr("id",o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"").data("parentLayout",Instance).data("layoutRole","resizer").data("layoutEdge",pane).css(_c.resizers.cssReq).css("zIndex",_c.zIndex.resizer_normal).css(o.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(rClass+" "+rClass+_pane).appendTo($N);if($T){$T.attr("id",o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"").data("parentLayout",Instance).data("layoutRole",
"toggler").data("layoutEdge",pane).css(_c.togglers.cssReq).css(o.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(tClass+" "+tClass+_pane).appendTo($R);if(o.togglerContent_open)$("<span>"+o.togglerContent_open+"</span>").data("layoutRole","togglerContent").data("layoutEdge",pane).addClass("content content-open").css("display","none").appendTo($T);if(o.togglerContent_closed)$("<span>"+o.togglerContent_closed+"</span>").data("layoutRole","togglerContent").data("layoutEdge",pane).addClass("content content-closed").css("display",
"none").appendTo($T);enableClosable(pane)}initResizable(pane);if(s.isVisible)setAsOpen(pane);else{setAsClosed(pane);bindStartSlidingEvent(pane,true)}});sizeHandles("all")},initContent=function(pane,resize){if(!isInitialized())return;var o=options[pane],sel=o.contentSelector,$P=$Ps[pane],$C;if(sel)$C=$Cs[pane]=o.findNestedContent?$P.find(sel).eq(0):$P.children(sel).eq(0);if($C&&$C.length){if(!$C.data("layoutCSS"))$C.data("layoutCSS",elCSS($C,"height"));$C.css(_c.content.cssReq);if(o.applyDemoStyles){$C.css(_c.content.cssDemo);
$P.css(_c.content.cssDemoPane)}state[pane].content={};if(resize!==false)sizeContent(pane)}else $Cs[pane]=false},initButtons=function(){var pre="ui-layout-button-",name;$.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(i,action){$.each(_c.borderPanes.split(","),function(ii,pane){$("."+pre+action+"-"+pane).each(function(){name=$(this).data("layoutName")||$(this).attr("layoutName");if(name==undefined||name==options.name)bindButton(this,action,pane)})})})},initResizable=function(panes){var draggingAvailable=
typeof $.fn.draggable=="function",$Frames,side;if(!panes||panes=="all")panes=_c.borderPanes;$.each(panes.split(","),function(idx,pane){var o=options[pane],s=state[pane],c=_c[pane],side=c.dir=="horz"?"top":"left",r,live;if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var $P=$Ps[pane],$R=$Rs[pane],base=o.resizerClass,resizerClass=base+"-drag",resizerPaneClass=base+"-"+pane+"-drag",helperClass=base+"-dragging",helperPaneClass=base+"-"+pane+"-dragging",helperLimitClass=
base+"-dragging-limit",helperPaneLimitClass=base+"-"+pane+"-dragging-limit",helperClassesSet=false;if(!s.isClosed)$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor);$R.bind("mouseenter."+sID,onResizerEnter).bind("mouseleave."+sID,onResizerLeave);$R.draggable({containment:$N[0],axis:c.dir=="horz"?"y":"x",delay:0,distance:1,helper:"clone",opacity:o.resizerDragOpacity,addClasses:false,zIndex:_c.zIndex.resizer_drag,start:function(e,ui){o=options[pane];s=state[pane];live=o.resizeWhileDragging;
if(false===_execCallback(pane,o.ondrag_start))return false;_c.isLayoutBusy=true;s.isResizing=true;timer.clear(pane+"_closeSlider");setSizeLimits(pane);r=s.resizerPosition;$R.addClass(resizerClass+" "+resizerPaneClass);helperClassesSet=false;$Frames=$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).filter(":visible");var id,i=0;$Frames.each(function(){id="ui-layout-mask-"+ ++i;$(this).data("layoutMaskID",id);$('<div id="'+id+'" class="ui-layout-mask ui-layout-mask-'+pane+'"/>').css({background:"#fff",
opacity:"0.001",zIndex:_c.zIndex.iframe_mask,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).position()).appendTo(this.parentNode)});$("body").disableSelection()},drag:function(e,ui){if(!helperClassesSet){ui.helper.addClass(helperClass+" "+helperPaneClass).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden");helperClassesSet=true;if(s.isSliding)$Ps[pane].css("zIndex",_c.zIndex.pane_sliding)}var limit=0;if(ui.position[side]<r.min){ui.position[side]=
r.min;limit=-1}else if(ui.position[side]>r.max){ui.position[side]=r.max;limit=1}if(limit){ui.helper.addClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus="Panel has reached its "+(limit>0&&pane.match(/north|west/)||limit<0&&pane.match(/south|east/)?"maximum":"minimum")+" size"}else{ui.helper.removeClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=""}if(live)resizePanes(e,ui,pane)},stop:function(e,ui){$("body").enableSelection();window.defaultStatus="";$R.removeClass(resizerClass+
" "+resizerPaneClass);s.isResizing=false;_c.isLayoutBusy=false;resizePanes(e,ui,pane,true)}});var resizePanes=function(evt,ui,pane,resizingDone){var dragPos=ui.position,c=_c[pane],resizerPos,newSize,i=0;switch(pane){case "north":resizerPos=dragPos.top;break;case "west":resizerPos=dragPos.left;break;case "south":resizerPos=sC.offsetHeight-dragPos.top-o.spacing_open;break;case "east":resizerPos=sC.offsetWidth-dragPos.left-o.spacing_open;break}if(resizingDone){$("div.ui-layout-mask").each(function(){this.parentNode.removeChild(this)});
if(false===_execCallback(pane,o.ondrag_end||o.ondrag))return false}else $Frames.each(function(){$("#"+$(this).data("layoutMaskID")).css($(this).position()).css({width:this.offsetWidth+"px",height:this.offsetHeight+"px"})});newSize=resizerPos-sC["inset"+c.side];manualSizePane(pane,newSize)}})},destroy=function(){$(window).unbind("."+sID);$(document).unbind("."+sID);$.each(_c.allPanes.split(","),function(i,pane){removePane(pane,false,true)});$N.removeData("layout").removeData("layoutContainer").removeClass(options.containerClass);
if(!$N.data("layoutEdge")&&$N.data("layoutCSS"))$N.css($N.data("layoutCSS")).removeData("layoutCSS");if(sC.tagName=="BODY"&&($N=$("html")).data("layoutCSS"))$N.css($N.data("layoutCSS")).removeData("layoutCSS");unload()},removePane=function(pane,remove,skipResize){if(!isInitialized())return;if(!$Ps[pane])return;var $P=$Ps[pane],$C=$Cs[pane],$R=$Rs[pane],$T=$Ts[pane],_open="-open",_sliding="-sliding",_closed="-closed",root=options[pane].paneClass,pRoot=root+"-"+pane,classes=[root,root+_open,root+_closed,
root+_sliding,pRoot,pRoot+_open,pRoot+_closed,pRoot+_sliding];$.merge(classes,getHoverClasses($P,true));if(!$P||!$P.length);else if(remove&&!$P.data("layoutContainer")&&(!$C||!$C.length||!$C.data("layoutContainer")))$P.remove();else{$P.removeClass(classes.join(" ")).removeData("layoutParent").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID);if(!$P.data("layoutContainer"))$P.css($P.data("layoutCSS")).removeData("layoutCSS");if($C&&$C.length&&!$C.data("layoutContainer"))$C.css($C.data("layoutCSS")).removeData("layoutCSS")}if($T&&
$T.length)$T.remove();if($R&&$R.length)$R.remove();$Ps[pane]=$Cs[pane]=$Rs[pane]=$Ts[pane]=false;if(!skipResize){resizeAll();state[pane]={}}},hide=function(pane,noAnimation){if(!isInitialized())return;var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden)return;if(state.initialized&&false===_execCallback(pane,o.onhide_start))return;s.isSliding=false;if($R)$R.hide();if(!state.initialized||s.isClosed){s.isClosed=true;s.isHidden=true;s.isVisible=false;$P.hide();sizeMidPanes(_c[pane].dir==
"horz"?"all":"center");if(state.initialized||o.triggerEventsOnLoad)_execCallback(pane,o.onhide_end||o.onhide)}else{s.isHiding=true;close(pane,false,noAnimation)}},show=function(pane,openPane,noAnimation,noAlert){if(!isInitialized())return;var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden)return;if(false===_execCallback(pane,o.onshow_start))return;s.isSliding=false;s.isShowing=true;if(openPane===false)close(pane,true);else open(pane,false,noAnimation,noAlert)},toggle=
function(pane,slide){if(!isInitialized())return;if(!isStr(pane)){pane.stopImmediatePropagation();pane=$(this).data("layoutEdge")}var s=state[str(pane)];if(s.isHidden)show(pane);else if(s.isClosed)open(pane,!!slide);else close(pane)},_closePane=function(pane,setHandles){var $P=$Ps[pane],s=state[pane];$P.hide();s.isClosed=true;s.isVisible=false},close=function(pane,force,noAnimation,skipCallback){if(!state.initialized&&$Ps[pane]){_closePane(pane);return}if(!isInitialized())return;var $P=$Ps[pane],$R=
$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&!s.isClosed&&o.fxName_close!="none",isShowing=s.isShowing,isHiding=s.isHiding,wasSliding=s.isSliding;delete s.isShowing;delete s.isHiding;if(!$P||!o.closable&&!isShowing&&!isHiding)return;else if(!force&&s.isClosed&&!isShowing)return;if(_c.isLayoutBusy){_queue("close",pane,force);return}if(!isShowing&&false===_execCallback(pane,o.onclose_start))return;_c[pane].isMoving=true;_c.isLayoutBusy=true;s.isClosed=true;s.isVisible=false;
if(isHiding)s.isHidden=true;else if(isShowing)s.isHidden=false;if(s.isSliding)bindStopSlidingEvents(pane,false);else sizeMidPanes(_c[pane].dir=="horz"?"all":"center",false);setAsClosed(pane);if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);close_2()})}else{$P.hide();close_2()}function close_2(){if(s.isClosed){bindStartSlidingEvent(pane,true);var altPane=_c.altSide[pane];if(state[altPane].noRoom){setSizeLimits(altPane);
makePaneFit(altPane)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)){if(!isShowing)_execCallback(pane,o.onclose_end||o.onclose);if(isShowing)_execCallback(pane,o.onshow_end||o.onshow);if(isHiding)_execCallback(pane,o.onhide_end||o.onhide)}}_dequeue(pane)}},setAsClosed=function(pane){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side.toLowerCase(),inset="inset"+_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",
_sliding="-sliding",_closed="-closed";$R.css(side,sC[inset]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed).unbind("dblclick."+sID);if(o.resizable&&typeof $.fn.draggable=="function")$R.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",
o.togglerTip_closed);$T.children(".content-open").hide();$T.children(".content-closed").css("display","block")}syncPinBtns(pane,false);if(state.initialized)sizeHandles("all")},open=function(pane,slide,noAnimation,noAlert){if(!isInitialized())return;var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&s.isClosed&&o.fxName_open!="none",isShowing=s.isShowing;delete s.isShowing;if(!$P||!o.resizable&&!o.closable&&!isShowing)return;else if(s.isVisible&&!s.isSliding)return;
if(s.isHidden&&!isShowing){show(pane,true);return}if(_c.isLayoutBusy){_queue("open",pane,slide);return}setSizeLimits(pane,slide);if(false===_execCallback(pane,o.onopen_start))return;setSizeLimits(pane,slide);if(s.minSize>s.maxSize){syncPinBtns(pane,false);if(!noAlert&&o.noRoomToOpenTip)alert(o.noRoomToOpenTip);return}_c[pane].isMoving=true;_c.isLayoutBusy=true;if(slide)bindStopSlidingEvents(pane,true);else if(s.isSliding)bindStopSlidingEvents(pane,false);else if(o.slidable)bindStartSlidingEvent(pane,
false);s.noRoom=false;makePaneFit(pane);s.isVisible=true;s.isClosed=false;if(isShowing)s.isHidden=false;if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);open_2()})}else{$P.show();open_2()}function open_2(){if(s.isVisible){_fixIframe(pane);if(!s.isSliding)sizeMidPanes(_c[pane].dir=="vert"?"center":"all",false);setAsOpen(pane)}_dequeue(pane)}},setAsOpen=function(pane,skipCallback){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],
o=options[pane],s=state[pane],side=_c[pane].side.toLowerCase(),inset="inset"+_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding";$R.css(side,sC[inset]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open);if(s.isSliding)$R.addClass(rClass+_sliding+" "+rClass+_pane+_sliding);else $R.removeClass(rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizerDblClickToggle)$R.bind("dblclick",
toggle);removeHover(0,$R);if(o.resizable&&typeof $.fn.draggable=="function")$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip);else if(!s.isSliding)$R.css("cursor","default");if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open);removeHover(0,$T);$T.children(".content-closed").hide();$T.children(".content-open").css("display","block")}syncPinBtns(pane,!s.isSliding);$.extend(s,elDims($P));
if(state.initialized){sizeHandles("all");sizeContent(pane,true)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)&&$P.is(":visible")){_execCallback(pane,o.onopen_end||o.onopen);if(s.isShowing)_execCallback(pane,o.onshow_end||o.onshow);if(state.initialized){_execCallback(pane,o.onresize_end||o.onresize);resizeNestedLayout(pane)}}},slideOpen=function(evt_or_pane){if(!isInitialized())return;var evt=isStr(evt_or_pane)?null:evt_or_pane,pane=evt?$(this).data("layoutEdge"):evt_or_pane,s=state[pane],
delay=options[pane].slideDelay_open;if(evt)evt.stopImmediatePropagation();if(s.isClosed&&evt&&evt.type=="mouseenter"&&delay>0)timer.set(pane+"_openSlider",open_NOW,delay);else open_NOW();function open_NOW(evt){if(!s.isClosed)bindStopSlidingEvents(pane,true);else if(!_c[pane].isMoving)open(pane,true)}},slideClose=function(evt_or_pane){if(!isInitialized())return;var evt=isStr(evt_or_pane)?null:evt_or_pane,pane=evt?$(this).data("layoutEdge"):evt_or_pane,o=options[pane],s=state[pane],delay=_c[pane].isMoving?
1E3:300;if(s.isClosed||s.isResizing)return;else if(o.slideTrigger_close=="click")close_NOW();else if(o.preventQuickSlideClose&&_c.isLayoutBusy)return;else if(o.preventPrematureSlideClose&&evt&&$.layout.isMouseOverElem(evt,$Ps[pane]))return;else if(evt)timer.set(pane+"_closeSlider",close_NOW,max(o.slideDelay_close,delay));else close_NOW();function close_NOW(){if(s.isClosed)bindStopSlidingEvents(pane,false);else if(!_c[pane].isMoving)close(pane)}},slideToggle=function(pane){toggle(pane,true)},lockPaneForFX=
function(pane,doLock){var $P=$Ps[pane];if(doLock){$P.css({zIndex:_c.zIndex.pane_animate});if(pane=="south")$P.css({top:sC.insetTop+sC.innerHeight-$P.outerHeight()});else if(pane=="east")$P.css({left:sC.insetLeft+sC.innerWidth-$P.outerWidth()})}else{$P.css({zIndex:state[pane].isSliding?_c.zIndex.pane_sliding:_c.zIndex.pane_normal});if(pane=="south")$P.css({top:"auto"});else if(pane=="east")$P.css({left:"auto"});var o=options[pane];if($.layout.browser.msie&&o.fxOpacityFix&&o.fxName_open!="slide"&&$P.css("filter")&&
$P.css("opacity")==1)$P[0].style.removeAttribute("filter")}},bindStartSlidingEvent=function(pane,enable){var o=options[pane],$P=$Ps[pane],$R=$Rs[pane],trigger=o.slideTrigger_open.toLowerCase();if(!$R||enable&&!o.slidable)return;if(trigger.match(/mouseover/))trigger=o.slideTrigger_open="mouseenter";else if(!trigger.match(/click|dblclick|mouseenter/))trigger=o.slideTrigger_open="click";$R[enable?"bind":"unbind"](trigger+"."+sID,slideOpen).css("cursor",enable?o.sliderCursor:"default").attr("title",enable?
o.sliderTip:"")},bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],z=_c.zIndex,trigger=o.slideTrigger_close.toLowerCase(),action=enable?"bind":"unbind",$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;timer.clear(pane+"_closeSlider");if(enable)bindStartSlidingEvent(pane,false);$P.css("zIndex",enable?z.pane_sliding:z.pane_normal);$R.css("zIndex",enable?z.pane_sliding:z.resizer_normal);if(!trigger.match(/click|mouseleave/))trigger=o.slideTrigger_close="mouseleave";$R[action](trigger,
slideClose);if(trigger=="mouseleave"){$P[action]("mouseleave."+sID,slideClose);$R[action]("mouseenter."+sID,cancelMouseOut);$P[action]("mouseenter."+sID,cancelMouseOut)}if(!enable)timer.clear(pane+"_closeSlider");else if(trigger=="click"&&!o.resizable){$R.css("cursor",enable?o.sliderCursor:"default");$R.attr("title",enable?o.togglerTip_open:"")}function cancelMouseOut(evt){timer.clear(pane+"_closeSlider");evt.stopPropagation()}},makePaneFit=function(pane,isOpening,skipCallback,force){var o=options[pane],
s=state[pane],c=_c[pane],$P=$Ps[pane],$R=$Rs[pane],isSidePane=c.dir=="vert",hasRoom=false;if(pane=="center"||isSidePane&&s.noVerticalRoom){hasRoom=s.maxHeight>0;if(hasRoom&&s.noRoom){$P.show();if($R)$R.show();s.isVisible=true;s.noRoom=false;if(isSidePane)s.noVerticalRoom=false;_fixIframe(pane)}else if(!hasRoom&&!s.noRoom){$P.hide();if($R)$R.hide();s.isVisible=false;s.noRoom=true}}if(pane=="center");else if(s.minSize<=s.maxSize){hasRoom=true;if(s.size>s.maxSize)sizePane(pane,s.maxSize,skipCallback,
force);else if(s.size<s.minSize)sizePane(pane,s.minSize,skipCallback,force);else if($R&&$P.is(":visible")){var side=c.side.toLowerCase(),pos=s.size+sC["inset"+c.side];if($.layout.cssNum($R,side)!=pos)$R.css(side,pos)}if(s.noRoom)if(s.wasOpen&&o.closable)if(o.autoReopen)open(pane,false,true,true);else s.noRoom=false;else show(pane,s.wasOpen,true,true)}else if(!s.noRoom){s.noRoom=true;s.wasOpen=!s.isClosed&&!s.isSliding;if(s.isClosed);else if(o.closable)close(pane,true,true);else hide(pane,true)}},
manualSizePane=function(pane,size,skipCallback){if(!isInitialized())return;var o=options[pane],forceResize=o.resizeWhileDragging&&!_c.isLayoutBusy;o.autoResize=false;sizePane(pane,size,skipCallback,forceResize)},sizePane=function(pane,size,skipCallback,force){if(!isInitialized())return;var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],side=_c[pane].side.toLowerCase(),dimName=_c[pane].sizeType.toLowerCase(),inset="inset"+_c[pane].side,skipResizeWhileDragging=_c.isLayoutBusy&&!o.triggerEventsWhileDragging,
oldSize;setSizeLimits(pane);oldSize=s.size;size=_parseSize(pane,size);size=max(size,_parseSize(pane,o.minSize));size=min(size,s.maxSize);if(size<s.minSize){makePaneFit(pane,false,skipCallback);return}if(!force&&size==oldSize)return;if(!skipCallback&&state.initialized&&s.isVisible)_execCallback(pane,o.onresize_start);$P.css(dimName,max(1,cssSize(pane,size)));s.size=size;$.extend(s,elDims($P));if($R&&$P.is(":visible"))$R.css(side,size+sC[inset]);sizeContent(pane);if(!skipCallback&&!skipResizeWhileDragging&&
state.initialized&&s.isVisible){_execCallback(pane,o.onresize_end||o.onresize);resizeNestedLayout(pane)}if(!skipCallback){if(!s.isSliding)sizeMidPanes(_c[pane].dir=="horz"?"all":"center",skipResizeWhileDragging,force);sizeHandles("all")}var altPane=_c.altSide[pane];if(size<oldSize&&state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane,false,skipCallback)}},sizeMidPanes=function(panes,skipCallback,force){if(!panes||panes=="all")panes="east,west,center";$.each(panes.split(","),function(i,
pane){if(!$Ps[pane])return;var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],isCenter=pane=="center",hasRoom=true,CSS={},newCenter=calcNewCenterPaneDims();$.extend(s,elDims($P));if(pane=="center"){if(!force&&s.isVisible&&newCenter.width==s.outerWidth&&newCenter.height==s.outerHeight)return true;$.extend(s,cssMinDims(pane),{maxWidth:newCenter.width,maxHeight:newCenter.height});CSS=newCenter;CSS.width=cssW(pane,CSS.width);CSS.height=cssH(pane,CSS.height);hasRoom=CSS.width>0&&CSS.height>0;
if(!hasRoom&&!state.initialized&&o.minWidth>0){var reqPx=o.minWidth-s.outerWidth,minE=options.east.minSize||0,minW=options.west.minSize||0,sizeE=state.east.size,sizeW=state.west.size,newE=sizeE,newW=sizeW;if(reqPx>0&&state.east.isVisible&&sizeE>minE){newE=max(sizeE-minE,sizeE-reqPx);reqPx-=sizeE-newE}if(reqPx>0&&state.west.isVisible&&sizeW>minW){newW=max(sizeW-minW,sizeW-reqPx);reqPx-=sizeW-newW}if(reqPx==0){if(sizeE!=minE)sizePane("east",newE,true);if(sizeW!=minW)sizePane("west",newW,true);sizeMidPanes("center",
skipCallback,force);return}}}else{if(s.isVisible&&!s.noVerticalRoom)$.extend(s,elDims($P),cssMinDims(pane));if(!force&&!s.noVerticalRoom&&newCenter.height==s.outerHeight)return true;CSS.top=newCenter.top;CSS.bottom=newCenter.bottom;CSS.height=cssH(pane,newCenter.height);s.maxHeight=max(0,CSS.height);hasRoom=s.maxHeight>0;if(!hasRoom)s.noVerticalRoom=true}if(hasRoom){if(!skipCallback&&state.initialized)_execCallback(pane,o.onresize_start);$P.css(CSS);if(s.noRoom&&!s.isClosed&&!s.isHidden)makePaneFit(pane);
if(s.isVisible){$.extend(s,elDims($P));if(state.initialized)sizeContent(pane)}}else if(!s.noRoom&&s.isVisible)makePaneFit(pane);if(!s.isVisible)return true;if(pane=="center"){var b=$.layout.browser;var fix=b.isIE6||b.msie&&!b.boxModel;if($Ps.north&&(fix||state.north.tagName=="IFRAME"))$Ps.north.css("width",cssW($Ps.north,sC.innerWidth));if($Ps.south&&(fix||state.south.tagName=="IFRAME"))$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}if(!skipCallback&&state.initialized){_execCallback(pane,o.onresize_end||
o.onresize);resizeNestedLayout(pane)}})},resizeAll=function(){if(!state.initialized){_initLayoutElements();return}var oldW=sC.innerWidth,oldH=sC.innerHeight;if(!$N.is(":visible:"))return;$.extend(state.container,elDims($N));if(!sC.outerHeight)return;if(false===_execCallback(null,options.onresizeall_start))return false;var shrunkH=sC.innerHeight<oldH,shrunkW=sC.innerWidth<oldW,$P,o,s,dir;$.each(["south","north","east","west"],function(i,pane){if(!$Ps[pane])return;s=state[pane];o=options[pane];dir=
_c[pane].dir;if(o.autoResize&&s.size!=o.size)sizePane(pane,o.size,true,true);else{setSizeLimits(pane);makePaneFit(pane,false,true,true)}});sizeMidPanes("all",true,true);sizeHandles("all");o=options;$.each(_c.allPanes.split(","),function(i,pane){$P=$Ps[pane];if(!$P)return;if(state[pane].isVisible){_execCallback(pane,o[pane].onresize_end||o[pane].onresize);resizeNestedLayout(pane)}});_execCallback(null,o.onresizeall_end||o.onresizeall)},resizeNestedLayout=function(pane){var $P=$Ps[pane],$C=$Cs[pane],
d="layoutContainer";if(options[pane].resizeNestedLayout)if($P.data(d))$P.layout().resizeAll();else if($C&&$C.data(d))$C.layout().resizeAll()},sizeContent=function(panes,remeasure){if(!isInitialized())return;if(!panes||panes=="all")panes=_c.allPanes;$.each(panes.split(","),function(idx,pane){var $P=$Ps[pane],$C=$Cs[pane],o=options[pane],s=state[pane],m=s.content;if(!$P||!$C||!$P.is(":visible"))return true;if(false===_execCallback(null,o.onsizecontent_start))return;if(!_c.isLayoutBusy||m.top==undefined||
remeasure||o.resizeContentWhileDragging){_measure();if(m.hiddenFooters>0&&$P.css("overflow")=="hidden"){$P.css("overflow","visible");_measure();$P.css("overflow","hidden")}}var newH=s.innerHeight-(m.spaceAbove-s.css.paddingTop)-(m.spaceBelow-s.css.paddingBottom);if(!$C.is(":visible")||m.height!=newH){setOuterHeight($C,newH,true);m.height=newH}if(state.initialized){_execCallback(pane,o.onsizecontent_end||o.onsizecontent);resizeNestedLayout(pane)}function _below($E){return max(s.css.paddingBottom,parseInt($E.css("marginBottom"),
10)||0)}function _measure(){var ignore=options[pane].contentIgnoreSelector,$Fs=$C.nextAll().not(ignore||":lt(0)"),$Fs_vis=$Fs.filter(":visible"),$F=$Fs_vis.filter(":last");m={top:$C[0].offsetTop,height:$C.outerHeight(),numFooters:$Fs.length,hiddenFooters:$Fs.length-$Fs_vis.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;if($F.length)m.spaceBelow=$F[0].offsetTop+$F.outerHeight()-m.bottom+_below($F);else m.spaceBelow=_below($C)}})},sizeHandles=function(panes){if(!panes||panes=="all")panes=
_c.borderPanes;$.each(panes.split(","),function(i,pane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],$TC;if(!$P||!$R)return;var dir=_c[pane].dir,_state=s.isClosed?"_closed":"_open",spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,offset,CSS={};if(spacing==0){$R.hide();return}else if(!s.noRoom&&!s.isHidden)$R.show();if(dir=="horz"){paneLen=$P.outerWidth();s.resizerLength=paneLen;$R.css({width:max(1,cssW($R,paneLen)),
height:max(0,cssH($R,spacing)),left:$.layout.cssNum($P,"left")})}else{paneLen=$P.outerHeight();s.resizerLength=paneLen;$R.css({height:max(1,cssH($R,paneLen)),width:max(0,cssW($R,spacing)),top:sC.insetTop+getPaneSize("north",true)})}removeHover(o,$R);if($T){if(togLen==0||s.isSliding&&o.hideTogglerOnSlide){$T.hide();return}else $T.show();if(!(togLen>0)||togLen=="100%"||togLen>paneLen){togLen=paneLen;offset=0}else if(isStr(togAlign))switch(togAlign){case "top":case "left":offset=0;break;case "bottom":case "right":offset=
paneLen-togLen;break;case "middle":case "center":default:offset=Math.floor((paneLen-togLen)/2)}else{var x=parseInt(togAlign,10);if(togAlign>=0)offset=x;else offset=paneLen-togLen+x}if(dir=="horz"){var width=cssW($T,togLen);$T.css({width:max(0,width),height:max(1,cssH($T,spacing)),left:offset,top:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginLeft",Math.floor((width-$TC.outerWidth())/2))})}else{var height=cssH($T,togLen);$T.css({height:max(0,height),width:max(1,cssW($T,spacing)),
top:offset,left:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginTop",Math.floor((height-$TC.outerHeight())/2))})}removeHover(0,$T)}if(!state.initialized&&(o.initHidden||s.noRoom)){$R.hide();if($T)$T.hide()}})},enableClosable=function(pane){if(!isInitialized())return;var $T=$Ts[pane],o=options[pane];if(!$T)return;o.closable=true;$T.bind("click."+sID,function(evt){evt.stopPropagation();toggle(pane)}).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover).css("visibility",
"visible").css("cursor","pointer").attr("title",state[pane].isClosed?o.togglerTip_closed:o.togglerTip_open).show()},disableClosable=function(pane,hide){if(!isInitialized())return;var $T=$Ts[pane];if(!$T)return;options[pane].closable=false;if(state[pane].isClosed)open(pane,false,true);$T.unbind("."+sID).css("visibility",hide?"hidden":"visible").css("cursor","default").attr("title","")},enableSlidable=function(pane){if(!isInitialized())return;var $R=$Rs[pane],o=options[pane];if(!$R||!$R.data("draggable"))return;
options[pane].slidable=true;if(s.isClosed)bindStartSlidingEvent(pane,true)},disableSlidable=function(pane){if(!isInitialized())return;var $R=$Rs[pane];if(!$R)return;options[pane].slidable=false;if(state[pane].isSliding)close(pane,false,true);else{bindStartSlidingEvent(pane,false);$R.css("cursor","default").attr("title","");removeHover(null,$R[0])}},enableResizable=function(pane){if(!isInitialized())return;var $R=$Rs[pane],o=options[pane];if(!$R||!$R.data("draggable"))return;o.resizable=true;$R.draggable("enable").bind("mouseenter."+
sID,onResizerEnter).bind("mouseleave."+sID,onResizerLeave);if(!state[pane].isClosed)$R.css("cursor",o.resizerCursor).attr("title",o.resizerTip)},disableResizable=function(pane){if(!isInitialized())return;var $R=$Rs[pane];if(!$R||!$R.data("draggable"))return;options[pane].resizable=false;$R.draggable("disable").unbind("."+sID).css("cursor","default").attr("title","");removeHover(null,$R[0])},swapPanes=function(pane1,pane2){if(!isInitialized())return;state[pane1].edge=pane2;state[pane2].edge=pane1;
var cancelled=false;if(false===_execCallback(pane1,options[pane1].onswap_start))cancelled=true;if(!cancelled&&false===_execCallback(pane2,options[pane2].onswap_start))cancelled=true;if(cancelled){state[pane1].edge=pane1;state[pane2].edge=pane2;return}var oPane1=copy(pane1),oPane2=copy(pane2),sizes={};sizes[pane1]=oPane1?oPane1.state.size:0;sizes[pane2]=oPane2?oPane2.state.size:0;$Ps[pane1]=false;$Ps[pane2]=false;state[pane1]={};state[pane2]={};if($Ts[pane1])$Ts[pane1].remove();if($Ts[pane2])$Ts[pane2].remove();
if($Rs[pane1])$Rs[pane1].remove();if($Rs[pane2])$Rs[pane2].remove();$Rs[pane1]=$Rs[pane2]=$Ts[pane1]=$Ts[pane2]=false;move(oPane1,pane2);move(oPane2,pane1);oPane1=oPane2=sizes=null;if($Ps[pane1])$Ps[pane1].css(_c.visible);if($Ps[pane2])$Ps[pane2].css(_c.visible);resizeAll();_execCallback(pane1,options[pane1].onswap_end||options[pane1].onswap);_execCallback(pane2,options[pane2].onswap_end||options[pane2].onswap);return;function copy(n){var $P=$Ps[n],$C=$Cs[n];return!$P?false:{pane:n,P:$P?$P[0]:false,
C:$C?$C[0]:false,state:$.extend({},state[n]),options:$.extend({},options[n])}}function move(oPane,pane){if(!oPane)return;var P=oPane.P,C=oPane.C,oldPane=oPane.pane,c=_c[pane],side=c.side.toLowerCase(),inset="inset"+c.side,s=$.extend({},state[pane]),o=options[pane],fx={resizerCursor:o.resizerCursor},re,size,pos;$.each("fxName,fxSpeed,fxSettings".split(","),function(i,k){fx[k]=o[k];fx[k+"_open"]=o[k+"_open"];fx[k+"_close"]=o[k+"_close"]});$Ps[pane]=$(P).data("layoutEdge",pane).css(_c.hidden).css(c.cssReq);
$Cs[pane]=C?$(C):false;options[pane]=$.extend({},oPane.options,fx);state[pane]=$.extend({},oPane.state);re=new RegExp(o.paneClass+"-"+oldPane,"g");P.className=P.className.replace(re,o.paneClass+"-"+pane);initHandles(pane);if(c.dir!=_c[oldPane].dir){size=sizes[pane]||0;setSizeLimits(pane);size=max(size,state[pane].minSize);manualSizePane(pane,size,true)}else $Rs[pane].css(side,sC[inset]+(state[pane].isVisible?getPaneSize(pane):0));if(oPane.state.isVisible&&!s.isVisible)setAsOpen(pane,true);else{setAsClosed(pane);
bindStartSlidingEvent(pane,true)}oPane=null}};function keyDown(evt){if(!evt)return true;var code=evt.keyCode;if(code<33)return true;var PANE={38:"north",40:"south",37:"west",39:"east"},ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,CURSOR=CTRL&&code>=37&&code<=40,o,k,m,pane;if(CURSOR&&options[PANE[code]].enableCursorHotkey)pane=PANE[code];else if(CTRL||SHIFT)$.each(_c.borderPanes.split(","),function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if(SHIFT&&m=="SHIFT"||CTRL&&m=="CTRL"||
CTRL&&SHIFT)if(k&&code==(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}});if(!pane||!$Ps[pane]||!options[pane].closable||state[pane].isHidden)return true;toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}});if(!$P||
!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane];if(s.cssSaved)resetOverflow(pane);if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:_c.zIndex.pane_normal+2},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&!ofX.match(/visible|auto/)){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&!ofY.match(/visible|auto/)){curCSS.overflowY=ofX;newCSS.overflowY=
"visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(_c.allPanes.split(","),function(i,p){if(p!=pane)resetOverflow(p)})}function resetOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}});if(!$P||!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing)$P.css("zIndex",
_c.zIndex.pane_normal);$P.css(CSS);s.cssSaved=false}function getBtn(selector,pane,action){var $E=$(selector),err=options.showErrorMessages;if(!$E.length){if(err)alert(lang.errButton+lang.selector+": "+selector)}else if(_c.borderPanes.indexOf(pane)==-1){if(err)alert(lang.errButton+lang.pane+": "+pane)}else{var btn=options[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane).data("layoutName",options.name);return $E}return null}function bindButton(selector,action,pane){switch(action.toLowerCase()){case "toggle":addToggleBtn(selector,
pane);break;case "open":addOpenBtn(selector,pane);break;case "close":addCloseBtn(selector,pane);break;case "pin":addPinBtn(selector,pane);break;case "toggle-slide":addToggleBtn(selector,pane,true);break;case "open-slide":addOpenBtn(selector,pane,true);break}}function addToggleBtn(selector,pane,slide){var $E=getBtn(selector,pane,"toggle");if($E)$E.click(function(evt){toggle(pane,!!slide);evt.stopPropagation()})}function addOpenBtn(selector,pane,slide){var $E=getBtn(selector,pane,"open");if($E)$E.attr("title",
lang.Open).click(function(evt){open(pane,!!slide);evt.stopPropagation()})}function addCloseBtn(selector,pane){var $E=getBtn(selector,pane,"close");if($E)$E.attr("title",lang.Close).click(function(evt){close(pane);evt.stopPropagation()})}function addPinBtn(selector,pane){var $E=getBtn(selector,pane,"pin");if($E){var s=state[pane];$E.click(function(evt){setPinState($(this),pane,s.isSliding||s.isClosed);if(s.isSliding||s.isClosed)open(pane);else close(pane);evt.stopPropagation()});setPinState($E,pane,
!s.isClosed&&!s.isSliding);_c[pane].pins.push(selector)}}function syncPinBtns(pane,doPin){$.each(_c[pane].pins,function(i,selector){setPinState($(selector),pane,doPin)})}function setPinState($Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin==(updown=="down"))return;var pin=options[pane].buttonClass+"-pin",side=pin+"-"+pane,UP=pin+"-up "+side+"-up",DN=pin+"-down "+side+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?lang.Unpin:lang.Pin).removeClass(doPin?UP:DN).addClass(doPin?
DN:UP)}function isCookiesEnabled(){return navigator.cookieEnabled!=0}function getCookie(opts){var o=$.extend({},options.cookie,opts||{}),name=o.name||options.name||"Layout",c=document.cookie,cs=c?c.split(";"):[],pair;for(var i=0,n=cs.length;i<n;i++){pair=$.trim(cs[i]).split("=");if(pair[0]==name)return decodeJSON(decodeURIComponent(pair[1]))}return""}function saveCookie(keys,opts){var o=$.extend({},options.cookie,opts||{}),name=o.name||options.name||"Layout",params="",date="",clear=false;if(o.expires.toUTCString)date=
o.expires;else if(typeof o.expires=="number"){date=new Date;if(o.expires>0)date.setDate(date.getDate()+o.expires);else{date.setYear(1970);clear=true}}if(date)params+=";expires="+date.toUTCString();if(o.path)params+=";path="+o.path;if(o.domain)params+=";domain="+o.domain;if(o.secure)params+=";secure";if(clear){state.cookie={};document.cookie=name+"="+params}else{state.cookie=getState(keys||o.keys);document.cookie=name+"="+encodeURIComponent(encodeJSON(state.cookie))+params}return $.extend({},state.cookie)}
function deleteCookie(){saveCookie("",{expires:-1})}function loadCookie(opts){var o=getCookie(opts);if(o){state.cookie=$.extend({},o);loadState(o)}return o}function loadState(opts,animate){opts=_transformData(opts);$.extend(true,options,opts);if(state.initialized){var pane,o,s,h,c,a=!animate;$.each(_c.allPanes.split(","),function(idx,pane){o=opts[pane];if(typeof o!="object")return;s=o.size;c=o.initClosed;h=o.initHidden;if(s>0||s=="auto")sizePane(pane,s);if(h===true)hide(pane,a);else if(c===false)open(pane,
false,a);else if(c===true)close(pane,false,a);else if(h===false)show(pane,false,a)})}}function getState(keys){var data={},alt={isClosed:"initClosed",isHidden:"initHidden"},pair,pane,key,val;if(!keys)keys=options.cookie.keys;if($.isArray(keys))keys=keys.join(",");keys=keys.replace(/__/g,".").split(",");for(var i=0,n=keys.length;i<n;i++){pair=keys[i].split(".");pane=pair[0];key=pair[1];if(_c.allPanes.indexOf(pane)<0)continue;val=state[pane][key];if(val==undefined)continue;if(key=="isClosed"&&state[pane]["isSliding"])val=
true;(data[pane]||(data[pane]={}))[alt[key]?alt[key]:key]=val}return data}function encodeJSON(JSON){return parse(JSON);function parse(h){var D=[],i=0,k,v,t;for(k in h){v=h[k];t=typeof v;if(t=="string")v='"'+v+'"';else if(t=="object")v=parse(v);D[i++]='"'+k+'":'+v}return"{"+D.join(",")+"}"}}function decodeJSON(str){try{return window["eval"]("("+str+")")||{}}catch(e){return{}}}var $N=$(this).eq(0);if(!$N.length){if(options.showErrorMessages)alert(lang.errContainerMissing);return null}if($N.data("layoutContainer")&&
$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},sC=state.container,sID=state.id;var Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,toggle:toggle,hide:hide,show:show,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,initContent:initContent,sizeContent:sizeContent,sizePane:manualSizePane,swapPanes:swapPanes,resizeAll:resizeAll,initPanes:isInitialized,destroy:destroy,addPane:addPane,
removePane:removePane,setSizeLimits:setSizeLimits,bindButton:bindButton,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,encodeJSON:encodeJSON,decodeJSON:decodeJSON,getState:getState,getCookie:getCookie,saveCookie:saveCookie,deleteCookie:deleteCookie,loadCookie:loadCookie,loadState:loadState,cssWidth:cssW,cssHeight:cssH,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,
disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable};if(_create()==="cancel")return null;else return Instance}})(jQuery);
(function($){var fixCellIndexes=function(table){var rows=table.rows;var len=rows.length;var matrix=[];for(var i=0;i<len;i++){var cells=rows[i].cells;var clen=cells.length;for(var j=0;j<clen;j++){var c=cells[j];var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1;var firstAvailCol=-1;if(!matrix[i])matrix[i]=[];var m=matrix[i];while(m[++firstAvailCol]);c.realIndex=firstAvailCol;for(var k=i;k<i+rowSpan;k++){if(!matrix[k])matrix[k]=[];var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++)matrixrow[l]=
1}}}};var fixRowIndexes=function(tbl){var v=0,i,k,r=tbl.tHead?tbl.tHead.rows:0;if(r)for(i=0;i<r.length;i++)r[i].realRIndex=v++;for(k=0;k<tbl.tBodies.length;k++){r=tbl.tBodies[k].rows;if(r)for(i=0;i<r.length;i++)r[i].realRIndex=v++}r=tbl.tFoot?tbl.tFoot.rows:0;if(r)for(i=0;i<r.length;i++)r[i].realRIndex=v++};$.fn.tableHover=function(options){var settings=$.extend({allowHead:true,allowBody:true,allowFoot:true,headRows:false,bodyRows:true,footRows:false,spanRows:true,headCols:false,bodyCols:true,footCols:false,
spanCols:true,ignoreCols:[],headCells:false,bodyCells:true,footCells:false,rowClass:"hover",colClass:"",cellClass:"",clickClass:""},options);return this.each(function(){var colIndex=[],rowIndex=[],tbl=this,r,rCnt=0,lastClick=[-1,-1];if(!tbl.tBodies||!tbl.tBodies.length)return;var addToIndex=function(rows,nodeName){var c,row,rowI,cI,rI,s;for(rowI=0;rowI<rows.length;rowI++,rCnt++){row=rows[rowI];for(cI=0;cI<row.cells.length;cI++){c=row.cells[cI];if(nodeName=="TBODY"&&settings.bodyRows||nodeName=="TFOOT"&&
settings.footRows||nodeName=="THEAD"&&settings.headRows){s=c.rowSpan;while(--s>=0)rowIndex[rCnt+s].push(c)}if(nodeName=="TBODY"&&settings.bodyCols||nodeName=="THEAD"&&settings.headCols||nodeName=="TFOOT"&&settings.footCols){s=c.colSpan;while(--s>=0){rI=c.realIndex+s;if($.inArray(rI+1,settings.ignoreCols)>-1)break;if(!colIndex[rI])colIndex[rI]=[];colIndex[rI].push(c)}}if(nodeName=="TBODY"&&settings.allowBody||nodeName=="THEAD"&&settings.allowHead||nodeName=="TFOOT"&&settings.allowFoot)c.thover=true}}};
var over=function(e){var p=e.target;while(p!=this&&p.thover!==true)p=p.parentNode;if(p.thover===true)highlight(p,true)};var out=function(e){var p=e.target;while(p!=this&&p.thover!==true)p=p.parentNode;if(p.thover===true)highlight(p,false)};var click=function(e){var t=e.target;while(t&&t!=tbl&&!t.thover)t=t.parentNode;if(t.thover&&settings.clickClass!=""){var x=t.realIndex,y=t.parentNode.realRIndex,s="";$("td."+settings.clickClass+", th."+settings.clickClass,tbl).removeClass(settings.clickClass);if(x!=
lastClick[0]||y!=lastClick[1]){if(settings.rowClass!="")s+=",."+settings.rowClass;if(settings.colClass!="")s+=",."+settings.colClass;if(settings.cellClass!="")s+=",."+settings.cellClass;if(s!="")$("td, th",tbl).filter(s.substring(1)).addClass(settings.clickClass);lastClick=[x,y]}else lastClick=[-1,-1]}};var highlight=function(cell,on){if(on)$.fn.tableHoverHover=$.fn.addClass;else $.fn.tableHoverHover=$.fn.removeClass;var h=colIndex[cell.realIndex]||[],rH=[],i=0,rI,nn;if(settings.colClass!=""){while(settings.spanCols&&
++i<cell.colSpan&&colIndex[cell.realIndex+i])h=h.concat(colIndex[cell.realIndex+i]);$(h).tableHoverHover(settings.colClass)}if(settings.rowClass!=""){rI=cell.parentNode.realRIndex;if(rowIndex[rI])rH=rH.concat(rowIndex[rI]);i=0;while(settings.spanRows&&++i<cell.rowSpan)if(rowIndex[rI+i])rH=rH.concat(rowIndex[rI+i]);$(rH).tableHoverHover(settings.rowClass)}if(settings.cellClass!=""){nn=cell.parentNode.parentNode.nodeName.toUpperCase();if(nn=="TBODY"&&settings.bodyCells||nn=="THEAD"&&settings.headCells||
nn=="TFOOT"&&settings.footCells)$(cell).tableHoverHover(settings.cellClass)}};fixCellIndexes(tbl);fixRowIndexes(tbl);for(r=0;r<tbl.rows.length;r++)rowIndex[r]=[];if(tbl.tHead)addToIndex(tbl.tHead.rows,"THEAD");for(r=0;r<tbl.tBodies.length;r++)addToIndex(tbl.tBodies[r].rows,"TBODY");if(tbl.tFoot)addToIndex(tbl.tFoot.rows,"TFOOT");$(this).bind("mouseover",over).bind("mouseout",out).click(click)})}})(jQuery);var globalErrorsId="global_errors";var fieldErrorIdSuffix="_error";
if(!Array.prototype.push)Array.prototype.push=function(){var startLength=this.length;for(var i=0;i<arguments.length;i++)this[startLength+i]=arguments[i];return this.length};
if(!Function.prototype.apply)Function.prototype.apply=function(object,parameters){var parameterStrings=new Array;if(!object)object=window;if(!parameters)parameters=new Array;for(var i=0;i<parameters.length;i++)parameterStrings[i]="parameters["+i+"]";object.__apply__=this;var result=eval("object.__apply__("+parameterStrings.join(", ")+")");object.__apply__=null;return result};
var ValangValidator=function(name,installSelfWithForm,rules){this.name=name;this.rules=rules;this.form=this._findForm(name);if(installSelfWithForm)this._installSelfWithForm()};
ValangValidator.prototype={validate:function(){return this._validateAndReturnFailedRules().length>0},validateAndShowFeedback:function(){var failedRules=this._validateAndReturnFailedRules();if(failedRules.length>0)this.showValidationFeedback(failedRules);return failedRules.length===0},showValidationFeedback:function(failedRules){var globalRules=new Array;for(var i=0;i<failedRules.length;i++){var errorBoxId=failedRules[i].field+fieldErrorIdSuffix;var errorBox=document.getElementById(errorBoxId);if(errorBox!=
null)errorBox.innerHTML=failedRules[i].getErrorMessage();else globalRules.push(failedRules[i])}var globalErrorsBox=document.getElementById(globalErrorsId);if(globalErrorsBox!=null){var ul=document.createElement("ul");for(var i=0;i<globalRules.length;i++){var li=document.createElement("li");li.innerHTML=globalRules[i].getErrorMessage();ul.appendChild(li)}globalErrorsBox.appendChild(ul)}else{var errors="";for(var i=0;i<globalRules.length;i++)errors=errors+globalRules[i].getErrorMessage()+"\n";alert(errors)}var fields=
this.form.getFieldsWithName(failedRules[0].field);if(fields.length>0)fields[0].activate()},_findForm:function(name){var element=document.getElementById(name);if(!element||element.tagName.toLowerCase()!="form")element=document.getElementById(name+"ValangValidator");if(!element||element.tagName.toLowerCase()!="script")throw"unable to find form with ID '"+name+"' or script element with ID '"+name+"ValangValidator'";var foundElement=element;while(element&&element.tagName.toLowerCase()!="form")element=
element.parentNode;if(!element)throw"unable to find FORM element enclosing element with ID '"+foundElement.id+"'";return new ValangValidator.Form(element)},_installSelfWithForm:function(){var oldOnload=window.onload;var oldOnsubmit=this.form.formElement.onsubmit;var thisValidator=this;window.onload=function(){ValangValidator.Logger.log("Installing ValangValidator '"+thisValidator.name+"' as onsubmit handler");try{if(oldOnload)oldOnload()}finally{thisValidator.form.formElement.onsubmit=function(){if(!oldOnsubmit||
oldOnsubmit())return thisValidator.validateAndShowFeedback()}}}},_validateAndReturnFailedRules:function(){this._clearGlobalErrors();ValangValidator.Logger.push("Starting validation");var failedRules=new Array;for(var i=0;i<this.rules.length;i++){var rule=this.rules[i];this._clearErrorIfExists(rule.field);ValangValidator.Logger.push("Evaluating rule for field ["+rule.field+"]");rule.form=this.form;if(!rule.validate()){ValangValidator.Logger.pop("Failed");failedRules.push(rule)}else ValangValidator.Logger.pop("Passed")}ValangValidator.Logger.pop("Finshed - "+
failedRules.length+" failed rules");return this._giveRulesSameOrderAsFormFields(failedRules)},_clearErrorIfExists:function(field){var errorBox=document.getElementById(field+fieldErrorIdSuffix);if(errorBox!=null)errorBox.innerHTML=""},_clearGlobalErrors:function(){var errorBox=document.getElementById(globalErrorsId);if(errorBox!=null)errorBox.innerHTML=""},_giveRulesSameOrderAsFormFields:function(failedRules){var sortedFailedRules=new Array;var fields=this.form.getFields();for(var i=0;i<fields.length;i++){var fieldName=
fields[i].name;for(var j=0;j<failedRules.length;j++)if(failedRules[j]&&failedRules[j].field==fieldName){sortedFailedRules.push(failedRules[j]);failedRules[j]=null}}for(var i=0;i<failedRules.length;i++)if(failedRules[i])sortedFailedRules.push(failedRules[i]);return sortedFailedRules}};
ValangValidator.Logger={log:function(msg){var logDiv=document.getElementById("valangLogDiv");if(logDiv){var oldHtml=logDiv.innerHTML;logDiv.innerHTML=this._indentString("&nbsp;")+msg+(oldHtml.length>0?"<br>"+oldHtml:"")}},push:function(msg){this.log(msg);this._indent++},pop:function(msg){this._indent--;this.log(msg)},logFunctionCalls:function(object){for(var elementName in object){var theElement=object[elementName];if(typeof theElement=="function")object[elementName]=this._wrapFunctionCallWithLog(elementName,
theElement)}},_indent:0,_indentString:function(filler){var result="";for(var i=0;i<this._indent*5;i++)result+=filler;return result},_wrapFunctionCallWithLog:function(functionName,theFunction){return function(){ValangValidator.Logger.push("calling "+functionName+"("+arguments[0]+", "+arguments[1]+")");try{var result=theFunction.apply(this,arguments)}catch(ex){ValangValidator.Logger.pop("threw "+ex);throw ex;}ValangValidator.Logger.pop("result = "+result);return result}}};
ValangValidator.Form=function(formElement){this.formElement=formElement};
ValangValidator.Form.prototype={getValue:function(fieldName){var fields=this.getFieldsWithName(fieldName);var value=new Array;for(var i=0;i<fields.length;i++)if(fields[i].getValue())value.push(fields[i].getValue());if(value.length==1)return value[0];else if(value.length>1)return value},getFieldsWithName:function(fieldName){var matchingFields=new Array;var fields=this.getFields();for(var i=0;i<fields.length;i++){var field=fields[i];if(field.name==fieldName)matchingFields.push(field)}return matchingFields},
getFields:function(){var fields=new Array;var tagElements=this.formElement.elements;for(var i=0;i<tagElements.length;i++)fields.push(new ValangValidator.Field(tagElements[i]));return fields},disable:function(){var fields=this.getFields();for(var i=0;i<fields.length;i++)fields[i].disable()},enable:function(){var fields=this.getFields();for(var i=0;i<fields.length;i++)fields[i].enable()},focusFirstElement:function(form){var fields=this.getFields();for(var i=0;i<fields.length;i++){var field=fields[i];
if(field.type!="hidden"&&!field.isDisabled()){field.activate();break}}}};
ValangValidator.Field=function(fieldElement){this.id=fieldElement.id;this.name=fieldElement.name;this.type=fieldElement.type.toLowerCase();this.tagName=fieldElement.tagName.toLowerCase();this.fieldElement=fieldElement;if(ValangValidator.Field.ValueGetters[this.tagName])this.getValue=ValangValidator.Field.ValueGetters[this.tagName];else if(this.tagName=="input")switch(this.type){case "submit":case "hidden":case "password":case "text":this.getValue=ValangValidator.Field.ValueGetters["textarea"];break;
case "checkbox":case "radio":this.getValue=ValangValidator.Field.ValueGetters["inputSelector"];break;default:throw"unexpected input field type '"+this.type+"'";}else throw"unexpected form field tag name '"+this.tagName+"'";};
ValangValidator.Field.prototype={clear:function(){this.fieldElement.value=""},focus:function(){this.fieldElement.focus()},select:function(){if(this.fieldElement.select)this.fieldElement.select()},activate:function(){this.focus();this.select()},isDisabled:function(){return element.disabled},disable:function(){element.blur();element.disabled="true"},enable:function(){element.disabled=""}};
ValangValidator.Field.ValueGetters={inputSelector:function(){if(this.fieldElement.checked)return this.fieldElement.value},textarea:function(){return this.fieldElement.value},select:function(){var value="";if(this.fieldElement.type=="select-one"){var index=this.fieldElement.selectedIndex;if(index>=0)value=this.fieldElement.options[index].value}else{value=new Array;for(var i=0;i<element.length;i++){var option=this.fieldElement.options[i];if(option.selected)value.push(option.value)}}return value}};
ValangValidator.Rule=function(field,valang,errorMessage,validationFunction){this.field=field;this.valang=valang;this.errorMessage=errorMessage;this.validate=validationFunction};
ValangValidator.Rule.prototype={getErrorMessage:function(){return this.errorMessage},getPropertyValue:function(propertyName,expectedType){return this.form.getValue(propertyName)},_assertHasLength:function(value){if(!value.length)throw"value '"+value+"' does not have length";},_assertLength:function(value,length){this._assertHasLength(value);if(value.length!=length)throw"value's length != '"+length+"'";},_throwError:function(msg){throw msg;},_makeCompatible:function(lhs,rhs){try{this._forceNumber(rhs);
return this._forceNumber(lhs)}catch(ex){}var lhsType=typeof lhs;var rhsType=typeof rhs;if(lhsType==rhsType)return lhs;else if(lhsType=="number"||rhsType=="number")return this._forceNumber(lhs);else throw"unable to convert ["+lhs+"] and ["+rhs+"] to compatible types";},_forceNumber:function(value){if(typeof value!="number"){try{var newValue=eval(value.toString())}catch(ex){}if(newValue&&typeof newValue=="number")return newValue;throw"unable to convert value ["+value+"] to number";}return value},lengthOf:function(value){return value!=
null?value.length:0},lowerCase:function(value){return value!=null?value.toLowerCase():null},upperCase:function(value){return value!=null?value.toUpperCase():null},equals:function(lhs,rhs){if(lhs==null&&rhs!=null||rhs==null&&lhs!=null)return false;if(lhs==rhs)return true;lhs=this._makeCompatible(lhs,rhs);rhs=this._makeCompatible(rhs,lhs);return lhs===rhs},lessThan:function(lhs,rhs){lhs=this._makeCompatible(lhs,rhs);rhs=this._makeCompatible(rhs,lhs);return lhs<rhs},lessThanOrEquals:function(lhs,rhs){lhs=
this._makeCompatible(lhs,rhs);rhs=this._makeCompatible(rhs,lhs);return lhs<=rhs},moreThan:function(lhs,rhs){lhs=this._makeCompatible(lhs,rhs);rhs=this._makeCompatible(rhs,lhs);return lhs>rhs},moreThanOrEquals:function(lhs,rhs){lhs=this._makeCompatible(lhs,rhs);rhs=this._makeCompatible(rhs,lhs);return lhs>=rhs},inFunc:function(lhs,rhs){for(var i=0;i<rhs.length;i++){var value=rhs[i];if(lhs==value)return true}return false},between:function(lhs,rhs){this._assertLength(rhs,2);lhs=this._makeCompatible(lhs,
rhs[0]);rhs[0]=this._makeCompatible(rhs[0],lhs);rhs[1]=this._makeCompatible(rhs[1],lhs);return lhs>=rhs[0]&&lhs<=rhs[1]},nullFunc:function(lhs,rhs){return lhs===null||typeof lhs=="undefined"},hasText:function(lhs,rhs){return lhs&&lhs.replace(/\s/g,"").length>0},hasLength:function(lhs,rhs){return lhs&&lhs.length>0},isBlank:function(lhs,rhs){return!lhs||lhs.length===0},isWord:function(lhs,rhs){return lhs&&lhs.replace(/\s/g,"")==lhs},isUpper:function(lhs,rhs){return lhs&&lhs.toUpperCase()==lhs},isLower:function(lhs,
rhs){return lhs&&lhs.toLowerCase()==lhs},add:function(lhs,rhs){return this._forceNumber(lhs)+this._forceNumber(rhs)},divide:function(lhs,rhs){return this._forceNumber(lhs)/this._forceNumber(rhs)},modulo:function(lhs,rhs){return this._forceNumber(lhs)%this._forceNumber(rhs)},multiply:function(lhs,rhs){return this._forceNumber(lhs)*this._forceNumber(rhs)},subtract:function(lhs,rhs){return this._forceNumber(lhs)-this._forceNumber(rhs)},RegExFunction:function(pattern,value){if(!value.match)throw"don't know how to apply regexp to value '"+
value+"'";return value.match(pattern)[0]==value},EmailFunction:function(value){var filter=/^(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,6}$/;return filter.test(value)}};"use strict";
(function(){if(jQuery&&jQuery.jstree)return;var is_ie6=false,is_ie7=false,is_ff2=false;(function($){$.vakata={};$.vakata.css={get_css:function(rule_name,delete_flag,sheet){rule_name=rule_name.toLowerCase();var css_rules=sheet.cssRules||sheet.rules,j=0;do{if(css_rules.length&&j>css_rules.length+5)return false;if(css_rules[j].selectorText&&css_rules[j].selectorText.toLowerCase()==rule_name)if(delete_flag===true){if(sheet.removeRule)sheet.removeRule(j);if(sheet.deleteRule)sheet.deleteRule(j);return true}else return css_rules[j]}while(css_rules[++j]);
return false},add_css:function(rule_name,sheet){if($.jstree.css.get_css(rule_name,false,sheet))return false;if(sheet.insertRule)sheet.insertRule(rule_name+" { }",0);else sheet.addRule(rule_name,null,0);return $.vakata.css.get_css(rule_name)},remove_css:function(rule_name,sheet){return $.vakata.css.get_css(rule_name,true,sheet)},add_sheet:function(opts){var tmp=false,is_new=true;if(opts.str){if(opts.title)tmp=$("style[id='"+opts.title+"-stylesheet']")[0];if(tmp)is_new=false;else{tmp=document.createElement("style");
tmp.setAttribute("type","text/css");if(opts.title)tmp.setAttribute("id",opts.title+"-stylesheet")}if(tmp.styleSheet)if(is_new){document.getElementsByTagName("head")[0].appendChild(tmp);tmp.styleSheet.cssText=opts.str}else tmp.styleSheet.cssText=tmp.styleSheet.cssText+" "+opts.str;else{tmp.appendChild(document.createTextNode(opts.str));document.getElementsByTagName("head")[0].appendChild(tmp)}return tmp.sheet||tmp.styleSheet}if(opts.url)if(document.createStyleSheet)try{tmp=document.createStyleSheet(opts.url)}catch(e){}else{tmp=
document.createElement("link");tmp.rel="stylesheet";tmp.type="text/css";tmp.media="all";tmp.href=opts.url;document.getElementsByTagName("head")[0].appendChild(tmp);return tmp.styleSheet}}};var instances=[],focused_instance=-1,plugins={},prepared_move={};$.fn.jstree=function(settings){var isMethodCall=typeof settings=="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;if(isMethodCall){if(settings.substring(0,1)=="_")return returnValue;this.each(function(){var instance=instances[$.data(this,
"jstree_instance_id")],methodValue=instance&&$.isFunction(instance[settings])?instance[settings].apply(instance,args):instance;if(typeof methodValue!=="undefined"&&(settings.indexOf("is_")===0||methodValue!==true&&methodValue!==false)){returnValue=methodValue;return false}})}else this.each(function(){var instance_id=$.data(this,"jstree_instance_id"),a=[],b=settings?$.extend({},true,settings):{},c=$(this),s=false,t=[];a=a.concat(args);if(c.data("jstree"))a.push(c.data("jstree"));b=a.length?$.extend.apply(null,
[true,b].concat(a)):b;if(typeof instance_id!=="undefined"&&instances[instance_id])instances[instance_id].destroy();instance_id=parseInt(instances.push({}),10)-1;$.data(this,"jstree_instance_id",instance_id);b.plugins=$.isArray(b.plugins)?b.plugins:$.jstree.defaults.plugins.slice();b.plugins.unshift("core");b.plugins=b.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");s=$.extend(true,{},$.jstree.defaults,b);s.plugins=b.plugins;$.each(plugins,
function(i,val){if($.inArray(i,s.plugins)===-1){s[i]=null;delete s[i]}else t.push(i)});s.plugins=t;instances[instance_id]=new $.jstree._instance(instance_id,$(this).addClass("jstree jstree-"+instance_id),s);$.each(instances[instance_id]._get_settings().plugins,function(i,val){instances[instance_id].data[val]={}});$.each(instances[instance_id]._get_settings().plugins,function(i,val){if(plugins[val])plugins[val].__init.apply(instances[instance_id])});setTimeout(function(){if(instances[instance_id])instances[instance_id].init()},
0)});return returnValue};$.jstree={defaults:{plugins:[]},_focused:function(){return instances[focused_instance]||null},_reference:function(needle){if(instances[needle])return instances[needle];var o=$(needle);if(!o.length&&typeof needle==="string")o=$("#"+needle);if(!o.length)return null;return instances[o.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(index,container,settings){this.data={core:{}};this.get_settings=function(){return $.extend(true,{},settings)};this._get_settings=
function(){return settings};this.get_index=function(){return index};this.get_container=function(){return container};this.get_container_ul=function(){return container.children("ul:eq(0)")};this._set_settings=function(s){settings=$.extend(true,{},settings,s)}},_fn:{},plugin:function(pname,pdata){pdata=$.extend({},{__init:$.noop,__destroy:$.noop,_fn:{},defaults:false},pdata);plugins[pname]=pdata;$.jstree.defaults[pname]=pdata.defaults;$.each(pdata._fn,function(i,val){val.plugin=pname;val.old=$.jstree._fn[i];
$.jstree._fn[i]=function(){var rslt,func=val,args=Array.prototype.slice.call(arguments),evnt=new $.Event("before.jstree"),rlbk=false;if(this.data.core.locked===true&&i!=="unlock"&&i!=="is_locked")return;do{if(func&&func.plugin&&$.inArray(func.plugin,this._get_settings().plugins)!==-1)break;func=func.old}while(func);if(!func)return;if(i.indexOf("_")===0)rslt=func.apply(this,args);else{rslt=this.get_container().triggerHandler(evnt,{"func":i,"inst":this,"args":args,"plugin":func.plugin});if(rslt===false)return;
if(typeof rslt!=="undefined")args=rslt;rslt=func.apply($.extend({},this,{__callback:function(data){this.get_container().triggerHandler(i+".jstree",{"inst":this,"args":args,"rslt":data,"rlbk":rlbk})},__rollback:function(){rlbk=this.get_rollback();return rlbk},__call_old:function(replace_arguments){return func.old.apply(this,replace_arguments?Array.prototype.slice.call(arguments,1):args)}}),args)}return rslt};$.jstree._fn[i].old=val.old;$.jstree._fn[i].plugin=pname})},rollback:function(rb){if(rb){if(!$.isArray(rb))rb=
[rb];$.each(rb,function(i,val){instances[val.i].set_rollback(val.h,val.d)})}}};$.jstree._fn=$.jstree._instance.prototype={};$(function(){var u=navigator.userAgent.toLowerCase(),v=(u.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],css_string=""+".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } "+".jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } "+".jstree-rtl li { margin-left:0; margin-right:18px; } "+
".jstree > ul > li { margin-left:0px; } "+".jstree-rtl > ul > li { margin-right:0px; } "+".jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } "+".jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } "+".jstree a:focus { outline: none; } "+".jstree a > ins { height:16px; width:16px; } "+".jstree a > .jstree-icon { margin-right:3px; } "+".jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } "+
"li.jstree-open > ul { display:block; } "+"li.jstree-closed > ul { display:none; } ";if(/msie/.test(u)&&parseInt(v,10)==6){is_ie6=true;try{document.execCommand("BackgroundImageCache",false,true)}catch(err){}css_string+=""+".jstree li { height:18px; margin-left:0; margin-right:0; } "+".jstree li li { margin-left:18px; } "+".jstree-rtl li li { margin-left:0px; margin-right:18px; } "+"li.jstree-open ul { display:block; } "+"li.jstree-closed ul { display:none !important; } "+".jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } "+
".jstree li a ins { height:16px; width:16px; margin-right:3px; } "+".jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}if(/msie/.test(u)&&parseInt(v,10)==7){is_ie7=true;css_string+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}if(!/compatible/.test(u)&&/mozilla/.test(u)&&parseFloat(v,10)<1.9){is_ff2=true;css_string+=""+".jstree ins { display:-moz-inline-box; } "+".jstree li { line-height:12px; } "+".jstree a { display:-moz-inline-box; } "+".jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "}$.vakata.css.add_sheet({str:css_string,
title:"jstree"})});$.jstree.plugin("core",{__init:function(){this.data.core.locked=false;this.data.core.to_open=this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:false,animation:500,initially_open:[],initially_load:[],open_parents:true,notify_plugins:true,rtl:false,load_open:false,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();if(this._get_settings().core.rtl)this.get_container().addClass("jstree-rtl").css("direction",
"rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",$.proxy(function(event){var trgt=$(event.target);this.toggle_node(trgt)},this)).bind("mousedown.jstree",$.proxy(function(){this.set_focus()},
this)).bind("dblclick.jstree",function(event){var sel;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){sel=window.getSelection();try{sel.removeAllRanges();sel.collapse()}catch(err){}}});if(this._get_settings().core.notify_plugins)this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var o=this._get_node(data.rslt.obj),t=this;if(o===-1)o=this.get_container_ul();if(!o.length)return;o.find("li").each(function(){var th=$(this);if(th.data("jstree"))$.each(th.data("jstree"),
function(plugin,values){if(t.data[plugin]&&$.isFunction(t["_"+plugin+"_notify"]))t["_"+plugin+"_notify"].call(t,th,values)})})},this));if(this._get_settings().core.load_open)this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var o=this._get_node(data.rslt.obj),t=this;if(o===-1)o=this.get_container_ul();if(!o.length)return;o.find("li.jstree-open:not(:has(ul))").each(function(){t.load_node(this,$.noop,$.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();
this.reload_nodes()})},destroy:function(){var i,n=this.get_index(),s=this._get_settings(),_this=this;$.each(s.plugins,function(i,val){try{plugins[val].__destroy.apply(_this)}catch(err){}});this.__callback();if(this.is_focused())for(i in instances)if(instances.hasOwnProperty(i)&&i!=n){instances[i].set_focus();break}if(n===focused_instance)focused_instance=-1;this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",
function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});$(document).unbind(".jstree-"+n).undelegate(".jstree-"+n);instances[n]=null;delete instances[n]},_core_notify:function(n,data){if(data.opened)this.open_node(n,false,true)},lock:function(){this.data.core.locked=true;this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");this.__callback({})},unlock:function(){this.data.core.locked=false;this.get_container().children("ul").removeClass("jstree-locked").css("opacity",
"1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var _this=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){if(this.id)_this.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(_this.data.core.to_open)},save_loaded:function(){},reload_nodes:function(is_callback){var _this=
this,done=true,current=[],remaining=[];if(!is_callback){this.data.core.reopen=false;this.data.core.refreshing=true;this.data.core.to_open=$.map($.makeArray(this.data.core.to_open),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.data.core.to_load=$.map($.makeArray(this.data.core.to_load),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,
".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});if(this.data.core.to_open.length)this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)}if(this.data.core.to_load.length){$.each(this.data.core.to_load,function(i,val){if(val=="#")return true;if($(val).length)current.push(val);else remaining.push(val)});if(current.length){this.data.core.to_load=remaining;$.each(current,function(i,val){if(!_this._is_loaded(val)){_this.load_node(val,function(){_this.reload_nodes(true)},function(){_this.reload_nodes(true)});
done=false}})}}if(this.data.core.to_open.length)$.each(this.data.core.to_open,function(i,val){_this.open_node(val,false,true)});if(done){if(this.data.core.reopen)clearTimeout(this.data.core.reopen);this.data.core.reopen=setTimeout(function(){_this.__callback({},_this)},50);this.data.core.refreshing=false;this.reopen()}},reopen:function(){var _this=this;if(this.data.core.to_open.length)$.each(this.data.core.to_open,function(i,val){_this.open_node(val,false,true)});this.__callback({})},refresh:function(obj){var _this=
this;this.save_opened();if(!obj)obj=-1;obj=this._get_node(obj);if(!obj)obj=-1;if(obj!==-1)obj.children("UL").remove();else this.get_container_ul().empty();this.load_node(obj,function(){_this.__callback({"obj":obj});_this.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(this.is_focused())return;var f=$.jstree._focused();if(f)f.unset_focus();this.get_container().addClass("jstree-focused");focused_instance=this.get_index();this.__callback()},is_focused:function(){return focused_instance==
this.get_index()},unset_focus:function(){if(this.is_focused()){this.get_container().removeClass("jstree-focused");focused_instance=-1}this.__callback()},_get_node:function(obj){var $obj=$(obj,this.get_container());if($obj.is(".jstree")||obj==-1)return-1;$obj=$obj.closest("li",this.get_container());return $obj.length?$obj:false},_get_next:function(obj,strict){obj=this._get_node(obj);if(obj===-1)return this.get_container().find("> ul > li:first-child");if(!obj.length)return false;if(strict)return obj.nextAll("li").size()>
0?obj.nextAll("li:eq(0)"):false;if(obj.hasClass("jstree-open"))return obj.find("li:eq(0)");else if(obj.nextAll("li").size()>0)return obj.nextAll("li:eq(0)");else return obj.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(obj,strict){obj=this._get_node(obj);if(obj===-1)return this.get_container().find("> ul > li:last-child");if(!obj.length)return false;if(strict)return obj.prevAll("li").length>0?obj.prevAll("li:eq(0)"):false;if(obj.prev("li").length){obj=obj.prev("li").eq(0);while(obj.hasClass("jstree-open"))obj=
obj.children("ul:eq(0)").children("li:last");return obj}else{var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:false}},_get_parent:function(obj){obj=this._get_node(obj);if(obj==-1||!obj.length)return false;var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:-1},_get_children:function(obj){obj=this._get_node(obj);if(obj===-1)return this.get_container().children("ul:eq(0)").children("li");if(!obj.length)return false;return obj.children("ul:eq(0)").children("li")},get_path:function(obj,
id_mode){var p=[],_this=this;obj=this._get_node(obj);if(obj===-1||!obj||!obj.length)return false;obj.parentsUntil(".jstree","li").each(function(){p.push(id_mode?this.id:_this.get_text(this))});p.reverse();p.push(id_mode?obj.attr("id"):this.get_text(obj));return p},_get_string:function(key){return this._get_settings().core.strings[key]||key},is_open:function(obj){obj=this._get_node(obj);return obj&&obj!==-1&&obj.hasClass("jstree-open")},is_closed:function(obj){obj=this._get_node(obj);return obj&&obj!==
-1&&obj.hasClass("jstree-closed")},is_leaf:function(obj){obj=this._get_node(obj);return obj&&obj!==-1&&obj.hasClass("jstree-leaf")},correct_state:function(obj){obj=this._get_node(obj);if(!obj||obj===-1)return false;obj.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({"obj":obj})},open_node:function(obj,callback,skip_animation){obj=this._get_node(obj);if(!obj.length)return false;if(!obj.hasClass("jstree-closed")){if(callback)callback.call();
return false}var s=skip_animation||is_ie6?0:this._get_settings().core.animation,t=this;if(!this._is_loaded(obj)){obj.children("a").addClass("jstree-loading");this.load_node(obj,function(){t.open_node(obj,callback,skip_animation)},callback)}else{if(this._get_settings().core.open_parents)obj.parentsUntil(".jstree",".jstree-closed").each(function(){t.open_node(this,false,true)});if(s)obj.children("ul").css("display","none");obj.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");
if(s)obj.children("ul").stop(true,true).slideDown(s,function(){this.style.display="";t.after_open(obj)});else t.after_open(obj);this.__callback({"obj":obj});if(callback)callback.call()}},after_open:function(obj){this.__callback({"obj":obj})},close_node:function(obj,skip_animation){obj=this._get_node(obj);var s=skip_animation||is_ie6?0:this._get_settings().core.animation,t=this;if(!obj.length||!obj.hasClass("jstree-open"))return false;if(s)obj.children("ul").attr("style","display:block !important");
obj.removeClass("jstree-open").addClass("jstree-closed");if(s)obj.children("ul").stop(true,true).slideUp(s,function(){this.style.display="";t.after_close(obj)});else t.after_close(obj);this.__callback({"obj":obj})},after_close:function(obj){this.__callback({"obj":obj})},toggle_node:function(obj){obj=this._get_node(obj);if(obj.hasClass("jstree-closed"))return this.open_node(obj);if(obj.hasClass("jstree-open"))return this.close_node(obj)},open_all:function(obj,do_animation,original_obj){obj=obj?this._get_node(obj):
-1;if(!obj||obj===-1)obj=this.get_container_ul();if(original_obj)obj=obj.find("li.jstree-closed");else{original_obj=obj;if(obj.is(".jstree-closed"))obj=obj.find("li.jstree-closed").andSelf();else obj=obj.find("li.jstree-closed")}var _this=this;obj.each(function(){var __this=this;if(!_this._is_loaded(this))_this.open_node(this,function(){_this.open_all(__this,do_animation,original_obj)},!do_animation);else _this.open_node(this,false,!do_animation)});if(original_obj.find("li.jstree-closed").length===
0)this.__callback({"obj":original_obj})},close_all:function(obj,do_animation){var _this=this;obj=obj?this._get_node(obj):this.get_container();if(!obj||obj===-1)obj=this.get_container_ul();obj.find("li.jstree-open").andSelf().each(function(){_this.close_node(this,!do_animation)});this.__callback({"obj":obj})},clean_node:function(obj){obj=obj&&obj!=-1?$(obj):this.get_container_ul();obj=obj.is("li")?obj.find("li").andSelf():obj.find("li");obj.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
obj.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({"obj":obj})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(true),d:this.data}},set_rollback:function(html,data){this.get_container().empty().append(html);this.data=data;this.__callback()},load_node:function(obj,s_call,e_call){this.__callback({"obj":obj})},_is_loaded:function(obj){return true},create_node:function(obj,position,js,
callback,is_loaded){obj=this._get_node(obj);position=typeof position==="undefined"?"last":position;var d=$("<li />"),s=this._get_settings().core,tmp;if(obj!==-1&&!obj.length)return false;if(!is_loaded&&!this._is_loaded(obj)){this.load_node(obj,function(){this.create_node(obj,position,js,callback,true)});return false}this.__rollback();if(typeof js==="string")js={"data":js};if(!js)js={};if(js.attr)d.attr(js.attr);if(js.metadata)d.data(js.metadata);if(js.state)d.addClass("jstree-"+js.state);if(!js.data)js.data=
this._get_string("new_node");if(!$.isArray(js.data)){tmp=js.data;js.data=[];js.data.push(tmp)}$.each(js.data,function(i,m){tmp=$("<a />");if($.isFunction(m))m=m.call(this,js);if(typeof m=="string")tmp.attr("href","#")[s.html_titles?"html":"text"](m);else{if(!m.attr)m.attr={};if(!m.attr.href)m.attr.href="#";tmp.attr(m.attr)[s.html_titles?"html":"text"](m.title);if(m.language)tmp.addClass(m.language)}tmp.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!m.icon&&js.icon)m.icon=js.icon;if(m.icon)if(m.icon.indexOf("/")===
-1)tmp.children("ins").addClass(m.icon);else tmp.children("ins").css("background","url('"+m.icon+"') center center no-repeat");d.append(tmp)});d.prepend("<ins class='jstree-icon'>&#160;</ins>");if(obj===-1){obj=this.get_container();if(position==="before")position="first";if(position==="after")position="last"}switch(position){case "before":obj.before(d);tmp=this._get_parent(obj);break;case "after":obj.after(d);tmp=this._get_parent(obj);break;case "inside":case "first":if(!obj.children("ul").length)obj.append("<ul />");
obj.children("ul").prepend(d);tmp=obj;break;case "last":if(!obj.children("ul").length)obj.append("<ul />");obj.children("ul").append(d);tmp=obj;break;default:if(!obj.children("ul").length)obj.append("<ul />");if(!position)position=0;tmp=obj.children("ul").children("li").eq(position);if(tmp.length)tmp.before(d);else obj.children("ul").append(d);tmp=obj;break}if(tmp===-1||tmp.get(0)===this.get_container().get(0))tmp=-1;this.clean_node(tmp);this.__callback({"obj":d,"parent":tmp});if(callback)callback.call(this,
d);return d},get_text:function(obj){obj=this._get_node(obj);if(!obj.length)return false;var s=this._get_settings().core.html_titles;obj=obj.children("a:eq(0)");if(s){obj=obj.clone();obj.children("INS").remove();return obj.html()}else{obj=obj.contents().filter(function(){return this.nodeType==3})[0];return obj.nodeValue}},set_text:function(obj,val){obj=this._get_node(obj);if(!obj.length)return false;obj=obj.children("a:eq(0)");if(this._get_settings().core.html_titles){var tmp=obj.children("INS").clone();
obj.html(val).prepend(tmp);this.__callback({"obj":obj,"name":val});return true}else{obj=obj.contents().filter(function(){return this.nodeType==3})[0];this.__callback({"obj":obj,"name":val});return obj.nodeValue=val}},rename_node:function(obj,val){obj=this._get_node(obj);this.__rollback();if(obj&&obj.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))this.__callback({"obj":obj,"name":val})},delete_node:function(obj){obj=this._get_node(obj);if(!obj.length)return false;this.__rollback();
var p=this._get_parent(obj),prev=$([]),t=this;obj.each(function(){prev=prev.add(t._get_prev(this))});obj=obj.detach();if(p!==-1&&p.find("> ul > li").length===0)p.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(p);this.__callback({"obj":obj,"prev":prev,"parent":p});return obj},prepare_move:function(o,r,pos,cb,is_cb){var p={};p.ot=$.jstree._reference(o)||this;p.o=p.ot._get_node(o);p.r=r===-1?-1:this._get_node(r);p.p=typeof pos==="undefined"||pos===false?"last":pos;if(!is_cb&&
prepared_move.o&&prepared_move.o[0]===p.o[0]&&prepared_move.r[0]===p.r[0]&&prepared_move.p===p.p){this.__callback(prepared_move);if(cb)cb.call(this,prepared_move);return}p.ot=$.jstree._reference(p.o)||this;p.rt=$.jstree._reference(p.r)||this;if(p.r===-1||!p.r){p.cr=-1;switch(p.p){case "first":case "before":case "inside":p.cp=0;break;case "after":case "last":p.cp=p.rt.get_container().find(" > ul > li").length;break;default:p.cp=p.p;break}}else{if(!/^(before|after)$/.test(p.p)&&!this._is_loaded(p.r))return this.load_node(p.r,
function(){this.prepare_move(o,r,pos,cb,true)});switch(p.p){case "before":p.cp=p.r.index();p.cr=p.rt._get_parent(p.r);break;case "after":p.cp=p.r.index()+1;p.cr=p.rt._get_parent(p.r);break;case "inside":case "first":p.cp=0;p.cr=p.r;break;case "last":p.cp=p.r.find(" > ul > li").length;p.cr=p.r;break;default:p.cp=p.p;p.cr=p.r;break}}p.np=p.cr==-1?p.rt.get_container():p.cr;p.op=p.ot._get_parent(p.o);p.cop=p.o.index();if(p.op===-1)p.op=p.ot?p.ot.get_container():this.get_container();if(!/^(before|after)$/.test(p.p)&&
p.op&&p.np&&p.op[0]===p.np[0]&&p.o.index()<p.cp)p.cp++;p.or=p.np.find(" > ul > li:nth-child("+(p.cp+1)+")");prepared_move=p;this.__callback(prepared_move);if(cb)cb.call(this,prepared_move)},check_move:function(){var obj=prepared_move,ret=true,r=obj.r===-1?this.get_container():obj.r;if(!obj||!obj.o||obj.or[0]===obj.o[0])return false;if(obj.op&&obj.np&&obj.op[0]===obj.np[0]&&obj.cp-1===obj.o.index())return false;obj.o.each(function(){if(r.parentsUntil(".jstree","li").andSelf().index(this)!==-1){ret=
false;return false}});return ret},move_node:function(obj,ref,position,is_copy,is_prepared,skip_check){if(!is_prepared)return this.prepare_move(obj,ref,position,function(p){this.move_node(p,false,false,is_copy,true,skip_check)});if(is_copy)prepared_move.cy=true;if(!skip_check&&!this.check_move())return false;this.__rollback();var o=false;if(is_copy){o=obj.o.clone(true);o.find("*[id]").andSelf().each(function(){if(this.id)this.id="copy_"+this.id})}else o=obj.o;if(obj.or.length)obj.or.before(o);else{if(!obj.np.children("ul").length)$("<ul />").appendTo(obj.np);
obj.np.children("ul:eq(0)").append(o)}try{obj.ot.clean_node(obj.op);obj.rt.clean_node(obj.np);if(!obj.op.find("> ul > li").length)obj.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(e){}if(is_copy){prepared_move.cy=true;prepared_move.oc=o}this.__callback(prepared_move);return prepared_move},_get_move:function(){return prepared_move}}})})(jQuery);(function($){var scrollbar_width,e1,e2;$(function(){if(/msie/.test(navigator.userAgent.toLowerCase())){e1=
$('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body");e2=$('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body");scrollbar_width=e1.width()-e2.width();e1.add(e2).remove()}else{e1=$("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});scrollbar_width=100-e1.width();
e1.parent().remove()}});$.jstree.plugin("ui",{__init:function(){this.data.ui.selected=$();this.data.ui.last_selected=false;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",$.proxy(function(event){event.preventDefault();event.currentTarget.blur();if(!$(event.currentTarget).hasClass("jstree-loading"))this.select_node(event.currentTarget,true,event)},this)).delegate("a","mouseenter.jstree",$.proxy(function(event){if(!$(event.currentTarget).hasClass("jstree-loading"))this.hover_node(event.target)},
this)).delegate("a","mouseleave.jstree",$.proxy(function(event){if(!$(event.currentTarget).hasClass("jstree-loading"))this.dehover_node(event.target)},this)).bind("reopen.jstree",$.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",$.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",$.proxy(function(){this.reselect()},this)).bind("close_node.jstree",$.proxy(function(event,data){var s=this._get_settings().ui,obj=this._get_node(data.rslt.obj),
clk=obj&&obj.length?obj.children("ul").find("a.jstree-clicked"):$(),_this=this;if(s.selected_parent_close===false||!clk.length)return;clk.each(function(){_this.deselect_node(this);if(s.selected_parent_close==="select_parent")_this.select_node(obj)})},this)).bind("delete_node.jstree",$.proxy(function(event,data){var s=this._get_settings().ui.select_prev_on_delete,obj=this._get_node(data.rslt.obj),clk=obj&&obj.length?obj.find("a.jstree-clicked"):[],_this=this;clk.each(function(){_this.deselect_node(this)});
if(s&&clk.length)data.rslt.prev.each(function(){if(this.parentNode){_this.select_node(this);return false}})},this)).bind("move_node.jstree",$.proxy(function(event,data){if(data.rslt.cy)data.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:true,select_prev_on_delete:true,disable_selecting_children:false,initially_select:[]},_fn:{_get_node:function(obj,
allow_multiple){if(typeof obj==="undefined"||obj===null)return allow_multiple?this.data.ui.selected:this.data.ui.last_selected;var $obj=$(obj,this.get_container());if($obj.is(".jstree")||obj==-1)return-1;$obj=$obj.closest("li",this.get_container());return $obj.length?$obj:false},_ui_notify:function(n,data){if(data.selected)this.select_node(n,false)},save_selected:function(){var _this=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){if(this.id)_this.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,
"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var _this=this,s=this.data.ui.to_select;s=$.map($.makeArray(s),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});$.each(s,function(i,val){if(val&&val!=="#")_this.select_node(val)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});
this.__callback()},refresh:function(obj){this.save_selected();return this.__call_old()},hover_node:function(obj){obj=this._get_node(obj);if(!obj.length)return false;if(!obj.hasClass("jstree-hovered"))this.dehover_node();this.data.ui.hovered=obj.children("a").addClass("jstree-hovered").parent();this._fix_scroll(obj);this.__callback({"obj":obj})},dehover_node:function(){var obj=this.data.ui.hovered,p;if(!obj||!obj.length)return false;p=obj.children("a").removeClass("jstree-hovered").parent();if(this.data.ui.hovered[0]===
p[0])this.data.ui.hovered=null;this.__callback({"obj":obj})},select_node:function(obj,check,e){obj=this._get_node(obj);if(obj==-1||!obj||!obj.length)return false;var s=this._get_settings().ui,is_multiple=s.select_multiple_modifier=="on"||s.select_multiple_modifier!==false&&e&&e[s.select_multiple_modifier+"Key"],is_range=s.select_range_modifier!==false&&e&&e[s.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==obj[0]&&this.data.ui.last_selected.parent()[0]===
obj.parent()[0],is_selected=this.is_selected(obj),proceed=true,t=this;if(check){if(s.disable_selecting_children&&is_multiple&&(obj.parentsUntil(".jstree","li").children("a.jstree-clicked").length||obj.children("ul").find("a.jstree-clicked:eq(0)").length))return false;proceed=false;switch(!0){case is_range:this.data.ui.last_selected.addClass("jstree-last-selected");obj=obj[obj.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();if(s.select_limit==
-1||obj.length<s.select_limit){this.data.ui.last_selected.removeClass("jstree-last-selected");this.data.ui.selected.each(function(){if(this!==t.data.ui.last_selected[0])t.deselect_node(this)});is_selected=false;proceed=true}else proceed=false;break;case is_selected&&!is_multiple:this.deselect_all();is_selected=false;proceed=true;break;case !is_selected&&!is_multiple:if(s.select_limit==-1||s.select_limit>0){this.deselect_all();proceed=true}break;case is_selected&&is_multiple:this.deselect_node(obj);
break;case !is_selected&&is_multiple:if(s.select_limit==-1||this.data.ui.selected.length+1<=s.select_limit)proceed=true;break}}if(proceed&&!is_selected){if(!is_range)this.data.ui.last_selected=obj;obj.children("a").addClass("jstree-clicked");if(s.selected_parent_open)obj.parents(".jstree-closed").each(function(){t.open_node(this,false,true)});this.data.ui.selected=this.data.ui.selected.add(obj);this._fix_scroll(obj.eq(0));this.__callback({"obj":obj,"e":e})}},_fix_scroll:function(obj){var c=this.get_container()[0],
t;if(c.scrollHeight>c.offsetHeight){obj=this._get_node(obj);if(!obj||obj===-1||!obj.length||!obj.is(":visible"))return;t=obj.offset().top-this.get_container().offset().top;if(t<0)c.scrollTop=c.scrollTop+t-1;if(t+this.data.core.li_height+(c.scrollWidth>c.offsetWidth?scrollbar_width:0)>c.offsetHeight)c.scrollTop=c.scrollTop+(t-c.offsetHeight+this.data.core.li_height+1+(c.scrollWidth>c.offsetWidth?scrollbar_width:0))}},deselect_node:function(obj){obj=this._get_node(obj);if(!obj.length)return false;if(this.is_selected(obj)){obj.children("a").removeClass("jstree-clicked");
this.data.ui.selected=this.data.ui.selected.not(obj);if(this.data.ui.last_selected.get(0)===obj.get(0))this.data.ui.last_selected=this.data.ui.selected.eq(0);this.__callback({"obj":obj})}},toggle_select:function(obj){obj=this._get_node(obj);if(!obj.length)return false;if(this.is_selected(obj))this.deselect_node(obj);else this.select_node(obj)},is_selected:function(obj){return this.data.ui.selected.index(this._get_node(obj))>=0},get_selected:function(context){return context?$(context).find("a.jstree-clicked").parent():
this.data.ui.selected},deselect_all:function(context){var ret=context?$(context).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();ret.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=$([]);this.data.ui.last_selected=false;this.__callback({"obj":ret})}}});$.jstree.defaults.plugins.push("ui")})(jQuery);(function($){$.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",$.proxy(function(e,data){if(this._get_settings().crrm.move.open_onmove){var t=
this;data.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){t.open_node(this,false,true)})}},this))},defaults:{input_width_limit:200,move:{always_copy:false,open_onmove:true,default_position:"last",check_move:function(m){return true}}},_fn:{_show_input:function(obj,callback){obj=this._get_node(obj);var rtl=this._get_settings().core.rtl,w=this._get_settings().crrm.input_width_limit,w1=obj.children("ins").width(),w2=obj.find("> a:visible > ins").width()*obj.find("> a:visible > ins").length,
t=this.get_text(obj),h1=$("<div />",{css:{"position":"absolute","top":"-200px","left":rtl?"0px":"-1000px","visibility":"hidden"}}).appendTo("body"),h2=obj.css("position","relative").append($("<input />",{"value":t,"class":"jstree-rename-input","css":{"padding":"0","border":"1px solid silver","position":"absolute","left":rtl?"auto":w1+w2+4+"px","right":rtl?w1+w2+4+"px":"auto","top":"0px","height":this.data.core.li_height-2+"px","lineHeight":this.data.core.li_height-2+"px","width":"150px"},"blur":$.proxy(function(){var i=
obj.children(".jstree-rename-input"),v=i.val();if(v==="")v=t;h1.remove();i.remove();this.set_text(obj,t);this.rename_node(obj,v);callback.call(this,obj,v,t);obj.css("position","")},this),"keyup":function(event){var key=event.keyCode||event.which;if(key==27){this.value=t;this.blur();return}else if(key==13){this.blur();return}else h2.width(Math.min(h1.text("pW"+this.value).width(),w))},"keypress":function(event){var key=event.keyCode||event.which;if(key==13)return false}})).children(".jstree-rename-input");
this.set_text(obj,"");h1.css({fontFamily:h2.css("fontFamily")||"",fontSize:h2.css("fontSize")||"",fontWeight:h2.css("fontWeight")||"",fontStyle:h2.css("fontStyle")||"",fontStretch:h2.css("fontStretch")||"",fontVariant:h2.css("fontVariant")||"",letterSpacing:h2.css("letterSpacing")||"",wordSpacing:h2.css("wordSpacing")||""});h2.width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select()},rename:function(obj){obj=this._get_node(obj);this.__rollback();var f=this.__callback;this._show_input(obj,
function(obj,new_name,old_name){f.call(this,{"obj":obj,"new_name":new_name,"old_name":old_name})})},create:function(obj,position,js,callback,skip_rename){var t,_this=this;obj=this._get_node(obj);if(!obj)obj=-1;this.__rollback();t=this.create_node(obj,position,js,function(t){var p=this._get_parent(t),pos=$(t).index();if(callback)callback.call(this,t);if(p.length&&p.hasClass("jstree-closed"))this.open_node(p,false,true);if(!skip_rename)this._show_input(t,function(obj,new_name,old_name){_this.__callback({"obj":obj,
"name":new_name,"parent":p,"position":pos})});else _this.__callback({"obj":t,"name":this.get_text(t),"parent":p,"position":pos})});return t},remove:function(obj){obj=this._get_node(obj,true);var p=this._get_parent(obj),prev=this._get_prev(obj);this.__rollback();obj=this.delete_node(obj);if(obj!==false)this.__callback({"obj":obj,"prev":prev,"parent":p})},check_move:function(){if(!this.__call_old())return false;var s=this._get_settings().crrm.move;if(!s.check_move.call(this,this._get_move()))return false;
return true},move_node:function(obj,ref,position,is_copy,is_prepared,skip_check){var s=this._get_settings().crrm.move;if(!is_prepared){if(typeof position==="undefined")position=s.default_position;if(position==="inside"&&!s.default_position.match(/^(before|after)$/))position=s.default_position;return this.__call_old(true,obj,ref,position,is_copy,false,skip_check)}if(s.always_copy===true||s.always_copy==="multitree"&&obj.rt.get_index()!==obj.ot.get_index())is_copy=true;this.__call_old(true,obj,ref,
position,is_copy,true,skip_check)},cut:function(obj){obj=this._get_node(obj,true);if(!obj||!obj.length)return false;this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=obj;this.__callback({"obj":obj})},copy:function(obj){obj=this._get_node(obj,true);if(!obj||!obj.length)return false;this.data.crrm.ct_nodes=false;this.data.crrm.cp_nodes=obj;this.__callback({"obj":obj})},paste:function(obj){obj=this._get_node(obj);if(!obj||!obj.length)return false;var nodes=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:
this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return false;if(this.data.crrm.ct_nodes){this.move_node(this.data.crrm.ct_nodes,obj);this.data.crrm.ct_nodes=false}if(this.data.crrm.cp_nodes)this.move_node(this.data.crrm.cp_nodes,obj,false,true);this.__callback({"obj":obj,"nodes":nodes})}}})})(jQuery);(function($){var themes_loaded=[];$.jstree._themes=false;$.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",$.proxy(function(){var s=this._get_settings().themes;
this.data.themes.dots=s.dots;this.data.themes.icons=s.icons;this.set_theme(s.theme,s.url)},this)).bind("loaded.jstree",$.proxy(function(){if(!this.data.themes.dots)this.hide_dots();else this.show_dots();if(!this.data.themes.icons)this.hide_icons();else this.show_icons()},this))},defaults:{theme:"default",url:false,dots:true,icons:true},_fn:{set_theme:function(theme_name,theme_url){if(!theme_name)return false;if(!theme_url)theme_url=$.jstree._themes+theme_name+"/style.css";if($.inArray(theme_url,themes_loaded)==
-1){$.vakata.css.add_sheet({"url":theme_url});themes_loaded.push(theme_url)}if(this.data.themes.theme!=theme_name){this.get_container().removeClass("jstree-"+this.data.themes.theme);this.data.themes.theme=theme_name}this.get_container().addClass("jstree-"+theme_name);if(!this.data.themes.dots)this.hide_dots();else this.show_dots();if(!this.data.themes.icons)this.hide_icons();else this.show_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=
true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){if(this.data.themes.dots)this.hide_dots();else this.show_dots()},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){if(this.data.themes.icons)this.hide_icons();else this.show_icons()}}});$(function(){if($.jstree._themes===false)$("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)){$.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/";return false}});if($.jstree._themes===false)$.jstree._themes="themes/"});$.jstree.defaults.plugins.push("themes")})(jQuery);(function($){var bound=[];function exec(i,event){var f=
$.jstree._focused(),tmp;if(f&&f.data&&f.data.hotkeys&&f.data.hotkeys.enabled){tmp=f._get_settings().hotkeys[i];if(tmp)return tmp.call(f,event)}}$.jstree.plugin("hotkeys",{__init:function(){if(typeof $.hotkeys==="undefined")throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";$.each(this._get_settings().hotkeys,function(i,v){if(v!==false&&$.inArray(i,bound)==-1){$(document).bind("keydown",i,function(event){return exec(i,event)});
bound.push(i)}});this.get_container().bind("lock.jstree",$.proxy(function(){if(this.data.hotkeys.enabled){this.data.hotkeys.enabled=false;this.data.hotkeys.revert=true}},this)).bind("unlock.jstree",$.proxy(function(){if(this.data.hotkeys.revert)this.data.hotkeys.enabled=true},this));this.enable_hotkeys()},defaults:{"up":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(o));return false},"ctrl+up":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||
-1;this.hover_node(this._get_prev(o));return false},"shift+up":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(o));return false},"down":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(o));return false},"ctrl+down":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(o));return false},"shift+down":function(){var o=this.data.ui.hovered||this.data.ui.last_selected||
-1;this.hover_node(this._get_next(o));return false},"left":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o)if(o.hasClass("jstree-open"))this.close_node(o);else this.hover_node(this._get_prev(o));return false},"ctrl+left":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o)if(o.hasClass("jstree-open"))this.close_node(o);else this.hover_node(this._get_prev(o));return false},"shift+left":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o)if(o.hasClass("jstree-open"))this.close_node(o);
else this.hover_node(this._get_prev(o));return false},"right":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o&&o.length)if(o.hasClass("jstree-closed"))this.open_node(o);else this.hover_node(this._get_next(o));return false},"ctrl+right":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;if(o&&o.length)if(o.hasClass("jstree-closed"))this.open_node(o);else this.hover_node(this._get_next(o));return false},"shift+right":function(){var o=this.data.ui.hovered||this.data.ui.last_selected;
if(o&&o.length)if(o.hasClass("jstree-closed"))this.open_node(o);else this.hover_node(this._get_next(o));return false},"space":function(){if(this.data.ui.hovered)this.data.ui.hovered.children("a:eq(0)").click();return false},"ctrl+space":function(event){event.type="click";if(this.data.ui.hovered)this.data.ui.hovered.children("a:eq(0)").trigger(event);return false},"shift+space":function(event){event.type="click";if(this.data.ui.hovered)this.data.ui.hovered.children("a:eq(0)").trigger(event);return false},
"f2":function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},"del":function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=true},disable_hotkeys:function(){this.data.hotkeys.enabled=false}}})})(jQuery);(function($){$.jstree.plugin("json_data",{__init:function(){var s=this._get_settings().json_data;if(s.progressive_unload)this.get_container().bind("after_close.jstree",function(e,data){data.rslt.obj.children("ul").remove()})},
defaults:{data:false,ajax:false,correct_state:true,progressive_render:false,progressive_unload:false},_fn:{load_node:function(obj,s_call,e_call){var _this=this;this.load_node_json(obj,function(){_this.__callback({"obj":_this._get_node(obj)});s_call.call(this)},e_call)},_is_loaded:function(obj){var s=this._get_settings().json_data;obj=this._get_node(obj);return obj==-1||!obj||!s.ajax&&!s.progressive_render&&!$.isFunction(s.data)||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").length>
0},refresh:function(obj){obj=this._get_node(obj);var s=this._get_settings().json_data;if(obj&&obj!==-1&&s.progressive_unload&&($.isFunction(s.data)||!!s.ajax))obj.removeData("jstree_children");return this.__call_old()},load_node_json:function(obj,s_call,e_call){var s=this.get_settings().json_data,d,error_func=function(){},success_func=function(){};obj=this._get_node(obj);if(obj&&obj!==-1&&(s.progressive_render||s.progressive_unload)&&!obj.is(".jstree-open, .jstree-leaf")&&obj.children("ul").children("li").length===
0&&obj.data("jstree_children")){d=this._parse_json(obj.data("jstree_children"),obj);if(d){obj.append(d);if(!s.progressive_unload)obj.removeData("jstree_children")}this.clean_node(obj);if(s_call)s_call.call(this);return}if(obj&&obj!==-1)if(obj.data("jstree_is_loading"))return;else obj.data("jstree_is_loading",true);switch(!0){case !s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case $.isFunction(s.data):s.data.call(this,obj,$.proxy(function(d){d=this._parse_json(d,obj);if(!d){if(obj===
-1||!obj){if(s.correct_state)this.get_container().children("ul").empty()}else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(s.correct_state)this.correct_state(obj)}if(e_call)e_call.call(this)}else{if(obj===-1||!obj)this.get_container().children("ul").empty().append(d.children());else{obj.append(d).children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}},
this));break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||obj===-1):if(!obj||obj==-1){d=this._parse_json(s.data,obj);if(d){this.get_container().children("ul").empty().append(d.children());this.clean_node()}else if(s.correct_state)this.get_container().children("ul").empty()}if(s_call)s_call.call(this);break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&obj!==-1:error_func=function(x,t,e){var ef=this.get_settings().json_data.ajax.error;if(ef)ef.call(this,x,t,e);if(obj!=-1&&obj.length){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(t==="success"&&s.correct_state)this.correct_state(obj)}else if(t==="success"&&s.correct_state)this.get_container().children("ul").empty();if(e_call)e_call.call(this)};success_func=function(d,t,x){var sf=this.get_settings().json_data.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")===""||!$.isArray(d)&&!$.isPlainObject(d))return error_func.call(this,x,t,"");d=this._parse_json(d,obj);if(d){if(obj===-1||
!obj)this.get_container().children("ul").empty().append(d.children());else{obj.append(d).children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj===-1||!obj){if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}}else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}};
s.ajax.context=this;s.ajax.error=error_func;s.ajax.success=success_func;if(!s.ajax.dataType)s.ajax.dataType="json";if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,obj);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,obj);$.ajax(s.ajax);break}},_parse_json:function(js,obj,is_callback){var d=false,p=this._get_settings(),s=p.json_data,t=p.core.html_titles,tmp,i,j,ul1,ul2;if(!js)return d;if(s.progressive_unload&&obj&&obj!==-1)obj.data("jstree_children",d);if($.isArray(js)){d=
$();if(!js.length)return false;for(i=0,j=js.length;i<j;i++){tmp=this._parse_json(js[i],obj,true);if(tmp.length)d=d.add(tmp)}}else{if(typeof js=="string")js={data:js};if(!js.data&&js.data!=="")return d;d=$("<li />");if(js.attr)d.attr(js.attr);if(js.metadata)d.data(js.metadata);if(js.state)d.addClass("jstree-"+js.state);if(!$.isArray(js.data)){tmp=js.data;js.data=[];js.data.push(tmp)}$.each(js.data,function(i,m){tmp=$("<a />");if($.isFunction(m))m=m.call(this,js);if(typeof m=="string")tmp.attr("href",
"#")[t?"html":"text"](m);else{if(!m.attr)m.attr={};if(!m.attr.href)m.attr.href="#";tmp.attr(m.attr)[t?"html":"text"](m.title);if(m.language)tmp.addClass(m.language)}tmp.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!m.icon&&js.icon)m.icon=js.icon;if(m.icon)if(m.icon.indexOf("/")===-1)tmp.children("ins").addClass(m.icon);else tmp.children("ins").css("background","url('"+m.icon+"') center center no-repeat");d.append(tmp)});d.prepend("<ins class='jstree-icon'>&#160;</ins>");if(js.children)if(s.progressive_render&&
js.state!=="open")d.addClass("jstree-closed").data("jstree_children",js.children);else{if(s.progressive_unload)d.data("jstree_children",js.children);if($.isArray(js.children)&&js.children.length){tmp=this._parse_json(js.children,obj,true);if(tmp.length){ul2=$("<ul />");ul2.append(tmp);d.append(ul2)}}}}if(!is_callback){ul1=$("<ul />");ul1.append(d);d=ul1}return d},get_json:function(obj,li_attr,a_attr,is_callback){var result=[],s=this._get_settings(),_this=this,tmp1,tmp2,li,a,t,lang;obj=this._get_node(obj);
if(!obj||obj===-1)obj=this.get_container().find("> ul > li");li_attr=$.isArray(li_attr)?li_attr:["id","class"];if(!is_callback&&this.data.types)li_attr.push(s.types.type_attr);a_attr=$.isArray(a_attr)?a_attr:[];obj.each(function(){li=$(this);tmp1={data:[]};if(li_attr.length)tmp1.attr={};$.each(li_attr,function(i,v){tmp2=li.attr(v);if(tmp2&&tmp2.length&&tmp2.replace(/jstree[^ ]*/ig,"").length)tmp1.attr[v]=(" "+tmp2).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});
if(li.hasClass("jstree-open"))tmp1.state="open";if(li.hasClass("jstree-closed"))tmp1.state="closed";if(li.data())tmp1.metadata=li.data();a=li.children("a");a.each(function(){t=$(this);if(a_attr.length||$.inArray("languages",s.plugins)!==-1||t.children("ins").get(0).style.backgroundImage.length||t.children("ins").get(0).className&&t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){lang=false;if($.inArray("languages",s.plugins)!==-1&&$.isArray(s.languages)&&s.languages.length)$.each(s.languages,
function(l,lv){if(t.hasClass(lv)){lang=lv;return false}});tmp2={attr:{},title:_this.get_text(t,lang)};$.each(a_attr,function(k,z){tmp2.attr[z]=(" "+(t.attr(z)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});if($.inArray("languages",s.plugins)!==-1&&$.isArray(s.languages)&&s.languages.length)$.each(s.languages,function(k,z){if(t.hasClass(z)){tmp2.language=z;return true}});if(t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,
"").length)tmp2.icon=t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");if(t.children("ins").get(0).style.backgroundImage.length)tmp2.icon=t.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}else tmp2=_this.get_text(t);if(a.length>1)tmp1.data.push(tmp2);else tmp1.data=tmp2});li=li.find("> ul > li");if(li.length)tmp1.children=_this.get_json(li,li_attr,a_attr,true);result.push(tmp1)});return result}}})})(jQuery);
(function($){$.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(i){var langs=this._get_settings().languages,st=false,selector=".jstree-"+this.get_index()+" a";if(!$.isArray(langs)||langs.length===0)return false;if($.inArray(i,langs)==-1)if(!!langs[i])i=langs[i];else return false;if(i==this.data.languages.current_language)return true;st=$.vakata.css.get_css(selector+"."+this.data.languages.current_language,false,this.data.languages.language_css);if(st!==
false)st.style.display="none";st=$.vakata.css.get_css(selector+"."+i,false,this.data.languages.language_css);if(st!==false)st.style.display="";this.data.languages.current_language=i;this.__callback(i);return true},get_lang:function(){return this.data.languages.current_language},_get_string:function(key,lang){var langs=this._get_settings().languages,s=this._get_settings().core.strings;if($.isArray(langs)&&langs.length)lang=lang&&$.inArray(lang,langs)!=-1?lang:this.data.languages.current_language;if(s[lang]&&
s[lang][key])return s[lang][key];if(s[key])return s[key];return key},get_text:function(obj,lang){obj=this._get_node(obj)||this.data.ui.last_selected;if(!obj.size())return false;var langs=this._get_settings().languages,s=this._get_settings().core.html_titles;if($.isArray(langs)&&langs.length){lang=lang&&$.inArray(lang,langs)!=-1?lang:this.data.languages.current_language;obj=obj.children("a."+lang)}else obj=obj.children("a:eq(0)");if(s){obj=obj.clone();obj.children("INS").remove();return obj.html()}else{obj=
obj.contents().filter(function(){return this.nodeType==3})[0];return obj.nodeValue}},set_text:function(obj,val,lang){obj=this._get_node(obj)||this.data.ui.last_selected;if(!obj.size())return false;var langs=this._get_settings().languages,s=this._get_settings().core.html_titles,tmp;if($.isArray(langs)&&langs.length){lang=lang&&$.inArray(lang,langs)!=-1?lang:this.data.languages.current_language;obj=obj.children("a."+lang)}else obj=obj.children("a:eq(0)");if(s){tmp=obj.children("INS").clone();obj.html(val).prepend(tmp);
this.__callback({"obj":obj,"name":val,"lang":lang});return true}else{obj=obj.contents().filter(function(){return this.nodeType==3})[0];this.__callback({"obj":obj,"name":val,"lang":lang});return obj.nodeValue=val}},_load_css:function(){var langs=this._get_settings().languages,str="/* languages css */",selector=".jstree-"+this.get_index()+" a",ln;if($.isArray(langs)&&langs.length){this.data.languages.current_language=langs[0];for(ln=0;ln<langs.length;ln++){str+=selector+"."+langs[ln]+" {";if(langs[ln]!=
this.data.languages.current_language)str+=" display:none; ";str+=" } "}this.data.languages.language_css=$.vakata.css.add_sheet({"str":str,"title":"jstree-languages"})}},create_node:function(obj,position,js,callback){var t=this.__call_old(true,obj,position,js,function(t){var langs=this._get_settings().languages,a=t.children("a"),ln;if($.isArray(langs)&&langs.length){for(ln=0;ln<langs.length;ln++)if(!a.is("."+langs[ln]))t.append(a.eq(0).clone().removeClass(langs.join(" ")).addClass(langs[ln]));a.not("."+
langs.join(", .")).remove()}if(callback)callback.call(this,t)});return t}}})})(jQuery);(function($){$.jstree.plugin("cookies",{__init:function(){if(typeof $.cookie==="undefined")throw"jsTree cookie: jQuery cookie plugin not included.";var s=this._get_settings().cookies,tmp;if(!!s.save_loaded){tmp=$.cookie(s.save_loaded);if(tmp&&tmp.length)this.data.core.to_load=tmp.split(",")}if(!!s.save_opened){tmp=$.cookie(s.save_opened);if(tmp&&tmp.length)this.data.core.to_open=tmp.split(",")}if(!!s.save_selected){tmp=
$.cookie(s.save_selected);if(tmp&&tmp.length&&this.data.ui)this.data.ui.to_select=tmp.split(",")}this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",$.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",$.proxy(function(e){if(this._get_settings().cookies.auto_save)this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",
save_selected:"jstree_select",auto_save:true,cookie_options:{}},_fn:{save_cookie:function(c){if(this.data.core.refreshing)return;var s=this._get_settings().cookies;if(!c){if(s.save_loaded){this.save_loaded();$.cookie(s.save_loaded,this.data.core.to_load.join(","),s.cookie_options)}if(s.save_opened){this.save_opened();$.cookie(s.save_opened,this.data.core.to_open.join(","),s.cookie_options)}if(s.save_selected&&this.data.ui){this.save_selected();$.cookie(s.save_selected,this.data.ui.to_select.join(","),
s.cookie_options)}return}switch(c){case "open_node":case "close_node":if(!!s.save_opened){this.save_opened();$.cookie(s.save_opened,this.data.core.to_open.join(","),s.cookie_options)}if(!!s.save_loaded){this.save_loaded();$.cookie(s.save_loaded,this.data.core.to_load.join(","),s.cookie_options)}break;case "select_node":case "deselect_node":if(!!s.save_selected&&this.data.ui){this.save_selected();$.cookie(s.save_selected,this.data.ui.to_select.join(","),s.cookie_options)}break}}}})})(jQuery);(function($){$.jstree.plugin("sort",
{__init:function(){this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var obj=this._get_node(data.rslt.obj);obj=obj===-1?this.get_container().children("ul"):obj.children("ul");this.sort(obj)},this)).bind("rename_node.jstree create_node.jstree create.jstree",$.proxy(function(e,data){this.sort(data.rslt.obj.parent())},this)).bind("move_node.jstree",$.proxy(function(e,data){var m=data.rslt.np==-1?this.get_container():data.rslt.np;this.sort(m.children("ul"))},this))},defaults:function(a,
b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(obj){var s=this._get_settings().sort,t=this;obj.append($.makeArray(obj.children("li")).sort($.proxy(s,t)));obj.find("> li > ul").each(function(){t.sort($(this))});this.clean_node(obj)}}})})(jQuery);(function($){var o=false,r=false,m=false,ml=false,sli=false,sti=false,dir1=false,dir2=false,last_pos=false;$.vakata.dnd={is_down:false,is_drag:false,helper:false,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,
user_data:{},drag_start:function(e,data,html){if($.vakata.dnd.is_drag)$.vakata.drag_stop({});try{e.currentTarget.unselectable="on";e.currentTarget.onselectstart=function(){return false};if(e.currentTarget.style)e.currentTarget.style.MozUserSelect="none"}catch(err){}$.vakata.dnd.init_x=e.pageX;$.vakata.dnd.init_y=e.pageY;$.vakata.dnd.user_data=data;$.vakata.dnd.is_down=true;$.vakata.dnd.helper=$("<div id='vakata-dragged' />").html(html);$(document).bind("mousemove",$.vakata.dnd.drag);$(document).bind("mouseup",
$.vakata.dnd.drag_stop);return false},drag:function(e){if(!$.vakata.dnd.is_down)return;if(!$.vakata.dnd.is_drag)if(Math.abs(e.pageX-$.vakata.dnd.init_x)>5||Math.abs(e.pageY-$.vakata.dnd.init_y)>5){$.vakata.dnd.helper.appendTo("body");$.vakata.dnd.is_drag=true;$(document).triggerHandler("drag_start.vakata",{"event":e,"data":$.vakata.dnd.user_data})}else return;if(e.type==="mousemove"){var d=$(document),t=d.scrollTop(),l=d.scrollLeft();if(e.pageY-t<20){if(sti&&dir1==="down"){clearInterval(sti);sti=
false}if(!sti){dir1="up";sti=setInterval(function(){$(document).scrollTop($(document).scrollTop()-$.vakata.dnd.scroll_spd)},150)}}else if(sti&&dir1==="up"){clearInterval(sti);sti=false}if($(window).height()-(e.pageY-t)<20){if(sti&&dir1==="up"){clearInterval(sti);sti=false}if(!sti){dir1="down";sti=setInterval(function(){$(document).scrollTop($(document).scrollTop()+$.vakata.dnd.scroll_spd)},150)}}else if(sti&&dir1==="down"){clearInterval(sti);sti=false}if(e.pageX-l<20){if(sli&&dir2==="right"){clearInterval(sli);
sli=false}if(!sli){dir2="left";sli=setInterval(function(){$(document).scrollLeft($(document).scrollLeft()-$.vakata.dnd.scroll_spd)},150)}}else if(sli&&dir2==="left"){clearInterval(sli);sli=false}if($(window).width()-(e.pageX-l)<20){if(sli&&dir2==="left"){clearInterval(sli);sli=false}if(!sli){dir2="right";sli=setInterval(function(){$(document).scrollLeft($(document).scrollLeft()+$.vakata.dnd.scroll_spd)},150)}}else if(sli&&dir2==="right"){clearInterval(sli);sli=false}}$.vakata.dnd.helper.css({left:e.pageX+
$.vakata.dnd.helper_left+"px",top:e.pageY+$.vakata.dnd.helper_top+"px"});$(document).triggerHandler("drag.vakata",{"event":e,"data":$.vakata.dnd.user_data})},drag_stop:function(e){if(sli)clearInterval(sli);if(sti)clearInterval(sti);$(document).unbind("mousemove",$.vakata.dnd.drag);$(document).unbind("mouseup",$.vakata.dnd.drag_stop);$(document).triggerHandler("drag_stop.vakata",{"event":e,"data":$.vakata.dnd.user_data});$.vakata.dnd.helper.remove();$.vakata.dnd.init_x=0;$.vakata.dnd.init_y=0;$.vakata.dnd.user_data=
{};$.vakata.dnd.is_down=false;$.vakata.dnd.is_drag=false}};$(function(){var css_string="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } "});$.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:false,after:false,inside:false,before:false,off:false,prepared:false,w:0,to1:false,to2:false,cof:false,cw:false,ch:false,i1:false,i2:false,mto:false};this.get_container().bind("mouseenter.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&
$.vakata.dnd.user_data.jstree){if(this.data.themes){m.attr("class","jstree-"+this.data.themes.theme);if(ml)ml.attr("class","jstree-"+this.data.themes.theme);$.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}if(e.currentTarget===e.target&&$.vakata.dnd.user_data.obj&&$($.vakata.dnd.user_data.obj).length&&$($.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var tr=$.jstree._reference(e.target),dc;if(tr.data.dnd.foreign){dc=tr._get_settings().dnd.drag_check.call(this,
{"o":o,"r":tr.get_container(),is_root:true});if(dc===true||dc.inside===true||dc.before===true||dc.after===true)$.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}else{tr.prepare_move(o,tr.get_container(),"last");if(tr.check_move())$.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}}},this)).bind("mouseup.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&$.vakata.dnd.user_data.obj&&$($.vakata.dnd.user_data.obj).length&&
$($.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var tr=$.jstree._reference(e.currentTarget),dc;if(tr.data.dnd.foreign){dc=tr._get_settings().dnd.drag_check.call(this,{"o":o,"r":tr.get_container(),is_root:true});if(dc===true||dc.inside===true||dc.before===true||dc.after===true)tr._get_settings().dnd.drag_finish.call(this,{"o":o,"r":tr.get_container(),is_root:true})}else tr.move_node(o,tr.get_container(),"last",e[tr._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",
$.proxy(function(e){if(e.relatedTarget&&e.relatedTarget.id&&e.relatedTarget.id==="jstree-marker-line")return false;if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1);if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2);if($.vakata.dnd.helper.children("ins").hasClass("jstree-ok"))$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}},
this)).bind("mousemove.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){var cnt=this.get_container()[0];if(e.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw){if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);this.data.dnd.i1=setInterval($.proxy(function(){this.scrollLeft+=$.vakata.dnd.scroll_spd},cnt),100)}else if(e.pageX-24<this.data.dnd.cof.left){if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);this.data.dnd.i1=setInterval($.proxy(function(){this.scrollLeft-=
$.vakata.dnd.scroll_spd},cnt),100)}else if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);if(e.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch){if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);this.data.dnd.i2=setInterval($.proxy(function(){this.scrollTop+=$.vakata.dnd.scroll_spd},cnt),100)}else if(e.pageY-24<this.data.dnd.cof.top){if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);this.data.dnd.i2=setInterval($.proxy(function(){this.scrollTop-=$.vakata.dnd.scroll_spd},cnt),100)}else if(this.data.dnd.i2)clearInterval(this.data.dnd.i2)}},
this)).bind("scroll.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree&&m&&ml){m.hide();ml.hide()}},this)).delegate("a","mousedown.jstree",$.proxy(function(e){if(e.which===1){this.start_drag(e.currentTarget,e);return false}},this)).delegate("a","mouseenter.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree)this.dnd_enter(e.currentTarget)},this)).delegate("a","mousemove.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){if(!r||
!r.length||r.children("a")[0]!==e.currentTarget)this.dnd_enter(e.currentTarget);if(typeof this.data.dnd.off.top==="undefined")this.data.dnd.off=$(e.target).offset();this.data.dnd.w=(e.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;if(this.data.dnd.w<0)this.data.dnd.w+=this.data.core.li_height;this.dnd_show()}},this)).delegate("a","mouseleave.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree){if(e.relatedTarget&&e.relatedTarget.id&&e.relatedTarget.id===
"jstree-marker-line")return false;if(m)m.hide();if(ml)ml.hide();this.data.dnd.mto=setTimeout(function(t){return function(){t.dnd_leave(e)}}(this),0)}},this)).delegate("a, #jstree-marker-line","mouseup.jstree",$.proxy(function(e){if($.vakata.dnd.is_drag&&$.vakata.dnd.user_data.jstree)this.dnd_finish(e)},this));$(document).bind("drag_stop.vakata",$.proxy(function(){if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1);if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2);if(this.data.dnd.i1)clearInterval(this.data.dnd.i1);
if(this.data.dnd.i2)clearInterval(this.data.dnd.i2);this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;this.data.dnd.off=false;this.data.dnd.prepared=false;this.data.dnd.w=false;this.data.dnd.to1=false;this.data.dnd.to2=false;this.data.dnd.i1=false;this.data.dnd.i2=false;this.data.dnd.active=false;this.data.dnd.foreign=false;if(m)m.css({"top":"-2000px"});if(ml)ml.css({"top":"-2000px"})},this)).bind("drag_start.vakata",$.proxy(function(e,data){if(data.data.jstree){var et=
$(data.event.target);if(et.closest(".jstree").hasClass("jstree-"+this.get_index()))this.dnd_enter(et)}},this));var s=this._get_settings().dnd;if(s.drag_target)$(document).delegate(s.drag_target,"mousedown.jstree-"+this.get_index(),$.proxy(function(e){o=e.target;$.vakata.dnd.drag_start(e,{jstree:true,obj:e.target},"<ins class='jstree-icon'></ins>"+$(e.target).text());if(this.data.themes){if(m)m.attr("class","jstree-"+this.data.themes.theme);if(ml)ml.attr("class","jstree-"+this.data.themes.theme);$.vakata.dnd.helper.attr("class",
"jstree-dnd-helper jstree-"+this.data.themes.theme)}$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var cnt=this.get_container();this.data.dnd.cof=cnt.offset();this.data.dnd.cw=parseInt(cnt.width(),10);this.data.dnd.ch=parseInt(cnt.height(),10);this.data.dnd.foreign=true;e.preventDefault()},this));if(s.drop_target)$(document).delegate(s.drop_target,"mouseenter.jstree-"+this.get_index(),$.proxy(function(e){if(this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{"o":o,
"r":$(e.target),"e":e}))$.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(s.drop_target,"mouseleave.jstree-"+this.get_index(),$.proxy(function(e){if(this.data.dnd.active)$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(s.drop_target,"mouseup.jstree-"+this.get_index(),$.proxy(function(e){if(this.data.dnd.active&&$.vakata.dnd.helper.children("ins").hasClass("jstree-ok"))this._get_settings().dnd.drop_finish.call(this,{"o":o,"r":$(e.target),
"e":e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(data){return true},drop_finish:$.noop,drag_target:".jstree-draggable",drag_finish:$.noop,drag_check:function(data){return{after:false,before:false,inside:true}}},_fn:{dnd_prepare:function(){if(!r||!r.length)return;this.data.dnd.off=r.offset();if(this._get_settings().core.rtl)this.data.dnd.off.right=this.data.dnd.off.left+r.width();if(this.data.dnd.foreign){var a=this._get_settings().dnd.drag_check.call(this,
{"o":o,"r":r});this.data.dnd.after=a.after;this.data.dnd.before=a.before;this.data.dnd.inside=a.inside;this.data.dnd.prepared=true;return this.dnd_show()}this.prepare_move(o,r,"before");this.data.dnd.before=this.check_move();this.prepare_move(o,r,"after");this.data.dnd.after=this.check_move();if(this._is_loaded(r)){this.prepare_move(o,r,"inside");this.data.dnd.inside=this.check_move()}else this.data.dnd.inside=false;this.data.dnd.prepared=true;return this.dnd_show()},dnd_show:function(){if(!this.data.dnd.prepared)return;
var o=["before","inside","after"],r=false,rtl=this._get_settings().core.rtl,pos;if(this.data.dnd.w<this.data.core.li_height/3)o=["before","inside","after"];else if(this.data.dnd.w<=this.data.core.li_height*2/3)o=this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"];else o=["after","inside","before"];$.each(o,$.proxy(function(i,val){if(this.data.dnd[val]){$.vakata.dnd.helper.children("ins").attr("class","jstree-ok");r=val;return false}},this));if(r===false)$.vakata.dnd.helper.children("ins").attr("class",
"jstree-invalid");pos=rtl?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(r){case "before":m.css({"left":pos+"px","top":this.data.dnd.off.top-6+"px"}).show();if(ml)ml.css({"left":pos+8+"px","top":this.data.dnd.off.top-1+"px"}).show();break;case "after":m.css({"left":pos+"px","top":this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();if(ml)ml.css({"left":pos+8+"px","top":this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":m.css({"left":pos+(rtl?
-4:4)+"px","top":this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();if(ml)ml.hide();break;default:m.hide();if(ml)ml.hide();break}last_pos=r;return r},dnd_open:function(){this.data.dnd.to2=false;this.open_node(r,$.proxy(this.dnd_prepare,this),true)},dnd_finish:function(e){if(this.data.dnd.foreign){if(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)this._get_settings().dnd.drag_finish.call(this,{"o":o,"r":r,"p":last_pos})}else{this.dnd_prepare();this.move_node(o,r,last_pos,
e[this._get_settings().dnd.copy_modifier+"Key"])}o=false;r=false;m.hide();if(ml)ml.hide()},dnd_enter:function(obj){if(this.data.dnd.mto){clearTimeout(this.data.dnd.mto);this.data.dnd.mto=false}var s=this._get_settings().dnd;this.data.dnd.prepared=false;r=this._get_node(obj);if(s.check_timeout){if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1);this.data.dnd.to1=setTimeout($.proxy(this.dnd_prepare,this),s.check_timeout)}else this.dnd_prepare();if(s.open_timeout){if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2);
if(r&&r.length&&r.hasClass("jstree-closed"))this.data.dnd.to2=setTimeout($.proxy(this.dnd_open,this),s.open_timeout)}else if(r&&r.length&&r.hasClass("jstree-closed"))this.dnd_open()},dnd_leave:function(e){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");m.hide();if(ml)ml.hide();if(r&&r[0]===e.target.parentNode){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1);this.data.dnd.to1=false}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2);
this.data.dnd.to2=false}}},start_drag:function(obj,e){o=this._get_node(obj);if(this.data.ui&&this.is_selected(o))o=this._get_node(null,true);var dt=o.length>1?this._get_string("multiple_selection"):this.get_text(o),cnt=this.get_container();if(!this._get_settings().core.html_titles)dt=dt.replace(/</ig,"&lt;").replace(/>/ig,"&gt;");$.vakata.dnd.drag_start(e,{jstree:true,obj:o},"<ins class='jstree-icon'></ins>"+dt);if(this.data.themes){if(m)m.attr("class","jstree-"+this.data.themes.theme);if(ml)ml.attr("class",
"jstree-"+this.data.themes.theme);$.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}this.data.dnd.cof=cnt.offset();this.data.dnd.cw=parseInt(cnt.width(),10);this.data.dnd.ch=parseInt(cnt.height(),10);this.data.dnd.active=true}}});$(function(){var css_string=""+"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px; "+" -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; "+
"} "+"#vakata-dragged .jstree-ok { background:green; } "+"#vakata-dragged .jstree-invalid { background:red; } "+"#jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } "+"#jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43; "+
" cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666; "+" -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; "+"}"+"";$.vakata.css.add_sheet({str:css_string,title:"jstree"});m=$("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){m.hide();ml.hide();e.preventDefault();e.stopImmediatePropagation();return false}).appendTo("body");
ml=$("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(r&&r.length){r.children("a").trigger(e);e.preventDefault();e.stopImmediatePropagation();return false}}).bind("mouseleave",function(e){var rt=$(e.relatedTarget);if(rt.is(".jstree")||rt.closest(".jstree").length===0)if(r&&r.length){r.children("a").trigger(e);m.hide();ml.hide();e.preventDefault();e.stopImmediatePropagation();return false}}).appendTo("body");$(document).bind("drag_start.vakata",function(e,data){if(data.data.jstree){m.show();
if(ml)ml.show()}});$(document).bind("drag_stop.vakata",function(e,data){if(data.data.jstree){m.hide();if(ml)ml.hide()}})})})(jQuery);(function($){$.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui){this.select_node=this.deselect_node=this.deselect_all=$.noop;this.get_selected=this.get_checked}this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",$.proxy(function(e,
data){this._prepare_checkboxes(data.rslt.obj)},this)).bind("loaded.jstree",$.proxy(function(e){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",$.proxy(function(e){e.preventDefault();if(this._get_node(e.target).hasClass("jstree-checked"))this.uncheck_node(e.target);else this.check_node(e.target);if(this.data.ui&&this.data.checkbox.noui){this.save_selected();if(this.data.cookies)this.save_cookie("select_node")}else{e.stopImmediatePropagation();
return false}},this))},defaults:{override_ui:false,two_state:false,real_checkboxes:false,checked_parent_open:true,real_checkboxes_names:function(n){return["check_"+(n[0].id||Math.ceil(Math.random()*1E4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(n,data){if(data.checked)this.check_node(n,false)},_prepare_checkboxes:function(obj){obj=!obj||obj==-1?this.get_container().find("> ul > li"):
this._get_node(obj);if(obj===false)return;var c,_this=this,t,ts=this._get_settings().checkbox.two_state,rc=this._get_settings().checkbox.real_checkboxes,rcn=this._get_settings().checkbox.real_checkboxes_names;obj.each(function(){t=$(this);c=t.is("li")&&(t.hasClass("jstree-checked")||rc&&t.children(":checked").length)?"jstree-checked":"jstree-unchecked";t.find("li").andSelf().each(function(){var $t=$(this),nm;$t.children("a"+(_this.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(ts?
"jstree-unchecked":c);if(rc)if(!$t.children(":checkbox").length){nm=rcn.call(_this,$t);$t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+nm[0]+"' name='"+nm[0]+"' value='"+nm[1]+"' />")}else $t.children(":checkbox").addClass("jstree-real-checkbox");if(!ts){if(c==="jstree-checked"||$t.hasClass("jstree-checked")||$t.children(":checked").length)$t.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",true)}else if($t.hasClass("jstree-checked")||$t.children(":checked").length)$t.addClass("jstree-checked").children(":checkbox").prop("checked",
true)})});if(!ts)obj.find(".jstree-checked").parent().parent().each(function(){_this._repair_state(this)})},change_state:function(obj,state){obj=this._get_node(obj);var coll=false,rc=this._get_settings().checkbox.real_checkboxes;if(!obj||obj===-1)return false;state=state===false||state===true?state:obj.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state)if(state){obj.removeClass("jstree-checked").addClass("jstree-unchecked");if(rc)obj.children(":checkbox").prop("checked",false)}else{obj.removeClass("jstree-unchecked").addClass("jstree-checked");
if(rc)obj.children(":checkbox").prop("checked",true)}else{if(state){coll=obj.find("li").andSelf();if(!coll.filter(".jstree-checked, .jstree-undetermined").length)return false;coll.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(rc)coll.children(":checkbox").prop("checked",false)}else{coll=obj.find("li").andSelf();if(!coll.filter(".jstree-unchecked, .jstree-undetermined").length)return false;coll.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");
if(rc)coll.children(":checkbox").prop("checked",true);if(this.data.ui)this.data.ui.last_selected=obj;this.data.checkbox.last_selected=obj}obj.parentsUntil(".jstree","li").each(function(){var $this=$(this);if(state)if($this.children("ul").children("li.jstree-checked, li.jstree-undetermined").length){$this.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(rc)$this.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
false);return false}else{$this.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(rc)$this.children(":checkbox").prop("checked",false)}else if($this.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length){$this.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(rc)$this.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",false);return false}else{$this.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");
if(rc)$this.children(":checkbox").prop("checked",true)}})}if(this.data.ui&&this.data.checkbox.noui)this.data.ui.selected=this.get_checked();this.__callback(obj);return true},check_node:function(obj){if(this.change_state(obj,false)){obj=this._get_node(obj);if(this._get_settings().checkbox.checked_parent_open){var t=this;obj.parents(".jstree-closed").each(function(){t.open_node(this,false,true)})}this.__callback({"obj":obj})}},uncheck_node:function(obj){if(this.change_state(obj,true))this.__callback({"obj":this._get_node(obj)})},
check_all:function(){var _this=this,coll=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");coll.each(function(){_this.change_state(this,false)});this.__callback()},uncheck_all:function(){var _this=this,coll=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");coll.each(function(){_this.change_state(this,true)});this.__callback()},is_checked:function(obj){obj=this._get_node(obj);
return obj.length?obj.is(".jstree-checked"):false},get_checked:function(obj,get_all){obj=!obj||obj===-1?this.get_container():this._get_node(obj);return get_all||this._get_settings().checkbox.two_state?obj.find(".jstree-checked"):obj.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(obj,get_all){obj=!obj||obj===-1?this.get_container():this._get_node(obj);return get_all||this._get_settings().checkbox.two_state?obj.find(".jstree-unchecked"):obj.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(obj){obj=this._get_node(obj);if(!obj.length)return;if(this._get_settings().checkbox.two_state){obj.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",true);return}var rc=this._get_settings().checkbox.real_checkboxes,
a=obj.find("> ul > .jstree-checked").length,b=obj.find("> ul > .jstree-undetermined").length,c=obj.find("> ul > li").length;if(c===0){if(obj.hasClass("jstree-undetermined"))this.change_state(obj,false)}else if(a===0&&b===0)this.change_state(obj,true);else if(a===c)this.change_state(obj,false);else{obj.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(rc)obj.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
false)}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var _this=this,s=this.data.ui.to_select;s=$.map($.makeArray(s),function(n){return"#"+n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();$.each(s,function(i,val){_this.check_node(val)});this.__callback()}else this.__call_old()},save_loaded:function(){var _this=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){if(this.id)_this.data.core.to_load.push("#"+
this.id)})}}});$(function(){var css_string=".jstree .jstree-real-checkbox { display:none; } ";$.vakata.css.add_sheet({str:css_string,title:"jstree"})})})(jQuery);(function($){$.vakata.xslt=function(xml,xsl,callback){var rs="",xm,xs,processor,support;if(document.recalc){xm=document.createElement("xml");xs=document.createElement("xml");xm.innerHTML=xml;xs.innerHTML=xsl;$("body").append(xm).append(xs);setTimeout(function(xm,xs,callback){return function(){callback.call(null,xm.transformNode(xs.XMLDocument));
setTimeout(function(xm,xs){return function(){$(xm).remove();$(xs).remove()}}(xm,xs),200)}}(xm,xs,callback),100);return true}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor==="undefined"){xml=(new DOMParser).parseFromString(xml,"text/xml");xsl=(new DOMParser).parseFromString(xsl,"text/xml")}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){processor=new XSLTProcessor;
support=$.isFunction(processor.transformDocument)?typeof window.XMLSerializer!=="undefined":true;if(!support)return false;xml=(new DOMParser).parseFromString(xml,"text/xml");xsl=(new DOMParser).parseFromString(xsl,"text/xml");if($.isFunction(processor.transformDocument)){rs=document.implementation.createDocument("","",null);processor.transformDocument(xml,xsl,rs,null);callback.call(null,(new XMLSerializer).serializeToString(rs));return true}else{processor.importStylesheet(xsl);rs=processor.transformToFragment(xml,
document);callback.call(null,$("<div />").append(rs).html());return true}}return false};var xsl={"nest":"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" />'+'<xsl:template match="/">'+'\t<xsl:call-template name="nodes">'+'\t\t<xsl:with-param name="node" select="/root" />'+"\t</xsl:call-template>"+"</xsl:template>"+
'<xsl:template name="nodes">'+'\t<xsl:param name="node" />'+"\t<ul>"+'\t<xsl:for-each select="$node/item">'+'\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />'+"\t\t<li>"+'\t\t\t<xsl:attribute name="class">'+'\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>'+"\t\t\t\t<xsl:choose>"+"\t\t\t\t\t<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"\t\t\t\t\t<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>"+
"\t\t\t\t</xsl:choose>"+'\t\t\t\t<xsl:value-of select="@class" />'+"\t\t\t</xsl:attribute>"+'\t\t\t<xsl:for-each select="@*">'+"\t\t\t\t<xsl:if test=\"name() != 'class' and name() != 'state' and name() != 'hasChildren'\">"+'\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"\t\t\t\t</xsl:if>"+"\t\t\t</xsl:for-each>"+'\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'\t\t\t<xsl:for-each select="content/name">'+"\t\t\t\t<a>"+'\t\t\t\t<xsl:attribute name="href">'+
"\t\t\t\t\t<xsl:choose>"+'\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>"+"\t\t\t\t\t</xsl:choose>"+"\t\t\t\t</xsl:attribute>"+'\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'\t\t\t\t<xsl:for-each select="@*">'+"\t\t\t\t\t<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+
'\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"\t\t\t\t\t</xsl:if>"+"\t\t\t\t</xsl:for-each>"+"\t\t\t\t\t<ins>"+'\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon '+'\t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"\t\t\t\t\t\t</xsl:attribute>"+'\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+
"\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>"+"\t\t\t\t\t</ins>"+'\t\t\t\t\t<xsl:copy-of select="./child::node()" />'+"\t\t\t\t</a>"+"\t\t\t</xsl:for-each>"+'\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>'+"\t\t</li>"+"\t</xsl:for-each>"+"\t</ul>"+"</xsl:template>"+"</xsl:stylesheet>","flat":"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+
'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" />'+'<xsl:template match="/">'+"\t<ul>"+'\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">'+'\t\t<xsl:call-template name="nodes">'+'\t\t\t<xsl:with-param name="node" select="." />'+'\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />'+"\t\t</xsl:call-template>"+"\t</xsl:for-each>"+"\t</ul>"+"</xsl:template>"+
'<xsl:template name="nodes">'+'\t<xsl:param name="node" />'+'\t<xsl:param name="is_last" />'+'\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />'+"\t<li>"+'\t<xsl:attribute name="class">'+'\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>'+"\t\t<xsl:choose>"+"\t\t\t<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"\t\t\t<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>"+
"\t\t</xsl:choose>"+'\t\t<xsl:value-of select="@class" />'+"\t</xsl:attribute>"+'\t<xsl:for-each select="@*">'+"\t\t<xsl:if test=\"name() != 'parent_id' and name() != 'hasChildren' and name() != 'class' and name() != 'state'\">"+'\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"\t\t</xsl:if>"+"\t</xsl:for-each>"+'\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'\t<xsl:for-each select="content/name">'+"\t\t<a>"+'\t\t<xsl:attribute name="href">'+"\t\t\t<xsl:choose>"+
'\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"\t\t\t<xsl:otherwise>#</xsl:otherwise>"+"\t\t\t</xsl:choose>"+"\t\t</xsl:attribute>"+'\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'\t\t<xsl:for-each select="@*">'+"\t\t\t<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+'\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+
"\t\t\t</xsl:if>"+"\t\t</xsl:for-each>"+"\t\t\t<ins>"+'\t\t\t\t<xsl:attribute name="class">jstree-icon '+'\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"\t\t\t\t</xsl:attribute>"+'\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+"\t\t\t\t<xsl:text>&#xa0;</xsl:text>"+
"\t\t\t</ins>"+'\t\t\t<xsl:copy-of select="./child::node()" />'+"\t\t</a>"+"\t</xsl:for-each>"+'\t<xsl:if test="$children">'+"\t\t<ul>"+'\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">'+'\t\t\t<xsl:call-template name="nodes">'+'\t\t\t\t<xsl:with-param name="node" select="." />'+'\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />'+"\t\t\t</xsl:call-template>"+"\t\t</xsl:for-each>"+"\t\t</ul>"+"\t</xsl:if>"+"\t</li>"+"</xsl:template>"+"</xsl:stylesheet>"},
escape_xml=function(string){return string.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};$.jstree.plugin("xml_data",{defaults:{data:false,ajax:false,xsl:"flat",clean_node:false,correct_state:true,get_skip_empty:false,get_include_preamble:true},_fn:{load_node:function(obj,s_call,e_call){var _this=this;this.load_node_xml(obj,function(){_this.__callback({"obj":_this._get_node(obj)});s_call.call(this)},e_call)},_is_loaded:function(obj){var s=
this._get_settings().xml_data;obj=this._get_node(obj);return obj==-1||!obj||!s.ajax&&!$.isFunction(s.data)||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").size()>0},load_node_xml:function(obj,s_call,e_call){var s=this.get_settings().xml_data,error_func=function(){},success_func=function(){};obj=this._get_node(obj);if(obj&&obj!==-1)if(obj.data("jstree_is_loading"))return;else obj.data("jstree_is_loading",true);switch(!0){case !s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";
case $.isFunction(s.data):s.data.call(this,obj,$.proxy(function(d){this.parse_xml(d,$.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=$(d);if(obj===-1||!obj)this.get_container().children("ul").empty().append(d.children());else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d);obj.removeData("jstree_is_loading")}if(s.clean_node)this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}}},this))},this));break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||obj===-1):if(!obj||obj==-1)this.parse_xml(s.data,$.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=$(d);this.get_container().children("ul").empty().append(d.children());if(s.clean_node)this.clean_node(obj);
if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}},this));break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&obj!==-1:error_func=function(x,t,e){var ef=this.get_settings().xml_data.ajax.error;if(ef)ef.call(this,x,t,e);if(obj!==-1&&obj.length){obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(t==="success"&&s.correct_state)this.correct_state(obj)}else if(t==="success"&&
s.correct_state)this.get_container().children("ul").empty();if(e_call)e_call.call(this)};success_func=function(d,t,x){d=x.responseText;var sf=this.get_settings().xml_data.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")==="")return error_func.call(this,x,t,"");this.parse_xml(d,$.proxy(function(d){if(d){d=d.replace(/ ?xmlns="[^"]*"/ig,"");if(d.length>10){d=$(d);if(obj===-1||!obj)this.get_container().children("ul").empty().append(d.children());
else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d);obj.removeData("jstree_is_loading")}if(s.clean_node)this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}}},this))};s.ajax.context=
this;s.ajax.error=error_func;s.ajax.success=success_func;if(!s.ajax.dataType)s.ajax.dataType="xml";if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,obj);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,obj);$.ajax(s.ajax);break}},parse_xml:function(xml,callback){var s=this._get_settings().xml_data;$.vakata.xslt(xml,xsl[s.xsl],callback)},get_xml:function(tp,obj,li_attr,a_attr,is_callback){var result="",s=this._get_settings(),_this=this,tmp1,tmp2,li,a,lang;if(!tp)tp="flat";
if(!is_callback)is_callback=0;obj=this._get_node(obj);if(!obj||obj===-1)obj=this.get_container().find("> ul > li");li_attr=$.isArray(li_attr)?li_attr:["id","class"];if(!is_callback&&this.data.types&&$.inArray(s.types.type_attr,li_attr)===-1)li_attr.push(s.types.type_attr);a_attr=$.isArray(a_attr)?a_attr:[];if(!is_callback){if(s.xml_data.get_include_preamble)result+="<"+'?xml version="1.0" encoding="UTF-8"?'+">";result+="<root>"}obj.each(function(){result+="<item";li=$(this);$.each(li_attr,function(i,
v){var t=li.attr(v);if(!s.xml_data.get_skip_empty||typeof t!=="undefined")result+=" "+v+'="'+escape_xml((" "+(t||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});if(li.hasClass("jstree-open"))result+=' state="open"';if(li.hasClass("jstree-closed"))result+=' state="closed"';if(tp==="flat")result+=' parent_id="'+escape_xml(is_callback)+'"';result+=">";result+="<content>";a=li.children("a");a.each(function(){tmp1=$(this);lang=false;result+="<name";if($.inArray("languages",
s.plugins)!==-1)$.each(s.languages,function(k,z){if(tmp1.hasClass(z)){result+=' lang="'+escape_xml(z)+'"';lang=z;return false}});if(a_attr.length)$.each(a_attr,function(k,z){var t=tmp1.attr(z);if(!s.xml_data.get_skip_empty||typeof t!=="undefined")result+=" "+z+'="'+escape_xml((" "+t||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});if(tmp1.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)result+=' icon="'+escape_xml(tmp1.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"';if(tmp1.children("ins").get(0).style.backgroundImage.length)result+=' icon="'+escape_xml(tmp1.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"';result+=">";result+="<![CDATA["+_this.get_text(tmp1,lang)+"]]\>";result+="</name>"});result+="</content>";tmp2=li[0].id||true;li=li.find("> ul > li");if(li.length)tmp2=_this.get_xml(tp,li,li_attr,a_attr,tmp2);else tmp2="";
if(tp=="nest")result+=tmp2;result+="</item>";if(tp=="flat")result+=tmp2});if(!is_callback)result+="</root>";return result}}})})(jQuery);(function($){$.expr[":"].jstree_contains=function(a,i,m){return(a.textContent||a.innerText||"").toLowerCase().indexOf(m[3].toLowerCase())>=0};$.expr[":"].jstree_title_contains=function(a,i,m){return(a.getAttribute("title")||"").toLowerCase().indexOf(m[3].toLowerCase())>=0};$.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=
$();if(this._get_settings().search.show_only_matches)this.get_container().bind("search.jstree",function(e,data){$(this).children("ul").find("li").hide().removeClass("jstree-last");data.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){$(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){$(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:false,search_method:"jstree_contains",
show_only_matches:false},_fn:{search:function(str,skip_async){if($.trim(str)===""){this.clear_search();return}var s=this.get_settings().search,t=this,error_func=function(){},success_func=function(){};this.data.search.str=str;if(!skip_async&&s.ajax!==false&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=true;error_func=function(){};success_func=function(d,t,x){var sf=this.get_settings().search.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;
this.data.search.to_open=d;this._search_open()};s.ajax.context=this;s.ajax.error=error_func;s.ajax.success=success_func;if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,str);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,str);if(!s.ajax.data)s.ajax.data={"search_string":str};if(!s.ajax.dataType||/^json/.exec(s.ajax.dataType))s.ajax.dataType="json";$.ajax(s.ajax);return}if(this.data.search.result.length)this.clear_search();this.data.search.result=this.get_container().find("a"+
(this.data.languages?"."+this.get_lang():"")+":"+s.search_method+"("+this.data.search.str+")");this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){t.open_node(this,false,true)});this.__callback({nodes:this.data.search.result,str:str})},clear_search:function(str){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=$()},_search_open:function(is_callback){var _this=this,done=true,current=
[],remaining=[];if(this.data.search.to_open.length){$.each(this.data.search.to_open,function(i,val){if(val=="#")return true;if($(val).length&&$(val).is(".jstree-closed"))current.push(val);else remaining.push(val)});if(current.length){this.data.search.to_open=remaining;$.each(current,function(i,val){_this.open_node(val,function(){_this._search_open(true)})});done=false}}if(done)this.search(this.data.search.str,true)}}})})(jQuery);(function($){$.vakata.context={hide_on_mouseleave:false,cnt:$("<div id='vakata-contextmenu' />"),
vis:false,tgt:false,par:false,func:false,data:false,rtl:false,show:function(s,t,x,y,d,p,rtl){$.vakata.context.rtl=!!rtl;var html=$.vakata.context.parse(s),h,w;if(!html)return;$.vakata.context.vis=true;$.vakata.context.tgt=t;$.vakata.context.par=p||t||null;$.vakata.context.data=d||null;$.vakata.context.cnt.html(html).css({"visibility":"hidden","display":"block","left":0,"top":0});if($.vakata.context.hide_on_mouseleave)$.vakata.context.cnt.one("mouseleave",function(e){$.vakata.context.hide()});h=$.vakata.context.cnt.height();
w=$.vakata.context.cnt.width();if(x+w>$(document).width()){x=$(document).width()-(w+5);$.vakata.context.cnt.find("li > ul").addClass("right")}if(y+h>$(document).height()){y=y-(h+t[0].offsetHeight);$.vakata.context.cnt.find("li > ul").addClass("bottom")}$.vakata.context.cnt.css({"left":x,"top":y}).find("li:has(ul)").bind("mouseenter",function(e){var w=$(document).width(),h=$(document).height(),ul=$(this).children("ul").show();if(w!==$(document).width())ul.toggleClass("right");if(h!==$(document).height())ul.toggleClass("bottom")}).bind("mouseleave",
function(e){$(this).children("ul").hide()}).end().css({"visibility":"visible"}).show();$(document).triggerHandler("context_show.vakata")},hide:function(){$.vakata.context.vis=false;$.vakata.context.cnt.attr("class","").css({"visibility":"hidden"});$(document).triggerHandler("context_hide.vakata")},parse:function(s,is_callback){if(!s)return false;var str="",tmp=false,was_sep=true;if(!is_callback)$.vakata.context.func={};str+="<ul>";$.each(s,function(i,val){if(!val)return true;$.vakata.context.func[i]=
val.action;if(!was_sep&&val.separator_before)str+="<li class='vakata-separator vakata-separator-before'></li>";was_sep=false;str+="<li class='"+(val._class||"")+(val._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";if(val.icon&&val.icon.indexOf("/")===-1)str+=" class='"+val.icon+"' ";if(val.icon&&val.icon.indexOf("/")!==-1)str+=" style='background:url("+val.icon+") center center no-repeat;' ";str+=">&#160;</ins><a href='#' rel='"+i+"'>";if(val.submenu)str+="<span style='float:"+($.vakata.context.rtl?
"left":"right")+";'>&raquo;</span>";str+=val.label+"</a>";if(val.submenu){tmp=$.vakata.context.parse(val.submenu,true);if(tmp)str+=tmp}str+="</li>";if(val.separator_after){str+="<li class='vakata-separator vakata-separator-after'></li>";was_sep=true}});str=str.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");str+="</ul>";$(document).triggerHandler("context_parse.vakata");return str.length>10?str:false},exec:function(i){if($.isFunction($.vakata.context.func[i])){$.vakata.context.func[i].call($.vakata.context.data,
$.vakata.context.par);return true}else return false}};$(function(){var css_string=""+"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } "+"#vakata-contextmenu ul { min-width:180px; *width:180px; } "+"#vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } "+"#vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } "+
"#vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } "+"#vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } "+"#vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } "+"#vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } "+"#vakata-contextmenu .right { right:100%; left:auto; } "+
"#vakata-contextmenu .bottom { bottom:-1px; top:auto; } "+"#vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";$.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(e){if(!$(this).parent().hasClass("jstree-contextmenu-disabled")&&$.vakata.context.exec($(this).attr("rel")))$.vakata.context.hide();else $(this).blur()}).delegate("a",
"mouseover",function(){$.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");$(document).bind("mousedown",function(e){if($.vakata.context.vis&&!$.contains($.vakata.context.cnt[0],e.target))$.vakata.context.hide()});if(typeof $.hotkeys!=="undefined")$(document).bind("keydown","up",function(e){if($.vakata.context.vis){var o=$.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();
if(!o.length)o=$.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last();o.addClass("vakata-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","down",function(e){if($.vakata.context.vis){var o=$.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();if(!o.length)o=$.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first();
o.addClass("vakata-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","right",function(e){if($.vakata.context.vis){$.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","left",function(e){if($.vakata.context.vis){$.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");
e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","esc",function(e){$.vakata.context.hide();e.preventDefault()}).bind("keydown","space",function(e){$.vakata.context.cnt.find(".vakata-hover").last().children("a").click();e.preventDefault()})});$.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",$.proxy(function(e){e.preventDefault();if(!$(e.currentTarget).hasClass("jstree-loading"))this.show_contextmenu(e.currentTarget,e.pageX,e.pageY)},
this)).delegate("a","click.jstree",$.proxy(function(e){if(this.data.contextmenu)$.vakata.context.hide()},this)).bind("destroy.jstree",$.proxy(function(){if(this.data.contextmenu)$.vakata.context.hide()},this));$(document).bind("context_hide.vakata",$.proxy(function(){this.data.contextmenu=false},this))},defaults:{select_node:false,show_at_node:true,items:{"create":{"separator_before":false,"separator_after":true,"label":"Create","action":function(obj){this.create(obj)}},"rename":{"separator_before":false,
"separator_after":false,"label":"Rename","action":function(obj){this.rename(obj)}},"remove":{"separator_before":false,"icon":false,"separator_after":false,"label":"Delete","action":function(obj){if(this.is_selected(obj))this.remove();else this.remove(obj)}},"ccp":{"separator_before":true,"icon":false,"separator_after":false,"label":"Edit","action":false,"submenu":{"cut":{"separator_before":false,"separator_after":false,"label":"Cut","action":function(obj){this.cut(obj)}},"copy":{"separator_before":false,
"icon":false,"separator_after":false,"label":"Copy","action":function(obj){this.copy(obj)}},"paste":{"separator_before":false,"icon":false,"separator_after":false,"label":"Paste","action":function(obj){this.paste(obj)}}}}}},_fn:{show_contextmenu:function(obj,x,y){obj=this._get_node(obj);var s=this.get_settings().contextmenu,a=obj.children("a:visible:eq(0)"),o=false,i=false;if(s.select_node&&this.data.ui&&!this.is_selected(obj)){this.deselect_all();this.select_node(obj,true)}if(s.show_at_node||typeof x===
"undefined"||typeof y==="undefined"){o=a.offset();x=o.left;y=o.top+this.data.core.li_height}i=obj.data("jstree")&&obj.data("jstree").contextmenu?obj.data("jstree").contextmenu:s.items;if($.isFunction(i))i=i.call(this,obj);this.data.contextmenu=true;$.vakata.context.show(i,a,x,y,this,obj,this._get_settings().core.rtl);if(this.data.themes)$.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function($){$.jstree.plugin("types",{__init:function(){var s=this._get_settings().types;
this.data.types.attach_to=[];this.get_container().bind("init.jstree",$.proxy(function(){var types=s.types,attr=s.type_attr,icons_css="",_this=this;$.each(types,function(i,tp){$.each(tp,function(k,v){if(!/^(max_depth|max_children|icon|valid_children)$/.test(k))_this.data.types.attach_to.push(k)});if(!tp.icon)return true;if(tp.icon.image||tp.icon.position){if(i=="default")icons_css+=".jstree-"+_this.get_index()+" a > .jstree-icon { ";else icons_css+=".jstree-"+_this.get_index()+" li["+attr+'="'+i+'"] > a > .jstree-icon { ';
if(tp.icon.image)icons_css+=" background-image:url("+tp.icon.image+"); ";if(tp.icon.position)icons_css+=" background-position:"+tp.icon.position+"; ";else icons_css+=" background-position:0 0; ";icons_css+="} "}});if(icons_css!=="")$.vakata.css.add_sheet({"str":icons_css,title:"jstree-types"})},this)).bind("before.jstree",$.proxy(function(e,data){var s,t,o=this._get_settings().types.use_data?this._get_node(data.args[0]):false,d=o&&o!==-1&&o.length?o.data("jstree"):false;if(d&&d.types&&d.types[data.func]===
false){e.stopImmediatePropagation();return false}if($.inArray(data.func,this.data.types.attach_to)!==-1){if(!data.args[0]||!data.args[0].tagName&&!data.args[0].jquery)return;s=this._get_settings().types.types;t=this._get_type(data.args[0]);if((s[t]&&typeof s[t][data.func]!=="undefined"||s["default"]&&typeof s["default"][data.func]!=="undefined")&&this._check(data.func,data.args[0])===false){e.stopImmediatePropagation();return false}}},this));if(is_ie6)this.get_container().bind("load_node.jstree set_type.jstree",
$.proxy(function(e,data){var r=data&&data.rslt&&data.rslt.obj&&data.rslt.obj!==-1?this._get_node(data.rslt.obj).parent():this.get_container_ul(),c=false,s=this._get_settings().types;$.each(s.types,function(i,tp){if(tp.icon&&(tp.icon.image||tp.icon.position)){c=i==="default"?r.find("li > a > .jstree-icon"):r.find("li["+s.type_attr+"='"+i+"'] > a > .jstree-icon");if(tp.icon.image)c.css("backgroundImage","url("+tp.icon.image+")");c.css("backgroundPosition",tp.icon.position||"0 0")}})},this))},defaults:{max_children:-1,
max_depth:-1,valid_children:"all",use_data:false,type_attr:"rel",types:{"default":{"max_children":-1,"max_depth":-1,"valid_children":"all"}}},_fn:{_types_notify:function(n,data){if(data.type&&this._get_settings().types.use_data)this.set_type(data.type,n)},_get_type:function(obj){obj=this._get_node(obj);return!obj||!obj.length?false:obj.attr(this._get_settings().types.type_attr)||"default"},set_type:function(str,obj){obj=this._get_node(obj);var ret=!obj.length||!str?false:obj.attr(this._get_settings().types.type_attr,
str);if(ret)this.__callback({obj:obj,type:str});return ret},_check:function(rule,obj,opts){obj=this._get_node(obj);var v=false,t=this._get_type(obj),d=0,_this=this,s=this._get_settings().types,data=false;if(obj===-1)if(!!s[rule])v=s[rule];else return;else{if(t===false)return;data=s.use_data?obj.data("jstree"):false;if(data&&data.types&&typeof data.types[rule]!=="undefined")v=data.types[rule];else if(!!s.types[t]&&typeof s.types[t][rule]!=="undefined")v=s.types[t][rule];else if(!!s.types["default"]&&
typeof s.types["default"][rule]!=="undefined")v=s.types["default"][rule]}if($.isFunction(v))v=v.call(this,obj);if(rule==="max_depth"&&obj!==-1&&opts!==false&&s.max_depth!==-2&&v!==0)obj.children("a:eq(0)").parentsUntil(".jstree","li").each(function(i){if(s.max_depth!==-1&&s.max_depth-(i+1)<=0){v=0;return false}d=i===0?v:_this._check(rule,this,false);if(d!==-1&&d-(i+1)<=0){v=0;return false}if(d>=0&&(d-(i+1)<v||v<0))v=d-(i+1);if(s.max_depth>=0&&(s.max_depth-(i+1)<v||v<0))v=s.max_depth-(i+1)});return v},
check_move:function(){if(!this.__call_old())return false;var m=this._get_move(),s=m.rt._get_settings().types,mc=m.rt._check("max_children",m.cr),md=m.rt._check("max_depth",m.cr),vc=m.rt._check("valid_children",m.cr),ch=0,d=1,t;if(vc==="none")return false;if($.isArray(vc)&&m.ot&&m.ot._get_type){m.o.each(function(){if($.inArray(m.ot._get_type(this),vc)===-1){d=false;return false}});if(d===false)return false}if(s.max_children!==-2&&mc!==-1){ch=m.cr===-1?this.get_container().find("> ul > li").not(m.o).length:
m.cr.find("> ul > li").not(m.o).length;if(ch+m.o.length>mc)return false}if(s.max_depth!==-2&&md!==-1){d=0;if(md===0)return false;if(typeof m.o.d==="undefined"){t=m.o;while(t.length>0){t=t.find("> ul > li");d++}m.o.d=d}if(md-m.o.d<0)return false}return true},create_node:function(obj,position,js,callback,is_loaded,skip_check){if(!skip_check&&(is_loaded||this._is_loaded(obj))){var p=typeof position=="string"&&position.match(/^before|after$/i)&&obj!==-1?this._get_parent(obj):this._get_node(obj),s=this._get_settings().types,
mc=this._check("max_children",p),md=this._check("max_depth",p),vc=this._check("valid_children",p),ch;if(typeof js==="string")js={data:js};if(!js)js={};if(vc==="none")return false;if($.isArray(vc))if(!js.attr||!js.attr[s.type_attr]){if(!js.attr)js.attr={};js.attr[s.type_attr]=vc[0]}else if($.inArray(js.attr[s.type_attr],vc)===-1)return false;if(s.max_children!==-2&&mc!==-1){ch=p===-1?this.get_container().find("> ul > li").length:p.find("> ul > li").length;if(ch+1>mc)return false}if(s.max_depth!==-2&&
md!==-1&&md-1<0)return false}return this.__call_old(true,obj,position,js,callback,is_loaded,skip_check)}}})})(jQuery);(function($){$.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:false,ajax:false,correct_state:true},_fn:{load_node:function(obj,s_call,e_call){var _this=
this;this.load_node_html(obj,function(){_this.__callback({"obj":_this._get_node(obj)});s_call.call(this)},e_call)},_is_loaded:function(obj){obj=this._get_node(obj);return obj==-1||!obj||!this._get_settings().html_data.ajax&&!$.isFunction(this._get_settings().html_data.data)||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").size()>0},load_node_html:function(obj,s_call,e_call){var d,s=this.get_settings().html_data,error_func=function(){},success_func=function(){};obj=this._get_node(obj);
if(obj&&obj!==-1)if(obj.data("jstree_is_loading"))return;else obj.data("jstree_is_loading",true);switch(!0){case $.isFunction(s.data):s.data.call(this,obj,$.proxy(function(d){if(d&&d!==""&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")!==""){d=$(d);if(!d.is("ul"))d=$("<ul />").append(d);if(obj==-1||!obj)this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}},this));break;case !s.data&&!s.ajax:if(!obj||obj==-1){this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
this.clean_node()}if(s_call)s_call.call(this);break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||obj===-1):if(!obj||obj==-1){d=$(s.data);if(!d.is("ul"))d=$("<ul />").append(d);this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
this.clean_node()}if(s_call)s_call.call(this);break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&obj!==-1:obj=this._get_node(obj);error_func=function(x,t,e){var ef=this.get_settings().html_data.ajax.error;if(ef)ef.call(this,x,t,e);if(obj!=-1&&obj.length){obj.children("a.jstree-loading").removeClass("jstree-loading");obj.removeData("jstree_is_loading");if(t==="success"&&s.correct_state)this.correct_state(obj)}else if(t==="success"&&s.correct_state)this.get_container().children("ul").empty();if(e_call)e_call.call(this)};
success_func=function(d,t,x){var sf=this.get_settings().html_data.ajax.success;if(sf)d=sf.call(this,d,t,x)||d;if(d===""||d&&d.toString&&d.toString().replace(/^[\s\n]+$/,"")==="")return error_func.call(this,x,t,"");if(d){d=$(d);if(!d.is("ul"))d=$("<ul />").append(d);if(obj==-1||!obj)this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
else{obj.children("a.jstree-loading").removeClass("jstree-loading");obj.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");obj.removeData("jstree_is_loading")}this.clean_node(obj);if(s_call)s_call.call(this)}else if(obj&&obj!==-1){obj.children("a.jstree-loading").removeClass("jstree-loading");
obj.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(obj);if(s_call)s_call.call(this)}}else if(s.correct_state){this.get_container().children("ul").empty();if(s_call)s_call.call(this)}};s.ajax.context=this;s.ajax.error=error_func;s.ajax.success=success_func;if(!s.ajax.dataType)s.ajax.dataType="html";if($.isFunction(s.ajax.url))s.ajax.url=s.ajax.url.call(this,obj);if($.isFunction(s.ajax.data))s.ajax.data=s.ajax.data.call(this,obj);$.ajax(s.ajax);break}}}});$.jstree.defaults.plugins.push("html_data")})(jQuery);
(function($){$.jstree.plugin("themeroller",{__init:function(){var s=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(e){if(!$(e.currentTarget).hasClass("jstree-loading"))$(this).addClass(s.item_h)}).delegate("a","mouseleave.jstree",function(){$(this).removeClass(s.item_h)}).bind("init.jstree",$.proxy(function(e,data){data.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");
this._themeroller(data.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",$.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.obj)},this)).bind("delete_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.parent)},this)).bind("correct_state.jstree",$.proxy(function(e,data){data.rslt.obj.children("ins.jstree-icon").removeClass(s.opened+
" "+s.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(s.item_open+" "+s.item_clsd).addClass(s.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",$.proxy(function(e,data){data.rslt.obj.children("a").addClass(s.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",$.proxy(function(e,data){this.get_container().find("a."+
s.item_a).removeClass(s.item_a).end().find("a.jstree-clicked").addClass(s.item_a)},this)).bind("dehover_node.jstree",$.proxy(function(e,data){data.rslt.obj.children("a").removeClass(s.item_h)},this)).bind("hover_node.jstree",$.proxy(function(e,data){this.get_container().find("a."+s.item_h).not(data.rslt.obj).removeClass(s.item_h);data.rslt.obj.children("a").addClass(s.item_h)},this)).bind("move_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.o);this._themeroller(data.rslt.op)},this))},
__destroy:function(){var s=this._get_settings().themeroller,c=["ui-icon"];$.each(s,function(i,v){v=v.split(" ");if(v.length)c=c.concat(v)});this.get_container().removeClass("ui-widget-content").find("."+c.join(", .")).removeClass(c.join(" "))},_fn:{_themeroller:function(obj){var s=this._get_settings().themeroller;obj=!obj||obj==-1?this.get_container_ul():this._get_node(obj).parent();obj.find("li.jstree-closed").children("ins.jstree-icon").removeClass(s.opened).addClass("ui-icon "+s.closed).end().children("a").addClass(s.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,
"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(s.item_leaf+" "+s.item_open).addClass(s.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(s.closed).addClass("ui-icon "+s.opened).end().children("a").addClass(s.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===
-1}).removeClass(s.item_leaf+" "+s.item_clsd).addClass(s.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(s.closed+" ui-icon "+s.opened).end().children("a").addClass(s.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(s.item_clsd+" "+s.item_open).addClass(s.item_leaf||
"jstree-no-icon")}},defaults:{"opened":"ui-icon-triangle-1-se","closed":"ui-icon-triangle-1-e","item":"ui-state-default","item_h":"ui-state-hover","item_a":"ui-state-active","item_open":"ui-icon-folder-open","item_clsd":"ui-icon-folder-collapsed","item_leaf":"ui-icon-document"}});$(function(){var css_string=""+".jstree-themeroller .ui-icon { overflow:visible; } "+".jstree-themeroller a { padding:0 2px; } "+".jstree-themeroller .jstree-no-icon { display:none; }";$.vakata.css.add_sheet({str:css_string,
title:"jstree"})})})(jQuery);(function($){$.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",$.proxy(function(e,data){var nms=[],res=true,p,t;if(data.func=="move_node")if(data.args[4]===true)if(data.args[0].o&&data.args[0].o.length){data.args[0].o.children("a").each(function(){nms.push($(this).text().replace(/^\s+/g,""))});res=this._check_unique(nms,data.args[0].np.find("> ul > li").not(data.args[0].o),"move_node")}if(data.func=="create_node")if(data.args[4]||this._is_loaded(data.args[0])){p=
this._get_node(data.args[0]);if(data.args[1]&&(data.args[1]==="before"||data.args[1]==="after")){p=this._get_parent(data.args[0]);if(!p||p===-1)p=this.get_container()}if(typeof data.args[2]==="string")nms.push(data.args[2]);else if(!data.args[2]||!data.args[2].data)nms.push(this._get_string("new_node"));else nms.push(data.args[2].data);res=this._check_unique(nms,p.find("> ul > li"),"create_node")}if(data.func=="rename_node"){nms.push(data.args[1]);t=this._get_node(data.args[0]);p=this._get_parent(t);
if(!p||p===-1)p=this.get_container();res=this._check_unique(nms,p.find("> ul > li").not(t),"rename_node")}if(!res){e.stopPropagation();return false}},this))},defaults:{error_callback:$.noop},_fn:{_check_unique:function(nms,p,func){var cnms=[];p.children("a").each(function(){cnms.push($(this).text().replace(/^\s+/g,""))});if(!cnms.length||!nms.length)return true;cnms=cnms.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");if(cnms.length+
nms.length!=cnms.concat(nms).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length){this._get_settings().unique.error_callback.call(null,nms,p,func);return false}return true},check_move:function(){if(!this.__call_old())return false;var p=this._get_move(),nms=[];if(p.o&&p.o.length){p.o.children("a").each(function(){nms.push($(this).text().replace(/^\s+/g,""))});return this._check_unique(nms,p.np.find("> ul > li").not(p.o),"check_move")}return true}}})})(jQuery);
(function($){$.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=false;this.data.wholerow.to=false;this.get_container().bind("init.jstree",$.proxy(function(e,data){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",$.proxy(function(e,data){this._prepare_wholerow_span(data&&data.rslt&&data.rslt.obj?data.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
$.proxy(function(e,data){if(this.data.to)clearTimeout(this.data.to);this.data.to=setTimeout(function(t,o){return function(){t._prepare_wholerow_ul(o)}}(this,data&&data.rslt&&data.rslt.obj?data.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",$.proxy(function(e,data){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",$.proxy(function(e,
data){data.rslt.obj.each(function(){var ref=data.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt(($(this).offset().top-data.inst.get_container().offset().top+data.inst.get_container()[0].scrollTop)/data.inst.data.core.li_height,10)+")");ref.children("a").attr("class",data.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",$.proxy(function(e,data){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+
(this.data.themeroller?this._get_settings().themeroller.item_h:""));if(e.type==="hover_node"){var ref=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((data.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");ref.children("a").attr("class",data.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var n=$(e.currentTarget);
if(e.target.tagName==="A"||e.target.tagName==="INS"&&n.closest("li").is(".jstree-open, .jstree-closed"))return;n.closest("li").children("a:visible:eq(0)").click();e.stopImmediatePropagation()}).delegate("li","mouseover.jstree",$.proxy(function(e){e.stopImmediatePropagation();if($(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return false;this.hover_node(e.currentTarget);return false},this)).delegate("li","mouseleave.jstree",$.proxy(function(e){if($(e.currentTarget).children("a").hasClass("jstree-hovered").length)return;
this.dehover_node(e.currentTarget)},this));if(is_ie7||is_ie6)$.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(obj){obj=!obj||obj==-1?this.get_container().find("> ul > li"):this._get_node(obj);if(obj===false)return;obj.each(function(){$(this).find("li").andSelf().each(function(){var $t=
$(this);if($t.children(".jstree-wholerow-span").length)return true;$t.prepend("<span class='jstree-wholerow-span' style='width:"+$t.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var o=this.get_container().children("ul").eq(0),h=o.html();o.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==h){this.data.wholerow.last_html=h;this.get_container().children(".jstree-wholerow").remove();this.get_container().append(o.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(o.parent()[0].scrollWidth).css("top",
(o.height()+(is_ie7?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}}});$(function(){var css_string=""+".jstree .jstree-wholerow-real { position:relative; z-index:1; } "+".jstree .jstree-wholerow-real li { cursor:pointer; } "+".jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } "+".jstree .jstree-wholerow { position:relative; z-index:0; height:0; } "+".jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } "+
".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } "+".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }"+".jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }"+".jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } "+
".jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";if(is_ff2)css_string+=""+".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } "+".jstree .jstree-wholerow-real a { border-color:transparent !important; } ";if(is_ie7||is_ie6)css_string+=""+".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } "+
".jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";$.vakata.css.add_sheet({str:css_string,title:"jstree"})})})(jQuery);(function($){var nodeInterface=["getChildren","getChildrenCount","getAttr","getName","getProps"],validateInterface=function(obj,inter){var valid=true;obj=obj||{};inter=[].concat(inter);$.each(inter,function(i,v){if(!$.isFunction(obj[v])){valid=false;return false}});return valid};$.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";
this._get_settings().json_data.data=function(n,b){var obj=n==-1?this._get_settings().model.object:n.data("jstree_model");if(!validateInterface(obj,nodeInterface))return b.call(null,false);if(this._get_settings().model.async)obj.getChildren($.proxy(function(data){this.model_done(data,b)},this));else this.model_done(obj.getChildren(),b)}},defaults:{object:false,id_prefix:false,async:false},_fn:{model_done:function(data,callback){var ret=[],s=this._get_settings(),_this=this;if(!$.isArray(data))data=
[data];$.each(data,function(i,nd){var r=nd.getProps()||{};r.attr=nd.getAttr()||{};if(nd.getChildrenCount())r.state="closed";r.data=nd.getName();if(!$.isArray(r.data))r.data=[r.data];if(_this.data.types&&$.isFunction(nd.getType))r.attr[s.types.type_attr]=nd.getType();if(r.attr.id&&s.model.id_prefix)r.attr.id=s.model.id_prefix+r.attr.id;if(!r.metadata)r.metadata={};r.metadata.jstree_model=nd;ret.push(r)});callback.call(null,ret)}}})})(jQuery)})();
(function($){var UNDEF="undefined";var getSelection,setSelection,deleteSelectedText,deleteText,insertText;var replaceSelectedText,surroundSelectedText,extractSelectedText,collapseSelection;function isHostMethod(object,property){var t=typeof object[property];return t==="function"||!!(t=="object"&&object[property])||t=="unknown"}function isHostProperty(object,property){return typeof object[property]!=UNDEF}function isHostObject(object,property){return!!(typeof object[property]=="object"&&object[property])}
function fail(reason){if(window.console&&window.console.log)window.console.log("TextInputs module for Rangy not supported in your browser. Reason: "+reason)}function adjustOffsets(el,start,end){if(start<0)start+=el.value.length;if(typeof end==UNDEF)end=start;if(end<0)end+=el.value.length;return{start:start,end:end}}function makeSelection(el,start,end){return{start:start,end:end,length:end-start,text:el.value.slice(start,end)}}function getBody(){return isHostObject(document,"body")?document.body:document.getElementsByTagName("body")[0]}
$(document).ready(function(){var testTextArea=document.createElement("textarea");getBody().appendChild(testTextArea);if(isHostProperty(testTextArea,"selectionStart")&&isHostProperty(testTextArea,"selectionEnd")){getSelection=function(el){var start=el.selectionStart,end=el.selectionEnd;return makeSelection(el,start,end)};setSelection=function(el,startOffset,endOffset){var offsets=adjustOffsets(el,startOffset,endOffset);el.selectionStart=offsets.start;el.selectionEnd=offsets.end};collapseSelection=
function(el,toStart){if(toStart)el.selectionEnd=el.selectionStart;else el.selectionStart=el.selectionEnd}}else if(isHostMethod(testTextArea,"createTextRange")&&isHostObject(document,"selection")&&isHostMethod(document.selection,"createRange")){getSelection=function(el){var start=0,end=0,normalizedValue,textInputRange,len,endRange;var range=document.selection.createRange();if(range&&range.parentElement()==el){len=el.value.length;normalizedValue=el.value.replace(/\r\n/g,"\n");textInputRange=el.createTextRange();
textInputRange.moveToBookmark(range.getBookmark());endRange=el.createTextRange();endRange.collapse(false);if(textInputRange.compareEndPoints("StartToEnd",endRange)>-1)start=end=len;else{start=-textInputRange.moveStart("character",-len);start+=normalizedValue.slice(0,start).split("\n").length-1;if(textInputRange.compareEndPoints("EndToEnd",endRange)>-1)end=len;else{end=-textInputRange.moveEnd("character",-len);end+=normalizedValue.slice(0,end).split("\n").length-1}}}return makeSelection(el,start,end)};
var offsetToRangeCharacterMove=function(el,offset){return offset-(el.value.slice(0,offset).split("\r\n").length-1)};setSelection=function(el,startOffset,endOffset){var offsets=adjustOffsets(el,startOffset,endOffset);var range=el.createTextRange();var startCharMove=offsetToRangeCharacterMove(el,offsets.start);range.collapse(true);if(offsets.start==offsets.end)range.move("character",startCharMove);else{range.moveEnd("character",offsetToRangeCharacterMove(el,offsets.end));range.moveStart("character",
startCharMove)}range.select()};collapseSelection=function(el,toStart){var range=document.selection.createRange();range.collapse(toStart);range.select()}}else{getBody().removeChild(testTextArea);fail("No means of finding text input caret position");return}getBody().removeChild(testTextArea);deleteText=function(el,start,end,moveSelection){var val;if(start!=end){val=el.value;el.value=val.slice(0,start)+val.slice(end)}if(moveSelection)setSelection(el,start,start)};deleteSelectedText=function(el){var sel=
getSelection(el);deleteText(el,sel.start,sel.end,true)};extractSelectedText=function(el){var sel=getSelection(el),val;if(sel.start!=sel.end){val=el.value;el.value=val.slice(0,sel.start)+val.slice(sel.end)}setSelection(el,sel.start,sel.start);return sel.text};insertText=function(el,text,index,moveSelection){var val=el.value,caretIndex;el.value=val.slice(0,index)+text+val.slice(index);if(moveSelection){caretIndex=index+text.length;setSelection(el,caretIndex,caretIndex)}};replaceSelectedText=function(el,
text){var sel=getSelection(el),val=el.value;el.value=val.slice(0,sel.start)+text+val.slice(sel.end);var caretIndex=sel.start+text.length;setSelection(el,caretIndex,caretIndex)};surroundSelectedText=function(el,before,after){var sel=getSelection(el),val=el.value;el.value=val.slice(0,sel.start)+before+sel.text+after+val.slice(sel.end);var startIndex=sel.start+before.length;var endIndex=startIndex+sel.length;setSelection(el,startIndex,endIndex)};function jQuerify(func,returnThis){return function(){var el=
this.jquery?this[0]:this;var nodeName=el.nodeName.toLowerCase();if(el.nodeType==1&&(nodeName=="textarea"||nodeName=="input"&&el.type=="text")){var args=[el].concat(Array.prototype.slice.call(arguments));var result=func.apply(this,args);if(!returnThis)return result}if(returnThis)return this}}$.fn.extend({getSelection:jQuerify(getSelection,false),setSelection:jQuerify(setSelection,true),collapseSelection:jQuerify(collapseSelection,true),deleteSelectedText:jQuerify(deleteSelectedText,true),deleteText:jQuerify(deleteText,
true),extractSelectedText:jQuerify(extractSelectedText,false),insertText:jQuerify(insertText,true),replaceSelectedText:jQuerify(replaceSelectedText,true),surroundSelectedText:jQuerify(surroundSelectedText,true)})})})(jQuery);
(function($){var map=new Array;$.Watermark={ShowAll:function(){for(var i=0;i<map.length;i++)if(map[i].obj.val()==""){map[i].obj.val(map[i].text);map[i].obj.css("color",map[i].WatermarkColor)}else map[i].obj.css("color",map[i].DefaultColor)},HideAll:function(){for(var i=0;i<map.length;i++)if(map[i].obj.val()==map[i].text)map[i].obj.val("")}};$.fn.Watermark=function(text,color){if(!color)color="#aaa";return this.each(function(){var input=$(this);var defaultColor=input.css("color");map[map.length]={text:text,
obj:input,DefaultColor:defaultColor,WatermarkColor:color};function clearMessage(){if(input.val()==text)input.val("");input.css("color",defaultColor)}function insertMessage(){if(input.val().length==0||input.val()==text){input.val(text);input.css("color",color)}else input.css("color",defaultColor)}input.focus(clearMessage);input.blur(insertMessage);input.change(insertMessage);insertMessage()})}})(jQuery);
window.JSON||(window.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case "string":return quote(i);case "number":return isFinite(i)?
String(i):"null";case "boolean":case "null":return String(i);case "object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,
d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=
function(a){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c==
"number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify");}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&
(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse");})}(),function(a,b){var c=a.History=a.History||{},d=a.jQuery;if(typeof c.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");
c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},typeof c.init!="undefined"&&c.init()}(window),function(a,b){var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if(typeof g.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");g.initHtml4=function(){if(typeof g.initHtml4.initialized!=
"undefined")return!1;g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var b=g.getHashByIndex(),c;return c=a===b,c},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return typeof a=="undefined"?b=g.savedHashes[g.savedHashes.length-1]:a<0?b=g.savedHashes[g.savedHashes.length+a]:b=g.savedHashes[a],b},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var d=g.getHashByState(a),e;
return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var b=g.getHashByState(a),c;return c=g.discardedStates[b]||!1,c},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=
function(){g.checkerFunction=null;var b="",d,e,h,i;return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i)return!1;i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),
e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null,i=null,j;return g.isLastHash(e)?(g.busy(!1),
!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),j=g.discardedState(f),j?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))))},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(f!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1;g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0)},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(d!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1;g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")})},typeof g.init!="undefined"&&g.init()}(window),function(a,b){var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||
!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode;if(typeof m.init!="undefined")throw new Error("History.js Core has already been loaded...");m.init=function(){return typeof m.Adapter=="undefined"?!1:(typeof m.initCore!="undefined"&&m.initCore(),typeof m.initHtml4!="undefined"&&m.initHtml4(),!0)},m.initCore=function(){if(typeof m.initCore.initialized!="undefined")return!1;
m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1E3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;
if(typeof b!="undefined"&&b!==null){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a=typeof c!="undefined"&&typeof c.log!="undefined"&&typeof c.log.apply!="undefined",b=d.getElementById("log"),e,f,g,h,i;a?(h=Array.prototype.slice.call(arguments),e=h.shift(),typeof c.debug!="undefined"?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n";for(f=1,g=arguments.length;f<g;++f){i=arguments[f];
if(typeof i=="object"&&typeof k!="undefined")try{i=k.stringify(i)}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached=typeof m.getInternetExplorerMajorVersion.cached!="undefined"?m.getInternetExplorerMajorVersion.cached:function(){var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");while((b.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>")&&
c[0]);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached=typeof m.isInternetExplorer.cached!="undefined"?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||
m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<
7)},m.isEmptyObject=function(a){for(var b in a)return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);if(d.location.port||!1)a+=":"+d.location.port;return a+="/",a},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return a.length===1&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=
m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a=m.getState(!1,!1),b=(a||{}).url||d.location.href,c;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"}),c},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b=typeof b=="undefined"?!0:b,/[a-z]+\:\/\//.test(a)||
(d==="/"?c=m.getRootUrl()+a.replace(/^\/+/,""):d==="#"?c=m.getPageUrl().replace(/#.*/,"")+a:d==="?"?c=m.getPageUrl().replace(/[\?#].*/,"")+a:b?c=m.getBaseUrl()+a.replace(/^(\.\/)+/,""):c=m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b},m.store={},m.idToState=m.idToState||
{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){typeof a=="undefined"&&(a=!0),typeof b=="undefined"&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b=
m.extractId(a.url),c;if(!b){c=m.getStateString(a);if(typeof m.stateToId[c]!="undefined")b=m.stateToId[c];else if(typeof m.store.stateToId[c]!="undefined")b=m.store.stateToId[c];else{for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof m.idToState[b]=="undefined"&&typeof m.store.idToState[b]=="undefined")break}m.stateToId[c]=b,m.idToState[b]=a}}return b},m.normalizeState=function(a){var b,c;if(!a||typeof a!="object")a={};if(typeof a.normalized!="undefined")return a;if(!a.data||
typeof a.data!="object")a.data={};b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data);if(b.title||c)b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;return b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&
m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d),d},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c),d},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id,c},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),
c=b.hash,c},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c=null,d,e;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),!c&&b&&!m.isTraditionalAnchor(a)&&(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||
b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b=!1,c;return c=m.extractState(a.url),b=c&&c.id!==a.id,b},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b=!1,c,d,e;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?
!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return typeof a=="undefined"?b=m.savedStates[m.savedStates.length-1]:a<0?b=m.savedStates[m.savedStates.length+a]:b=m.savedStates[a],b},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){var c=b,d;for(;;){d=a.unescape(c);if(d===c)break;c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b),b},m.normalizeHash=function(a){var b=
a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,
"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b),b},m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){typeof a!="undefined"?
m.busy.flag=a:typeof m.busy.flag=="undefined"&&(m.busy.flag=!1);if(!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(m.busy.flag)return;for(a=m.queues.length-1;a>=0;--a){c=m.queues[a];if(c.length===0)continue;d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay)}};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||
0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return typeof a=="function"&&(a={callback:a}),typeof b!="undefined"&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=
!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b=m.extractState(d.location.href),c;if(!m.isLastSavedState(b))c=b;else return;return c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),
n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;c<=a;++c)m.forward(b);else{if(!(a<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m};if(m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||
o}else m.onPopState=function(b,c){var e=!1,f=!1,g,h;return m.doubleCheckComplete(),g=m.getHash(),g?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,e?f=m.getStateById(e):m.expectedStateId?f=m.getStateById(m.expectedStateId):f=m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?
(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):
(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=
f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=
a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState){if(!m.idToState.hasOwnProperty(b))continue;a.idToState[b]=m.idToState[b]}for(b in m.urlToId){if(!m.urlToId.hasOwnProperty(b))continue;a.urlToId[b]=m.urlToId[b]}for(b in m.stateToId){if(!m.stateToId.hasOwnProperty(b))continue;a.stateToId[b]=m.stateToId[b]}m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,
"unload",m.onUnload));if(!m.emulated.pushState){m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval));if(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla")m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})}},m.init()}(window);var undefined;var Node=Node?Node:{};Node.ELEMENT_NODE=1;Node.ATTRIBUTE_NODE=2;Node.TEXT_NODE=3;
Node.CDATA_SECTION_NODE=4;Node.ENTITY_REFERENCE_NODE=5;Node.ENTITY_NODE=6;Node.PROCESSING_INSTRUCTION_NODE=7;Node.COMMENT_NODE=8;Node.DOCUMENT_NODE=9;Node.DOCUMENT_TYPE_NODE=10;Node.DOCUMENT_FRAGMENT_NODE=11;Node.NOTATION_NODE=12;if(!String.prototype.trim)String.prototype.trim=function(){return this.replace(/^\s*(.+)/gi,"$1").replace(/\s*$/gi,"")};
if(!String.prototype.endsWith)String.prototype.endsWith=function(s){if("string"!=typeof s)throw"IllegalArgumentException: Must pass a string to "+"String.endsWith()";var start=this.length-s.length;return this.substring(start)==s};if(!Array.prototype.contains)Array.prototype.contains=function(element){for(var i=0;i<this.length;i++)if(this[i]==element)return true;return false};
if(!Array.prototype.remove)Array.prototype.remove=function(element){var result=false;var array=[];for(var i=0;i<this.length;i++)if(this[i]==element)result=true;else array.push(this[i]);this.clear();for(var i=0;i<array.length;i++)this.push(array[i]);array=null;return result};if(!Array.prototype.clear)Array.prototype.clear=function(){this.length=0};if(!Array.prototype.push)Array.prototype.push=function(element){this[this.length]=element;return this.length};
if(!Array.prototype.add)Array.prototype.add=function(element){if(this.contains(element))return false;this.push(element);return false};if(!Array.prototype.addAll)Array.prototype.addAll=function(that){var result=false;for(var i=0;i<that.length;i++)if(this.add(that[i]))result=true;return true};var org=org?org:{};org.ditchnet=org.ditchnet?org.ditchnet:{};org.ditchnet.dom=org.ditchnet.dom?org.ditchnet.dom:{};org.ditchnet.jsp=org.ditchnet.jsp?org.ditchnet.jsp:{};
org.ditchnet.util=org.ditchnet.util?org.ditchnet.util:{};org.ditchnet.event=org.ditchnet.event?org.ditchnet.event:{};org.ditchnet.jsp.TabUtils=function(){};org.ditchnet.jsp.TabUtils.TAB_CONTAINER_CLASS_NAME="ditch-tab-container";org.ditchnet.jsp.TabUtils.TAB_WRAP_CLASS_NAME="ditch-tab-wrap";org.ditchnet.jsp.TabUtils.TAB_CLASS_NAME="ditch-tab";org.ditchnet.jsp.TabUtils.TAB_BG_LEFT_CLASS_NAME="ditch-tab-bg-left";org.ditchnet.jsp.TabUtils.TAB_PANE_WRAP_CLASS_NAME="ditch-tab-pane-wrap";
org.ditchnet.jsp.TabUtils.TAB_PANE_CLASS_NAME="ditch-tab-pane";org.ditchnet.jsp.TabUtils.tabContainer;org.ditchnet.jsp.TabUtils.tabWrap;org.ditchnet.jsp.TabUtils.tab;org.ditchnet.jsp.TabUtils.tabs;org.ditchnet.jsp.TabUtils.tabPanes;org.ditchnet.jsp.TabUtils.selectedIndex;org.ditchnet.dom.DomUtils=function(){};org.ditchnet.dom.DomUtils.FOCUSED_CLASS_NAME="ditch-focused";org.ditchnet.dom.DomUtils.UNFOCUSED_CLASS_NAME="ditch-unfocused";
org.ditchnet.dom.DomUtils.show=function(target){target.style.display=""};org.ditchnet.dom.DomUtils.hide=function(target){target.style.display="none"};org.ditchnet.dom.DomUtils.setClassNameAsFocused=function(target){with(org.ditchnet.dom.DomUtils){removeClassName(target,UNFOCUSED_CLASS_NAME);addClassName(target,FOCUSED_CLASS_NAME)}};org.ditchnet.dom.DomUtils.setClassNameAsUnFocused=function(target){with(org.ditchnet.dom.DomUtils){removeClassName(target,FOCUSED_CLASS_NAME);addClassName(target,UNFOCUSED_CLASS_NAME)}};
org.ditchnet.dom.DomUtils.addClassName=function(target,k){with(org.ditchnet.dom.DomUtils){if(!isElementNode(target))throw new Error("Attempting to add a className to a non-Element"+" Node");var classNames=target.className.split(/\s+/g);if(classNames.contains(k))return;else classNames.push(k);target.className=classNames.join(" ");target.className=target.className.trim()}};
org.ditchnet.dom.DomUtils.removeClassName=function(target,k){with(org.ditchnet.dom.DomUtils){if(!isElementNode(target))throw new Error("Attempting to remove a className to a "+"non-Element Node");var classNames=target.className.split(/\s+/g);if(!classNames.contains(k))return;else classNames.remove(k);target.className=classNames.join(" ");target.className=target.className.trim()}};org.ditchnet.dom.DomUtils.isElementNode=function(target){return Node.ELEMENT_NODE==target.nodeType};
org.ditchnet.dom.DomUtils.hasId=function(target,id){return target.id==id};
org.ditchnet.dom.DomUtils.hasClassName=function(target,className){function _isLastOfMultpleClassNames(all,className){var spaceBefore=all.lastIndexOf(className)-1;return all.endsWith(className)&&all.substring(spaceBefore,spaceBefore+1)==" "}className=className.trim();var cn=target.className;if(!cn)return false;cn=cn.trim();if(cn==className)return true;if(cn.indexOf(className+" ")>-1)return true;if(_isLastOfMultpleClassNames(cn,className))return true;return false};
org.ditchnet.dom.DomUtils.getFirstAncestorOrSelfByClassName=function(target,className){with(org.ditchnet.dom.DomUtils){var parent=target;do if(isElementNode(parent)&&hasClassName(parent,className))return parent;while(parent=parent.parentNode)}return null};org.ditchnet.dom.DomUtils.getFirstAncestorByClassName=function(target,className){with(org.ditchnet.dom.DomUtils){var parent=target;while(parent=parent.parentNode)if(isElementNode(parent)&&hasClassName(parent,className))return parent}return null};
org.ditchnet.dom.DomUtils.getFirstChildByClassName=function(target,className){with(org.ditchnet.dom.DomUtils){var kids=target.childNodes;for(var i=0;i<kids.length;i++){var kid=kids[i];if(isElementNode(kid)&&hasClassName(kid,className))return kid}}return null};org.ditchnet.dom.DomUtils.getChildrenByClassName=function(target,className){var result=[];with(org.ditchnet.dom.DomUtils){var kids=target.childNodes;for(var i=0;i<kids.length;i++){var kid=kids[i];if(isElementNode(kid)&&hasClassName(kid,className))result.push(kid)}}return result};
org.ditchnet.dom.DomUtils.getFirstDescendantByClassNameBreadthFirst=function(target,className){var result;with(org.ditchnet.dom.DomUtils){if(result=getFirstChildByClassName(target,className))return result;for(var i=0;i<target.childNodes.length;i++){result=getFirstDescendantByClassNameBreadthFirst(target.childNodes.item(i),className);if(result)return result}return null}};
org.ditchnet.dom.DomUtils.getFirstDescendantByClassNameDepthFirst=function(target,className){var child;var result;with(org.ditchnet.dom.DomUtils){for(var i=0;i<target.childNodes.length;i++){child=target.childNodes.item(i);if(isElementNode(child)&&hasClassName(child,className))return child;result=getFirstDescendantByClassNameDepthFirst(target.childNodes.item(i),className);if(result)return result}return null}};
org.ditchnet.dom.DomUtils.getDescendantsByClassName=function(target,className){var result=[];with(org.ditchnet.dom.DomUtils){result.addAll(getChildrenByClassName(target,className));for(var i=0;i<target.childNodes.length;i++)result.addAll(getDescendantsByClassName(target.childNodes.item(i),className));return result}};
org.ditchnet.jsp.TabUtils.tabClicked=function(evt){var eventSource;with(org.ditchnet){evt=new event.Event(evt);eventSource=evt.getSource();eventSource=dom.DomUtils.getFirstAncestorOrSelfByClassName(eventSource,jsp.TabUtils.TAB_CLASS_NAME);jsp.TabUtils.switchTab(eventSource);evt.consume()}};
org.ditchnet.jsp.TabUtils.switchTab=function(eventSource){with(org.ditchnet.jsp.TabUtils){findTabElements(eventSource);selectedIndex=determineSelectedIndex(eventSource);toggleTabVisibility(selectedIndex);var selectedTabPane=org.ditchnet.jsp.TabUtils.tabPanes[selectedIndex];var tabId=null;if(selectedTabPane!=null)tabId=selectedTabPane.id;setTabCookie(tabId)}};
org.ditchnet.jsp.TabUtils.setTabCookie=function(selectedTabId){with(org.ditchnet){var name="org.ditchnet.jsp.tabs."+jsp.TabUtils.tabContainer.id;var c=new util.Cookie(name,selectedTabId);util.Cookie.addPageCookie(c)}};
org.ditchnet.jsp.TabUtils.findTabElements=function(eventSource){with(org.ditchnet){jsp.TabUtils.tab=eventSource;jsp.TabUtils.tabContainer=dom.DomUtils.getFirstAncestorByClassName(eventSource,jsp.TabUtils.TAB_CONTAINER_CLASS_NAME);jsp.TabUtils.tabWrap=dom.DomUtils.getFirstChildByClassName(jsp.TabUtils.tabContainer,jsp.TabUtils.TAB_WRAP_CLASS_NAME);jsp.TabUtils.tabs=dom.DomUtils.getChildrenByClassName(jsp.TabUtils.tabWrap,jsp.TabUtils.TAB_CLASS_NAME);jsp.TabUtils.tabPaneWrap=dom.DomUtils.getFirstChildByClassName(jsp.TabUtils.tabContainer,
jsp.TabUtils.TAB_PANE_WRAP_CLASS_NAME);jsp.TabUtils.tabPanes=dom.DomUtils.getChildrenByClassName(jsp.TabUtils.tabPaneWrap,jsp.TabUtils.TAB_PANE_CLASS_NAME)}};org.ditchnet.jsp.TabUtils.determineSelectedIndex=function(eventSource){with(org.ditchnet.jsp.TabUtils)for(var i=0;i<tabs.length;i++)if(tabs[i]==eventSource)return i};
org.ditchnet.jsp.TabUtils.toggleTabVisibility=function(selectedIndex){with(org.ditchnet)for(var i=0;i<jsp.TabUtils.tabPanes.length;i++){var tabPane=jsp.TabUtils.tabPanes[i];if(i==selectedIndex){dom.DomUtils.show(tabPane);dom.DomUtils.setClassNameAsFocused(jsp.TabUtils.tabs[i])}else{dom.DomUtils.hide(tabPane);dom.DomUtils.setClassNameAsUnFocused(jsp.TabUtils.tabs[i])}}};
org.ditchnet.jsp.TabUtils.tabLinkClicked=function(evt,selectedTabPaneId){var tabContainer,selectedTabPane,tabWrap,tabs,tabPaneWrap,tabPanes,selectedIndex;with(org.ditchnet){evt=new event.Event(evt);selectedTabPane=document.getElementById(selectedTabPaneId);tabContainer=dom.DomUtils.getFirstAncestorByClassName(selectedTabPane,jsp.TabUtils.TAB_CONTAINER_CLASS_NAME);tabWrap=dom.DomUtils.getFirstChildByClassName(tabContainer,jsp.TabUtils.TAB_WRAP_CLASS_NAME);tabs=dom.DomUtils.getChildrenByClassName(tabWrap,
jsp.TabUtils.TAB_CLASS_NAME);tabPaneWrap=dom.DomUtils.getFirstAncestorByClassName(selectedTabPane,jsp.TabUtils.TAB_PANE_WRAP_CLASS_NAME);tabPanes=dom.DomUtils.getChildrenByClassName(tabPaneWrap,jsp.TabUtils.TAB_PANE_CLASS_NAME);for(var i=0;i<tabPanes.length;i++)if(tabPanes[i]==selectedTabPane){selectedIndex=i;break}jsp.TabUtils.switchTab(tabs[selectedIndex]);window.scrollTo(0,0);evt.consume()}};
org.ditchnet.jsp.TabUtils.prevTabButtonClicked=function(evt,tabContainerId){org.ditchnet.jsp.TabUtils.tabButtonClicked(evt,tabContainerId,true)};org.ditchnet.jsp.TabUtils.nextTabButtonClicked=function(evt,tabContainerId){org.ditchnet.jsp.TabUtils.tabButtonClicked(evt,tabContainerId,false)};
org.ditchnet.jsp.TabUtils.tabButtonClicked=function(evt,tabContainerId,isPrev){var tabContainer,tabWrap,tabs,selectedIndex;with(org.ditchnet){evt=new event.Event(evt);tabContainer=document.getElementById(tabContainerId);tabWrap=dom.DomUtils.getFirstChildByClassName(tabContainer,jsp.TabUtils.TAB_WRAP_CLASS_NAME);tabs=dom.DomUtils.getChildrenByClassName(tabWrap,jsp.TabUtils.TAB_CLASS_NAME);for(var i=0;i<tabs.length;i++)if(dom.DomUtils.hasClassName(tabs[i],dom.DomUtils.FOCUSED_CLASS_NAME)){selectedIndex=
isPrev?i-1:i+1;selectedIndex=selectedIndex>=tabs.length?0:0>selectedIndex?tabs.length-1:selectedIndex;break}jsp.TabUtils.switchTab(tabs[selectedIndex]);evt.consume()}};org.ditchnet.jsp.TabEvent=function(source){this._source=source;with(org.ditchnet.jsp.TabUtils){this._tabContainer=tabContainer;this._selectedIndex=selectedIndex;this._tabPane=tabPanes[selectedIndex]}};org.ditchnet.jsp.TabEvent.prototype.getSource=function(){return this._source};org.ditchnet.jsp.TabEvent.prototype.getSelectedIndex=function(){return this._selectedIndex};
org.ditchnet.jsp.TabEvent.prototype.getTab=function(){return this._source};org.ditchnet.jsp.TabEvent.prototype.getTabContainer=function(){return this._tabContainer};org.ditchnet.jsp.TabEvent.prototype.getTabPane=function(){return this._tabPane};org.ditchnet.jsp.TabEvent.prototype.toString=function(){return"[ org.ditchnet.jsp.TabEvent object ]"};org.ditchnet.event.Event=function(evt){this._evt=evt?evt:window.event;this._source=this._evt.currentTarget?this._evt.currentTarget:this._evt.srcElement};
org.ditchnet.event.Event.prototype.getSource=function(){return this._source};org.ditchnet.event.Event.prototype.consume=function(){if(this._evt.currentTarget){this._evt.stopPropagation();this._evt.preventDefault()}else if(this._evt.srcElement){this._evt.cancelBubble=true;this._evt.returnValue=false}};org.ditchnet.util.Cookie=function(name,value){this._name;this._value;this._path;this._secure;this._domain;this._expires;if(name)this.setName(name);if(value)this.setValue(value)};
org.ditchnet.util.Cookie.EQUALS="=";org.ditchnet.util.Cookie.DELIM="; ";org.ditchnet.util.Cookie.PATH="path";org.ditchnet.util.Cookie.SECURE="secure";org.ditchnet.util.Cookie.DOMAIN="domain";org.ditchnet.util.Cookie.EXPIRES="expires";org.ditchnet.util.Cookie.SUB_VALUE_DELIM=":";org.ditchnet.util.Cookie.addPageCookie=function(c){document.cookie=c.toCookieString()};org.ditchnet.util.Cookie.getPageCookieString=function(){return document.cookie};
org.ditchnet.util.Cookie.pageHasCookieWithNameAndValue=function(c){var s=c.toNameValueString();return Cookie.get().indexOf(s)>-1};org.ditchnet.util.Cookie.pageHasCookieWithName=function(c){var s=c.getName();return Cookie.get().indexOf(s)>-1};
org.ditchnet.util.Cookie.prototype.toCookieString=function(){with(org.ditchnet.util){var buff=new StringBuffer;buff.append(this.getName()).append(Cookie.EQUALS);if(typeof this.getValue()=="object"&&this.getValue().constructor==Array){var values=this.getValue();for(var i=0;i<values.length;i++)buff.append(values[i]).append(i==values.length-1?"":Cookie.SUB_VALUE_DELIM)}else buff.append(this.getValue());buff.append(Cookie.DELIM);buff.append(Cookie.PATH).append(Cookie.EQUALS).append(this.getPath()).append(Cookie.DELIM);
buff.append(Cookie.EXPIRES).append(Cookie.EQUALS).append(this.getExpires()).append(Cookie.DELIM);if(this.getDomain())buff.append(Cookie.DOMAIN).append(Cookie.EQUALS).append(this.getDomain()).append(Cookie.DELIM);if(this.isSecure())buff.append(Cookie.SECURE).append(Cookie.DELIM)}return buff.toString()};org.ditchnet.util.Cookie.prototype.toNameValueString=function(){var buff=new org.ditchnet.util.StringBuffer;buff.append(this.getName()).append(Cookie.EQUALS).append(this.getValue());return buff.toString()};
org.ditchnet.util.Cookie.prototype.getName=function(){return this._name};org.ditchnet.util.Cookie.prototype.setName=function(name){this._name=name};org.ditchnet.util.Cookie.prototype.getValue=function(){return this._value};org.ditchnet.util.Cookie.prototype.setValue=function(value){this._value=value};org.ditchnet.util.Cookie.prototype.getPath=function(){if(this._path===undefined)return"/";else return this._path};org.ditchnet.util.Cookie.prototype.setPath=function(path){this._path=path};
org.ditchnet.util.Cookie.prototype.isSecure=function(){return this._secure};org.ditchnet.util.Cookie.prototype.setSecure=function(secure){this._secure=secure};org.ditchnet.util.Cookie.prototype.getDomain=function(){return this._domain};org.ditchnet.util.Cookie.prototype.setDomain=function(domain){this._domain=domain};org.ditchnet.util.Cookie.prototype.getExpires=function(){if(this._expires===undefined)return this._getDefaultExpires();else return this._expires};
org.ditchnet.util.Cookie.prototype.setExpires=function(expires){this._expires=expires};org.ditchnet.util.Cookie.prototype._getDefaultDomain=function(){return window.location.hostname};org.ditchnet.util.Cookie.prototype._getDefaultExpires=function(){var date=new Date;date.setFullYear(date.getFullYear()+10);return date.toGMTString()};
org.ditchnet.util.StringBuffer=function(s){this._array=[];if(s&&typeof s!="string")throw new Error("IllegalArgumentException: StringBuffer's "+"constructor accepts an optional String argument. Given:"+typeof s);if(s)this.append(s)};org.ditchnet.util.StringBuffer.prototype.append=function(s){this._array.push(s);return this};org.ditchnet.util.StringBuffer.prototype.toString=function(){return this._array.join("")};org.ditchnet.util.Map=function(o){this._obj=o?o:new Object};
org.ditchnet.util.Map.prototype.put=function(key,value){this._obj[key]=value};org.ditchnet.util.Map.prototype.get=function(key){if(!this._obj[key])return null;return this._obj[key]};org.ditchnet.util.Map.prototype.size=function(){var count=0;for(var key in this._obj)count++;return count};org.ditchnet.util.Map.prototype.isEmpty=function(){return this.size()==0};
org.ditchnet.util.Map.prototype.toString=function(){var buff=new org.ditchnet.util.StringBuffer;count=0;for(var key in this._obj){buff.append(key).append(" = ").append(this._obj[key]).append(count==this.size()-1?"":"\r\n");count++}return buff.toString()};org.ditchnet.util.Map.prototype.containsKey=function(key){if(this._obj[key]!==undefined)return true;return false};org.ditchnet.util.Map.prototype.containsValue=function(value){for(var key in this._obj)if(this._obj[key]==value)return true;return false};
org.ditchnet.util.Map.prototype.remove=function(key){if(this.containsKey(key))delete this._obj[key]};org.ditchnet.util.Map.prototype.keySet=function(){var keys=[];for(var key in this._obj)keys.push(key);return keys};org.ditchnet.util.Map.prototype.values=function(){var values=new Collection;for(var key in this._obj)values.add(this._obj[key]);return values};
org.ditchnet.util.ParameterMap=function(q){this._map=new org.ditchnet.util.Map;this._q;if(q)this._q=q.substring(1);var pairs=this._q.split(/&+/g);var a;for(var i=0;i<pairs.length;i++){a=pairs[i].split(/=+/g);this._map.put(a[0],a[1])}};org.ditchnet.util.ParameterMap.getPageParameterMap=function(){return new org.ditchnet.util.ParameterMap(window.location.search.toString())};
org.ditchnet.util.ParameterMap.prototype.toQueryString=function(){var buff=new org.ditchnet.util.StringBuffer("?");var count=0;var key,value;var keys=this._map.keySet();for(var i=0;i<keys.length;i++){key=keys[i];value=this._map.get(key);buff.append(key).append("=").append(value).append(count==this._map.size()-1?"":"&");count++}return buff.toString()};
var i18n={loaded:false,messageCodes:{},_forceRefresh:false,message:function(messageCode){if(!i18n.loaded)i18n.load(false);var resolved=i18n.messageCodes[messageCode];if(!resolved){resolved=messageCode;return resolved}for(var i=1;i<arguments.length;i++){var arg=arguments[i];resolved=resolved.replace("{"+(i-1)+"}",arg)}return resolved},forceRefreshIfServerRestarted:function(serverStartupTime){i18n.serverStartupTime=serverStartupTime},_loadFromClientStorage:function(){try{$.jStore.defaults.engine="local";
$.jStore.load();if($.jStore.Availability){var cachei18nTime=$.jStore.get("CodeBeamer.i18n.messageCodes.cacheTime");if(cachei18nTime<i18n.serverStartupTime){i18n._forceRefresh=true;console.log("refreshing i18n cache, because the server has been restarted");return}var cachedi18nData=$.jStore.get("CodeBeamer.i18n.messageCodes");if(cachedi18nData!=null)try{i18n.messageCodes=cachedi18nData;if(i18n.isMatchingLanguageLoaded())i18n.loaded=true;else i18n._forceRefresh=true;return}catch(ex){i18n._forceRefresh=
true}}else;}catch(ex){console.log("Failed to init jQuery.jStore:"+ex)}return},isMatchingLanguageLoaded:function(){var resourceLanguage=i18n.messageCodes==null?"":i18n.messageCodes["language"];var matching=resourceLanguage==language;if(matching&&country!=null&&country!=""){var resourceCountry=i18n.messageCodes["country"];if(resourceCountry!=null&&resourceCountry!=country){console.log("Invalid country code found in cached i18n message code. Country found:"+resourceCountry+", country needed:"+country);
return false}}return matching},load:function(loadAsync){if(!i18n._forceRefresh)i18n._loadFromClientStorage();if(i18n.loaded)return;$.ajax({url:contextPath+"/ajax/getMessageCodes.spr?language="+language+"&country="+country,async:loadAsync,cache:!i18n._forceRefresh,success:function(data,textStatus,jqXHR){i18n.messageCodes=data;i18n.loaded=true;if(!i18n.isMatchingLanguageLoaded())if(!i18n._forceRefresh){i18n.loaded=false;i18n._forceRefresh=true;i18n.load(false);return}var cachedi18nData=jqXHR.responseText;
$(function(){try{$.jStore.remove("CodeBeamer.i18n.messageCodes")}catch(ex){console.log("Failed to clean i18n in client cache"+ex)}try{$.jStore.store("CodeBeamer.i18n.messageCodes",cachedi18nData);$.jStore.store("CodeBeamer.i18n.messageCodes.cacheTime",i18n.serverStartupTime)}catch(ex){console.log("Failed to store i18n in client cache"+ex)}})},failure:function(data){i18n.loaded=true}})}};i18n.forceRefreshIfServerRestarted(serverStartupTime);
function readCookie(cookieName){var theCookie=""+document.cookie;var ind=theCookie.indexOf(cookieName);if(ind==-1||cookieName=="")return"";var ind1=theCookie.indexOf(";",ind);if(ind1==-1)ind1=theCookie.length;return unescape(theCookie.substring(ind+cookieName.length+1,ind1))}
function setCookie(cookieName,cookieValue,nDays){var today=new Date;var expire=new Date;if(nDays==null||nDays==0)nDays=1;expire.setTime(today.getTime()+36E5*24*nDays);document.cookie=cookieName+"="+escape(cookieValue)+";expires="+expire.toGMTString()}
function checkCookie(){var cookieName="CB_COOKIES_ENABLED";setCookie(cookieName,"anything");var mycookie=readCookie(cookieName);if(mycookie==null||mycookie=="")document.write('<FONT SIZE="+3" COLOR="red"><STRONG>'+i18n.message("ajax.cookies.required")+"</STRONG></FONT><P>");else setCookie(cookieName,"")}function cb_help_window(url){window.open(""+url,"CBHelpWindow","scrollbars=yes,resizable=yes,toolbar=no,height=410,width=500")}
function calculateWindowGeometry(geometry,container){var width=null,height=null,min_height=null,containerWidth=null,containerHeight=null;if(container){containerWidth=$(container).width();containerHeight=$(container).height()}else{containerWidth=screen.width;containerHeight=screen.height}var percents=new RegExp("(\\d*)%_(\\d*)%");var match=percents.exec(geometry);if(match!=null){var widthpercent=parseInt(match[1]);var heightpercent=parseInt(match[2]);width=Math.round(containerWidth*widthpercent/100);
height=Math.round(containerHeight*heightpercent/100)}else if(geometry==null){width=Math.round(containerWidth*6/10);height=Math.round(containerHeight*6/10);min_height=600}else if(geometry=="half_half"){width=Math.round(containerWidth*5/10);height=Math.round(containerHeight*5/10);min_height=100}else if(geometry=="thin_wide"){width=Math.round(containerWidth*5/10);height=Math.round(containerHeight*3/10);min_height=100}else if(geometry=="small_wide"){width=Math.round(containerWidth*45/100);height=Math.round(containerHeight*
5/10);min_height=100}else if(geometry=="minimal"){width=1;height=1}else if(geometry=="full_half"){width=containerWidth;height=Math.round(containerHeight*0.6)}else{width=Math.round(containerWidth*5/10);height=Math.round(containerHeight*5/10);min_height=300}if(height<min_height)height=min_height;return{width:width,height:height}}
function launch_url(gotourl,geometry,window_name){var window_features="toobar=no,location=no,directories=no,status=no,"+"menubar=no,scrollbars=yes,resizable=yes";var dimensions=calculateWindowGeometry(geometry);window_features+=",width="+dimensions.width+",height="+dimensions.height;if(window_name==null)window_name="_blank";window.open(gotourl,window_name,window_features);return false}
var setAllStatesFilters={hasPropertyName:function(propertyName){var prefix=null;var suffix=null;var wildcard=propertyName.indexOf("*");if(wildcard!=-1){prefix=propertyName.substring(0,wildcard);suffix=propertyName.substring(wildcard+1)}return function(e){if(e.name)if(wildcard!=-1){if(e.name.indexOf(prefix)==0&&e.name.endsWith(suffix))return true}else if(e.name.indexOf(propertyName)!=-1)return true;return false}},hasCssClass:function(cssClass){return function(e){if(!cssClass)return true;return $(e).hasClass(cssClass)}}};
function setAllStatesByProperty(selector,property,cssClass){var filters=[setAllStatesFilters.hasPropertyName(property),setAllStatesFilters.hasCssClass(cssClass)];setAllStatesByClosures(selector,filters)}
function setAllStatesByValue(selector,property){var val=selector.checked;var frm=selector.form;var length=frm.elements.length;var endsWith=property.indexOf("*")==0;if(endsWith)property=property.substring(1);if(!property)return;for(var i=0;i<length;i++){var e=frm.elements[i];if(e.value)if(endsWith){if(e.value.endsWith(property))setChecked(e,val)}else if(e.value.indexOf(property)==0)setChecked(e,val)}}
function setAllStatesByPropertyAndValue(selector,property,valfil){var val=selector.checked;var frm=selector.form;var length=frm.elements.length;var endsWith=valfil.indexOf("*")==0;if(endsWith)valfil=valfil.substring(1);if(!property)return;for(var i=0;i<length;i++){var e=frm.elements[i];if(e.name&&e.name.indexOf(property)!=-1)if(e.value)if(endsWith){if(e.value.endsWith(valfil))setChecked(e,val)}else if(e.value.indexOf(valfil)==0)setChecked(e,val)}}
function setAllStatesByClosures(fromSelector,filters){if(!filters)return;var val=fromSelector.checked;var frm=fromSelector.form;var length=frm.elements.length;for(var i=0;i<length;i++){var e=frm.elements[i];var match=true;for(var j=0;j<filters.length;j++){var filter=filters[j];if(filter)match=match&&filter.call(this,e)}if(match)setChecked(e,val)}}
function setAllStatesFrom(fromSelector,property,closure){setAllStatesByClosures(fromSelector,[function(e){var match=e.name&&e.name.indexOf(property)!=-1;match=match&&(closure==null||closure.call(this,e));return match}])}function InSameTableClosure(element){this.parentTable=this.findParentTable(element);var THIS=this;return function(e){return THIS.isInSameTable.call(THIS,e)}}
InSameTableClosure.prototype={parentTable:null,findParentTable:function(element){while(element!=null&&element.tagName!="TABLE")element=element.parentNode;return element},isInSameTable:function(element){var elemParentTable=this.findParentTable(element);return elemParentTable==this.parentTable}};
function setAllStates(frm,property,forcedValue){var val=false;var firstOccurrence=true;if(typeof forcedValue!="undefined"){firstOccurrence=false;val=forcedValue}var length=frm.elements.length;for(var i=0;i<length;i++){var e=frm.elements[i];if(e.name&&e.name.indexOf(property)!=-1){if(firstOccurrence){firstOccurrence=false;val=!e.checked}setChecked(e,val)}}}
function setChecked(e,val){if(e.type=="hidden")return;e.checked=val;if(typeof tableHighlighter!="undefined"&&tableHighlighter)tableHighlighter.updateRowOfCheckbox(e);if(typeof e.onchange=="function")e.onchange.call(e);if(typeof e.onclick=="function")e.onclick.call(e)}function hasSelectedCheckbox(frm,property){var found=!forAllFields(frm,property,function(e){if(e.checked)return false;return true});return found}
function submitIfSelected(frm,property,url){var found=hasSelectedCheckbox(frm,property);if(found){if(url!=null&&url.length!=0)document.location.href=url}else alert(i18n.message("no.item.selected"));return found}function forAllFields(frm,property,func){var length=frm.elements.length;for(var i=0;i<length;i++){var e=frm.elements[i];if(e&&e.name&&e.name.indexOf(property)!=-1){var cont=func.call(this,e);if(!cont)return false}}return true}
function findAllCheckedCheckboxValues(frm,property){var values=new Array;forAllFields(frm,property,function(e){if(e.checked)values[values.length]=e.value;return true});return values}function setEditFieldsDisabled(frm,disabled){var length=frm.elements.length;for(var i=0;i<length;i++){var e=frm.elements[i];var inputfield=e.tagName=="INPUT";var isbutton=inputfield&&(e.type=="submit"||e.type=="button");var ishidden=inputfield&&e.type=="hidden";if(!isbutton&&!ishidden)e.disabled=disabled}}
function getAnchorPosition(anchorname){var useWindow=false;var coordinates=new Object;var x=0,y=0;var use_gebi=false,use_css=false,use_layers=false;if(document.getElementById)use_gebi=true;else if(document.all)use_css=true;else if(document.layers)use_layers=true;if(use_gebi&&document.all){x=AnchorPosition_getPageOffsetLeft(document.all[anchorname]);y=AnchorPosition_getPageOffsetTop(document.all[anchorname])}else if(use_gebi){var o=document.getElementById(anchorname);x=AnchorPosition_getPageOffsetLeft(o);
y=AnchorPosition_getPageOffsetTop(o)}else if(use_css){x=AnchorPosition_getPageOffsetLeft(document.all[anchorname]);y=AnchorPosition_getPageOffsetTop(document.all[anchorname])}else if(use_layers){var found=0;for(var i=0;i<document.anchors.length;i++)if(document.anchors[i].name==anchorname){found=1;break}if(found==0){coordinates.x=0;coordinates.y=0;return coordinates}x=document.anchors[i].x;y=document.anchors[i].y}else{coordinates.x=0;coordinates.y=0;return coordinates}coordinates.x=x;coordinates.y=
y;return coordinates}
function getAnchorWindowPosition(anchorname){var coordinates=getAnchorPosition(anchorname);var x=0;var y=0;if(document.getElementById)if(isNaN(window.screenX)){x=coordinates.x-document.body.scrollLeft+window.screenLeft;y=coordinates.y-document.body.scrollTop+window.screenTop}else{x=coordinates.x+window.screenX+(window.outerWidth-window.innerWidth)-window.pageXOffset;y=coordinates.y+window.screenY+(window.outerHeight-24-window.innerHeight)-window.pageYOffset}else if(document.all){x=coordinates.x-document.body.scrollLeft+
window.screenLeft;y=coordinates.y-document.body.scrollTop+window.screenTop}else if(document.layers){x=coordinates.x+window.screenX+(window.outerWidth-window.innerWidth)-window.pageXOffset;y=coordinates.y+window.screenY+(window.outerHeight-24-window.innerHeight)-window.pageYOffset}coordinates.x=x;coordinates.y=y;return coordinates}function AnchorPosition_getPageOffsetLeft(el){var ol=el.offsetLeft;while((el=el.offsetParent)!=null)ol+=el.offsetLeft;return ol}
function AnchorPosition_getWindowOffsetLeft(el){return AnchorPosition_getPageOffsetLeft(el)-document.body.scrollLeft}function AnchorPosition_getPageOffsetTop(el){var ot=el.offsetTop;while((el=el.offsetParent)!=null)ot+=el.offsetTop;return ot}function AnchorPosition_getWindowOffsetTop(el){return AnchorPosition_getPageOffsetTop(el)-document.body.scrollTop}
function PopupWindow_getXYPosition(anchorname){var coordinates;if(this.type=="WINDOW")coordinates=getAnchorWindowPosition(anchorname);else coordinates=getAnchorPosition(anchorname);this.x=coordinates.x;this.y=coordinates.y}function PopupWindow_setSize(width,height){this.width=width;this.height=height}function PopupWindow_populate(contents){this.contents=contents;this.populated=false}function PopupWindow_setUrl(url){this.url=url}
function PopupWindow_setWindowProperties(props){this.windowProperties=props}
function PopupWindow_refresh(){if(this.divName!=null)if(this.use_gebi)document.getElementById(this.divName).innerHTML=this.contents;else if(this.use_css)document.all[this.divName].innerHTML=this.contents;else{if(this.use_layers){var d=document.layers[this.divName];d.document.open();d.document.writeln(this.contents);d.document.close()}}else if(this.popupWindow!=null&&!this.popupWindow.closed){if(this.url!="")this.popupWindow.location.href=this.url;else{this.popupWindow.document.open();this.popupWindow.document.writeln(this.contents);
this.popupWindow.document.close()}this.popupWindow.focus()}}
function PopupWindow_showPopup(anchorname){this.getXYPosition(anchorname);this.x+=this.offsetX;this.y+=this.offsetY;if(!this.populated&&this.contents!=""){this.populated=true;this.refresh()}if(this.divName!=null)if(this.use_gebi){document.getElementById(this.divName).style.left=this.x+"px";document.getElementById(this.divName).style.top=this.y+"px";document.getElementById(this.divName).style.visibility="visible"}else if(this.use_css){document.all[this.divName].style.left=this.x;document.all[this.divName].style.top=
this.y;document.all[this.divName].style.visibility="visible"}else{if(this.use_layers){document.layers[this.divName].left=this.x;document.layers[this.divName].top=this.y;document.layers[this.divName].visibility="visible"}}else{if(this.popupWindow==null||this.popupWindow.closed){if(this.x<0)this.x=0;if(this.y<0)this.y=0;if(screen&&screen.availHeight)if(this.y+this.height>screen.availHeight)this.y=screen.availHeight-this.height;if(screen&&screen.availWidth)if(this.x+this.width>screen.availWidth)this.x=
screen.availWidth-this.width;var avoidAboutBlank=window.opera||document.layers&&!navigator.mimeTypes["*"]||navigator.vendor=="KDE"||document.childNodes&&!document.all&&!navigator.taintEnabled;this.popupWindow=window.open(avoidAboutBlank?"":"about:blank","window_"+anchorname,this.windowProperties+",width="+this.width+",height="+this.height+",screenX="+this.x+",left="+this.x+",screenY="+this.y+",top="+this.y+"")}this.refresh()}}
function PopupWindow_hidePopup(){if(this.divName!=null)if(this.use_gebi)document.getElementById(this.divName).style.visibility="hidden";else if(this.use_css)document.all[this.divName].style.visibility="hidden";else{if(this.use_layers)document.layers[this.divName].visibility="hidden"}else if(this.popupWindow&&!this.popupWindow.closed){this.popupWindow.close();this.popupWindow=null}}
function PopupWindow_isClicked(e){if(this.divName!=null){if(this.use_layers){var clickX=e.pageX;var clickY=e.pageY;var t=document.layers[this.divName];if(clickX>t.left&&clickX<t.left+t.clip.width&&clickY>t.top&&clickY<t.top+t.clip.height)return true;else return false}else if(document.all){var t=window.event.srcElement;while(t.parentElement!=null){if(t.id==this.divName)return true;t=t.parentElement}return false}else if(this.use_gebi&&e){var t=e.originalTarget;while(t.parentNode!=null){if(t.id==this.divName)return true;
t=t.parentNode}return false}return false}return false}function PopupWindow_hideIfNotClicked(e){if(this.autoHideEnabled&&!this.isClicked(e))this.hidePopup()}function PopupWindow_autoHide(){this.autoHideEnabled=true}function PopupWindow_hidePopupWindows(e){for(var i=0;i<popupWindowObjects.length;i++)if(popupWindowObjects[i]!=null){var p=popupWindowObjects[i];p.hideIfNotClicked(e)}}
function PopupWindow_attachListener(){if(document.layers)document.captureEvents(Event.MOUSEUP);window.popupWindowOldEventListener=document.onmouseup;if(window.popupWindowOldEventListener!=null)document.onmouseup=new Function("window.popupWindowOldEventListener(); PopupWindow_hidePopupWindows();");else document.onmouseup=PopupWindow_hidePopupWindows}
function PopupWindow(){if(!window.popupWindowIndex)window.popupWindowIndex=0;if(!window.popupWindowObjects)window.popupWindowObjects=new Array;if(!window.listenerAttached){window.listenerAttached=true;PopupWindow_attachListener()}this.index=popupWindowIndex++;popupWindowObjects[this.index]=this;this.divName=null;this.popupWindow=null;this.width=0;this.height=0;this.populated=false;this.visible=false;this.autoHideEnabled=false;this.contents="";this.url="";this.windowProperties="toolbar=no,location=no,status=no,menubar=no,scrollbars=auto,resizable,alwaysRaised,dependent,titlebar=no";
if(arguments.length>0){this.type="DIV";this.divName=arguments[0]}else this.type="WINDOW";this.use_gebi=false;this.use_css=false;this.use_layers=false;if(document.getElementById)this.use_gebi=true;else if(document.all)this.use_css=true;else if(document.layers)this.use_layers=true;else this.type="WINDOW";this.offsetX=0;this.offsetY=0;this.getXYPosition=PopupWindow_getXYPosition;this.populate=PopupWindow_populate;this.setUrl=PopupWindow_setUrl;this.setWindowProperties=PopupWindow_setWindowProperties;
this.refresh=PopupWindow_refresh;this.showPopup=PopupWindow_showPopup;this.hidePopup=PopupWindow_hidePopup;this.setSize=PopupWindow_setSize;this.isClicked=PopupWindow_isClicked;this.autoHide=PopupWindow_autoHide;this.hideIfNotClicked=PopupWindow_hideIfNotClicked}Date.$VERSION=1.02;Date.LZ=function(x){return(x<0||x>9?"":"0")+x};Date.monthNames=new Array("January","February","March","April","May","June","July","August","September","October","November","December");
Date.monthAbbreviations=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Date.dayNames=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");Date.dayAbbreviations=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.preferAmericanFormat=true;if(!Date.prototype.getFullYear)Date.prototype.getFullYear=function(){var yy=this.getYear();return yy<1900?yy+1900:yy};
Date.parseString=function(val,format){if(typeof format=="undefined"||format==null||format==""){var generalFormats=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM");var monthFirst=new Array("M/d/y","M-d-y","M.d.y","M/d","M-d");var dateFirst=new Array("d/M/y","d-M-y","d.M.y","d/M","d-M");var checkList=new Array(generalFormats,Date.preferAmericanFormat?monthFirst:dateFirst,Date.preferAmericanFormat?dateFirst:monthFirst);for(var i=0;i<checkList.length;i++){var l=checkList[i];
for(var j=0;j<l.length;j++){var d=Date.parseString(val,l[j]);if(d!=null)return d}}return null}this.isInteger=function(val){for(var i=0;i<val.length;i++)if("1234567890".indexOf(val.charAt(i))==-1)return false;return true};this.getInt=function(str,i,minlength,maxlength){for(var x=maxlength;x>=minlength;x--){var token=str.substring(i,i+x);if(token.length<minlength)return null;if(this.isInteger(token))return token}return null};val=val+"";format=format+"";var i_val=0;var i_format=0;var c="";var token=
"";var token2="";var x,y;var year=(new Date).getFullYear();var month=1;var date=1;var hh=0;var mm=0;var ss=0;var ampm="";while(i_format<format.length){c=format.charAt(i_format);token="";while(format.charAt(i_format)==c&&i_format<format.length)token+=format.charAt(i_format++);if(token=="yyyy"||token=="yy"||token=="y"){if(token=="yyyy"){x=4;y=4}if(token=="yy"){x=2;y=2}if(token=="y"){x=2;y=4}year=this.getInt(val,i_val,x,y);if(year==null)return null;i_val+=year.length;if(year.length==2)if(year>70)year=
1900+(year-0);else year=2E3+(year-0)}else if(token=="MMM"||token=="NNN"){month=0;var names=token=="MMM"?Date.monthNames.concat(Date.monthAbbreviations):Date.monthAbbreviations;for(var i=0;i<names.length;i++){var month_name=names[i];if(val.substring(i_val,i_val+month_name.length).toLowerCase()==month_name.toLowerCase()){month=i%12+1;i_val+=month_name.length;break}}if(month<1||month>12)return null}else if(token=="EE"||token=="E"){var names=token=="EE"?Date.dayNames:Date.dayAbbreviations;for(var i=0;i<
names.length;i++){var day_name=names[i];if(val.substring(i_val,i_val+day_name.length).toLowerCase()==day_name.toLowerCase()){i_val+=day_name.length;break}}}else if(token=="MM"||token=="M"){month=this.getInt(val,i_val,token.length,2);if(month==null||month<1||month>12)return null;i_val+=month.length}else if(token=="dd"||token=="d"){date=this.getInt(val,i_val,token.length,2);if(date==null||date<1||date>31)return null;i_val+=date.length}else if(token=="hh"||token=="h"){hh=this.getInt(val,i_val,token.length,
2);if(hh==null||hh<1||hh>12)return null;i_val+=hh.length}else if(token=="HH"||token=="H"){hh=this.getInt(val,i_val,token.length,2);if(hh==null||hh<0||hh>23)return null;i_val+=hh.length}else if(token=="KK"||token=="K"){hh=this.getInt(val,i_val,token.length,2);if(hh==null||hh<0||hh>11)return null;i_val+=hh.length;hh++}else if(token=="kk"||token=="k"){hh=this.getInt(val,i_val,token.length,2);if(hh==null||hh<1||hh>24)return null;i_val+=hh.length;hh--}else if(token=="mm"||token=="m"){mm=this.getInt(val,
i_val,token.length,2);if(mm==null||mm<0||mm>59)return null;i_val+=mm.length}else if(token=="ss"||token=="s"){ss=this.getInt(val,i_val,token.length,2);if(ss==null||ss<0||ss>59)return null;i_val+=ss.length}else if(token=="a"){if(val.substring(i_val,i_val+2).toLowerCase()=="am")ampm="AM";else if(val.substring(i_val,i_val+2).toLowerCase()=="pm")ampm="PM";else return null;i_val+=2}else if(val.substring(i_val,i_val+token.length)!=token)return null;else i_val+=token.length}if(i_val!=val.length)return null;
if(month==2)if(year%4==0&&year%100!=0||year%400==0){if(date>29)return null}else if(date>28)return null;if(month==4||month==6||month==9||month==11)if(date>30)return null;if(hh<12&&ampm=="PM")hh=hh-0+12;else if(hh>11&&ampm=="AM")hh-=12;return new Date(year,month-1,date,hh,mm,ss)};Date.isValid=function(val,format){return Date.parseString(val,format)!=null};Date.prototype.isBefore=function(date2){if(date2==null)return false;return this.getTime()<date2.getTime()};
Date.prototype.isAfter=function(date2){if(date2==null)return false;return this.getTime()>date2.getTime()};Date.prototype.equals=function(date2){if(date2==null)return false;return this.getTime()==date2.getTime()};Date.prototype.equalsIgnoreTime=function(date2){if(date2==null)return false;var d1=(new Date(this.getTime())).clearTime();var d2=(new Date(date2.getTime())).clearTime();return d1.getTime()==d2.getTime()};
Date.prototype.format=function(format){format=format+"";var result="";var i_format=0;var c="";var token="";var y=this.getYear()+"";var M=this.getMonth()+1;var d=this.getDate();var E=this.getDay();var H=this.getHours();var m=this.getMinutes();var s=this.getSeconds();var yyyy,yy,MMM,MM,dd,hh,h,mm,ss,ampm,HH,H,KK,K,kk,k;var value=new Object;if(y.length<4)y=""+(+y+1900);value["y"]=""+y;value["yyyy"]=y;value["yy"]=y.substring(2,4);value["M"]=M;value["MM"]=Date.LZ(M);value["MMM"]=Date.monthNames[M-1];value["NNN"]=
Date.monthAbbreviations[M-1];value["d"]=d;value["dd"]=Date.LZ(d);value["E"]=Date.dayAbbreviations[E];value["EE"]=Date.dayNames[E];value["H"]=H;value["HH"]=Date.LZ(H);if(H==0)value["h"]=12;else if(H>12)value["h"]=H-12;else value["h"]=H;value["hh"]=Date.LZ(value["h"]);value["K"]=value["h"]-1;value["k"]=value["H"]+1;value["KK"]=Date.LZ(value["K"]);value["kk"]=Date.LZ(value["k"]);if(H>11)value["a"]="PM";else value["a"]="AM";value["m"]=m;value["mm"]=Date.LZ(m);value["s"]=s;value["ss"]=Date.LZ(s);while(i_format<
format.length){c=format.charAt(i_format);token="";while(format.charAt(i_format)==c&&i_format<format.length)token+=format.charAt(i_format++);if(typeof value[token]!="undefined")result=result+value[token];else result=result+token}return result};Date.prototype.getDayName=function(){return Date.dayNames[this.getDay()]};Date.prototype.getDayAbbreviation=function(){return Date.dayAbbreviations[this.getDay()]};Date.prototype.getMonthName=function(){return Date.monthNames[this.getMonth()]};
Date.prototype.getMonthAbbreviation=function(){return Date.monthAbbreviations[this.getMonth()]};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};
Date.prototype.add=function(interval,number){if(typeof interval=="undefined"||interval==null||typeof number=="undefined"||number==null)return this;number=+number;if(interval=="y")this.setFullYear(this.getFullYear()+number);else if(interval=="M")this.setMonth(this.getMonth()+number);else if(interval=="d")this.setDate(this.getDate()+number);else if(interval=="w"){var step=number>0?1:-1;while(number!=0){this.add("d",step);while(this.getDay()==0||this.getDay()==6)this.add("d",step);number-=step}}else if(interval==
"h")this.setHours(this.getHours()+number);else if(interval=="m")this.setMinutes(this.getMinutes()+number);else if(interval=="s")this.setSeconds(this.getSeconds()+number);return this};function initializeJSPWikiScripts(){TabbedSection.onPageLoad();SearchBox.onPageLoad();Wiki.onPageLoad();Sortable.onPageLoad();ZebraTable.onPageLoad();HighlightWord.onPageLoad();Collapsable.onPageLoad();GraphBar.onPageLoad()}$(window).load(initializeJSPWikiScripts);$(window).load(function(){var hash=location.hash;jumpToHash(hash)});
function jumpToHash(hash){if(!hash||hash=="")return;if(hash.indexOf("#")==0&&hash.length>1)$(hash).parents(".tabbedSection >div").each(function(){TabbedSection.onclick(this.id)});location.hash=hash}
function toggleElement(elementId,imageId,showImageUrl,hideImageUrl){var element=document.getElementById(elementId);var image=document.getElementById(imageId);if(element.style.display=="none"){element.style.display="block";image.src=showImageUrl}else{element.style.display="none";image.src=hideImageUrl}return false}var asciiBack=8;var asciiTab=9;var asciiSHIFT=16;var asciiCTRL=17;var asciiALT=18;var asciiHome=36;var asciiLeftArrow=37;var asciiRightArrow=39;var asciiMS=92;var asciiView=93;
var asciiF1=112;var asciiF2=113;var asciiF3=114;var asciiF4=115;var asciiF5=116;var asciiF6=117;var asciiF7=118;var asciiF8=119;var asciiF9=120;var asciiF10=121;var asciiF11=122;var asciiF12=123;function KeyInfo(){this.character=null;this.keyCode=null;this.altPressed=false;this.shiftPressed=false;this.ctrlPressed=false}
function getKeyPressed(evt){var oEvent=window.event?window.event:evt;var nKeyCode=oEvent.keyCode?oEvent.keyCode:oEvent.which?oEvent.which:void 0;var bIsFunctionKey=false;if(oEvent.charCode==null||oEvent.charCode==0)bIsFunctionKey=nKeyCode>=asciiF1&&nKeyCode<=asciiF12||nKeyCode==asciiALT||nKeyCode==asciiMS||nKeyCode==asciiView||nKeyCode==asciiHome||nKeyCode==asciiBack;var keyInfo=new KeyInfo;keyInfo.character=String.fromCharCode(nKeyCode).toUpperCase();keyInfo.keyCode=nKeyCode;var oTarget=oEvent.target?
oEvent.target:oEvent.srcElement;var sTag=oTarget.tagName.toLowerCase();var sTagType=oTarget.getAttribute("type");keyInfo.altPressed=oEvent.altKey?oEvent.altKey:oEvent.modifiers&1>0;keyInfo.shiftPressed=oEvent.shiftKey?oEvent.shiftKey:oEvent.modifiers&4>0;keyInfo.ctrlPressed=oEvent.ctrlKey?oEvent.ctrlKey:oEvent.modifiers&2>0;return keyInfo}
function unloadBtnPressed(evt){var keyInfo=getKeyPressed(evt);if(keyInfo.ctrlPressed&&keyInfo.character=="R")return true;else if(keyInfo.altPressed&&(keyInfo.keyCode==asciiLeftArrow||keyInfo.keyCode==asciiRightArrow))return true;else if(keyInfo.keyCode==asciiF5)return true;return false}function tabBtnPressed(evt){var keyInfo=getKeyPressed(evt);return keyInfo.keyCode==9&&!keyInfo.shiftPressed}function enterBtnPressed(evt){var keyInfo=getKeyPressed(evt);return keyInfo.keyCode==13}
function setSubscriptionState(subscriptionStateIconId,entityTypeId,entityId,subscribed,modifiable,setNotificationAjaxRequestUrl,entitySubscribedClass,entityNotSubscribedClass,entitySubscribedNonEditableClass,entityNotSubscribedNonEditableClass){var subscriptionStateIcon=new YAHOO.util.Element(subscriptionStateIconId);var newOnClickFunction=null;if(modifiable){var subscribeText=i18n.message("subscription.subscribe.label");var unsubscribeText=i18n.message("subscription.unsubscribe.label");subscriptionStateIcon.set("title",
subscribed?unsubscribeText:subscribeText);newOnClickFunction=function(){var callback={success:function(o){setSubscriptionState(subscriptionStateIconId,entityTypeId,entityId,!subscribed,modifiable,setNotificationAjaxRequestUrl,entitySubscribedClass,entityNotSubscribedClass,entitySubscribedNonEditableClass,entityNotSubscribedNonEditableClass)},failure:function(o){AjaxErrorReport.reportAjaxFailure(o,"Failed to subscribe type "+entityTypeId+", ID: "+entityId+", because:")}};YAHOO.util.Connect.asyncRequest("POST",
setNotificationAjaxRequestUrl,callback,"entityTypeId="+entityTypeId+"&entityId="+entityId+"&subscribed="+!subscribed);return false}}else{subscriptionStateIcon.set("title",subscribed?i18n.message("subscription.subscribed.cant.cancel.title"):i18n.message("subscription.not.subscribed.cant.subscribe.title"));newOnClickFunction=function(){return false}}if(newOnClickFunction!=null){YAHOO.util.Event.removeListener(subscriptionStateIconId,"click");YAHOO.util.Event.addListener(subscriptionStateIconId,"click",
newOnClickFunction)}var newclazz;var classes=[entitySubscribedClass,entityNotSubscribedClass,entitySubscribedNonEditableClass,entityNotSubscribedNonEditableClass];for(var i=0;i<classes.length;i++)subscriptionStateIcon.removeClass(classes[i]);if(modifiable)newclazz=subscribed?entitySubscribedClass:entityNotSubscribedClass;else newclazz=subscribed?entitySubscribedNonEditableClass:entityNotSubscribedNonEditableClass;subscriptionStateIcon.addClass(newclazz)}
function setSubscriptionStateWithDefaults(subscriptionStateIconId,entityTypeId,entityId,subscribed,modifiable){var setNotificationAjaxRequestUrl=contextPath+"/ajax/setNotification.spr";var entitySubscribedClass="img_entity_subscribed";var entityNotSubscribedClass="img_entity_notsubscribed";var entitySubscribedNonEditableClass="img_entity_subscribednoteditable";var entityNotSubscribedNonEditableClass="img_entity_notsubscribednoteditable";setSubscriptionState(subscriptionStateIconId,entityTypeId,entityId,
subscribed,modifiable,setNotificationAjaxRequestUrl,entitySubscribedClass,entityNotSubscribedClass,entitySubscribedNonEditableClass,entityNotSubscribedNonEditableClass)}function isDefined(o){var varToStr=eval("' "+o+"'");if(varToStr==" undefined")return false;else return true}String.prototype.replaceAll=function(s1,s2){return this.split(s1).join(s2)};function trim(s){return s.replace(/^\s*/,"").replace(/\s*$/,"")}
function showModalDialog(style,message,buttons,width,dialogName){if(!width)width="30";var args={width:width+"em"};showModalDialogWithArgs(style,message,buttons,dialogName,true,args)}
function showModalDialogWithArgs(style,message,buttons,dialogName,show,args){if(!dialogName)dialogName="cbModalDialog";var defaultArgs={fixedcenter:true,modal:true,visible:false,draggable:false,close:false,enterClicksDefaultButton:true};var mergedArgs=$.extend({},defaultArgs,args);var dlg=new YAHOO.widget.SimpleDialog(dialogName,mergedArgs);var body="<span class='"+style+"' ";if(buttons==null)body+=" style='margin-bottom:5px;'";body+=">"+message+"</span>";dlg.setBody(body);if(mergedArgs.header)dlg.setHeader(mergedArgs.header);
dlg.cfg.queueProperty("buttons",buttons);dlg.render(document.body);dlg.resultValue=false;if(show)dlg.show();var defaultButton=dlg.defaultHtmlButton;if(defaultButton&&mergedArgs.enterClicksDefaultButton){var $defaultButton=$(defaultButton).find("button");$(dlg.element).keypress(function(e){if(e.keyCode==13){$defaultButton.click();return false}return true})}var el=dlg.element;$(el).addClass("cbModalDialog");dlg.hideEvent.subscribe(function(e){dlg.setBody("")});return dlg}
function showFancyConfirmDialogWithCallbacks(msg,handleYes,handleCancel){var handleYesWrapper=function(){try{if(handleYes)handleYes.call(this)}finally{this.hide()}};var handleCancelWrapper=function(){try{if(handleCancel)handleCancel.call(this)}finally{this.hide()}};var buttonYesText=i18n.message("button.yes");var buttonCancelText=i18n.message("button.cancel");var myButtons=[{text:buttonYesText,handler:handleYesWrapper},{text:buttonCancelText,handler:handleCancelWrapper,isDefault:true}];showModalDialog("warning",
msg,myButtons)}function showFancyConfirmDialog(button,msg){if(button.confirmed)return true;var handleYes=function(){button.confirmed=true;button.click()};var handleCancel=function(){button.confirmed=false};showFancyConfirmDialogWithCallbacks(msg,handleYes,handleCancel);return false}
function deleteArtifactApprovalConfirm(approvalName,approvalId,deleteApprovalUrl){var handleYes=function(){document.location=deleteApprovalUrl;this.hide()};var handleNo=function(){this.hide()};var showArtifacts=function(){this.hide();var location=contextPath+"/listArtifactsInApproval.spr?approvalworkflow_id="+approvalId+"&onlyActive=true";document.location=location};var myButtons=[{text:i18n.message("button.yes"),handler:handleYes},{text:i18n.message("button.cancel"),handler:handleNo,isDefault:true},
{text:i18n.message("artifact.approval.workflow.delete.show.artifacts"),handler:showArtifacts}];var msg=i18n.message("artifact.approval.workflow.delete.confirm",approvalName);showModalDialog("warning",msg,myButtons,50)}function deleteArtifactApprovalStep(approvalStepName){var answer=confirm(i18n.message("artifact.approval.workflow.step.delete.confirm",approvalStepName));return answer}function submitOnEnter(textField,evt){if(enterBtnPressed(evt)){textField.form.submit();return false}return true}
var VersionsRenderer={expandOrCollapseVersion:function(e){var $expander=$(e.target);VersionsRenderer._expandOrCollapseVersion($expander)},expandVersion:function(versionBlock){var $expander=$(versionBlock).find(".expander").first();VersionsRenderer._expandOrCollapseVersion($expander,true)},_expandOrCollapseVersion:function($expander,expand){var expanding=!$expander.hasClass("expanded");if(expand!=null&&expanding!=expand)return;var $block=$expander.parents("div.version");$block.show();var versionId=
$block.attr("id");if(expanding){$block.find(".loading").show();$block.find(".filterMenu").show();var url=$expander.attr("longdesc");$expander.addClass("expanded");$.ajax({url:url,dataType:"json",success:function(data){var issueListHtml=VersionsRenderer.renderVersionsJSONToHTML(data.trackerItems);$block.find(".issuelist").remove();$block.find(".versionIssues").append(issueListHtml);$block.find(".loading").hide();var filter=versionsFilter.prototype.findFilter("issueFilter_"+versionId);if(filter!=null)filter.applyFilter()},
error:function(xhr,textStatus,errorThrown){$block.find(".loading").hide();alert("Error: "+textStatus+" - "+errorThrown)}})}else{$block.find(".issuelist").remove();$expander.removeClass("expanded");$block.find(".filterMenu").hide()}},renderVersionsJSONToHTML:function(jsonTrackerItems,noIssuesMessageCode){var issueListHtml=new Array;if(jsonTrackerItems.length>0){issueListHtml.push("<table class='issuelist'>");for(var i=0;i<jsonTrackerItems.length;i++){var trackerItem=jsonTrackerItems[i];var cssClasses=
i%2!=0?"even":"odd";cssClasses+=" "+(trackerItem.resolvedOrClosed?"closed":"open");cssClasses+=" "+(trackerItem.overdue?"overdue":"");cssClasses+=" "+(trackerItem.overtime?" overtime":"");if(i==jsonTrackerItems.length-1)cssClasses+=" last-child";issueListHtml.push("<tr class='"+cssClasses+"' id='"+trackerItem.id+"'>");issueListHtml.push("<td class='subtext priority'>"+trackerItem.priority+"</td>");issueListHtml.push("<td class='subtext issueKey'>"+trackerItem.keyAndId+"</td>");issueListHtml.push("<td class='issueIcon'><img style='background-color:"+
trackerItem.iconBgColor+"' src='"+trackerItem.iconUrl+"'></td>");issueListHtml.push("<td class='issueName'><a href='"+trackerItem.url+"'>"+trackerItem.name+"</a></td>");issueListHtml.push("<td class='subtext'>"+trackerItem.status+"</td>");issueListHtml.push("<td class='subtext'>"+trackerItem.assignedTo.join(", ")+"</td>");issueListHtml.push("<td class='subtext' style='width:20%'>"+trackerItem.project+" &rarr; "+trackerItem.tracker+"</td>");issueListHtml.push("</tr>")}issueListHtml.push("</table>")}else{if(noIssuesMessageCode==
null)noIssuesMessageCode="cmdb.version.issues.no.issues";issueListHtml.push("<div class='issuelist'></div>")}return issueListHtml.join("")}};function showHideReleasedVersions(){if($("#showReleased").attr("checked"))$("div.version.released").show();else $("div.version.released").hide()}
function applyHintInputBox(selector,hintText){var el=$(selector);var applyHint=function(element){if($(element).val()==""||$(element).val()==hintText)$(element).val(hintText).addClass("inputboxWithHint")};var removeHint=function(element,showalert){if($(element).val()==hintText)$(element).val("").removeClass("inputboxWithHint")};el.bind("focus",function(e){removeHint(this)});el.bind("blur",function(e){applyHint(this)});applyHint(el);var parentForm=el.parents("form:first");parentForm.submit(function(e){removeHint(el)})}
var inlinePopup={_dragDialogWithProxy:function(panel){var Dom=YAHOO.util.Dom;var dd=new YAHOO.util.DDProxy(panel.element);dd.setHandleElId(panel.header);dd.on("startDragEvent",function(){Dom.setStyle(this.getDragEl(),"border-width","2px");Dom.setStyle(this.getDragEl(),"z-index","99999");dd.resetConstraints();var panelPosition=Dom.getXY(panel.element);console.log("startDragEvent, setting constraints:"+panelPosition[0]+","+panelPosition[1]);var dragStep=5;dd.setXConstraint(panelPosition[0],99999,dragStep);
dd.setYConstraint(panelPosition[1],99999,dragStep)});dd.on("endDragEvent",function(){panel.show()})},_calculateDimensions:function(iframe,args){var geometry=args.geometry;if(geometry!=null){var geometryRelativeTo=args.geometryRelativeTo||window;var dimensions=calculateWindowGeometry(geometry,geometryRelativeTo);return dimensions}var height=args.height;var width=args.width;if(height==null)try{var iframeBody=$(iframe).contents().find("body");var autoHeight=iframeBody.height();if(autoHeight){autoHeight+=
args.padding==null?25:args.padding;if(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<7)autoHeight+=args.padding==null?15:args.padding-10;var maxHeight=$(window).height()-100;if(autoHeight>maxHeight)autoHeight=maxHeight;height=autoHeight}else height=calculateWindowGeometry(null).height}catch(ex){}if(!width)width=height;return{width:width,height:height}},idgen:0,show:function(url,args){var busyDialog=null;try{busyDialog=ajaxBusyIndicator.showBusysign(document.body,i18n.message("ajax.loading"),false,{fixedcenter:true,
context:null,modal:true})}catch(ignored){}var html="<iframe id='inlinedPopupIframe' src='"+url+"'></iframe>";var defaultArgs={width:"800px",close:true,canSwitchOffModal:true,cssClass:""};var mergedArgs=$.extend({},defaultArgs,args);var id=inlinePopup.idgen++;var dialogId="inlinedPopup"+id;var inlinedPopupDialog=showModalDialogWithArgs("inlinedPopup",html,null,dialogId,false,mergedArgs);$("#inlinedPopupIframe").load(function(){var hideBusyDialog=function(){if(busyDialog)try{busyDialog.destroy()}catch(ingored){}};
var $iframeBody=$(this).contents().find("body");$iframeBody.addClass("insideInlinedPopup");if(!this.dialogVisible){var dimensions=inlinePopup._calculateDimensions(this,mergedArgs);if(dimensions.width!=null)inlinedPopupDialog.cfg.setProperty("width",dimensions.width+"px");if(dimensions.height!=null)inlinedPopupDialog.cfg.setProperty("height",dimensions.height+"px");var el=inlinedPopupDialog.element;$(el).addClass("yui-skin-sam "+mergedArgs.cssClass);hideBusyDialog();inlinedPopupDialog.show();inlinedPopupDialog.element.myDialog=
inlinedPopupDialog;this.dialogVisible=true}else hideBusyDialog();inlinePopup._processMetaTags(inlinedPopupDialog);try{this.contentWindow.popupShowHandler()}catch(e){}});return inlinedPopupDialog},_processMetaTags:function(inlinedPopupDialog){var iframe=document.getElementById("inlinedPopupIframe");inlinedPopupDialog.setHeader("");$(inlinedPopupDialog.header).remove();$(iframe).contents().find("meta").each(function(){var closeInlinePopup=false;var targetUrl=null;if(this.name=="decorator"&&this.content==
"main"){closeInlinePopup=true;console.log("showPopupInline: closing because a non-popup page is loaded!");try{targetUrl=$(iframe).contents().get(0).location.href}catch(ex){console.log("Could not determine url of inlinedPopup's iframe, just reloading page. Exception:"+ex)}}else if(this.name=="closeInlinePopup"){console.log("showPopupInline: closing because closeInlinePopup meta tag found with value='"+this.content+"'");closeInlinePopup=true;targetUrl=this.content}else if(this.name=="pageTitle"){var isModal=
inlinedPopupDialog.cfg.getProperty("modal");if(!isModal)inlinedPopupDialog.setHeader(this.content)}if(closeInlinePopup){inlinePopup.closeAndReload(targetUrl);return false}})},_toggleModal:function(){$(this).toggleClass("container-down-button container-up-button");var dialog=inlinePopup._findDialog();var wasModal=dialog.cfg.getProperty("modal");var oldHeight=$(dialog.element).height();var newcfg={modal:!wasModal,fixedcenter:!wasModal,height:oldHeight+(wasModal?+1:-1)*22+"px"};if(wasModal)dialog.setHeader("");
dialog.cfg.applyConfig(newcfg);dialog.cfg.fireQueue();if(wasModal)inlinePopup._processMetaTags(dialog);if(wasModal)inlinePopup._dragDialogWithProxy(dialog)},_findDialog:function(){try{var container=parent.$(".yui-panel-container")[0];var dialog=container.myDialog;return dialog}catch(ignored){console.log("Can not find parent dialog, probably not inside an inline-popup ? "+ignored)}return null},closeAndReload:function(targetUrl){if(targetUrl!=null&&targetUrl!="")document.location.href=targetUrl;else document.location.reload();
inlinePopup.close()},close:function(message){if(message){var myparent=parent;myparent.setTimeout(function(){myparent.GlobalMessages.showInfoMessage(message)},200)}var dialog=inlinePopup._findDialog();if(dialog)dialog.destroy()}};function showPopupInline(url,args){inlinePopup.show(url,args)}function closePopupInline(){inlinePopup.close()}
function submitWithPost(url){var id="submitWithPostForm";var form="<form style='display:none' action='"+url+"' method='post' id='"+id+"'></form>";$("body").append(form);$("#"+id).submit();return false}
var ajaxBusyIndicator={AJAX_IMAGE_PATH:contextPath+"/js/yui/assets/skins/sam/ajax-loader.gif",getBusysignHTML:function(message,closeable){var html="<div style='padding: 5px;position: relative;'>"+(closeable?"<a href='#' title='"+i18n.message("ajax.wicketAjaxBusyIndicator.enable.access.to.page")+"' onclick='wicketAjaxBusyIndicator.hideBusysign();' style='float:right; text-decoration: none; font-size:70%;'>[X]</a>":"")+"<img style='margin-right: 25px;' src=\""+ajaxBusyIndicator.AJAX_IMAGE_PATH+'"></img>'+
"<span style='position:absolute; top:0; margin-top:auto; bottom:0; margin-bottom:auto; height: 2em;'>"+(message==null?"":message)+"</span>"+"</div>";return html},showBusysign:function(alignTo,message,closeable,args){var html=ajaxBusyIndicator.getBusysignHTML(message,closeable);var defaults={width:"20em",fixedcenter:false,modal:false,visible:true,draggable:false,close:closeable,context:[alignTo,"tl","tl"],renderTo:alignTo,centered:false};var merged=$.extend({},defaults,args);var dlg=new YAHOO.widget.Panel("AjaxBusyIndicator",
merged);dlg.setBody(html);dlg.render(merged.renderTo);dlg.show();if(merged.centered){var panelBody=dlg.body;var panelWidth=$(panelBody).width();var alignToWidth=$(alignTo).width();var offsetX=(alignToWidth-panelWidth)/2;if(offsetX<0)offsetX=0;var offsets=[offsetX,10];dlg.cfg.setProperty("context",[alignTo,"tl","tl",null,offsets])}return dlg}};
function getforkChangesComparedToParent(repositoryId){var msg="<div style='margin-top:10px;' id='containsChangesInfo'>"+"<img src='"+contextPath+"/images/ajax-loading_16.gif'></img>"+i18n.message("scm.repository.action.delete.wait.computing.changes")+"</div>";$.ajax({url:contextPath+"/ajax/proj/scm/repository/hasChanges.spr?repositoryId="+repositoryId,dataType:"json",async:true,success:function(data){var resultMsg="";if(data.length>0){var branchNames=data.join(", ");resultMsg="<b>"+i18n.message("scm.repository.action.delete.fork.contains.unmerged.changes",
branchNames)+"</b>"}else resultMsg=i18n.message("scm.repository.action.delete.no.unmerged.changes");$("#containsChangesInfo").html(resultMsg)}});return msg}function ajaxErrorHandler(event,xhr,s,e){if(xhr.status===401)location.reload(contextPath+"/login.do")}
var floatingOverlay={show:function(elementId,alignTo,config){var $element=$("#"+elementId);$element.addClass("floatingOverlay");if($element.find(".hd").length==0)$element.contents().wrapAll("<div class='hd allInHeader'></div>");var defaultConfig={visible:false,constraintoviewport:true,draggable:true,close:false,zIndex:9999,monitorresize:true,context:[alignTo,"tr","br",["beforeShow","windowResize"]]};var mergedConfig=$.extend(defaultConfig,config);var floatingOverlay=new YAHOO.widget.Panel(elementId,
mergedConfig);floatingOverlay.render();$element.closest(".yui-panel-container").addClass("floatingOverlayContainer");floatingOverlay.show();return floatingOverlay}};
function moveRelativePositionedElementToViewPort(element,padding){var viewportWidth=$(window).width(),viewportHeight=$(window).height(),$el=$(element),elWidth=$el.width(),elHeight=$el.height(),elOffset=$el.offset(),viewportLeft=$(window).scrollLeft(),viewportTop=$(window).scrollTop();if(padding==null)padding=5;var deltaX=elOffset.left+elWidth-viewportLeft-viewportWidth;var changed=false;if(deltaX>0){var previousLeft=$el.css("left");previousLeft=parseInt(previousLeft);$el.css("left",previousLeft-(deltaX+
padding));changed=true}var deltaY=elOffset.top+elHeight-viewportTop-viewportHeight;if(deltaY>0){var previousTop=$el.css("top");previousTop=parseInt(previousTop);$el.css("top",previousTop-(deltaY+padding));changed=true}return changed}
var assignTooltipsToIssueLinks=function(collector,content){var elements=collector.call();var tts=[];if(elements&&elements.length>0)for(var i=0;i<elements.length;i++){var el=elements[i];var randomId=Math.floor(Math.random()*1E4);var tt=new YAHOO.widget.Tooltip("tt"+randomId,{"context":el,"text":"","showDelay":2E3,"autoDismissDelay":5E3,"hideDelay":3E5,"preventoverlap":false,"xyoffset":[-2,-2]});addBeforeShowEventListener(tt,el,content)}};
var assignContentFunction=function(tt,el,content){tt.showEvent.subscribe(function(){var busySignHTML=ajaxBusyIndicator.getBusysignHTML("",false);tt.cfg.setProperty("text",busySignHTML);try{content(tt,el)}catch(e){console.log(e)}})};var addMouseLeaveListener=function(tt,ttId){$("#"+ttId).mouseleave(function(){tt.hide()})};var addBeforeShowEventListener=function(tt,el,content){tt.beforeShowEvent.subscribe(function(event){assignContentFunction(tt,el,content);addMouseLeaveListener(tt,tt.id);$("#"+tt.id).addClass("previewBubble")})};
var issueLinkCollector=function(){var elements=[];var links=$("a");if(links&&links.length>0)for(var i=0;i<links.length;i++){var l=$(links[i]);var href=l.attr("href");if(href){var matching=href.match(".*/issue/.*");if(matching)elements.push(l)}}return elements};
var getTooltipContentForIssueLink=function(tt,el){var href=el.attr("href");var parts=href.split("/");var issueId=parts[3];var j=issueId.indexOf("?");if(j>=0)issueId=issueId.substr(0,j);tt["issueId"]=issueId;$.ajax({"url":contextPath+"/trackers/ajax/getTrackerItemPreview.spr","type":"GET","data":{"issue_id":tt["issueId"]},"success":function(data){tt.cfg.setProperty("text",data);tt["loaded"]=true},"error":function(){tt.hide()}})};
var traceabilityMatrixTooltipContent=function(tt,el){var issueId=$(el).children("input").val();showTooltipContent(tt,issueId)};var coverageBrowserTooltipContent=function(tt,el){var issueId=$(el).attr("id");showTooltipContent(tt,issueId)};var showTooltipContent=function(tt,issueId){tt["issueId"]=issueId;$.ajax({"url":contextPath+"/trackers/ajax/getTrackerItemPreview.spr","type":"GET","data":{"issue_id":tt["issueId"]},"success":function(data){tt.cfg.setProperty("text",data);tt["loaded"]=true},"error":function(){tt.hide()}})};
var alignElementsToViewportEdge={init:function(selector,alignTo){var doAlign=function(){alignElementsToViewportEdge.align(selector,alignTo)};var doAlignTimer=null;var lazyDoAlign=function(){clearTimeout(doAlignTimer);doAlignTimer=setTimeout(doAlign,200)};lazyDoAlign();$(window).resize(lazyDoAlign);$("#"+alignTo).scroll(lazyDoAlign);try{$(".ui-layout-resizer-west").bind("dragstop",lazyDoAlign)}catch(e){}try{$(".ui-layout-resizer-east").bind("dragstop",lazyDoAlign)}catch(e){}},align:function(selector,
alignTo){try{var $alignTo=$("#"+alignTo);var width=$alignTo.offset().left+$alignTo.width();$(selector).each(function(){var $this=$(this);var off=$this.offset();if(off.left>=width-$this.width()||$this.attr("moved")){$this.offset({"left":width-$this.width()-27,"top":off.top});$this.attr("moved",true)}})}catch(e){console.log("alignElementsToViewportEdge.align() error:"+e)}}};
function markPageForCopying(pageId,revision){var postData={"doc_id":pageId};if(revision)postData.revision=revision;$.ajax({url:contextPath+"/ajax/wikis/markPageForCopying.spr",data:postData,type:"POST",cache:false,dataType:"json",success:function(data){},error:function(xhr,textStatus,errorThrown){alert("Error: "+textStatus+" - "+errorThrown)}})}
var layoutScripts={applyLayout:false,isHeaderHiddenCookie:function(){return $.cookie("CB-headerHidden")==="true"},setHeaderHiddenCookie:function(hidden){$.cookie("CB-headerHidden",hidden,{path:"/",expires:90,secure:location.protocol==="https:"})},init:function(applyLayout,buttonTitle,searchHint){layoutScripts.applyLayout=applyLayout;if(applyLayout)layoutScripts.initLayout();applyHintInputBox("#searchFilterOnPopup",searchHint);$("#searchFilterOnPopup").keydown(function(e){e.stopPropagation()});var toggler=
'<a href="#" onclick="layoutScripts.toggleHeader();return false;" title="'+buttonTitle+'" class="toolbarIcon" id="headerToggler"/>';$("#headerTogglerContainer").html(toggler)},updateHeader:function(toggle){var isHeaderHidden=layoutScripts.isHeaderHiddenCookie();if(toggle){isHeaderHidden=!isHeaderHidden;layoutScripts.setHeaderHiddenCookie(isHeaderHidden)}$("body").toggleClass("headerCollapsed",isHeaderHidden);layoutScripts.doLayout()},doLayout:function(){if(layoutScripts.applyLayout)$("body").layout().resizeAll();
if(codebeamer.resizeHandler)codebeamer.resizeHandler.call();if($.isArray(codebeamer.nestedLayouts))$(codebeamer.nestedLayouts).each(function(i,t){t.resizeAll()})},toggleHeader:function(){layoutScripts.updateHeader(true)},initLayout:function(){layoutScripts.initLayoutFor("body")},initLayoutFor:function(selector,settings){var defaultSettings={"applyDefaultStyles":false,"useStateCookie":false,"onresize":"codebeamer.resizeHandler","north":{"showOverflowOnHover":true,"spacing_open":0,"spacing_closed":0},
"south":{"spacing_open":0,"spacing_closed":0},"north__pane_spacing":0,"south__pane_spacing":0,"resizerClass":"hiddenResizer"};if(settings)$.extend(defaultSettings,settings);var layout=$(selector).layout(defaultSettings)}};function disableTabbingToWysiwygTabs(){$(".wysiwyg-tabs .ditch-tab-wrap *").each(function(){var is_element_option=$(this).is("option");if(!is_element_option)$(this).attr("tabIndex","-1")});$(".qq-uploader input[type='file']").attr("tabIndex","-1")}
function flashChanged(elements){var $elements=$(elements);$elements.css("background-color","yellow");$elements.animate({backgroundColor:"#FFF"},700,"linear",function(){$elements.css("background-color","")})}function secondsToHms(d){d=Number(d);var h=Math.floor(d/3600);var m=Math.floor(d%3600/60);var s=Math.floor(d%3600%60);var sep=" ";var res=[];if(h>0)res.push(h+"h");if(m>0)res.push(m+"m");if(s>0)res.push(s+"s");return res.join(sep)}
function serializeFormWithAction(form){var $form=$(form);var formdata=$form.serialize();var formaction=$form.prop("action");if(formaction&&formaction.indexOf("?")!=-1){formaction=formaction.substring(formaction.indexOf("?")+1);if(formaction)formdata=formaction+"&"+formdata}return formdata}
function showOverlayMessage(message,secondsToShow,error){if(!message)message=i18n.message("ajax.changes.successfully.saved");if(!secondsToShow)secondsToShow=3;var $messageBox=$("#overlayMessageBoxContainer");var $overlayMessageBox=$("#overlayMessageBox");if(error){$overlayMessageBox.removeClass("notification");$overlayMessageBox.addClass("error")}else{$overlayMessageBox.removeClass("error");$overlayMessageBox.addClass("notification")}$overlayMessageBox.html(message);$messageBox.css({"width":"auto",
"display":"block","top":"-10000px"});var width=$overlayMessageBox.width();$overlayMessageBox.css("width",width+"px");$messageBox.css({"width":"100%","display":"none","top":"0"});$messageBox.fadeIn("slow");setTimeout(function(){$messageBox.fadeOut("slow",function(){$overlayMessageBox.css("width","auto")})},secondsToShow*1E3)}
function initializeTreeIconColors($tree){$tree.find("li[iconBgColor] > a .jstree-icon").each(function(index){var color=$(this).closest("li").attr("iconBgColor");$(this).css("background-color",color)})}function throttle(method,scope,throttleScope,timeout){if(!timeout)timeout=150;if(!throttleScope)throttleScope=method;clearTimeout(throttleScope._tId);throttleScope._tId=setTimeout(function(){method.call(scope)},timeout)}
function disableDoubleSubmit(form){var $form=$(form);if($form.prop("noDoubleSubmit"))return;$form.prop("noDoubleSubmit",true);$form.submit(function(event){if(event.isDefaultPrevented())return false;var PROP="alreadySubmitted";if($(this).prop(PROP)!=null){alert(i18n.message("submit.please.wait.already.submitted"));return false}$(this).prop(PROP,"true")})}
var supports=function(){var div=document.createElement("div"),vendors="Khtml Ms O Moz Webkit".split(" "),len=vendors.length,cache={};var detect=function(prop){if(prop in div.style)return true;prop=prop.replace(/^[a-z]/,function(val){return val.toUpperCase()});while(len--)if(vendors[len]+prop in div.style)return true;return false};return function(prop){if(cache[prop]!=null)return cache[prop];var startTime=(new Date).getTime();var value=detect(prop);var endTime=(new Date).getTime();console.log("Detected if browser supports "+
prop+", value="+value+", took:"+(endTime-startTime)+"ms");cache[prop]=value;return value}}();$.fn.outerHTML=function(){$t=$(this);if("outerHTML"in $t[0])return $t[0].outerHTML;else return $t.clone().wrap("<p>").parent().html()};function escapeSelector(selector){return selector.replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~]/g,"\\$&")}
function clearSelection(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var sel=window.getSelection();sel.removeAllRanges()}}var codebeamer=codebeamer||{};
(function(){codebeamer.inlineEditor=function(element,config){this.init(element,config)};codebeamer.inlineEditor.prototype={init:function(element,config){var self=this;var defaults={showOKCancelButtons:true};this.config=$.extend(defaults,config);this.element=element;element.inlineEditor=this;$(this.element).addClass("editable");$(this.element).dblclick(function(e){var $editable=$(this).closest(".editable");if($editable.hasClass("edited"))return;self.startEditing()})},startEditing:function(){var $editable=
$(this.element);$editable.addClass("edited");this.oldHtml=$editable.html();this.initEditor()},getEditorHtml:function(){return"Editing...<input type='text'>blahblah</input>"},initEditor:function(){var self=this;var $editable=$(this.element);var editorHtml=this.getEditorHtml();if(this.config.showOKCancelButtons){var okCancelHtml='<div class="okcancel"><button type="button" class="button">'+i18n.message("button.save")+'</button> <a onclick="return false;" href="#">'+i18n.message("button.cancel")+"</a></div>";
editorHtml+=okCancelHtml}$editable.html(editorHtml);if(this.config.showOKCancelButtons){$editable.find(".okcancel button").click(function(e){self.onOKPressed(this)});$editable.find(".okcancel a").click(function(e){self.onCancelPressed(this)})}},onOKPressed:function(){var resultHtml=this.saveChanges();this.stopEditing(resultHtml)},onCancelPressed:function(){this.cancelEditing()},saveChanges:function(){return"alma"},stopEditing:function(newHtmlContent){var $editable=$(this.element);$editable.html(newHtmlContent?
newHtmlContent:this.oldHtml);$editable.removeClass("edited");if(newHtmlContent!=null)flashChanged($editable)},cancelEditing:function(){this.stopEditing(null)}}})();
(function(){codebeamer.wikiSectionEditor=function(element,wikiPageId,sectionTitle,sectionNo){this.element=element;this.wikiPageId=wikiPageId;this.sectionTitle=sectionTitle;this.sectionNo=sectionNo};codebeamer.wikiSectionEditor.prototype={_isSectionStartElement:function(element){var id=$(element).attr("id");if(id&&id.indexOf("section-")==0)return true;return false},_extractSectionLevel:function(element){try{var sectionTagName=$(element).prop("tagName");if(!sectionTagName)return 0;var extractLevel=
new RegExp("\\d+");var level=extractLevel.exec(sectionTagName);return parseInt(level[0])}catch(e){console.log("_extractSectionLevel error:"+e)}return 0},_collectUntilNextSection:function(element,sectionLevel,sectionElements,goDeeper){var self=this;if(this._isSectionStartElement(element)){var level=this._extractSectionLevel(element);if(level<=sectionLevel)return true}if(goDeeper){var stop=false;$(element).find("*").each(function(){stop=self._collectUntilNextSection(this,sectionLevel,sectionElements,
false);if(stop)return false});if(stop)return true}sectionElements.push(element);return false},_findSectionElements:function(element,recursive){var self=this;var sectionElements=new Array;var sectionStartElem;if(this._isSectionStartElement(element))sectionStartElem=element;else sectionStartElem=$(element).closest('[id^="section-"]');if(sectionStartElem==null){console.log("Can not find section start in DOM tree for "+element);return sectionElements}sectionElements.push(sectionStartElem);var sectionLevel=
this._extractSectionLevel(sectionStartElem);var sectionStartElemUnwrapped=$(sectionStartElem).get(0);var foundFirstElement=false;$(sectionStartElem).parent().contents().each(function(){var el=this;if(el==sectionStartElemUnwrapped)foundFirstElement=true;else if(foundFirstElement){if(el.nodeType==3){$(el).wrap("<span></span>");el=$(el).parent()}else if(self._collectUntilNextSection(el,sectionLevel,sectionElements,recursive))return false;sectionElements.push(el)}});return sectionElements},_addWikiSectionEditor:function($sectionHeader,
sectionElements,wikiContent){this.editorContainer=document.createElement("div");$sectionHeader.before(this.editorContainer);var okCancelHtml='<div class="okcancel">'+'<button type="button" class="button">'+i18n.message("button.save")+'</button> <a onclick="return false;" href="#">'+i18n.message("button.cancel")+"</a></div>";okCancelHtml+="<div style='clear:both;'></div>";var editorControls="<div class='okcancel'>"+okCancelHtml+"</div>";var uploadConversationId=this._getUploadConversationId();var editorTemplate=
wysiwygEditorSupport.createNewWysiwygEditorTemplate(wikiContent,uploadConversationId,"[WIKIPAGE:"+this.wikiPageId+"]");editorTemplate.html="<div class='wikiSectionEditor edited'>"+editorTemplate.html+editorControls+"</div>";wysiwygEditorSupport.insertEditorToDom(this.editorContainer,editorTemplate);var editorId=editorTemplate.newEditorId;var self=this;var $okButton=$(this.editorContainer).find(".okcancel button");$okButton.click(function(e){self._saveEditing(editorId,sectionElements)});var $cancelButton=
$(this.editorContainer).find(".okcancel a");$cancelButton.click(function(e){self._cancelEditing(sectionElements)});return editorId},_getUploadConversationId:function(){return"upload-for-section-"+this.wikiPageId+"-"+this.sectionTitle+"-"+this.sectionNo},_buildAjaxRequestData:function(data){var def={"doc_id":this.wikiPageId,"section":this.sectionTitle,"sectionNo":this.sectionNo};var result=$.extend(def,data);return result},_saveEditing:function(editorId,sectionElements){var self=this;var $input=$(this.editorContainer).find("textarea:first");
setContentToWiki(editorId);var modifiedWiki=$input.val();$.ajax({type:"POST",url:contextPath+"/ajax/wiki/updateWikiContent.spr",data:self._buildAjaxRequestData({pageContent:modifiedWiki,uploadConversationId:self._getUploadConversationId()}),dataType:"json",success:function(data){var updatedContent=data.content;var newContentElement=self._finishEditingAndUpdate(sectionElements,updatedContent);if(newContentElement)codebeamer.initializeInlineSectionEditing(self.wikiPageId,true,newContentElement)},error:function(jqXHR,
textStatus,errorThrown){if(jqXHR.status!=401)alert("Technical error: "+errorThrown)}})},_flash:function($el){flashChanged($el)},_getSectionLevelStructure:function(sectionElements){var self=this;var sections=[];$(sectionElements).each(function(){try{var tn=$(this).prop("tagName").toLowerCase();if(tn.indexOf("h")==0)sections.push(tn)}catch(ignored){}var sub=self._getSectionLevelStructure($(this).children());for(var i=0;i<sub.length;i++)sections.push(sub[i])});return sections},_isSectionStructureDifferent:function(oldStructure,
newStructure){console.log("Comparing old section structure and new:"+oldStructure.join(",")+" -> "+newStructure.join(","));var oldElem=null;for(var i=0;i<newStructure.length;i++){var newElem=newStructure[i];if(i<oldStructure.length)oldElem=oldStructure[i];if(newElem!=oldElem)return true}return false},_markSectionStructureDirty:function(dirty){$("#rightPane").toggleClass("sectionStructureDirty",dirty);return codebeamer.wikiSectionEditor.prototype._reloadWikiPageDisplayedIfStructureDirty()},_isSectionStructureDirty:function(){var dirty=
$("#rightPane").hasClass("sectionStructureDirty");return dirty},_reloadWikiPageDisplayedIfStructureDirty:function(){if(codebeamer.wikiSectionEditor.prototype._isSectionStructureDirty())if($(".edited").length>0)console.log("An other section is being edited, can not reload!");else{console.log("Reloading wiki content, because section structure is dirty");reloadWikiPageDisplayed();return true}return false},_finishEditingAndUpdate:function(sectionElements,newContent){var $wrapper=$(document.createElement("div"));
$wrapper.html(newContent);$(this.editorContainer).before($wrapper);this._flash($wrapper);var sectionStructureDirty=false;try{var newSectionStructure=this._getSectionLevelStructure($wrapper);var oldSectionStructure=this._getSectionLevelStructure(sectionElements);sectionStructureDirty=this._isSectionStructureDifferent(oldSectionStructure,newSectionStructure)}catch(ex){console.log("Change detection failed:"+ex);this._markSectionStructureDirty(true)}$(sectionElements).each(function(){$(this).empty().remove()});
this._finished();if(sectionStructureDirty){var pageReloaded=this._markSectionStructureDirty(sectionStructureDirty);if(pageReloaded)return null}return $wrapper},_cancelEditing:function(sectionElements){this._setSectionElementsVisible(sectionElements,true);this._finished()},_finished:function(){$(this.editorContainer).remove();codebeamer.wikiSectionEditor.prototype._reloadWikiPageDisplayedIfStructureDirty()},_setSectionElementsVisible:function(sectionElements,visible){$(sectionElements).toggleClass("hiddenForEditing",
!visible)},editWikiSection:function(){var self=this;if(codebeamer.wikiSectionEditor.prototype._isSectionStructureDirty()){alert(i18n.message("wiki.section.edit.dirty"));return false}try{var sectionElements=this._findSectionElements(this.element,true);var $sectionHeader=$(sectionElements[0]);$.ajax({url:contextPath+"/ajax/wiki/getWikiContent.spr",data:self._buildAjaxRequestData({}),success:function(data){try{var wikiContent=data.content;if(wikiContent==null){self._onWikiSectionNotFound();return}self._addWikiSectionEditor($sectionHeader,
sectionElements,wikiContent);self._setSectionElementsVisible(sectionElements,false)}catch(ex){console.log("error adding wiki editor"+ex)}},error:function(jqXHR,textStatus,errorThrown){if(jqXHR.status==404)self._onWikiSectionNotFound();else if(jqXHR.status!=401)alert("Technical error: "+errorThrown)}})}catch(ex){console.log("error finding section "+ex)}},_onWikiSectionNotFound:function(){alert(i18n.message("wiki.section.edit.not.found"))}}})();
var wikiEditor={editWikiPage:function(wikiPageId,params){var editUrl=contextPath+"/proj/wiki/editWikiPage.spr?doc_id="+wikiPageId;if(params!=null)editUrl+="&"+params;launch_url(editUrl,null)},editWikiSection:function(element,wikiPageId,sectionTitle,sectionNo){try{var editor=new codebeamer.wikiSectionEditor(element,wikiPageId,sectionTitle,sectionNo);editor.editWikiSection()}catch(ex){console.log("error finding section "+ex)}}};
codebeamer.initializeInlineSectionEditing=function(wikiId,editable,rootElement){$("#rightPane").unbind("wikiContentChanged").on("wikiContentChanged",function(){codebeamer.wikiSectionEditor.prototype._markSectionStructureDirty(false)});if(editable){$("body").removeClass("sectionEditingInitialized");setTimeout(function(){var startTime=(new Date).getTime();try{$(".editsection").each(function(i){var t=$(this);var el=$($(this).children()[0]);var text=t.parent().text();text=text.slice(text.indexOf("]")+
1);var editor=new codebeamer.wikiSectionEditor(el,wikiId,text,i);$(editor._findSectionElements($(el)),false)})}catch(e){}var domWalkTime=(new Date).getTime();codebeamer.wrapAllSections(rootElement);var wrapAllSectionTime=(new Date).getTime();codebeamer.initializeInlineSectionEditingEvents();var eventInittime=(new Date).getTime();console.log("initializeInlineSectionEditing: DOM-walk:"+(domWalkTime-startTime)+", wrap-all-section:"+(wrapAllSectionTime-domWalkTime)+", event-init-time:"+(eventInittime-
wrapAllSectionTime));$("body").addClass("sectionEditingInitialized").trigger("sectionEditingInitialized")},300)}};
codebeamer.initializeInlineSectionEditingEvents=function(){var cssSectionEditable="sectionEditable";var $pageContent=$("#pagecontent");if($pageContent.data("eventsBound")==null){$pageContent.data("eventsBound",true);$pageContent.dblclick(function(evt){var $clickedOn=$(evt.target);var closestEditor=$clickedOn.closest(".wikiSectionEditor");if(closestEditor.length>0)return false;var $sectionDoubleClicked=$clickedOn.closest("."+cssSectionEditable);if($sectionDoubleClicked.length>0){var editorInside=$sectionDoubleClicked.find(".wikiSectionEditor");
if(editorInside.length>0){console.log("already editing an inside section, editing is cancelled");return false}var editsectionlink=$sectionDoubleClicked.find(".editsection").first().find(">a");editsectionlink.click();evt.stopPropagation();clearSelection();return false}});var throttleCounter=0;var execCounter=0;var CSS_HIGHLIGHTED=codebeamer.highlightForInplaceEditabilityCSSClass;var mouseOver=function(){execCounter++;var $elementOver=$(this.target);var $sectionOver=$elementOver.closest("."+cssSectionEditable);
var editedChildren=$sectionOver.children(".hiddenForEditing");if(!editedChildren||editedChildren.length==0){$("."+CSS_HIGHLIGHTED).not($sectionOver).each(function(){$(this).removeClass(CSS_HIGHLIGHTED);codebeamer.highlightWithInplaceEditableIcon(this,false)});if(!$sectionOver.hasClass(CSS_HIGHLIGHTED)){$sectionOver.addClass(CSS_HIGHLIGHTED);codebeamer.highlightWithInplaceEditableIcon($sectionOver,true)}}};var mouseLeave=function(){var $elementOver=$(this.target);var $sectionOver=$elementOver.closest("."+
cssSectionEditable);$sectionOver.removeClass(CSS_HIGHLIGHTED);codebeamer.highlightWithInplaceEditableIcon($sectionOver,false)};var enableThrottling=true;var throttleTime=50;$pageContent.mouseover(function(event){throttleCounter++;if(enableThrottling)throttle(mouseOver,event,mouseOver,throttleTime);else mouseOver.call(event)}).mouseleave(function(event){if(enableThrottling)throttle(mouseLeave,event,mouseLeave,throttleTime);else mouseLeave.call(event)})}};
codebeamer.wrapAllSections=function(rootElement){var tagNames=["h5","h4","h3","h2","h1"];var cssSectionEditable="sectionEditable";var wrapper="<div class='"+cssSectionEditable+"' />";rootElement=rootElement||"#pagecontent";for(var i=0;i<tagNames.length;i++){var c=$(rootElement).find(">.wikiContent").children();var open=false;var elems=[];if(c){for(var j=0;j<c.length;j++){var el=c[j];var tn=el.tagName.toLowerCase();if(tn===tagNames[i]){if(open){$(elems).wrapAll(wrapper);elems=[]}else open=true;elems.push(el)}else if(tagNames.indexOf(tn)>=
0&&tagNames.indexOf(tn)>i){open=false;$(elems).wrapAll(wrapper);elems=[]}else if(open)elems.push(el)}$(elems).wrapAll(wrapper)}}};
$.extend(codebeamer,{highlightForInplaceEditabilityCSSClass:"highlighted",highlightWithInplaceEditableIcon:function(element,highlight){var $element=$(element);var $inplaceEditableIcon=$element.children(".inplaceEditableIcon");if(highlight){if($inplaceEditableIcon.length>0)return;$element.prepend("<a class='inplaceEditableIcon' title='Click to start editing' style='display:none;' />");$inplaceEditableIcon=$element.find(".inplaceEditableIcon");$element.addClass("inplaceEditableIconContainer");if(YAHOO.env.ua.ie>
0)$inplaceEditableIcon.show();else $inplaceEditableIcon.fadeIn("slow");$inplaceEditableIcon.click(function(){if($(this).is(":visible")){$(this).hide();var $children=$(element).children().not(".inplaceEditableIcon").filter(":visible");var $clickTo=$children.first();$clickTo.dblclick()}else console.log("not doing anything, already hidden...")})}else{$inplaceEditableIcon.remove();$element.removeClass("inplaceEditableIconContainer")}},addHighlightWithInplaceEditableIcon:function(highlightSelector){if(!highlightSelector)highlightSelector=
"."+codebeamer.highlightForInplaceEditabilityCSSClass;$(highlightSelector).live("mouseenter",function(){codebeamer.highlightWithInplaceEditableIcon(this,true)}).live("mouseleave",function(){codebeamer.highlightWithInplaceEditableIcon(this,false)})}});function initPopupMenu(id,params){var showMenu=new ShowMenu(id,params);showMenu.setupLazyShow.apply(showMenu)}
function initInlineMenu(id,params){var showMenu=new ShowMenu(id,params);var cfg=showMenu.buildMenuConfiguration();var menuId=id+"popup";var oMenu=new YAHOO.widget.Menu(menuId,cfg);oMenu.render();showMenu.setupInlineMenu(id,oMenu);return oMenu}
function initTopMenu(id,params){var oMenu=initInlineMenu(id,params);oMenu.subscribe("beforeShow",function(){var x=0,y=1;var ua=YAHOO.env.ua;if(ua.gecko>0){x=-1;y=0}if($("body").hasClass("IE6or7"))y=-3;var context=oMenu.cfg.getProperty("context");context[4]=[x,y];oMenu.cfg.setProperty("context",context)})}function ShowMenu(id,params,show){if(this==window)return new ShowMenu(id,params,show);this.id=id;this.params=params}
ShowMenu.prototype={debug:false,lazyInitMenu:function(){this.show();YAHOO.util.Event.removeListener(this.id,"mouseover",this.lazyInitMenu)},setupLazyShow:function(){var ME=this;var lazyInitEnabled=true;YAHOO.util.Event.onDOMReady(function(){var elem=document.getElementById(ME.id);if(!elem)YAHOO.log("initPopupMenu() is skipped for id:"+ME.id+", because HTML element not found on page!");else if(lazyInitEnabled)YAHOO.util.Event.addListener(elem,"mouseover",ME.lazyInitMenu,ME,true);else ME.show.apply(ME)})},
hideOtherMenusWhenShown:function(oMenu){var addMenuIsOpenClassToContext=function(oMenu,addOrRemove){var context=oMenu.cfg.getProperty("context")[0];$(context).toggleClass("menuIsOpen",addOrRemove)};oMenu.subscribe("beforeShow",function(){var menuManager=YAHOO.widget.MenuManager;menuManager.hideVisible();$(".menuIsOpen").removeClass("menuIsOpen");addMenuIsOpenClassToContext(oMenu,true)});oMenu.subscribe("hide",function(){addMenuIsOpenClassToContext(oMenu,false)})},_avoidJumpingMenus:function(oMenuBar){oMenuBar.subscribe("mouseover",
function(eventType,args){var event=args[0];var pageX=YAHOO.util.Event.getPageX(event);var pageY=YAHOO.util.Event.getPageY(event);oMenuBar.lastMouseOverCoords=[pageX,pageY]});oMenuBar.subscribe("beforeShow",function(){var now=(new Date).getTime();oMenuBar.mousePositionAtShow=oMenuBar.lastMouseOverCoords;oMenuBar.showedAt=now;if(ShowMenu.prototype.debug)console.log("menu showing:"+oMenuBar.mousePositionAtShow+", time:"+now%1E5)});oMenuBar.subscribe("beforeHide",function(){var now=(new Date).getTime();
try{var positionAtShow=oMenuBar.mousePositionAtShow;var mouseCoordsNow=oMenuBar.lastMouseOverCoords;var timeSinceShow=now-oMenuBar.showedAt;if(positionAtShow&&mouseCoordsNow){var mouseMoveDelta=Math.abs(positionAtShow[0]-mouseCoordsNow[0])+Math.abs(positionAtShow[1]-mouseCoordsNow[1]);if(ShowMenu.prototype.debug)console.log("menu hide is checking mouse move:"+mouseMoveDelta+", timeSinceShow:"+timeSinceShow);if(mouseMoveDelta<20&&timeSinceShow<500){if(ShowMenu.prototype.debug)console.log("stopping hide, because the menu was just showed with the same mouse position:"+
mouseMoveDelta);return false}}}catch(e){console.log("_avoidJumpingMenus.beforeHide error:"+e)}})},show:function(){var cfg=this.buildMenuConfiguration();var oMenuBar=new YAHOO.widget.MenuBar(this.id,cfg);if(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<9&&ShowMenu.IE_FixForLeftAlignedMenus)oMenuBar.subscribe("beforeShow",function(){var menu=this;var xy=menu.cfg.getProperty("xy");xy=[xy[0]-200,xy[1]];menu.cfg.setProperty("xy",xy)});this._avoidJumpingMenus(oMenuBar);oMenuBar.render();oMenuBar.show();$("#"+this.id).trigger("yuiMenuShow")},
buildMenuConfiguration:function(){var hidedelays=3E3;var defaultparams={autosubmenudisplay:true,showdelay:250,hidedelay:hidedelays,submenuhidedelay:hidedelays,constraintoviewport:true,zindex:15,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.15}};if(YAHOO.env.ua.ie>0)defaultparams.effect=null;if(supports("boxShadow"))defaultparams.shadow=false;var configparams=this.params;var params=YAHOO.lang.merge(defaultparams,configparams);if(ShowMenu.prototype.debug)console.log("initPopupMenu() params:"+
YAHOO.lang.dump(params));return params},setupInlineMenu:function(element,oMenu){var hideDelay=oMenu.cfg.getProperty("hidedelay");var scheduleHideMenu=function(){oMenu.scheduledHide=YAHOO.lang.later(hideDelay,oMenu,function(){oMenu.hide()})};var cancelHideMenu=function(){if(oMenu.scheduledHide!=null){oMenu.scheduledHide.cancel();oMenu.scheduledHide=null}};YAHOO.util.Event.addListener(element,"mouseover",function(){oMenu.show();cancelHideMenu()},null,oMenu);YAHOO.util.Event.addListener(element,"mouseout",
scheduleHideMenu,null,oMenu);var menuHTMLElement=oMenu.element;YAHOO.util.Event.addListener(menuHTMLElement,"mouseover",cancelHideMenu,null,oMenu);YAHOO.util.Event.addListener(menuHTMLElement,"mouseout",scheduleHideMenu,null,oMenu);ShowMenu.prototype.hideOtherMenusWhenShown(oMenu)}};
function getToolbarTab(menuHtmlId){var el=$("#"+menuHtmlId).closest(".toolbarTab").get(0);if($("#toolbarMenus").length==0)$(document.body).append("<div id='toolbarMenus'></div>");$("#"+menuHtmlId+"popup").appendTo("#toolbarMenus");return el}String.prototype.repeat=String.prototype.repeat||function(size){var a=new Array(size);for(var i=0;i<size;i++)a[i]=this;return a.join("")};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};
String.prototype.deCamelize=String.prototype.deCamelize||function(){return this.replace(/([a-z])([A-Z])/g,"$1 $2")};var REparseColor=new RegExp("^[0-9a-fA-F]+");String.prototype.parseColor=String.prototype.parseColor||function(){var s=this;if((s.length==6||s.length==3)&&REparseColor.test(s))s="#"+s;return s};String.prototype.escapeXML=String.prototype.escapeXML||function(){var s=this.replace(/&/g,"&amp;");s=s.replace(/</g,"&lt;");s=s.replace(/>/g,"&gt;");return s};
function ExtArray(){this.first=function(){return this[0]};this.last=function(){return this[this.length-1]}}ExtArray.prototype=new Array;if(!ExtArray.prototype.push)ExtArray.push=function(){for(var i=0;i<arguments.length;i++)this[this.length]=arguments[i];return this.length};getNodeText=function(node){if(node.nodeType==3)return node.nodeValue;var s="";for(var n=node.firstChild;n;n=n.nextSibling)s+=this.getNodeText(n);return s};
function getAncestorByTagName(node,tagName){if(!node)return null;if(node.nodeType==1&&node.tagName.toLowerCase()==tagName.toLowerCase())return node;else return getAncestorByTagName(node.parentNode,tagName)}function getAncestorsByClassName(node,clazz,matchFirst){var result=[];var re=new RegExp("(?:^| )"+clazz+"(?: |$)");while(node){if(re.test(node.className)){if(matchFirst)return node;result.push(node)}node=node.parentNode}return result.length==0?null:result}
function getElementsByClassName(node,clazz,matchFirst){var result=[];var re;if(clazz instanceof RegExp)re=clazz;else if(typeof clazz=="string")re=new RegExp("(?:^| )"+clazz+"(?: |$)");else return null;var n=node.all?node.all:node.getElementsByTagName("*");for(var i=0,j=n.length;i<j;i++)if(re.test(n[i].className)){if(matchFirst)return n[i];result.push(n[i])}return result.length==0?null:result}
var jspwikiExt={getElementsByClassName:function(className,matchFirst){return getElementsByClassName(document.documentElement,className,matchFirst)},setCookie:function(name,value,expires,path,domain,secure){var c=name+"="+encodeURIComponent(value);if(!expires){expires=new Date;expires.setFullYear(expires.getFullYear()+1)}if(!path)path=Wiki.getBasePath();if(expires)c+="; expires="+expires.toGMTString();if(path)c+="; path="+path;if(domain)c+="; domain="+domain;if(secure)c+="; secure";document.cookie=
c},getCookie:function(name){var reMatchCookie=new RegExp("(?:; )?"+name+"=([^;]*);?");return reMatchCookie.test(document.cookie)?decodeURIComponent(RegExp.$1):null}};
function findWikiContent(){var pagecontent=$("#pagecontent");var wikiContent=null;try{wikiContent=$(".wikiContent")}catch(ignored){}if(pagecontent.length!=0&&wikiContent)wikiContent=wikiContent.filter(function(){var childOfPageContent=$.contains(pagecontent[0],this);return!childOfPageContent});var all=pagecontent.add(wikiContent);return all}var Wiki=new Object;Wiki.DELIM="¤";Wiki.reImageTypes=new RegExp("(.bmp|.gif|.png|.jpg|.jpeg|.tiff)$","i");Wiki.getBaseURL=function(){return this.BaseURL};
Wiki.getBasePath=function(){return this.BasePath};Wiki.getPageName=function(){return this.PageName};
Wiki.showImage=function(attachment,attDELIM,maxWidth,maxHeight){var attachArr=attachment.value.split(attDELIM);var attachImg=document.getElementById("attachImg");if(!attachImg)return true;if(attachArr.length==1)return;this.maxWidth=maxWidth;this.maxHeight=maxHeight;if(!this.reImageTypes.test(attachArr[0])){attachImg.innerHTML=i18n.message("ajax.jspwiki.no.image.selected");return}this.pic=new Image;this.pic.src=attachArr[1];if(this.pic.complete)return Wiki.showLoadedImage();this.countdown=30;setTimeout("Wiki.showLoadedImage()",
200);attachImg.innerHTML=i18n.message("ajax.jspwiki.loading.image")};
Wiki.showLoadedImage=function(){var attachImg=document.getElementById("attachImg");if(this.pic.complete){var w=parseInt(this.pic.width);var h=parseInt(this.pic.height);if(w>this.maxWidth){h*=this.maxWidth/w;w=this.maxWidth}if(h>this.maxHeight){w*=this.maxHeight/h;h=this.maxHeight}attachImg.innerHTML="<img src='"+this.pic.src+"' width='"+parseInt(w)+"' height='"+parseInt(h)+"' style='margin-top:"+parseInt((this.maxHeight-h)/2)+"px;' ></img>";this.countdown=0;this.pic=null;return}if(this.countdown<=
0){attachImg.innerHTML=i18n.message("ajax.jspwiki.loading.image.failed");return}this.countdown--;setTimeout("Wiki.showLoadedImage()",200);attachImg.innerHTML=i18n.message("ajax.jspwiki.loading.image",this.countdown)};
Wiki.onPageLoad=function(){var c=jspwikiExt.getCookie("JSPWikiUserPrefs");if(c==null)c="";var cArr=c.split(Wiki.DELIM);this.prefSkinName=cArr[0]?cArr[0]:"PlainVanilla/SkinVanilla.css";this.prefDateFormat=cArr[1]?cArr[1]:"";this.prefTimeZone=cArr[2]?cArr[2]:"";this.prefEditAreaHeight=cArr[3]?parseInt(cArr[3]):24;this.prefShowQuickLinks=cArr[4]?cArr[4]=="yes":true;this.prefShowCalendar=cArr[5]?cArr[5]=="yes":false;var u=jspwikiExt.getCookie("JSPWikiUserProfile");var reUsername=new RegExp("username=(\\w+)");
this.username=reUsername.test(u)?RegExp.$1:null};
Wiki.loadBrowserSpecificCSS=function(baseurl,templatePath,pagename){var IE4=document.all&&!document.getElementById?true:false;var NS4=document.layers?true:false;var IE5=document.all&&document.getElementById?true:false;var NS6=document.getElementById&&!document.all?true:false;var IE=IE4||IE5;var NS=NS4||NS6;var Mac=navigator.platform.indexOf("Mac")==-1?false:true;var sheet="";if(NS4)sheet="jspwiki_ns.css";else if(Mac)sheet="jspwiki_mac.css";else if(IE)sheet="jspwiki_ie.css";if(sheet!=""){sheet=baseurl+
"templates/"+templatePath+"/"+sheet;document.write('<link rel="stylesheet" href="'+sheet+'" />')}this.BaseURL=baseurl;this.BasePath=this.BaseURL.slice(this.BaseURL.indexOf(location.host)+location.host.length,-1);this.PageName=pagename};function skinSelect(skin){if(!skin)return;for(var i=0;i<skin.length;i++)if(skin[i].selected)document.cookie="JspWikiSkin="+skin[i].value+"#skin#";location.reload()}var TabbedSection=new Object;TabbedSection.reMatchTabs=new RegExp("(?:^| )tab-(\\S+)");
TabbedSection.onPageLoad=function(){var t=jspwikiExt.getElementsByClassName("tabbedSection");if(!t)return;for(var i=0;i<t.length;i++){if(!t[i].hasChildNodes)continue;if($(t[i]).hasClass("tabs"))continue;t[i].className=t[i].className+" tabs";var tabmenu=[];var active=true;for(var n=t[i].firstChild;n;n=n.nextSibling){if(!this.reMatchTabs.test(n.className))continue;if(n.id==null||n.id=="")n.id=n.className;n.style.display=active?"":"none";tabmenu.push("<span><a class='"+(active?"activetab":"")+"' ");
tabmenu.push("id='menu-"+n.id+"'");tabmenu.push("onclick='TabbedSection.onclick(\""+n.id+"\")' >");tabmenu.push(RegExp.$1.deCamelize()+"</a></span>");active=false}if(tabmenu.length==0)continue;var e=document.createElement("div");e.className="tabmenu";e.innerHTML=tabmenu.join("");t[i].parentNode.insertBefore(e,t[i])}};
TabbedSection.onclick=function(tabId){var target=document.getElementById(tabId);var section=target.parentNode;if(!section)return;for(var n=section.firstChild;n;n=n.nextSibling){if(!n.id)continue;var m=document.getElementById("menu-"+n.id);var edittab=document.getElementById("editcontent");if(m&&m.className=="activetab"){if(n.id==target.id)break;changeTabs=true;if(edittab&&edittab.style.display=="")if(window.onTabChange&&typeof window.onTabChange==="function")onTabChange();n.style.display="none";m.className=
"";target.style.display="";document.getElementById("menu-"+target.id).className="activetab";break}}};var SearchBox=new Object;SearchBox.submit=function(queryValue){for(var i=0;i<this.recentSearches.length;i++)if(this.recentSearches[i]==queryValue)return;if(!this.recentSearches)this.recentSearches=new ExtArray;if(this.recentSearches.length>9)this.recentSearches.pop();this.recentSearches.unshift(queryValue);document.setCookie("JSPWikiSearchBox",this.recentSearches.join(Wiki.DELIM))};
SearchBox.onPageLoad=function(){this.searchForm=document.getElementById("searchForm");if(!this.searchForm)return;this.recentSearchesDIV=document.getElementById("recentSearches");if(!this.recentSearchesDIV)return;this.recentSearches=new ExtArray;var c=jspwikiExt.getCookie("JSPWikiSearchBox");if(c)this.recentSearches=c.split(Wiki.DELIM);var s="";if(this.recentSearches.length==0)return;var div1="<div onclick='SearchBox.doSearch(this)'>";var div2="</div>";var s=i18n.message("ajax.jspwiki.recent.searches")+
":";var t=[];for(i=0;i<this.recentSearches.length;i++);s+=div1+this.recentSearches.join(div2+div1)+div2;s+="<br /><div onclick='SearchBox.clearRecentSearches()'>"+i18n.message("ajax.jspwiki.clear.recent.searches")+"</div>";this.recentSearchesDIV.innerHTML=s};SearchBox.doSearch=function(searchDiv){this.searchForm.query.value=searchDiv.innerHTML;this.searchForm.submit()};
SearchBox.clearRecentSearches=function(){jspwikiExt.setCookie("JSPWikiSearchBox","");this.recentSearches=new ExtArray;this.recentSearchesDIV.innerHTML=""};SearchBox.navigation=function(url,pagename){var s=SearchBox.searchForm.query.value;if(s=="Search")s="";if(s=="")s=pagename;if(s!="")location.href=url.replace("__PAGEHERE__",s);return false};var ZebraTable=new Object;ZebraTable.REclassName=new RegExp("(?:^| )zebra-(\\S+)");
ZebraTable.onPageLoad=function(){var z=jspwikiExt.getElementsByClassName(this.REclassName);if(!z)return;for(var i=0;i<z.length;i++){var rows=z[i].getElementsByTagName("TR");if(!rows)continue;this.REclassName.test(z[i].className);var parms=RegExp.$1.split("-");if(parms[0]=="table"){for(var r=0;r<rows.length;r+=2)rows[r].className+=" odd";continue}if(parms[0])for(var r=2;r<rows.length;r+=2)rows[r].style.backgroundColor=parms[0];if(parms[1])for(var r=1;r<rows.length;r+=2)rows[r].style.backgroundColor=
parms[1]}};var HighlightWord=new Object;HighlightWord.ClassName="searchword";HighlightWord.ClassNameMatch="<span class='"+HighlightWord.ClassName+"' >$1</span>";HighlightWord.ReQuery=new RegExp("(?:\\?|&)(?:q|query)=([^&]*)","g");
HighlightWord.onPageLoad=function(){if(!this.ReQuery.test(document.referrer))return;var words=decodeURIComponent(RegExp.$1);words=words.replace(/\+/g," ");words=words.replace(/\s+-\S+/g,"");words=words.replace(/([\(\[\{\\\^\$\|\)\?\*\.\+])/g,"\\$1");words=words.trim().split(/\s+/).join("|");this.reMatch=new RegExp("("+words+")","gi");var self=this;findWikiContent().each(function(){self.walkDomTree(this)})};
HighlightWord.walkDomTree=function(node){if(!node)return;var nn=null;for(var n=node.firstChild;n;n=nn){nn=n.nextSibling;this.walkDomTree(n)}if(node.nodeType!=3)return;if(node.parentNode.className==this.ClassName)return;var s=node.nodeValue;s=s.escapeXML();if(!this.reMatch.test(s))return;var tmp=document.createElement("span");tmp.innerHTML=s.replace(this.reMatch,this.ClassNameMatch);var f=document.createDocumentFragment();while(tmp.firstChild)f.appendChild(tmp.firstChild);node.parentNode.replaceChild(f,
node)};var Sortable=new Object;Sortable.ClassName="sortable";Sortable.ClassSort="sort";Sortable.ClassSortAscending="sortAscending";Sortable.ClassSortDescending="sortDescending";
Sortable.onPageLoad=function(){Sortable.TitleSort=i18n.message("ajax.jspwiki.sortable.title.sort");Sortable.TitleSortAscending=i18n.message("ajax.jspwiki.sortable.title.sort.ascending.order");Sortable.TitleSortDescending=i18n.message("ajax.jspwiki.sortable.title.sort.descending.order");var self=this;findWikiContent().each(function(){var sortables=getElementsByClassName(this,Sortable.ClassName);if(!sortables)return;for(var i=0;i<sortables.length;i++){var table=sortables[i].getElementsByTagName("table")[0];
if(!table)continue;if(table.rows.length<2)continue;for(var j=0;j<table.rows[0].cells.length;j++){var c=table.rows[0].cells[j];if(c.nodeName!="TH")break;c.onclick=function(){Sortable.sort(this)};c.title=self.TitleSort;c.className+=" "+self.ClassSort}}})};Sortable.REclassName=new RegExp("(?:^| )(sort|sortAscending|sortDescending)(?: |$)");
Sortable.sort=function(thNode){var table=getAncestorByTagName(thNode,"table");if(!table)return;if(table.tBodies[0])table=table.tBodies[0];if(table.rows.length<2)return;var colidx=0;var thNodeClassName=this.ClassSort;for(var i=0;i<table.rows[0].cells.length;i++){var c=table.rows[0].cells[i];if(c.nodeName!="TH")return;if(thNode==c){colidx=i;if(Sortable.REclassName.test(c.className))thNodeClassName=RegExp.$1}else{c.className=c.className.replace(Sortable.REclassName,"")+" "+this.ClassSort;c.title=this.TitleSort}}var rows=
new Array;var num=true;var date=true;var ip4=true;var ip4_regex=/(\d{1,3}\.){3}\d{1,3}/;for(var i=1;i<table.rows.length;i++){rows[i-1]=table.rows[i];var val=getNodeText(rows[i-1].cells[colidx]);if(num)num=!isNaN(parseFloat(val));if(date)date=!isNaN(Date.parse(val));if(ip4)if(!val.match(ip4_regex))ip4=false}var datatype="string";if(num)datatype="num";if(date)datatype="date";if(ip4)datatype="ip4";if(thNodeClassName==this.ClassSort){rows.sort(Sortable.createCompare(colidx,datatype));thNodeClassName=
this.ClassSortAscending;thNode.title=this.TitleSortAscending}else{rows.reverse();if(thNodeClassName==this.ClassSortAscending){thNodeClassName=this.ClassSortDescending;thNode.title=this.TitleSortDescending}else{thNodeClassName=this.ClassSortAscending;thNode.title=this.TitleSortDescending}}thNode.className=thNode.className.replace(Sortable.REclassName,"")+" "+thNodeClassName;var frag=document.createDocumentFragment();for(var i=0;i<rows.length;i++)frag.appendChild(rows[i]);table.appendChild(frag)};
Sortable.convert=function(val,datatype){switch(datatype){case "num":return parseFloat(val);case "date":return new Date(Date.parse(val));case "ip4":var octet=val.split(/\./);return parseInt(octet[0])*1E9+parseInt(octet[1])*1E6+parseInt(octet[2])*1E3+parseInt(octet[3]);default:return val.toString()}};
Sortable.createCompare=function(colidx,datatype){return function(row1,row2){var val1=Sortable.convert(getNodeText(row1.cells[colidx]),datatype);var val2=Sortable.convert(getNodeText(row2.cells[colidx]),datatype);if(val1<val2)return-1;else if(val1>val2)return 1;else return 0}};var Collapsable=new Object;Collapsable.tmpcookie=null;Collapsable.cookies=[];Collapsable.cookieNames=[];Collapsable.ClassName="collapse";Collapsable.ClassNameBox="collapsebox";Collapsable.ClassNameBody="collapsebody";
Collapsable.CollapseID="clps";Collapsable.MarkerOpen="O";Collapsable.MarkerClose="C";Collapsable.CookiePrefix="JSPWikiCollapse";Collapsable.bullet=document.createElement("div");Collapsable.bullet.className="collapseBullet";Collapsable.bullet.innerHTML="&bull;";
Collapsable.onPageLoad=function(){Collapsable.OpenTip=i18n.message("ajax.jspwiki.collapsable.opentip");Collapsable.CloseTip=i18n.message("ajax.jspwiki.collapsable.closetip");this.initialise($("#favorites")[0],this.CookiePrefix+"Favorites");var cookieName=this.CookiePrefix+Wiki.getPageName();var self=this;findWikiContent().each(function(){self.initialise(this,cookieName)})};
Collapsable.initialise=function(domElem,cookieName){if(!domElem)return;this.tmpcookie=jspwikiExt.getCookie(cookieName);this.cookies.push("");this.cookieNames.push(cookieName);var nodes;nodes=getElementsByClassName(domElem,this.ClassName);if(nodes)for(var i=0;i<nodes.length;i++)this.collapseNode(nodes[i]);nodes=getElementsByClassName(domElem,this.ClassNameBox);if(nodes)for(var i=0;i<nodes.length;i++)this.collapseBox(nodes[i])};Collapsable.REboxtitle=new RegExp("h2|h3|h4");
Collapsable.collapseBox=function(node){if($(node).attr("collapsable_initialized"))return;$(node).attr("collapsable_initialized",true);var title=node.firstChild;while(title!=null&&!this.REboxtitle.test(title.nodeName.toLowerCase()))title=title.nextSibling;if(!title)return;if(!title.nextSibling)return;var body=document.createElement("div");body.className=this.ClassNameBody;while(title.nextSibling)body.appendChild(title.nextSibling);node.appendChild(body);var bullet=this.bullet.cloneNode(true);this.initBullet(bullet,
body,this.MarkerOpen);title.appendChild(bullet)};
Collapsable.collapseNode=function(node){if($(node).attr("collapsable_initialized"))return;$(node).attr("collapsable_initialized",true);var items=node.getElementsByTagName("li");for(i=0;i<items.length;i++){var nodeLI=items[i];var nodeXL=nodeLI.getElementsByTagName("ul")[0]||nodeLI.getElementsByTagName("ol")[0];var emptyLI=true;for(var n=nodeLI.firstChild;n;n=n.nextSibling){if(n.nodeType==3&&n.nodeValue.trim()=="")continue;if(n.nodeName=="UL"||n.nodeName=="OL")break;emptyLI=false;break}if(emptyLI)continue;
var bullet=this.bullet.cloneNode(true);if(nodeXL){var defaultState=nodeXL.nodeName=="UL"?this.MarkerOpen:this.MarkerClose;this.initBullet(bullet,nodeXL,defaultState)}nodeLI.insertBefore(bullet,nodeLI.firstChild)}};
Collapsable.initBullet=function(bullet,body,defaultState){var collapseState=this.parseCookie(defaultState);bullet.onclick=this.toggleBullet;bullet.id=this.CollapseID+"."+(this.cookies.length-1)+"."+(this.cookies[this.cookies.length-1].length-1);this.setOpenOrClose(bullet,collapseState==this.MarkerOpen,body)};
Collapsable.setOpenOrClose=function(bullet,setToOpen,body){bullet.className=setToOpen?"collapseOpen":"collapseClose";bullet.title=setToOpen?this.OpenTip:this.CloseTip;body.style.display=setToOpen?"block":"none"};
Collapsable.parseCookie=function(token){var currentcookie=this.cookies[this.cookies.length-1];var cookieToken=token;if(this.tmpcookie&&this.tmpcookie.length>currentcookie.length){cookieToken=this.tmpcookie.charAt(currentcookie.length);if(token==this.MarkerOpen&&cookieToken==this.MarkerClose||token==this.MarkerClose&&cookieToken==this.MarkerOpen)token=cookieToken;if(token!=cookieToken)this.tmpcookie=null}this.cookies[this.cookies.length-1]+=token;return token};
Collapsable.toggleBullet=function(){var ctx=Collapsable;var idARR=this.id.split(".");if(idARR.length!=3)return;var cookie=ctx.cookies[idARR[1]];var body;if(ctx.REboxtitle.test(this.parentNode.nodeName.toLowerCase()))body=this.parentNode.nextSibling;else body=this.parentNode.getElementsByTagName("ul")[0]||this.parentNode.getElementsByTagName("ol")[0];if(!body)return;ctx.setOpenOrClose(this,body.style.display=="none",body);var i=parseInt(idARR[2]);var c=cookie.charAt(i)==ctx.MarkerOpen?ctx.MarkerClose:
ctx.MarkerOpen;cookie=cookie.substring(0,i)+c+cookie.substring(i+1);jspwikiExt.setCookie(ctx.cookieNames[idARR[1]],cookie);ctx.cookies[idARR[1]]=cookie;return false};var GraphBar=new Object;GraphBar.REclassName=new RegExp("(?:^| )graphBars(-\\S+)?");
GraphBar.onPageLoad=function(){var g=jspwikiExt.getElementsByClassName(this.REclassName);if(!g)return;for(var i=0;i<g.length;i++){this.REclassName.test(g[i].className);var parms=RegExp.$1.split("-");var color=parms[1]?"style='background:"+parms[1].parseColor()+";color:"+parms[1].parseColor()+";' ":"";var maxsize=parms[2]?parseInt(parms[2],10):120;var gBars=getElementsByClassName(g[i],"gBar");if(!gBars)continue;var gBarD=[],maxValue=Number.MIN_VALUE;minValue=Number.MAX_VALUE;for(var j=0;j<gBars.length;j++){var k=
parseInt(getNodeText(gBars[j]),10);maxValue=Math.max(maxValue,k);minValue=Math.min(minValue,k);gBarD[j]=k}for(var j=0;j<gBars.length;j++){var s=".".repeat(parseInt(maxsize*(gBarD[j]-minValue)/maxValue)+1);gBars[j].innerHTML=" <span class='graphBar' "+color+">"+s+"</span> "+gBarD[j]}}};
var DateParsing={parseDateToString:function(dateString,format,allowAjax){DateParsing._localizeDate_js();if(format){var withtime=format.indexOf("HH:mm")!=-1;if(!withtime){var dt=DateParsing.parseDateToString(dateString,format+" HH:mm",false);if(dt!=null)return dt}format=DateParsing._fixFormatStringDifferences(format)}var dt=Date.parseString(dateString,format);if(dt!=null)return dt;if(allowAjax==null||allowAjax==true)return DateParsing.ajaxParseDateString(dateString);return null},_fixFormatStringDifferences:function(format){if(format.indexOf("EEEE")!=
-1)format=format.replace("EEEE","EE");else if(format.indexOf("EEE")!=-1)format=format.replace("EEE","E");else format=format.replace("EE","E");if(format.indexOf("MMMM")!=-1)format=format.replace("MMMM","MMM");else if(format.indexOf("MMM")!=-1)format=format.replace("MMM","NNN");return format},formatDateToString:function(date,format,withTime){DateParsing._localizeDate_js();if(format){format=DateParsing._fixFormatStringDifferences(format);if(withTime)format+=" HH:mm"}return date.format(format)},_localizeDate_js:function(){if(DateParsing._localizeDate_js_has_run)return;
DateParsing._localizeDate_js_has_run=true;Date.monthNames=i18n.message("calendar.months_long").split(",");Date.monthAbbreviations=i18n.message("calendar.months_short").split(",");Date.dayNames=i18n.message("calendar.weekdays_long").split(",");Date.dayAbbreviations=i18n.message("calendar.weekdays_medium").split(",")},ajaxParseDateString:function(dateString){if(dateString==null||dateString=="")return null;var result={};$.ajax({url:contextPath+"/ajax/parseDateString.spr",type:"POST",data:{"dateString":dateString},
async:false,success:function(data){if(data){var date=new Date(0);date.setFullYear(data.year,data.month,data.day);date.setHours(data.hour,data.minute,data.sec);result.date=date}}});return result.date}};
var YUICalendarHelper={getCalendarInitValue:function(fieldId,otherFieldId){var field=document.getElementById(fieldId);if(field.value==""&&otherFieldId!=""){var otherfield=document.getElementById(otherFieldId);if(otherfield)return otherfield.value}return field.value},createCalendar:function(field,textFieldId,fieldLabel){if(field.calendar!=null)return field.calendar;if(fieldLabel&&fieldLabel!="")fieldLabel="'"+fieldLabel+"'";var title=i18n.message("calendar.title",fieldLabel);var cfg={title:title,close:true,
START_WEEKDAY:parseInt(i18n.message("calendar.start_weekday")),DATE_FIELD_DELIMITER:"-",MDY_YEAR_POSITION:1,MDY_MONTH_POSITION:2,MDY_DAY_POSITION:3,MD_MONTH_POSITION:1,MD_DAY_POSITION:2,MY_LABEL_YEAR_POSITION:1,MY_LABEL_MONTH_POSITION:2,MY_LABEL_YEAR_SUFFIX:"&nbsp;",MONTHS_SHORT:i18n.message("calendar.months_short").split(","),MONTHS_LONG:i18n.message("calendar.months_long").split(","),WEEKDAYS_1CHAR:i18n.message("calendar.weekdays_1char").split(","),WEEKDAYS_SHORT:i18n.message("calendar.weekdays_short").split(","),
WEEKDAYS_MEDIUM:i18n.message("calendar.weekdays_medium").split(","),WEEKDAYS_LONG:i18n.message("calendar.weekdays_long").split(",")};var calendar=new YAHOO.widget.Calendar("cal"+textFieldId,"calContainer_"+textFieldId,cfg);calendar.render();field.calendar=calendar;return calendar},dateFormat:"yyyy-MM-dd",showYUICalendar:function(textFieldId,otherFieldId,fieldLabel,draggable,moveToViewPort){DateParsing._localizeDate_js();var field=document.getElementById(textFieldId);var calendar=YUICalendarHelper.createCalendar(field,
textFieldId,fieldLabel);var txtValue=YUICalendarHelper.getCalendarInitValue(textFieldId,otherFieldId);var dateTime=DateParsing.parseDateToString(txtValue,YUICalendarHelper.dateFormat);calendar.reset();if(dateTime&&dateTime!=0){var dateValue=new Date(dateTime);calendar.select(dateValue);var pagedate=dateValue.format("MM-yyyy");calendar.cfg.setProperty("pagedate",pagedate)}var containerId="calContainer_"+textFieldId;if(draggable)calendar.renderEvent.subscribe(function(){try{var title=YAHOO.util.Dom.getElementsByClassName("title",
"div",calendar.oDomContainer)[0];var dd=new YAHOO.util.DD(containerId);dd.setHandleElId(title);$(title).css("cursor","move")}catch(ex){alert("exception:"+ex)}});if(moveToViewPort)calendar.showEvent.subscribe(function(){var containerEl=document.getElementById(containerId);moveRelativePositionedElementToViewPort(containerEl,15)});calendar.render();try{if(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8){ie_zindex_fixes.fix(field);YAHOO.util.Event.addListener(calendar.oDomContainer,"mouseover",function(event){ie_zindex_fixes.fix(field)})}}catch(ignored){console.log("ignoring error for:"+
ignored)}calendar.show();var handleSelect=function(type,args,obj){var dates=args[0];var date=dates[0];var year=date[0],month=date[1],day=date[2];var newdate=new Date(year,month-1,day);var hours=dateTime==null?0:dateTime.getHours();var mins=dateTime==null?0:dateTime.getMinutes();var withTime=dateTime!=null&&(hours!=0||mins!=0);if(withTime)newdate.setHours(hours,mins);field.value=DateParsing.formatDateToString(newdate,YUICalendarHelper.dateFormat,withTime);calendar.hide();calendar.selectEvent.unsubscribe(handleSelect)};
calendar.selectEvent.subscribe(handleSelect,calendar,true)}};function ajaxDocumentLock(doc_id,lock){var controller=new AjaxDocumentLockController(doc_id,lock);controller.ajaxCall()}function AjaxDocumentLockController(doc_id,lock){this.doc_id=doc_id;this.lock=lock}
AjaxDocumentLockController.prototype={type:"AjaxDocumentLockController",ajaxTimeout:1E4,ICON_URL_LOCKED:"/images/locked.gif",ICON_URL_NOT_LOCKED:"/images/lockfoldergray.gif",ICON_URL_LOADING:"/images/ajax-loading_16.gif",LOCK_UNLOCK_ID_PART:"LockUnlockAction_",ajaxCall:function(){this.url=contextPath+"/ajax/artifactLock.spr?doc_id="+this.doc_id+"&lock="+this.lock;YAHOO.log("starting Ajax request to "+this.url,this.type);var this_callback={success:this.handleSuccess,failure:this.handleFailure,scope:this,
timeout:this.ajaxTimeout};YAHOO.util.Connect.asyncRequest("GET",this.url,this_callback,null);this.setIcon(this.ICON_URL_LOADING)},handleSuccess:function(o){YAHOO.log("Ajax call success:"+o.responseText,this.type);var Dom=YAHOO.util.Dom;if(o.responseText=="true"){var newiconurl;var newtitle;var oldtitle;var unlockText=i18n.message("button.unlock");var lockText=i18n.message("button.lock");if(this.lock){newiconurl=this.ICON_URL_LOCKED;newtitle=unlockText;oldtitle=lockText}else{newiconurl=this.ICON_URL_NOT_LOCKED;
newtitle=lockText;oldtitle=unlockText}var domElem=this.getDomElem();domElem.title=newtitle;var onclick=domElem.onclick;this.setIcon(newiconurl);var _revertLock=!this.lock;var _doc_id=this.doc_id;var newOnClickFunc=function(event){ajaxDocumentLock(_doc_id,_revertLock);return false};domElem.onclick=newOnClickFunc;var menuElem=document.getElementById(this.LOCK_UNLOCK_ID_PART+this.doc_id);menuElem.title=newtitle;menuElem.onclick=newOnClickFunc;Dom.getElementsByClassName("tableIcon","img",menuElem,function(img){img.src=
contextPath+newiconurl});Dom.batch(menuElem.childNodes,function(el){if(el.nodeType==3&&el.nodeValue==oldtitle)el.nodeValue=newtitle})}else if(o.responseTest=="false"){this.resetIcons();alert("Sorry the requested "+(this.lock?"Lock":"Unlock")+" operation can not be performed!")}else{this.resetIcons();YAHOO.log("invalid response:"+o.responseText,this.type)}},handleFailure:function(o){YAHOO.log("Ajax call Failure:"+o.statusText+"\n"+o.responseText,"AjaxDocumentLockController");alert("Ajax call failure:"+
o.statusText);this.resetIcons()},getDomElem:function(){var domElem=document.getElementById("icon_"+this.LOCK_UNLOCK_ID_PART+this.doc_id);return domElem},setIcon:function(iconurl){var img=this.getDomElem().childNodes[0];img.src=contextPath+iconurl},resetIcons:function(){if(this.lock)this.setIcon(this.ICON_URL_NOT_LOCKED);else this.setIcon(this.ICON_URL_LOCKED)}};if(!Array.indexOf)Array.prototype.indexOf=function(obj){for(var i=0;i<this.length;i++)if(this[i]==obj)return i;return-1};
function AjaxTreeRootNode(id,link,label){this.id=id;this.link=link;this.label=label}function AjaxTreeController(rootNodeData,divId,contextPath,treeType,selectedNodeId,urlParams){this.rootNodeData=rootNodeData;this.divId=divId;this.contextPath=contextPath;this.treeType=treeType;this.selectedNodeId=selectedNodeId;this.urlParams=urlParams}
AjaxTreeController.prototype={type:"AjaxTreeController",treeType:"",urlParams:null,ajaxTimeout:1E5,selectedNodeId:null,pathToSelected:[],sendCloseNodeAjax:true,treeLoadedEvent:null,render:function(){var divId=this.divId;var rootNodeData=this.rootNodeData;var htmlElement=document.getElementById(divId);var tree=new YAHOO.widget.TreeView(htmlElement);this.tree=tree;tree.ajaxTreeController=this;var rootNode=null;if(rootNodeData!=null){this.pathToSelected[this.pathToSelected.length]=rootNodeData.id;rootNode=
this.createTreeNode(tree.getRoot(),rootNodeData)}else this.loadingNode=this.createTreeNode(tree.getRoot(),new AjaxTreeRootNode(null,null,"loading..."));tree.draw();tree.subscribe("expandComplete",function(node){this.fixTreeLayout()},this,true);tree.subscribe("collapse",function(node){YAHOO.log(node.data.id+" to be collapsed");if(!node.data.id||node===rootNode)return false;return true},this,true);tree.subscribe("collapseComplete",function(node){YAHOO.log(node.data.id+" was collapsed");tree.removeChildren(node);
try{this.scheduleAjaxCloseNodeCall(node)}catch(e){alert(e)}this.fixTreeLayout()},this,true);tree.subscribe("labelClick",function(node){var href=node.href;if(href!="#"&&href!=""){YAHOO.log("opening href="+href);document.location.href=href}});this.treeLoadedEvent=new YAHOO.util.CustomEvent("treeLoaded",this);this.requestInitialTree(rootNode)},handleSuccess:function(o){YAHOO.log("Ajax call success:"+o.responseText);try{var result=YAHOO.lang.JSON.parse(o.responseText);var subnodes=result.nodes;if(result.pathToSelected)this.pathToSelected=
result.pathToSelected;var node=o.argument.node;var expandNewNodes=o.argument.expandNewNodes;YAHOO.log("handleSuccess() is adding to node:"+node);this.addNodes(node,subnodes,expandNewNodes)}catch(e){alert("Error parsing Ajax response:"+e)}this.fixTreeLayout();this.completeAjaxCall(o)},addNodes:function(parentNode,subnodes,expandNewNodes){if(parentNode==null)parentNode=this.tree.getRoot();for(var i=0;i<subnodes.length;i++){var treeNodeObj=subnodes[i];var subnode=this.createTreeNode(parentNode,treeNodeObj);
var ME=this;var loadFunction=function(){ME.loadNodeData.apply(ME,arguments)};subnode.setDynamicLoad(loadFunction);if(treeNodeObj.children&&treeNodeObj.children.length>0){this.addNodes(subnode,treeNodeObj.children,expandNewNodes);subnode.dynamicLoadComplete=true}else if(!treeNodeObj.hasChildren){subnode.dynamicLoadComplete=true;subnode.expanded=true}}if(expandNewNodes)parentNode.expand();if(parentNode==this.tree.getRoot())parentNode.refresh()},createNodeData:function(treeNodeObj){var href=treeNodeObj.link;
if(href=="")href="#";YAHOO.log("href:"+href);var nodeId=treeNodeObj.id;var label=treeNodeObj.label;var nodeData={id:nodeId,label:label,href:href,nowrap:true};if(this.pathToSelected&&this.pathToSelected.indexOf(nodeId)!=-1)nodeData.style="tree-pathToSelected";if(this.selectedNodeId&&this.selectedNodeId==nodeId)nodeData.style="tree-selectedNode";if(nodeId&&nodeId.indexOf("/",nodeId.length-1)!==-1)if(nodeData.style)nodeData.style+=" tree-baselineNode-child";else nodeData.style="tree-baselineNode-child";
return nodeData},createTreeNode:function(parentNode,treeNodeObj){var nodeData=this.createNodeData(treeNodeObj);var subnode=new YAHOO.widget.TextNode(nodeData,parentNode,false);return subnode},handleFailure:function(o){AjaxErrorReport.reportAjaxFailure(o);this.completeAjaxCall(o)},completeAjaxCall:function(o){var fnLoadComplete=o.argument.fnLoadComplete;if(fnLoadComplete){YAHOO.log("Callback the function:"+fnLoadComplete);fnLoadComplete.call(this)}YAHOO.log("Ajax tree rendering completed!")},buildAjaxURL:function(path){var url=
this.contextPath+path+"?treeType="+this.treeType;if(this.urlParams!=null){if(this.urlParams.indexOf("&")!=0)url+="&";url+=this.urlParams}return url},requestInitialTree:function(rootNode){var url=this.buildAjaxURL("/ajax/getTreeStructure.spr");var postData="";if(this.selectedNodeId)postData="selectedNodeId="+this.selectedNodeId;YAHOO.log("starting Ajax request to "+url);if(rootNode!=null)YAHOO.util.Dom.addClass(rootNode.labelElId,"tree-root-loading");var this_callback={success:this.handleSuccess,failure:this.handleFailure,
scope:this,timeout:this.ajaxTimeout,argument:{node:rootNode,fnLoadComplete:function(){if(rootNode!=null)YAHOO.util.Dom.removeClass(rootNode.labelElId,"tree-root-loading");if(this.loadingNode!=null){this.tree.removeNode(this.loadingNode);this.loadingNode=null;this.tree.getRoot().refresh()}this.treeLoadedEvent.fire()},expandNewNodes:true}};YAHOO.util.Connect.asyncRequest("POST",url,this_callback,postData)},loadNodeData:function(node,fnLoadComplete){var url=this.buildAjaxURL("/ajax/openNode.spr");var postData=
$.param({"nodeId":node.data.id});YAHOO.log("starting Ajax request to "+url);var this_callback={success:this.handleSuccess,failure:this.handleFailure,scope:this,timeout:this.ajaxTimeout,argument:{node:node,fnLoadComplete:function(){node.loadComplete.apply(node)},expandNewNodes:false}};YAHOO.util.Connect.asyncRequest("POST",url,this_callback,postData)},nodesClosed:new Array,sendNodesClosedTimer:null,scheduleAjaxCloseNodeCall:function(node){if(!this.sendCloseNodeAjax)return;this.nodesClosed.push(node);
if(this.sendNodesClosedTimer!=null)this.sendNodesClosedTimer.cancel();this.sendNodesClosedTimer=YAHOO.lang.later(300,this,this.sendNodesClosed)},sendNodesClosed:function(){var nodesToSend=this.nodesClosed;this.nodesClosed=new Array;if(nodesToSend.length==0)return;var url=this.buildAjaxURL("/ajax/closeNodes.spr");var postData="nodeId=";var SEPARATOR=String.fromCharCode(1);for(var i=0;i<nodesToSend.length;i++){if(i!=0)postData+=SEPARATOR;var node=nodesToSend[i];postData+=encodeURIComponent(node.data.id)}YAHOO.log("Sending closed nodes to server:"+
postData);YAHOO.util.Connect.asyncRequest("POST",url,{},postData);this.sendNodesClosedTimer=null},fixTreeLayout:function(treeId){var treeDiv=$("#"+this.divId);treeDiv.css({"overflow":"hidden"}).width(1E4);var treetop=treeDiv.children()[0];$(treetop).addClass("treeTop");var newwidth=$(treetop).innerWidth();console.log("tree width will be:"+newwidth);if(newwidth==1E4)newwidth=1E3;treeDiv.width(newwidth+5).css({"overflow":"auto"});$("a:.tree-baselineNode-child").parent().parent().addClass("tree-baselineNode")}};
function SelectableAjaxTree(rootNodeData,divId,contextPath,treeType,selectedNodeId,urlParams,multiSelection,inputName){if(this.multiSelection!=null)this.multiSelection=multiSelection;if(this.inputName!=null)this.inputName=inputName;this.constructor.superclass.constructor.call(this,rootNodeData,divId,contextPath,treeType,selectedNodeId,urlParams);this.nodeLinkClickEvent=new YAHOO.util.CustomEvent("nodeLinkClick",this)}
YAHOO.lang.extend(SelectableAjaxTree,AjaxTreeController,{multiSelection:true,inputName:"treeSelectedNode",nodeLinkClickEvent:null,lastClickedTreeNode:null,lastClickedTreeNodeCssClass:"tree-last-clicked-node",showSelectors:true,createSelector:function(nodeData,treeNodeObj){var selectable=treeNodeObj.selectable;var selected=treeNodeObj.selected;if(selectable==null)selectable=true;if(selected==null)selected=false;var selector="";var attributes="";if(selected)attributes+=" checked='y' ";if(!selectable)attributes+=
" disabled='true' ";if(this.multiSelection)selector="<input type='checkbox' name='"+this.inputName+"' value='"+nodeData.id+"' "+attributes+" ></input>";else selector="<input type='radio' name='"+this.inputName+"' value='"+nodeData.id+"' "+attributes+" ></input>";return selector},createLabelHTML:function(nodeData,treeNodeObj){var labelHTML=nodeData.label;if(nodeData.href!=null&&nodeData.href!="#"||nodeData.onclick!=null){labelHTML="<a ";if(nodeData.href!=null)labelHTML+=" href='"+nodeData.href+"'";
if(nodeData.onclick!=null)labelHTML+=' onclick="'+nodeData.onclick+'"';labelHTML+=">"+nodeData.label+"</a>"}return labelHTML},createTreeNode:function(parentNode,treeNodeObj){var nodeData=this.createNodeData(treeNodeObj);if(nodeData.id!=null)nodeData.onclick="SelectableAjaxTree.prototype._nodeLinkClicked(this, '"+this.tree.id+"','"+nodeData.id+"'); return false;";var html="";if(this.showSelectors&&nodeData.id!=null)html+=this.createSelector(nodeData,treeNodeObj);var iconMarkup=this.createIconImage(parentNode,
treeNodeObj,nodeData);if(iconMarkup!=null)html=iconMarkup+html;html=html+this.createLabelHTML(nodeData,treeNodeObj);if(nodeData.style!=null)html='<span class="'+nodeData.style+'">'+html+"</span>";nodeData.html=html;nodeData.hasIcon=true;var subnode=new YAHOO.widget.HTMLNode(nodeData,parentNode,false,nodeData.hasIcon);return subnode},_nodeLinkClicked:function(el,treeId,nodeId){var tree=YAHOO.widget.TreeView.getTree(treeId);if(tree==null)return;var treeNode=tree.getNodeByElement(el);var ajaxTreeController=
tree.ajaxTreeController;if(ajaxTreeController!=null)ajaxTreeController.nodeLinkClickEvent.fire(nodeId,treeNode);this.setLastClickedTreeNode(treeNode)},findTreeNodeByNodeId:function(nodeId){var treeNode=this.tree.getNodeByProperty("id",nodeId);return treeNode},clickOnNodeByNodeId:function(nodeId){var treeNode=this.findTreeNodeByNodeId(nodeId);if(treeNode!=null){this.nodeLinkClickEvent.fire(nodeId,treeNode);this.setLastClickedTreeNode(treeNode)}},setLastClickedTreeNode:function(treeNode){var Dom=YAHOO.util.Dom;
var CSSCLASS=this.lastClickedTreeNodeCssClass;if(this.lastClickedTreeNode!=null){Dom.removeClass(this.lastClickedTreeNode.contentElId,CSSCLASS);this.lastClickedTreeNode=null}else Dom.getElementsByClassName(CSSCLASS,null,null,function(foundEl){Dom.removeClass(foundEl,CSSCLASS)});if(treeNode!=null){this.lastClickedTreeNode=treeNode;Dom.addClass(this.lastClickedTreeNode.contentElId,CSSCLASS)}},createIconImage:function(parentNode,treeNodeObj,nodeData){var id=treeNodeObj.id;var entityId=EntityIdParser.parse(id);
if(entityId==null)return null;var grouptype=entityId.grouptype;var url;if(grouptype==5){var title="";var linkedText=i18n.message("wiki.WikiBrowserTreeTable.label.linked");var childText=i18n.message("wiki.WikiBrowserTreeTable.label.child");if(treeNodeObj.linked||treeNodeObj.children){var icon="wikipage";if(treeNodeObj.linked){icon+="-linked";title+=" ("+linkedText+")"}if(treeNodeObj.children){icon+="-child";title+="("+childText+")"}icon="/images/"+icon+".png"}else icon="/images/entity/wikipage.gif";
url=this.contextPath+icon;return"<img src='"+url+"' title='"+title+"'></img>"}if(grouptype==8){url=this.contextPath+"/images/Attachment.gif";var attachmentText=i18n.message("comment.attachment.label");return"<img src='"+url+"' title='"+attachmentText+"'></img>"}return null}});var EntityIdParser={re:new RegExp("(\\d+)\\-(\\d+)(?:/(\\d+))?"),parse:function(entityId){var m=EntityIdParser.re.exec(entityId);if(m!=null)return{grouptype:m[1],id:m[2],version:m[3]};return null}};
function showAjaxResultIn(containerId,url,postData){var container=document.getElementById(containerId);var showResponse=function(o){var response=o.responseText;if(response=="")response="<div class='information'>"+i18n.message("wiki.WikiExportToPDF.wikipage.card.empty")+"</div>";container.innerHTML=response};var showError=function(o){var response=o.responseText;container.innerHTML="<div class='error'>"+i18n.message("ajax.error",response)+"!</div>"};var this_callback={success:showResponse,failure:showError,
scope:this,timeout:1E4};YAHOO.util.Connect.asyncRequest("POST",url,this_callback,postData);container.innerHTML="<div><img src='"+contextPath+"/images/ajax-loading_16.gif'></img>&nbsp;"+i18n.message("ajax.loading")+"</div>"}var codebeamer=codebeamer||{};codebeamer.trees=codebeamer.trees||{};
(function(){codebeamer.trees.Tree=function(config){this.config=config};codebeamer.trees.Tree.prototype={init:function(){var self=this;$(document).ready(function(){$(function(){var $tree=$("#"+self.config.treeContainerId);var plugins=["json_data","ui","crrm","cookies","search"];if(self.config.editable!==false&&!self.config.dndDisabled)plugins.push("dnd");if(self.config.disableContextMenu!==true)plugins.push("contextmenu");if(self.config.useCheckboxPlugin===true)plugins.push("checkbox");var treeConfig=
{"plugins":plugins,"core":{"animation":0,"strings":{"loading":i18n.message("ajax.loading")}},"crrm":{"move":{"check_move":function(data){if(self.config.checkMove)return self.config.checkMove(data.cr,data.o,data.op,data.rt,data.ot!==data.rt);return true},"always_copy":"multitree"}},"json_data":{"ajax":{"url":self.config.url,"data":self.config.data,success:function(data){if(YAHOO.env.ua.ie>0&&location.protocol==="https:")self.fixHttpsIconUrls(data);return data}},"async":true},"dnd":{"drop_finish":function(data){if(self.config.externalDrop)self.config.externalDrop(data.o,
data.r,data.e)},"drop_check":function(data){$tree.trigger("drop_check",data);if(self.config.externalDropCheck)return self.config.externalDropCheck(data.o,data.r,data.e);return true}},"search":{"case_insensitive":true,"show_only_matches":true}};treeConfig.cookies={};if(self.config.disableCookies)treeConfig.cookies.save_selected=false;if(self.config.cookieNameOpenNodes)if(self.config.cookieNameOpenNodes=="false"){treeConfig.cookies.save_loaded=false;treeConfig.cookies.save_opened=false}if(self.config.useCheckboxPlugin===
true){treeConfig.checkbox={"real_checkboxes":true,"two_state":true};if(self.config.checkboxName)treeConfig.checkbox.real_checkboxes_names=function(n){return[self.config.checkboxName,n.attr("id")]};$("#"+self.config.treeContainerId).bind("check_node.jstree",function(e,data){var $nodes=$(data.rslt.obj).find("li");$.jstree._focused().check_node($nodes)});$("#"+self.config.treeContainerId).bind("uncheck_node.jstree",function(e,data){var $nodes=$(data.rslt.obj).find("li");$.jstree._focused().uncheck_node($nodes)});
$("#"+self.config.treeContainerId).bind("loaded.jstree",function(){var $treePane=$("#"+self.config.treeContainerId);var $root=$tree.find("li").first();$.jstree._reference($treePane).check_node($root)})}var handler=function(node){var cm={};if(node.attr("type")!=="tracker"&&!node.hasClass("jstree-leaf"))cm={"collapseNode":{"label":i18n.message("tree.collapsenode"),"action":function(obj){$.jstree._focused().close_all(obj)}},"expandNodeNode":{"label":i18n.message("tree.expandnode"),"action":function(obj){$.jstree._focused().open_all(obj)},
"separator_after":true}};else if(!node.hasClass("jstree-leaf"))cm={"collapseNode":{"label":i18n.message("tree.collapsenode"),"action":function(obj){$.jstree._focused().close_all(obj)}}};if(!self.config.onlyTopLevel){if(self.config.contextmenu){var i=self.config.contextmenu.items(node);for(var m in i)cm[m]=i[m]}return cm}return{}};treeConfig.contextmenu={"items":handler,"show_at_node":false};if(self.config.disableMultipleSelection)treeConfig.ui={"select_limit":1};if(self.config.treeConfig)treeConfig=
$.extend(true,treeConfig,self.config.treeConfig);var jt=$tree.jstree(treeConfig);self.jstree=jt;var treeColorInitializer=function(){initializeTreeIconColors($tree)};$tree.bind("loaded.jstree",function(event,data){if(codebeamer.resizeHandler)codebeamer.resizeHandler();treeColorInitializer()});$tree.bind("refresh.jstree",function(e,d){treeColorInitializer()});$tree.jstree("set_theme","default");$tree.bind("select_node.jstree",function(event,data){var throttledSelects=function(){var node=data.rslt.obj;
if(self.config.selected)self.config.selected(node,data.inst);if(self.config.clicked)if(data.args!=null&&data.args.length>=2)self.config.clicked(node,data)};throttle(throttledSelects,this,this,200)});$tree.bind("create.jstree",function(event,data){if(self.config.created)self.config.created(event,data)});$tree.bind("move_node.jstree",function(event,data){$.jstree._focused().deselect_all();var node=data.rslt.o;console.log(data.rslt);var newParent=data.rslt.np;var position=data.rslt.p;var targetNode=
data.rslt.r;var isCopy=data.rslt.cy;data.inst.select_node(node);if(self.config.moved)self.config.moved(node,newParent,position,targetNode,isCopy,data.rslt)});$tree.bind("after_close.jstree",function(event,data){var node=data.rslt.obj;data.inst.close_all(node,false)});$(document).bind("drag_start.vakata",function(){$("body").addClass("drag")});$(document).bind("drag_stop.vakata",function(){$("body").removeClass("drag")})})})},inlineEditHandler:function(event){$("#"+this.config.treeContainerId).jstree("rename",
"#"+event.currentTarget.id);event.stopPropagation()},fixHttpsIconUrls:function(data){if(!data)return;for(var i=0;i<data.length;i++){var node=data[i];var icon=node.data&&node.data.icon;if(icon&&icon.indexOf("/")==0)node.data.icon=location.protocol+"//"+location.host+icon;this.fixHttpsIconUrls(node.children)}}};$.extend(codebeamer.trees.Tree,{redoSearch:function($tree){$tree.search($tree.data.search.str)}})})();var codebeamer=codebeamer||{};
codebeamer.initLayout=function(layoutContainerId,leftHeaderDivId,rightHeaderDivId,closerButtonId,layoutCookie){$(document).ready(function(){if(layoutContainerId){codebeamer.resizeHandler=function(){var p=$("#"+layoutContainerId);var mt=null;try{mt=$("div[class=messagetext]")}catch(e){}var $globalMessages=$("#globalMessages");var gmh=0;if($globalMessages.closest(".ui-layout-center").length>0);else gmh=$globalMessages.height();var diff=0;var west=$(".ui-layout-west");if(west&&west.length>0)diff=$(".actionMenuBar").height()+
(mt!=null&&mt.height()!=null&&mt.height()!=0?mt.height()+20:0)+(gmh!=null&&gmh!=0?gmh+20:0);var h=$(window).height()-$(".ui-layout-south").height()-$(".ui-layout-north").height()-diff-15;$(p).height(h);if(codebeamer.nestedLayouts&&codebeamer.nestedLayouts.length>0)codebeamer.nestedLayouts[0].resizeAll()};codebeamer.resizeHandler();$(window).resize(function(){throttle(codebeamer.resizeHandler,this,null,250)});$("#"+layoutContainerId).css({"display":"block"});var layoutConfig={"applyDefaultStyles":false,
"west":{"resizeWhileDragging":true,"spacing_closed":1,"spacing_open":1,"togglerLength_closed":15,"togglerAlign_closed":"top","togglerLength_open":0,"slideTrigger_open":"click","fxName_close":"slide","enableCursorHotkey":false,"minSize":220},"east":{"resizeWhileDragging":true,"enableCursorHotkey":false,"spacing_open":1},"center":{"spacing_open":0},"useStateCookie":true};if(layoutCookie){var cookieConfig={"name":layoutCookie,"path":"/","secure":location.protocol==="https:"};layoutConfig.cookie=cookieConfig}var l=
$("#"+layoutContainerId).layout(layoutConfig);if(leftHeaderDivId&&leftHeaderDivId.length>0)codebeamer.addCloserButton(l,"closer-west",leftHeaderDivId,"west");if(rightHeaderDivId&&rightHeaderDivId.length>0)codebeamer.addCloserButton(l,"closer-east",rightHeaderDivId,"east");if($.isArray(codebeamer.nestedLayouts))codebeamer.nestedLayouts.push(l);else codebeamer.nestedLayouts=[l];$(document).ready(function(){if(leftHeaderDivId&&leftHeaderDivId.length>0)codebeamer.addOpenerButton(l,"west");if(rightHeaderDivId&&
rightHeaderDivId.length>0)codebeamer.addOpenerButton(l,"east")})}})};
codebeamer.addOpenerButton=function(l,side){if(!side)side="west";var west=side==="west";var d=$("<div>").attr("style",(west?"float:left;":"float:right;")+"height: 1px; overflow: visible;").attr("id","opener-container-"+side);var b=$("<input/>").attr("id","opener-"+side).attr("type","image").attr("class","mini-toggler mini-toggler-"+side).attr("value","").attr("title","Hide tree").attr("onClick","$('#opener-"+side+"').hide(); return false;");b.prependTo(d);d.attr("class","floatingOverlayContainer");
if($("#middleHeaderDiv").length!=0){b.attr("class","mini-toggler mini-toggler-up mini-toggler-"+side);if($("#middleHeaderDiv").next("div").size()>0)d.prependTo($("#middleHeaderDiv").next("div"));else d.prependTo($("#middleHeaderDiv"))}else d.prependTo($("#rightPane"));l.addOpenBtn(b,side);if(!l.state[side].isClosed){$("#opener-"+side).hide();$("#opener-container-"+side).attr("class","floatingOverlayContainer")}};
codebeamer.closeSideButton=function(side){$("#opener-container-"+side).hide();$("#opener-"+side).hide();$("#opener-container-"+side).show();$("#opener-"+side).show();$("#opener-container-"+side).attr("style",side==="west"?"left:16px;":"right:36px;");return false};
codebeamer.addCloserButton=function(layout,closerButtonId,containerId,side){if(!side)side="west";var west=side==="west";var b=$("<span></span>").attr("id",closerButtonId).attr("title","Hide tree").attr("onClick","codebeamer.closeSideButton('"+side+"'); return false;").attr("onKeyPress","return false;");if(west)b.appendTo($("#"+containerId));else b.prependTo($("#"+containerId));var $closerButton=$("#"+closerButtonId);if($closerButton&&$closerButton.length>0)layout.addCloseBtn("#"+closerButtonId,side)};
function RatingBase(){}
RatingBase.prototype={id:null,post_to:contextPath+"/ajax/setObjectRating.spr",entityTypeId:null,entityId:null,averageRating:0,ratingTotal:0,numberOfRatings:0,userRating:null,init:function(id,averageRating,ratingTotal,numberOfRatings,userRating,entityTypeId,entityId){this.id=id;this.averageRating=averageRating;this.ratingTotal=ratingTotal;this.numberOfRatings=numberOfRatings;this.userRating=userRating;this.entityTypeId=entityTypeId;this.entityId=entityId;if(entityTypeId==null||entityId==null)throw"Missing required entityTypeId or entityId parameters!";
this.updateStats(false)},submit_rating:function(num){if(!this.submitting){this.userRating=num;this.setSubmitting(true);var post_to=this.post_to;var postdata="rating="+num;postdata+="&entityTypeId="+this.entityTypeId+"&entityId="+this.entityId;var THIS=this;var ajax_callback={success:function(o){try{this.parseAjaxResponse(o.responseText);this.updateWidget()}catch(e){alert("Error processing Ajax response:"+e)}this.setSubmitting(false)},failure:function(o){AjaxErrorReport.reportAjaxFailure(o);this.setSubmitting(false)},
scope:THIS};var c=YAHOO.util.Connect.asyncRequest("POST",post_to+"?xhr=True",ajax_callback,postdata)}},parseAjaxResponse:function(responseText){try{var responseObj=YAHOO.lang.JSON.parse(responseText)}catch(e){alert("Could not parse Ajax response:"+responseText+"\n"+e);return false}this.averageRating=responseObj.averageRating;this.numberOfRatings=responseObj.numberOfRatings;this.ratingTotal=responseObj.ratingTotal;return true},setSubmitting:function(submitting){if(submitting)YAHOO.util.Dom.addClass(this.getWidget(),
"rating-submitting");else{YAHOO.util.Dom.removeClass(this.getWidget(),"rating-submitting");this.updateStats(true)}this.submitting=submitting},updateStats:function(show){var msg=this.getTooltipMessage();if(!this.tooltip){var widget=this.getWidget();if(widget!=null){var newTooltip=new YAHOO.widget.Tooltip("tooltip"+widget.id,{context:widget});this.tooltip=newTooltip}}if(this.tooltip!=null){this.tooltip.cfg.setProperty("text",msg);if(show)this.tooltip.show()}},getTooltipMessage:function(){return null},
getWidget:function(){return null},updateWidget:function(){}};Voting=function(id,ratingTotal,numberOfRatings,userRating,entityTypeId,entityId){if(this==window)return new Voting(id,ratingTotal,numberOfRatings,userRating,entityTypeId,entityId);this.init(id,ratingTotal,numberOfRatings,userRating,entityTypeId,entityId)};
YAHOO.lang.extend(Voting,RatingBase,{init:function(id,ratingTotal,numberOfRatings,userRating,entityTypeId,entityId){Voting.superclass.init.call(this,id,null,ratingTotal,numberOfRatings,userRating,entityTypeId,entityId);var votingwidget=document.getElementById("votingwidget_"+this.id);for(var i=0;i<votingwidget.childNodes.length;i++){var elem=votingwidget.childNodes[i];if(elem.className=="yes-vote")YAHOO.util.Event.addListener(elem,"click",function(){this.submit_rating(+1)},i,this);if(elem.className==
"no-vote")YAHOO.util.Event.addListener(elem,"click",function(){this.submit_rating(-1)},i,this)}},updateWidget:function(){var votingwidget=document.getElementById("votingwidget_"+this.id);var votingtotal=document.getElementById("votingtotal_"+this.id);votingtotal.innerHTML=this.ratingTotal;YAHOO.util.Dom.removeClass(votingwidget,"voted-total-negative");YAHOO.util.Dom.removeClass(votingwidget,"voted-total-positive");if(this.ratingTotal>0)YAHOO.util.Dom.addClass(votingwidget,"voted-total-positive");
if(this.ratingTotal<0)YAHOO.util.Dom.addClass(votingwidget,"voted-total-negative");if(this.userRating>0)YAHOO.util.Dom.replaceClass(votingwidget,"voted-as-negative","voted-as-positive");else YAHOO.util.Dom.replaceClass(votingwidget,"voted-as-positive","voted-as-negative")},getTooltipMessage:function(){if(this.numberOfRatings==0)return i18n.message("vote.tooltip.no.votes.yet");var positivevotes=(this.numberOfRatings+this.ratingTotal)/2;var negativevotes=(this.numberOfRatings-this.ratingTotal)/2;var title=
i18n.message("vote.tooltip.summary",positivevotes,negativevotes,this.numberOfRatings);if(this.userRating!=null){title+="<br/> ";title+=i18n.message("vote.tooltip.yourvote",this.userRating>0?i18n.message("vote.tooltip.yourvote.yes"):i18n.message("vote.tooltip.yourvote.no"))}return title},getWidget:function(){var votingwidget=document.getElementById("votingwidget_"+this.id);return votingwidget}});
Rating=function(id,averageRating,numberOfRatings,userRating,entityTypeId,entityId){if(this==window)return new Rating(id,averageRating,numberOfRatings,userRating,entityTypeId,entityId);this.init(id,averageRating,numberOfRatings,userRating,entityTypeId,entityId)};
YAHOO.lang.extend(Rating,RatingBase,{id:null,enabled:true,init:function(id,averageRating,numberOfRatings,userRating,entityTypeId,entityId){Rating.superclass.init.call(this,id,averageRating,null,numberOfRatings,userRating,entityTypeId,entityId);this.ratingdiv=YAHOO.util.Dom.get("ratingdiv_"+this.id);if(!this.ratingdiv){alert("Rating div not found for id="+this.id);return}this.stardiv=document.createElement("div");this.make_stardiv();this.updateStats(false)},make_stardiv:function(){YAHOO.util.Dom.setStyle(this.stardiv,
"display","none");YAHOO.util.Dom.addClass(this.stardiv,"rating");this.stars=new Array;for(var i=1;i<=5;i++){var star=document.createElement("div");this.stars[i]=star;star.id="star_"+this.id+"_"+i;var a=document.createElement("a");YAHOO.util.Dom.addClass(star,"star");star.appendChild(a);this.stardiv.appendChild(star);if(this.enabled){YAHOO.util.Event.addListener(star,"mouseover",this.hover_star,i,this);YAHOO.util.Event.addListener(star,"mouseout",this.reset_stars,this,true);YAHOO.util.Event.addListener(star,
"click",function(e,num){this.submit_rating(num)},i,this)}}this.ratingdiv.appendChild(this.stardiv);this.reset_stars();YAHOO.util.Dom.setStyle(this.stardiv,"display","block")},hover_star:function(e,which_star){for(var i=1;i<=which_star;i++){var star=this.stars[i];var a=star.firstChild;YAHOO.util.Dom.addClass(star,"hover");YAHOO.util.Dom.setStyle(a,"width","100%")}},reset_stars:function(){var value=this.averageRating;var stars_on=Math.ceil(value);var fraction=value-Math.floor(value);if(fraction==0)last_star_width=
"100%";else last_star_width=fraction*100+"%";for(var i=1;i<=5;i++){var star=this.stars[i];var a=star.firstChild;YAHOO.util.Dom.removeClass(star,"hover");YAHOO.util.Dom.removeClass(star,"on");if(i<=stars_on&&!YAHOO.util.Dom.hasClass(star,"on"))YAHOO.util.Dom.addClass(star,"on");if(i==stars_on)YAHOO.util.Dom.setStyle(a,"width",last_star_width)}},updateWidget:function(){this.reset_stars()},getTooltipMessage:function(){var msg=i18n.message("rating.tooltip.average",this.averageRating,this.numberOfRatings)+
"<br/>";if(this.userRating==null)msg+=i18n.message("rating.tooltip.your.none");else msg+=i18n.message("rating.tooltip.your.rate",this.userRating);return msg},getWidget:function(){return this.stardiv}});
TableReorder=function(tableId,sGroup,config){if(this==window)return new TableReorder(tableId);this.sGroup=sGroup;this.config=config;new YAHOO.util.DDTarget(tableId);var table=document.getElementById(tableId);var idgenerator=0;var rows=YAHOO.util.Dom.get(table).getElementsByTagName("TR");for(var i=0;i<rows.length;i++){var row=rows[i];if(this.isDragTarget(row)){if(row.id==null||row.id=="")row.id=tableId+"_"+idgenerator++;new TableReorderRow(this,row.id,sGroup,config)}}this.onSwapRowEvent=new YAHOO.util.CustomEvent("onSwapRowEvent");
this.onEndDrag=new YAHOO.util.CustomEvent("onEndDrag")};TableReorder.prototype={onSwapRowEvent:null,onEndDrag:null,isDragTarget:function(element){var result=element.tagName.toLowerCase()=="tr"&&element.parentNode.tagName.toLowerCase()!="thead";return result}};
TableReorderRow=function(tableReorder,id,sGroup,config){TableReorderRow.superclass.constructor.call(this,id,sGroup,config);this.tableReorder=tableReorder;this.logger=this.logger||YAHOO;var el=this.getDragEl();YAHOO.util.Dom.setStyle(el,"opacity",0.67);this.goingUp=false;this.lastY=0;YAHOO.util.Dom.addClass(id,"dragRow");var dragHandle=this.findDragHandle();if(dragHandle!=null)this.setHandleElId(dragHandle)};
YAHOO.extend(TableReorderRow,YAHOO.util.DDProxy,{tableReorder:null,startDrag:function(x,y){this.logger.log(this.id+" startDrag");var dragEl=this.getDragEl();var clickEl=this.getEl();YAHOO.util.Dom.addClass(clickEl,"draggingRow");var parentTableAttributes=this.cloneParentTableStyle(clickEl);dragEl.innerHTML="<table "+parentTableAttributes+"><tr>"+clickEl.innerHTML+"</tr></table>";YAHOO.util.Dom.setStyle(dragEl,"color",YAHOO.util.Dom.getStyle(clickEl,"color"));YAHOO.util.Dom.setStyle(dragEl,"backgroundColor",
YAHOO.util.Dom.getStyle(clickEl,"backgroundColor"));YAHOO.util.Dom.setStyle(dragEl,"border","2px solid gray")},cloneParentTableStyle:function(element){var parentTable=element;while((parentTable=parentTable.parentNode)!=null&&parentTable.tagName!="TABLE");if(parentTable==null)return"";return"class='"+parentTable.className+"'"},endDrag:function(e){var srcEl=this.getEl();var proxy=this.getDragEl();YAHOO.util.Dom.setStyle(proxy,"visibility","visible");var a=new YAHOO.util.Motion(proxy,{points:{to:YAHOO.util.Dom.getXY(srcEl)}},
0.2,YAHOO.util.Easing.easeOut);var proxyid=proxy.id;var thisid=this.id;a.onComplete.subscribe(function(){this.logger.log("End of drag animate");YAHOO.util.Dom.setStyle(proxyid,"visibility","hidden");YAHOO.util.Dom.removeClass(thisid,"draggingRow");proxy.innerHTML=""},this,true);a.animate();this.tableReorder.onEndDrag.fire()},onDrag:function(e){var y=YAHOO.util.Event.getPageY(e);this.delta=y-this.lastY;if(y<this.lastY)this.goingUp=true;else if(y>this.lastY)this.goingUp=false;this.lastY=y},onDragOver:function(e,
id){var DDM=YAHOO.util.DragDropMgr;var srcEl=this.getEl();var destEl=YAHOO.util.Dom.get(id);if(TableReorder.prototype.isDragTarget(destEl)){var orig_p=srcEl.parentNode;var p=destEl.parentNode;if(this.goingUp){p.insertBefore(srcEl,destEl);this.tableReorder.onSwapRowEvent.fire(destEl,srcEl)}else{var nextSib=destEl.nextSibling;p.insertBefore(srcEl,nextSib);this.tableReorder.onSwapRowEvent.fire(srcEl,destEl)}DDM.refreshCache()}},findDragHandle:function(element){var elems=YAHOO.util.Dom.getElementsByClassName("dragHandle",
null,element);if(elems.length>0)return elems[0];return null}});
var GlobalMessages={enableAnimation:true,duration:0.5,showErrorMessage:function(msg){return GlobalMessages.showMessage("error",msg)},showWarningMessage:function(msg){return GlobalMessages.showMessage("warning",msg)},showInfoMessage:function(msg){return GlobalMessages.showMessage("information",msg)},findMessageList:function(level){var $messageList=$("#globalMessages div."+level+" >ul");if($messageList==null||$messageList.length<1)throw"GlobalMessages: Can't find global message HTML elements, probably invalid message level:"+level;
return $messageList.get(0)},showMessage:function(level,msg,callback){var globalMessagesDiv=document.getElementById("globalMessages");var messageList=GlobalMessages.findMessageList(level);for(var i=0;i<messageList.childNodes.length;i++){var li=messageList.childNodes[i];if($(li).html()==msg)return}var newMessageLine=document.createElement("li");newMessageLine.innerHTML=msg;var messageListParent=messageList.parentNode;var messageWasInvisible=YAHOO.util.Dom.hasClass(messageListParent,"invisible");var addMessage=
function(){messageList.appendChild(newMessageLine);$(messageListParent).toggleClass("onlyOneMessage",messageList.childNodes.length==1)};if(GlobalMessages.enableAnimation)try{var target;if(messageWasInvisible){target=messageListParent;YAHOO.util.Dom.setStyle(messageListParent,"opacity",0);var anim=new YAHOO.util.Anim(messageListParent,{opacity:{from:0.2,to:1},height:{to:34,units:"px"}},GlobalMessages.duration,YAHOO.util.Easing.easeIn);YAHOO.util.Dom.setStyle(messageListParent,"height",0);anim.onComplete.subscribe(function(){addMessage();
YAHOO.util.Dom.setStyle(messageListParent,"height",null);if(callback)callback(newMessageLine)});anim.animate()}else{$(newMessageLine).css("height","0px");addMessage();target=newMessageLine;YAHOO.util.Dom.setStyle(newMessageLine,"opacity",0);var anim2=new YAHOO.util.Anim(newMessageLine,{opacity:{to:1},height:{from:0,to:12,units:"px"}},GlobalMessages.duration,YAHOO.util.Easing.easeIn);anim2.onComplete.subscribe(function(){YAHOO.util.Dom.setStyle(newMessageLine,"height",null)});anim2.animate()}}catch(e){alert("Error:"+
e)}else addMessage();$(globalMessagesDiv).removeClass("invisible");$(messageListParent).removeClass("invisible");return newMessageLine},hideMessage:function(el){var messageList=el.parentNode;var hideFunc=function(){messageList.removeChild(el);GlobalMessages.compact()};var elementToHide=el;var liChildren=YAHOO.util.Dom.getChildrenBy(messageList,function(el){return el.nodeName=="LI"});if(liChildren.length==1)elementToHide=messageList.parentNode;$(messageList.parentNode).toggleClass("onlyOneMessage",
liChildren.length<=2);GlobalMessages._hideElement(elementToHide,hideFunc)},compact:function(level){var globalMessagesDiv=document.getElementById("globalMessages");if(!level){var allInvisible=true;allInvisible=allInvisible&this.compact("error");allInvisible=allInvisible&this.compact("warning");allInvisible=allInvisible&this.compact("information");if(allInvisible)GlobalMessages._hideElement(globalMessagesDiv);return allInvisible}var messageList=GlobalMessages.findMessageList(level);var messageListParent=
messageList.parentNode;if(YAHOO.util.Dom.hasClass(messageListParent,"invisible"))return true;var liChildren=YAHOO.util.Dom.getChildrenBy(messageList,function(el){return el.nodeName=="LI"});if(liChildren.length==0){GlobalMessages._hideElement(messageListParent);return true}return false},_hideElement:function(el,onComplete){var hideFunc=function(){YAHOO.util.Dom.addClass(el,"invisible");if(onComplete!=null)onComplete.call()};if(GlobalMessages.enableAnimation){var anim=new YAHOO.util.Anim(el,{opacity:{to:0},
height:{to:0,units:"px"}},GlobalMessages.duration,YAHOO.util.Easing.easeIn);anim.onComplete.subscribe(function(){hideFunc();$(el).css({"opacity":"1","height":"auto"})},null,true);anim.animate()}else hideFunc()}};YAHOO.namespace("MultiboxPanel");YAHOO.namespace("MultiboxAutoComplete");
(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,CustomEvent=YAHOO.util.CustomEvent,Element=YAHOO.util.Element;var KEYS=YAHOO.util.KeyListener.KEY;var CLEAR_DIV_CSS_CLASS="yui-multibox-clear";YAHOO.MultiboxPanel=function(markerid){try{this.marker=new Element(document.getElementById(markerid));var multibox=this.marker.get("parentNode");YAHOO.MultiboxPanel.superclass.constructor.call(this,multibox);this.boxAddedEvent=new CustomEvent("boxAdded");this.boxDeletedEvent=new CustomEvent("boxDeleted");
this.selectionChangedEvent=new CustomEvent("selectionChanged");this.movedOutEvent=new CustomEvent("movedOutEvent");this.initWidget()}catch(e){alert(e)}};YAHOO.lang.extend(YAHOO.MultiboxPanel,YAHOO.util.Element,{marker:null,CSS_CLASS_BOX:"box",CSS_CLASS_SELECTED:"focus",boxAddedEvent:null,boxDeletedEvent:null,selectionChangedEvent:null,movedOutEvent:null,destroy:function(){YAHOO.log("MultiboxPanel.destroy() is being called!");this.boxAddedEvent.unsubscribeAll();this.boxDeletedEvent.unsubscribeAll();
this.selectionChangedEvent.unsubscribeAll();this.movedOutEvent.unsubscribeAll();this.removeListener("click",this._handleClicks);this.removeListener("keyup",this._handleKeyboard)},initWidget:function(){if(!this.hasClass("yui-multibox"))this.addClass("yui-multibox");var childNodes=this.get("childNodes");var len=childNodes.length;for(var i=0;i<len;i++){var node=childNodes[i];if(node.nodeType==1&&this.isBox(node))this._setupBox(node)}if(childNodes.length!=0){var lastNode=childNodes[childNodes.length-
1];if(!(lastNode.nodeType==1&&Dom.hasClass(lastNode,CLEAR_DIV_CSS_CLASS))){YAHOO.log("adding clearing div");var clearDiv=new Element(document.createElement("div"));clearDiv.addClass(CLEAR_DIV_CSS_CLASS);this.appendChild(clearDiv)}}this._setupEvents();var element=this.get("element");var $form=$(element).closest("form");$form.submit(function(event){var $autocompleteInput=$(element).find(".yui-ac-input").first();if($.trim($autocompleteInput.val()).length>0){$autocompleteInput.focus().addClass("notEmptyAutocompleteInput");
alert(i18n.message("error.not.empty.multibox.field"));event.preventDefault();return false}})},addBox:function(text,aData){var newbox=this.createBoxElem(text);this._setupBox(newbox);this.insertBefore(newbox,this.marker);this.boxAddedEvent.fire(newbox,aData);return newbox},isBox:function(element){return Dom.hasClass(element,this.CSS_CLASS_BOX)},_setupEvents:function(){this.removeListener("click",this._handleClicks);this.removeListener("keyup",this._handleKeyboard);this.on("click",this._handleClicks,
this,true);this.on("keyup",this._handleKeyboard,this,true)},_handleClicks:function(e){var elTarget=Event.getTarget(e);if(this.isBox(elTarget)){YAHOO.log("Selecting a box:"+elTarget);this.setSelected(elTarget);Event.preventDefault(e);return false}if(Dom.hasClass(elTarget,"deleteButton")){var THIS=this;var box=Dom.getAncestorByClassName(elTarget,this.CSS_CLASS_BOX);if(box){YAHOO.log("Removing:"+box);this.removeBox(box)}return false}},_handleKeyboard:function(e){var elTarget=Event.getTarget(e);if(!this.isBox(elTarget))return;
try{switch(e.keyCode){case KEYS.LEFT:this.selectPrevious();Event.stopEvent(e);return;case KEYS.RIGHT:this.selectNext();Event.stopEvent(e);return;case KEYS.DELETE:case KEYS.BACK_SPACE:this.removeCurrent();Event.stopEvent(e);return;case KEYS.ENTER:Event.stopEvent(e);return}}catch(e){alert("Exception:"+e)}},_setupBox:function(newbox){if(newbox.alreadySetUp)return;newbox.alreadySetup=true;var HREF_VALUE="#?";var newboxElem=new Element(newbox);newboxElem.set("href",HREF_VALUE);newboxElem.addClass(this.CSS_CLASS_BOX);
var closeButton=document.createElement("a");var closeButtonElem=new Element(closeButton);closeButtonElem.addClass("deleteButton");closeButtonElem.set("href",HREF_VALUE);newboxElem.appendChild(closeButton)},createBoxElem:function(text){var newbox=document.createElement("a");newboxElem=new Element(newbox);newboxElem.set("href","#");newbox.innerHTML=text;return newbox},findCurrent:function(){if(!this.hasChildNodes)return null;var elements=this.getElementsByClassName(this.CSS_CLASS_SELECTED);if(elements.length==
0)return null;return elements[0]},removeBox:function(box){if(box){var current=this.findCurrent();if(current===box)this.selectNext();this.removeChild(box);this.boxDeletedEvent.fire(box)}},removeAllBoxes:function(){var boxes=this.getBoxes();for(var i=0;i<boxes.length;i++)this.removeBox(boxes[i])},removeCurrent:function(){this.removeBox(this.findCurrent())},setSelected:function(box){YAHOO.log("Selecting:"+box);var current=this.findCurrent();if(current){(new Element(current)).removeClass(this.CSS_CLASS_SELECTED);
current.blur()}if(box){(new Element(box)).addClass(this.CSS_CLASS_SELECTED);box.focus()}this.selectionChangedEvent.fire([current,box])},getBoxes:function(){var elems=this.getElementsByClassName(this.CSS_CLASS_BOX);return elems},selectFirst:function(){var elems=this.getBoxes();if(elems.length>0)this.setSelected(elems[0])},selectLast:function(){var elems=this.getBoxes();if(elems.length>0)this.setSelected(elems[elems.length-1])},selectNext:function(){var idx=this.getSelectedIndex();if(idx!=null){var success=
this.setSelectedIndex(idx+1);if(!success)this.movedOutEvent.fire(true)}},selectPrevious:function(){var idx=this.getSelectedIndex();if(idx!=null){var success=this.setSelectedIndex(idx-1);if(!success)this.movedOutEvent.fire(false)}},setSelectedIndex:function(idx){var boxes=this.getBoxes();if(idx>=0&&idx<boxes.length){var newselection=boxes[idx];this.setSelected(newselection);return true}this.setSelected(null);return false},getSelectedIndex:function(){var selected=this.findCurrent();if(selected){var boxes=
this.getBoxes();for(var i=0;i<boxes.length;i++)if(selected===boxes[i])return i}return null}});YAHOO.MultiboxAutoComplete=function(elInput,elContainer,oDataSource,oConfigs){YAHOO.MultiboxAutoComplete.superclass.constructor.call(this,elInput,elContainer,oDataSource,oConfigs);var id=this._elTextbox.id;this.multiboxPanel=new YAHOO.MultiboxPanel(id);this.setupEvents()};YAHOO.lang.extend(YAHOO.MultiboxAutoComplete,YAHOO.widget.AutoComplete,{multiboxPanel:null,destroy:function(){YAHOO.log("Destroying MultiboxAutoComplete, including destroying the embedded multiboxPanel subcomponent");
this.multiboxPanel.destroy.call(this.multiboxPanel);YAHOO.MultiboxAutoComplete.superclass.destroy.call(this)},setupEvents:function(){this.itemSelectEvent.subscribe(this.itemSelectHandler,this,true);this.multiboxPanel.movedOutEvent.subscribe(function(e,args){this._elTextbox.focus()},this,true);Event.on(this._elTextbox,"keyup",function(e,args){if(this._elTextbox.value==""){var mb=this.multiboxPanel;try{if(e.keyCode==KEYS.LEFT)mb.selectLast.call(mb);if(e.keyCode==KEYS.RIGHT)mb.selectFirst.call(mb)}catch(e){YAHOO.log(e)}}},
this,true)},itemSelectHandler:function(sType,aArgs){try{YAHOO.log(sType);var oMyAcInstance=aArgs[0];var elListItem=aArgs[1];var aData=aArgs[2];var boxContent=this.renderSelected(elListItem,aData);var box=this.multiboxPanel.addBox(boxContent,aData);this.customizeBox(box,elListItem,aData);this._elTextbox.value=""}catch(e){alert(e)}},renderSelected:function(elListItem,aData){return elListItem.innerHTML},customizeBox:function(box,elListItem,aData){}})})();
var AjaxErrorReport={pageunloading:false,init:function(){YAHOO.util.Event.addListener(window,"beforeunload",function(){AjaxErrorReport.pageunloading=true})},reportAjaxFailure:function(o,msg){try{YAHOO.log("Ajax call Failure:"+o.statusText+"\n"+o.responseText+"\nstatus:"+o.status);if(o.status>0||!AjaxErrorReport.pageunloading){if(YAHOO.lang.isUndefined(msg))msg="";alert(msg+"\nAjax call failure:"+o.statusText+"\nstatus:"+o.status)}}catch(e){YAHOO.log("Error in reportAjaxFailure:"+e)}}};AjaxErrorReport.init();
YAHOO.namespace("codebeamer.ComboBoxActionHandler");YAHOO.codebeamer.ComboBoxActionHandler=function(id,submitForm){this.id=id;this.submitForm=submitForm||true;this.registeredActions=new Object;var x=YAHOO.codebeamer.ComboBoxActionHandler.instances;this.instances[id]=this};YAHOO.lang.augmentObject(YAHOO.codebeamer.ComboBoxActionHandler,{get:function(id){return YAHOO.codebeamer.ComboBoxActionHandler.prototype.instances[id]}});
YAHOO.codebeamer.ComboBoxActionHandler.prototype={instances:new Object,submitForm:true,registeredActions:new Object,form:null,action:null,onSelectionChange:function(selectbox){var action=selectbox.options[selectbox.selectedIndex].value;var success=this.execute(selectbox.form,action);if(!success)selectbox.selectedIndex=0},execute:function(form,action){this.form=form;this.action=action;var success=false;var actionFunction=this.registeredActions[action];if(actionFunction!=null)try{YAHOO.log("Executing action-function: "+
actionFunction+" with (form:"+form+", action:"+action+")");success=actionFunction.call(this,form,action)}catch(e){alert("Failed to execute action "+action+", exception: "+e)}if(success&&this.submitForm&&form){success=this.onBeforeSubmit(form,action);if(success)form.submit()}return success},onBeforeSubmit:function(form,action){return true},registerActions:function(actions){if(this instanceof YAHOO.codebeamer.ComboBoxActionHandler)YAHOO.lang.augmentObject(this.registeredActions,actions,true);else{YAHOO.log("No id is passed, creating the default ComboBoxActionHandler");
var handler=new YAHOO.codebeamer.ComboBoxActionHandler(null);handler.registerActions(actions)}}};var CollapsingBorder={toggle:function(legendLink){var Dom=YAHOO.util.Dom;var CSS_CLASS="collapsingBorder_collapsed";var fieldset=Dom.getAncestorBy(legendLink,function(el){return el.nodeName=="FIELDSET"});if(fieldset!=null)if(Dom.hasClass(fieldset,CSS_CLASS))Dom.removeClass(fieldset,CSS_CLASS);else Dom.addClass(fieldset,CSS_CLASS)},toggleById:function(htmlId){$("#"+htmlId+" .collapsingBorder_legend a").first().trigger("click")}};
var wysiwygController={startApplet:function(wikiPageId,hasEditInWordLicense){if(!hasEditInWordLicense){var response=confirm(i18n.message("ajax.wysiwygController.no.edit.in.word.license"));if(!response)return false}showModalDialog("warning",i18n.message("ajax.wysiwygController.warning.do.not.close.page"));var el=document.createElement("div");document.body.appendChild(el);var html='<applet code="com.intland.codebeamer.applet.document.client.WysiwygController.class" '+'archive="'+contextPath+'/docs/jnlp/doc-applet.jar" align="baseline" width="0" height="0" mayscript>'+
'<param name="contextPath" value="'+contextPath+'">'+'<param name="wikiPageId" value="'+wikiPageId+'">'+i18n.message("ajax.applet.support.required")+"</applet>";YAHOO.log("applet fragment:"+html);el.innerHTML=html;return false},refreshPage:function(isPageModified){window.location.reload()}};
var ScrollUtil={EASE_STYLE:YAHOO.util.Easing.easeNone,scrollPage:function(to,dur,ease){var setAttr=function(a,v,u){window.scroll(0,v)};var anim=new YAHOO.util.Anim(null,{"scroll":{from:YAHOO.util.Dom.getDocumentScrollTop(),to:to}},dur,ease);anim.setAttribute=setAttr;anim.animate()},scrollPageToElement:function(el,dur,delta){if(delta==null)delta=0;ScrollUtil.scrollPage(YAHOO.util.Dom.getXY(el)[1]+delta,dur,ScrollUtil.EASE_STYLE)},scrollContainerToElement:function(container,el,dur,delta){if(!(container&&
el))return;if(delta==null)delta=0;if(dur==null)dur=0.2;var ease=ScrollUtil.EASE_STYLE;var to=YAHOO.util.Dom.getXY(el)[1];var containerCoords=YAHOO.util.Dom.getXY(container);to=to+container.scrollTop-containerCoords[1];to=to+delta;var setAttr=function(a,v,u){container.scrollTop=v};var anim=new YAHOO.util.Anim(null,{"scroll":{from:container.scrollTop,to:to}},dur,ease);anim.setAttribute=setAttr;anim.animate()},isScrolledIntoView:function(el){if(el==null)return false;var Dom=YAHOO.util.Dom;var region=
Dom.getRegion(el);if(region){var visibleRegion=Dom.getClientRegion();var intersect=visibleRegion.intersect(region);return intersect!=null}return false}};
var chartRendererSupport={updateChart:function(contextPath,elId,url,width,height){var chartEl=document.getElementById(elId);if(chartEl.lasturl==url)return;chartEl.lasturl=url;if(width==null)width=400;if(height==null)height=300;var busy=ajaxBusyIndicator.showBusysign($(chartEl).find("img")[0],i18n.message("ajax.loading"),false,{centered:true,renderTo:document.body});$(chartEl).css({"width":width+"px","height":width+"px"});var showResult=function(html){$(chartEl).html(html);busy.destroy()};YAHOO.util.Connect.asyncRequest("GET",
url,{success:function(o){var response=o.responseText;var html=response.substring("<html><![CDATA[".length,response.length-"]]\></html>".length);showResult(html)},failure:function(o){var errId="err_"+elId;var retry="<a href='#' onclick='chartRendererSupport.updateChart(\""+contextPath+'", "'+elId+'", "'+url+'", '+width+","+height+"); return false;'>Retry</a>";var details="";details="&nbsp;&nbsp;<a href='#' onclick='chartRendererSupport.showErrorDetails(\""+errId+"\");return false'>See details</a>"+
"<div id='"+errId+"' style='display:none'></div>";var html="<div class='error' style='overflow:auto;height:44px; padding-left:50px;'>Failed to render chart.<br/>"+retry+details+"</div>";showResult(html);var errorContainer=document.getElementById(errId);if(errorContainer){if(errorContainer.errPanel!=null){errorContainer.errPanel.hide();errorContainer.errPanel=null}errorContainer.innerHTML="<div class='hd'>Error details</div><div class='bd' style='overflow:auto;'>"+o.responseText+"</div>"}}})},showErrorDetails:function(errId){var el=
document.getElementById(errId);if(el.errPanel==null){el.style.display="block";var errPanel=new YAHOO.widget.Panel(errId,{width:"600px",height:"300px",visible:false,constraintoviewport:true});errPanel.render();el.errPanel=errPanel}el.errPanel.show()}};
var ajaxPluginRendererSupport={updatePlugin:function(contextPath,pluginId,url,width,height,force){var elId="ajaxplugin_"+pluginId;var pluginEl=document.getElementById(elId);if(pluginEl.lasturl==url&&force!=true)return;pluginEl.lasturl=url;if(width==null)width=400;if(height==null)height=300;var ALLOW_FADING=false;if(ALLOW_FADING)ajaxPluginRendererSupport.indicatorImageTimer=YAHOO.lang.later(1E3,this,function(){ajaxPluginRendererSupport.showLoadingImage(pluginEl)});else ajaxPluginRendererSupport.showLoadingImage(pluginEl);
YAHOO.util.Connect.asyncRequest("GET",url,{success:function(o){if(ajaxPluginRendererSupport.indicatorImageTimer!=null){ajaxPluginRendererSupport.indicatorImageTimer.cancel();ajaxPluginRendererSupport.indicatorImageTimer=null}var response=o.responseText;var html=response.substring("<html><![CDATA[".length,response.length-"]]\></html>".length);var busySign=pluginEl.busySign;if(ALLOW_FADING)ajaxPluginRendererSupport.replaceWithFade(pluginEl,html);else pluginEl.innerHTML=html;if(busySign)busySign.destroy()},
failure:function(o){var errId="err_"+elId;var retry="<a href='#' onclick='ajaxPluginRendererSupport.updateChart(\""+contextPath+'", "'+pluginId+'", "'+url+'", '+width+","+height+"); return false;'>Retry</a>";var details="";details="&nbsp;&nbsp;<a href='#' onclick='ajaxPluginRendererSupport.showErrorDetails(\""+errId+"\");return false'>See details</a>"+"<div id='"+errId+"' style='display:none'></div>";var html="<div class='error' style='overflow:auto;height:44px; padding-left:50px;'>Failed to render chart.<br/>"+
retry+details+"</div>";pluginEl.innerHTML=html;var errorContainer=document.getElementById(errId);if(errorContainer){if(errorContainer.errPanel!=null){errorContainer.errPanel.hide();errorContainer.errPanel=null}errorContainer.innerHTML="<div class='hd'>Error details</div><div class='bd' style='overflow:auto;'>"+o.responseText+"</div>"}}})},showLoadingImage:function(pluginEl){var busy=ajaxBusyIndicator.showBusysign($(pluginEl)[0],i18n.message("ajax.loading"),false,{centered:true,renderTo:document.body});
pluginEl.busySign=busy},replaceWithFade:function(el,newContent){var fadetime=0.3;var origColor=YAHOO.util.Dom.getStyle(el,"backgroundColor");var fadeOut=new YAHOO.util.Anim(el,{opacity:{to:0},backgroundColor:{to:"#e06"}},fadetime);fadeOut.onComplete.subscribe(function(){el.innerHTML=newContent;var fadeIn=new YAHOO.util.Anim(el,{opacity:{to:1},backgroundColor:{to:origColor}},fadetime);fadeIn.onComplete.subscribe(function(){YAHOO.util.Dom.removeClass(el,"ajaxplugin_loading")});fadeIn.animate()});fadeOut.animate()},
showErrorDetails:function(errId){var el=document.getElementById(errId);if(el.errPanel==null){el.style.display="block";var errPanel=new YAHOO.widget.Panel(errId,{width:"600px",height:"300px",visible:false,constraintoviewport:true});errPanel.render();el.errPanel=errPanel}el.errPanel.show()}};
function TaggingWidget(elementId,entityTypeId,entityId,tagged,tagName,onTitle,offTitle,enabled){if(this==window)return new Favourites(elementId,entityTypeId,entityId,tagged,tagName,onTitle,offTitle,enabled);this.init(elementId,entityTypeId,entityId,tagged,tagName,onTitle,offTitle,enabled)}
TaggingWidget.prototype={CSS_CLASS:"tagged",init:function(elementId,entityTypeId,entityId,tagged,tagName,onTitle,offTitle,enabled){this.elementId=elementId;this.entityTypeId=entityTypeId;this.entityId=entityId;this.tagName=tagName;this.onTitle=onTitle;this.offTitle=offTitle;this.enabled=enabled;this.addEventListener(elementId);this.setTagged(tagged)},addEventListener:function(elementId){this.el=YAHOO.util.Dom.get(elementId);YAHOO.util.Event.addListener(this.el,"click",this.onClick,this,true)},onClick:function(){if(this.enabled==
false){alert(i18n.message("tags.starring.disabled"));return}if(this.updateRunning){YAHOO.log("Ajax update is aready running, ignoring this click.");return}this.updateRunning=true;var ME=this;var tagged=this.isTagged();var url=contextPath+"/ajax/setTagApplied.spr";var params="entityTypeId="+this.entityTypeId+"&entityId="+this.entityId+"&apply="+!tagged;var callback={success:function(o){this.updateRunning=false;YAHOO.log("Successfully changed tag <"+this.tagName+"> on <"+params+">");this.setTagged(!tagged)},
failure:function(o){this.updateRunning=false;AjaxErrorReport.reportAjaxFailure(o,"Failed to change Tag/set Starred on "+this.entityTypeId+", id="+this.entityId+", because:")},scope:ME};params+="&tagName="+this.tagName;YAHOO.util.Connect.asyncRequest("POST",url,callback,params);return false},isTagged:function(){return YAHOO.util.Dom.hasClass(this.el,this.CSS_CLASS)},setTagged:function(tagged){if(tagged)YAHOO.util.Dom.addClass(this.el,this.CSS_CLASS);else YAHOO.util.Dom.removeClass(this.el,this.CSS_CLASS);
if(this.enabled==false)this.el.title=i18n.message("tags.starring.disabled");else this.el.title=tagged?this.onTitle:this.offTitle}};
var showDiff={loadAllDiffsEnabled:true,refs:{},htmlIdToRef:{},toggleDiff:function(linkElement,open){var link=$(linkElement);link.toggleClass("toggleLinkOpen",open);var diffElementId=link.attr("rel");var diffContainer=$("#"+diffElementId);if(link.hasClass("toggleLinkOpen"))diffContainer.show();else diffContainer.hide()},toggleAllDiffs:function(linkElement,diffsParentId){$(linkElement).toggleClass("toggleLinkOpen");var open=$(linkElement).hasClass("toggleLinkOpen");var toggleLinks=$("#"+diffsParentId).find(".toggleLink");
toggleLinks.each(function(index,toggleLink){showDiff.toggleDiff(toggleLink,open)});if(open){var refsToLoad={};for(var i=0;i<toggleLinks.length;i++){var link=$(toggleLinks[i]);var diffElementId=link.attr("rel");var ref=showDiff.htmlIdToRef[diffElementId];if(ref!=null)refsToLoad[ref.key]=ref}showDiff._loadDiffs(refsToLoad)}},_loadDiffsForHtmlIds:function(htmlIds){var refsToLoad={};var ref=showDiff.htmlIdToRef[diffElementId];if(ref!=null)refsToLoad[ref.key]=ref;showDiff._loadDiffs(refsToLoad)},getRef:function(repositoryId,
oldRevision,newRevision,filePath){var obj={repositoryId:repositoryId,oldRevision:oldRevision,newRevision:newRevision,filePath:filePath};var key=$.param(obj);var sameObject=showDiff.refs[key];if(sameObject!=null)return sameObject;obj.key=key;showDiff.refs[key]=obj;return obj},registerDiffPlaceHolder:function(htmlId,repositoryId,oldRevision,newRevision,filePath){var ref=showDiff.getRef(repositoryId,oldRevision,newRevision,filePath);if(ref.diffs==null)ref.diffs=new Array;ref.diffs.push(htmlId);showDiff.htmlIdToRef[htmlId]=
ref;$("#"+htmlId).html("<img src='"+contextPath+"/images/ajax-loading_16.gif'>"+i18n.message("ajax.loading")+"</img>")},loadAllDiffs:function(){if(showDiff.loadAllDiffsEnabled)showDiff._loadDiffs(showDiff.refs)},_loadDiffs:function(refs){var url=contextPath+"/proj/scm/ajax/renderChangeFileDiff.spr?includeHeader=false";var params=new Array;for(var param in refs){var ref=refs[param];if(ref.rendered!=true)params.push(param)}if(params.length>0){var dataObj=params.join("&");$.ajax({url:url,type:"POST",
data:dataObj,cache:false}).success(function(data,status,jqXHR){var result=data.result;for(var i=0;i<result.length;i++){var r=result[i];showDiff._renderResult(r)}}).error(function(jqXHR,textStatus,errorThrown){console.log("Failed to load diffs:"+errorThrown+", response:\n"+jqXHR.responseText)})}},_renderResult:function(oneDiff){var ref=showDiff.getRef(oneDiff.repositoryId,oneDiff.oldRevision,oneDiff.newRevision,oneDiff.filePath);ref.rendered=true;var diffHTMLElements=ref.diffs;if(diffHTMLElements!=
null)for(var i=0;i<diffHTMLElements.length;i++){var htmlId=diffHTMLElements[i];$("#"+htmlId).html(oneDiff.diffHTML);var statsHtmlId=htmlId+"_stats";if(oneDiff.linesAdded!=null){var htmlFrag='<span class="linesAdded">+'+oneDiff.linesAdded+"</span>&nbsp;"+'<span class="linesRemoved">-'+oneDiff.linesRemoved+"</span>";$("#"+statsHtmlId).html(htmlFrag).show()}}}};$(document).ready(showDiff.loadAllDiffs);var qq=qq||{};qq.extend=function(first,second){for(var prop in second)first[prop]=second[prop]};
qq.indexOf=function(arr,elt,from){if(arr.indexOf)return arr.indexOf(elt,from);from=from||0;var len=arr.length;if(from<0)from+=len;for(;from<len;from++)if(from in arr&&arr[from]===elt)return from;return-1};qq.getUniqueId=function(){var id=0;return function(){return id++}}();qq.attach=function(element,type,fn){if(element.addEventListener)element.addEventListener(type,fn,false);else if(element.attachEvent)element.attachEvent("on"+type,fn)};
qq.detach=function(element,type,fn){if(element.removeEventListener)element.removeEventListener(type,fn,false);else if(element.attachEvent)element.detachEvent("on"+type,fn)};qq.preventDefault=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false};qq.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)};qq.remove=function(element){element.parentNode.removeChild(element)};
qq.contains=function(parent,descendant){if(parent==descendant)return true;if(parent.contains)return parent.contains(descendant);else return!!(descendant.compareDocumentPosition(parent)&8)};qq.toElement=function(){var div=document.createElement("div");return function(html){div.innerHTML=html;var element=div.firstChild;div.removeChild(element);return element}}();
qq.css=function(element,styles){if(styles.opacity!=null)if(typeof element.style.opacity!="string"&&typeof element.filters!="undefined")styles.filter="alpha(opacity="+Math.round(100*styles.opacity)+")";qq.extend(element.style,styles)};qq.hasClass=function(element,name){var re=new RegExp("(^| )"+name+"( |$)");return re.test(element.className)};qq.addClass=function(element,name){if(!qq.hasClass(element,name))element.className+=" "+name};
qq.removeClass=function(element,name){var re=new RegExp("(^| )"+name+"( |$)");element.className=element.className.replace(re," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(element,text){element.innerText=text;element.textContent=text};qq.children=function(element){var children=[],child=element.firstChild;while(child){if(child.nodeType==1)children.push(child);child=child.nextSibling}return children};
qq.getByClass=function(element,className){if(element.querySelectorAll)return element.querySelectorAll("."+className);var result=[];var candidates=element.getElementsByTagName("*");var len=candidates.length;for(var i=0;i<len;i++)if(qq.hasClass(candidates[i],className))result.push(candidates[i]);return result};
qq.obj2url=function(obj,temp,prefixDone){var uristrings=[],prefix="&",add=function(nextObj,i){var nextTemp=temp?/\[\]$/.test(temp)?temp:temp+"["+i+"]":i;if(nextTemp!="undefined"&&i!="undefined")uristrings.push(typeof nextObj==="object"?qq.obj2url(nextObj,nextTemp,true):Object.prototype.toString.call(nextObj)==="[object Function]"?encodeURIComponent(nextTemp)+"="+encodeURIComponent(nextObj()):encodeURIComponent(nextTemp)+"="+encodeURIComponent(nextObj))};if(!prefixDone&&temp){prefix=/\?/.test(temp)?
/\?$/.test(temp)?"":"&":"?";uristrings.push(temp);uristrings.push(qq.obj2url(obj))}else if(Object.prototype.toString.call(obj)==="[object Array]"&&typeof obj!="undefined")for(var i=0,len=obj.length;i<len;++i)add(obj[i],i);else if(typeof obj!="undefined"&&obj!==null&&typeof obj==="object")for(var i in obj)add(obj[i],i);else uristrings.push(encodeURIComponent(temp)+"="+encodeURIComponent(obj));return uristrings.join(prefix).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};
qq.FileUploaderBasic=function(o){this._options={debug:false,dndControlMessageCode:"dndupload.attachfiles",action:"/server/upload",action_iframe:"/server/uploadmp",action_remove:"server/remove",params:{},forcesingle:false,button:null,multiple:true,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(id,fileName){},onProgress:function(id,fileName,loaded,total){},onComplete:function(id,fileName,responseJSON){},onCancel:function(id,fileName){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",
sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(message){alert(message)}};qq.extend(this._options,o);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button)this._button=this._createUploadButton(this._options.button);
this._preventLeaveInProgress()};
qq.FileUploaderBasic.prototype={setParams:function(params){this._options.params=params},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(element){var self=this;return new qq.UploadButton({element:element,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported()&&!this._options.forcesingle,onChange:function(input){self._onInputChange(input)}})},_createUploadHandler:function(){var self=this,handlerClass,cur_action;if(qq.UploadHandlerXhr.isSupported()){handlerClass="UploadHandlerXhr";
cur_action=this._options.action}else{handlerClass="UploadHandlerForm";cur_action=this._options.action_iframe}var handler=new qq[handlerClass]({debug:this._options.debug,action:cur_action,maxConnections:this._options.maxConnections,onProgress:function(id,fileName,loaded,total){self._onProgress(id,fileName,loaded,total);self._options.onProgress(id,fileName,loaded,total)},onComplete:function(id,fileName,result){self._onComplete(id,fileName,result);self._options.onComplete(id,fileName,result)},onCancel:function(id,
fileName){self._onCancel(id,fileName);self._options.onCancel(id,fileName)}});return handler},_preventLeaveInProgress:function(){var self=this;qq.attach(window,"beforeunload",function(e){if(!self._filesInProgress)return;var e=e||window.event;e.returnValue=self._options.messages.onLeave;return self._options.messages.onLeave})},_onSubmit:function(id,fileName){this._filesInProgress++},_onProgress:function(id,fileName,loaded,total){},_onComplete:function(id,fileName,result){this._filesInProgress--;if(result.error)this._options.showMessage(result.error)},
_onCancel:function(id,fileName){this._filesInProgress--},_onInputChange:function(input){if(this._handler instanceof qq.UploadHandlerXhr)this._uploadFileList(input.files);else if(this._validateFile(input))this._uploadFile(input);this._button.reset()},_uploadFileList:function(files){for(var i=0;i<files.length;i++)if(!this._validateFile(files[i]))return;for(var i=0;i<files.length;i++)this._uploadFile(files[i])},_uploadFile:function(fileContainer){var id=this._handler.add(fileContainer);var fileName=
this._handler.getName(id);if(this._options.onSubmit(id,fileName)!==false){this._onSubmit(id,fileName);this._handler.upload(id,this._options.params)}},_validateFile:function(file){var name,size;if(file.value)name=file.value.replace(/.*(\/|\\)/,"");else{name=file.fileName!=null?file.fileName:file.name;size=file.fileSize!=null?file.fileSize:file.size}if(!this._isAllowedExtension(name)){this._error("typeError",name);return false}else if(size===0){this._error("emptyError",name);return false}else if(size&&
this._options.sizeLimit&&size>this._options.sizeLimit){this._error("sizeError",name);return false}else if(size&&size<this._options.minSizeLimit){this._error("minSizeError",name);return false}return true},_error:function(code,fileName){var message=this._options.messages[code];function r(name,replacement){message=message.replace(name,replacement)}r("{file}",this._formatFileName(fileName));r("{extensions}",this._options.allowedExtensions.join(", "));r("{sizeLimit}",this._formatSize(this._options.sizeLimit));
r("{minSizeLimit}",this._formatSize(this._options.minSizeLimit));this._options.showMessage(message)},_formatFileName:function(name){if(name.length>33)name=name.slice(0,19)+"..."+name.slice(-13);return name},_isAllowedExtension:function(fileName){var ext=-1!==fileName.indexOf(".")?fileName.replace(/.*[.]/,"").toLowerCase():"";var allowed=this._options.allowedExtensions;if(!allowed.length)return true;for(var i=0;i<allowed.length;i++)if(allowed[i].toLowerCase()==ext)return true;return false},_formatSize:function(bytes){var i=
-1;do{bytes=bytes/1024;i++}while(bytes>99);return Math.max(bytes,0.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][i]}};
qq.FileUploader=function(o){qq.FileUploaderBasic.apply(this,arguments);var attachlabel=i18n.message(this._options.dndControlMessageCode);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader">'+'<div class="qq-upload-drop-area"><span>'+i18n.message("dndupload.dropfileshere")+"</span></div>"+'<div class="qq-upload-button">'+'<div class="qq-upload-icon"></div>'+'<div class="qq-upload-text">'+attachlabel+"</div>"+"</div>"+'<ul class="qq-upload-list"></ul>'+"</div>",
fileTemplate:"<li>"+'<span class="qq-upload-file"></span>'+'<span class="qq-upload-spinner"></span>'+'<span class="qq-upload-size"></span>'+'<a class="qq-upload-cancel" href="#">'+i18n.message("dndupload.cancel")+"</a>"+'<span class="qq-upload-failed-text">'+i18n.message("dndupload.failed")+"</span>"+'<a class="qq-upload-remove" href="#">'+i18n.message("dndupload.remove")+"</a>"+"</li>",classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",
file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",remove:"qq-upload-remove",success:"qq-upload-success",fail:"qq-upload-fail"}});qq.extend(this._options,o);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button=this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent();this._bindRemoveEvent();
this._setupDragDrop()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);
qq.extend(qq.FileUploader.prototype,{_find:function(parent,type){var element=qq.getByClass(parent,this._options.classes[type])[0];if(!element)throw new Error("element not found "+type);return element},_initDropZone:function(self,dropArea,highlightDropArea){var dz=new qq.UploadDropZone({element:dropArea,onEnter:function(e){if(highlightDropArea)qq.addClass(dropArea,self._classes.dropActive);e.stopPropagation()},onLeave:function(e){e.stopPropagation()},onLeaveNotDescendants:function(e){qq.removeClass(dropArea,
self._classes.dropActive)},onDrop:function(e){if(highlightDropArea)dropArea.style.display="none";qq.removeClass(dropArea,self._classes.dropActive);self._uploadFileList(e.dataTransfer.files);e.stopPropagation();e.preventDefault()}})},_setupDragDrop:function(){var dropArea=this._find(this._element,"drop");if(dropArea==null)return;dropArea.style.overflow="hidden";this._initDropZone(this,dropArea,true,false);dropArea.style.display="none";var hideTimeout;qq.attach(document,"dragenter",function(e){if(dropArea.style.display!=
"block")dropArea.style.display="block";if(hideTimeout)clearTimeout(hideTimeout);hideTimeout=setTimeout(function(){dropArea.style.display="none"},2E3)});qq.attach(document,"dragleave",function(e){})},_onSubmit:function(id,fileName){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(id,fileName)},_onProgress:function(id,fileName,loaded,total){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var item=this._getItemByFileId(id);var size=this._find(item,"size");
size.style.display="inline";var text;if(loaded!=total)text=Math.round(loaded/total*100)+"% from "+this._formatSize(total);else text=this._formatSize(total);qq.setText(size,text)},_onComplete:function(id,fileName,result){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var item=this._getItemByFileId(id);qq.remove(this._find(item,"cancel"));qq.remove(this._find(item,"spinner"));$(this._find(item,"remove")).show();if(result.success)qq.addClass(item,this._classes.success);else qq.addClass(item,
this._classes.fail)},_addToList:function(id,fileName){if(this._options.forcesingle==true){var originalitem=this._listElement.firstChild;if(originalitem){try{this._handler.cancel(originalitem.qqFileId)}catch(e){}var fileNameElement=this._find(originalitem,"file");var queryparams={};queryparams["fileName"]=fileNameElement.title;var queryString=qq.obj2url(queryparams,this._options.action_remove);jQuery.ajax({url:queryString,async:true});qq.remove(originalitem)}}var item=qq.toElement(this._options.fileTemplate);
item.qqFileId=id;var fileElement=this._find(item,"file");qq.setText(fileElement,this._formatFileName(fileName));fileElement.title=fileName;this._find(item,"size").style.display="none";$(this._find(item,"remove")).hide();this._listElement.appendChild(item)},_getItemByFileId:function(id){var item=this._listElement.firstChild;while(item){if(item.qqFileId==id)return item;item=item.nextSibling}},_bindCancelEvent:function(){var self=this,list=this._listElement;qq.attach(list,"click",function(e){e=e||window.event;
var target=e.target||e.srcElement;if(qq.hasClass(target,self._classes.cancel)){qq.preventDefault(e);var item=target.parentNode;self._handler.cancel(item.qqFileId);qq.remove(item)}})},_bindRemoveEvent:function(){var self=this,list=this._listElement;qq.attach(list,"click",function(e){e=e||window.event;var target=e.target||e.srcElement;if(qq.hasClass(target,self._classes.remove)){qq.preventDefault(e);var item=target.parentNode;var fileNameElement=self._find(item,"file");var queryparams={};var fileName=
null;if(fileNameElement!=null){fileName=fileNameElement.title;queryparams["fileName"]=fileName}var queryString=qq.obj2url(queryparams,self._options.action_remove);jQuery.ajax({url:queryString,async:true});$(self._element).trigger("onRemove",[fileName]);qq.remove(item)}})}});
qq.UploadDropZone=function(o){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}};qq.extend(this._options,o);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};
qq.UploadDropZone.prototype={_disableDropOutside:function(e){if(!qq.UploadDropZone.dropOutsideDisabled){qq.attach(document,"dragover",function(e){if(e.dataTransfer){e.dataTransfer.dropEffect="none";e.preventDefault()}});qq.UploadDropZone.dropOutsideDisabled=true}},_attachEvents:function(){var self=this;qq.attach(self._element,"dragover",function(e){if(!self._isValidFileDrag(e))return;var effect=e.dataTransfer.effectAllowed;if(effect=="move"||effect=="linkMove")e.dataTransfer.dropEffect="move";else e.dataTransfer.dropEffect=
"copy";e.stopPropagation();e.preventDefault()});qq.attach(self._element,"dragenter",function(e){if(!self._isValidFileDrag(e))return;self._options.onEnter(e)});qq.attach(self._element,"dragleave",function(e){if(!self._isValidFileDrag(e))return;self._options.onLeave(e);var relatedTarget=document.elementFromPoint(e.clientX,e.clientY);if(qq.contains(this,relatedTarget))return;self._options.onLeaveNotDescendants(e)});qq.attach(self._element,"drop",function(e){if(!self._isValidFileDrag(e))return;e.preventDefault();
self._options.onDrop(e)})},_isValidFileDrag:function(e){var dt=e.dataTransfer,isWebkit=navigator.userAgent.indexOf("AppleWebKit")>-1;return dt&&dt.effectAllowed!="none"&&(dt.files||!isWebkit&&dt.types.contains&&dt.types.contains("Files"))}};
qq.UploadButton=function(o){this._options={element:null,multiple:false,name:"file",onChange:function(input){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,o);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};
qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){if(this._input.parentNode)qq.remove(this._input);qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var input=document.createElement("input");if(this._options.multiple)input.setAttribute("multiple","multiple");if(qq.UploadHandlerXhr.isSupported()){input.setAttribute("title",i18n.message("dndupload.dndenabled.hint"));qq.css(input,{fontSize:"118px"})}else{input.setAttribute("title",
i18n.message("dndupload.dnddisabled.hint"));qq.css(input,{fontSize:"236px"})}input.setAttribute("type","file");input.setAttribute("name",this._options.name);qq.css(input,{position:"absolute",right:0,top:0,fontFamily:"Arial",margin:0,padding:0,cursor:"pointer",opacity:0});this._element.appendChild(input);var self=this;qq.attach(input,"change",function(){self._options.onChange(input)});qq.attach(input,"mouseover",function(){qq.addClass(self._element,self._options.hoverClass)});qq.attach(input,"mouseout",
function(){qq.removeClass(self._element,self._options.hoverClass)});qq.attach(input,"focus",function(){qq.addClass(self._element,self._options.focusClass)});qq.attach(input,"blur",function(){qq.removeClass(self._element,self._options.focusClass)});if(window.attachEvent)input.setAttribute("tabIndex","-1");return input}};
qq.UploadHandlerAbstract=function(o){this._options={debug:false,action:"/upload.php",action_iframe:"/upload_iframe.php",action_remove:"server/remove.php",maxConnections:999,onProgress:function(id,fileName,loaded,total){},onComplete:function(id,fileName,response){},onCancel:function(id,fileName){}};qq.extend(this._options,o);this._queue=[];this._params=[]};
qq.UploadHandlerAbstract.prototype={log:function(str){if(this._options.debug&&window.console)console.log("[uploader] "+str)},add:function(file){},upload:function(id,params){var len=this._queue.push(id);var copy={};qq.extend(copy,params);this._params[id]=copy;if(len<=this._options.maxConnections)this._upload(id,this._params[id])},cancel:function(id){this._cancel(id);this._dequeue(id)},cancelAll:function(){for(var i=0;i<this._queue.length;i++)this._cancel(this._queue[i]);this._queue=[]},getName:function(id){},
getSize:function(id){},getQueue:function(){return this._queue},_upload:function(id){},_cancel:function(id){},_dequeue:function(id){var i=qq.indexOf(this._queue,id);this._queue.splice(i,1);var max=this._options.maxConnections;if(this._queue.length>=max&&i<max){var nextId=this._queue[max-1];this._upload(nextId,this._params[nextId])}}};qq.UploadHandlerForm=function(o){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerForm.prototype,{add:function(fileInput){fileInput.setAttribute("name","qqfile");var id="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[id]=fileInput;if(fileInput.parentNode)qq.remove(fileInput);return id},getName:function(id){return this._inputs[id].value.replace(/.*(\/|\\)/,"")},_cancel:function(id){this._options.onCancel(id,this.getName(id));delete this._inputs[id];var iframe=document.getElementById(id);if(iframe){iframe.setAttribute("src","javascript:false;");
qq.remove(iframe)}},_upload:function(id,params){var input=this._inputs[id];if(!input)throw new Error("file with passed id was not added, or already uploaded or cancelled");var fileName=this.getName(id);var iframe=this._createIframe(id);var form=this._createForm(iframe,params);form.appendChild(input);var self=this;this._attachLoadEvent(iframe,function(){self.log("iframe loaded");var response=self._getIframeContentJSON(iframe);self._options.onComplete(id,fileName,response);self._dequeue(id);delete self._inputs[id];
setTimeout(function(){qq.remove(iframe)},1)});form.submit();qq.remove(form);return id},_attachLoadEvent:function(iframe,callback){qq.attach(iframe,"load",function(){if(!iframe.parentNode)return;try{if(iframe.contentDocument&&iframe.contentDocument.body&&iframe.contentDocument.body.innerHTML=="false")return}catch(err){console.log(err)}callback()})},_getIframeContentJSON:function(iframe){try{var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response}catch(e){console.log(e);
alert(i18n.message("dndupload.error")+" "+e);return{}}var convertok="false";this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")");convertok="true"}catch(err){response={}}if(convertok!="true")try{response=eval("("+doc.body.innerText+")")}catch(err){response={}}return response},_createIframe:function(id){var iframe=qq.toElement('<iframe src="javascript:false;" name="'+id+'" />');iframe.setAttribute("id",id);iframe.style.display=
"none";document.body.appendChild(iframe);return iframe},_createForm:function(iframe,params){var form=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');var queryString=qq.obj2url(params,this._options.action);form.setAttribute("action",queryString);form.setAttribute("target",iframe.name);form.style.display="none";document.body.appendChild(form);return form}});
qq.UploadHandlerXhr=function(o){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var input=document.createElement("input");input.type="file";return"multiple"in input&&typeof File!="undefined"&&typeof(new XMLHttpRequest).upload!="undefined"};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerXhr.prototype,{add:function(file){if(!(file instanceof File))throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(file)-1},getName:function(id){var file=this._files[id];return file.fileName!=null?file.fileName:file.name},getSize:function(id){var file=this._files[id];return file.fileSize!=null?file.fileSize:file.size},getLoaded:function(id){return this._loaded[id]||0},_upload:function(id,params){var file=this._files[id],name=this.getName(id),
size=this.getSize(id);this._loaded[id]=0;var xhr=this._xhrs[id]=new XMLHttpRequest;var self=this;xhr.upload.onprogress=function(e){if(e.lengthComputable){self._loaded[id]=e.loaded;self._options.onProgress(id,name,e.loaded,e.total)}};xhr.onreadystatechange=function(){if(xhr.readyState==4)self._onComplete(id,xhr)};params=params||{};params["qqfile"]=name;var queryString=qq.obj2url(params,this._options.action);var fSize=file.fileSize;if(!fSize)fSize=file.size;xhr.open("POST",queryString,true);xhr.setRequestHeader("X-Requested-With",
"XMLHttpRequest");xhr.setRequestHeader("X-File-Name",encodeURIComponent(name));xhr.setRequestHeader("X-File-Size",fSize);xhr.setRequestHeader("Content-Type","application/octet-stream");xhr.send(file)},_onComplete:function(id,xhr){if(!this._files[id])return;var name=this.getName(id);var size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received");this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+
")")}catch(err){response={}}this._options.onComplete(id,name,response)}else this._options.onComplete(id,name,{});this._files[id]=null;this._xhrs[id]=null;this._dequeue(id)},_cancel:function(id){this._options.onCancel(id,this.getName(id));this._files[id]=null;if(this._xhrs[id]){this._xhrs[id].abort();this._xhrs[id]=null}}});
function isFileUploadsFinished(showInProgressAlert){try{var uploadsAreInProgress=false;try{var uploadSpinners=$("span.qq-upload-spinner");uploadsAreInProgress=uploadSpinners==null||uploadSpinners.length!=0}catch(e){}if(uploadsAreInProgress){if(showInProgressAlert==null||showInProgressAlert)alert(i18n.message("dndupload.uploadsareinprogress"));return false}}catch(e){console.log("Exception in isFileUploadsFinished(): "+e)}return true}
var uploaderExtensions={initFileUploader:function(elementId,conversationId,options){var hasConversation=conversationId&&conversationId!="";var conversationParams=hasConversation?"?conversationId="+conversationId:"";var $element=$("#"+elementId);var defaultOptions={forcesingle:false,action:contextPath+"/dndupload/uploadoctetstream.spr"+conversationParams,action_iframe:contextPath+"/dndupload/uploadmultipart.spr"+conversationParams,action_remove:contextPath+"/dndupload/removeFile.spr"+conversationParams,
onSubmit:function(){if(options.onSubmit&&typeof options.onSubmit==="function")options.onSubmit();uploaderExtensions.scheduleUpdateVisuals(elementId,null,false);uploaderExtensions._keepSessionAlive()},onProgress:function(){if(!$element.hasClass("qq-autohide"))uploaderExtensions.scheduleUpdateVisuals(elementId,null,false)},onComplete:function(id,fileName,responseJSON){uploaderExtensions.scheduleUpdateVisuals(elementId);$element.trigger("onUploadComplete",[id,fileName,responseJSON]);uploaderExtensions._keepSessionAlive()},
onCancel:function(){uploaderExtensions.scheduleUpdateVisuals(elementId);uploaderExtensions._keepSessionAlive()},flatBox:false,externalDropZoneId:null,getPreviouslyUploadedFiles:true};qq.UploadDropZone.dropOutsideDisabled=false;var mergedOptions=$.extend(defaultOptions,options);mergedOptions.element=$element[0];if(!mergedOptions.dndControlMessageCode)mergedOptions.dndControlMessageCode=mergedOptions.forcesingle?"dndupload.attachonefile":"dndupload.attachfiles";var uploader=new qq.FileUploader(mergedOptions);
$element.bind("onRemove",function(event,fileName){uploaderExtensions.scheduleUpdateVisuals(elementId);uploaderExtensions._keepSessionAlive()});if(mergedOptions.flatBox){$element.addClass("fileUpload-flatbox");$element.find(".qq-upload-icon").text(i18n.message(mergedOptions.dndControlMessageCode))}$element.show();if(hasConversation&&mergedOptions.getPreviouslyUploadedFiles)uploaderExtensions.initUploaderConversation(uploader,elementId,conversationId);var wysiwygEditorId=mergedOptions.integrateWithWysiwygEditor;
if(wysiwygEditorId&&wysiwygEditorId!="")uploaderExtensions.integrateWysiwygWithFileUpload(wysiwygEditorId,elementId,uploader);else if(mergedOptions.externalDropZoneId)uploaderExtensions._initExternalDropZone(uploader,"#"+mergedOptions.externalDropZoneId);return uploader},_keepSessionAliveTimer:null,_keepSessionAlive:function(){var freq=20*60*1E3;if(uploaderExtensions._keepSessionAliveTimer==null)uploaderExtensions._keepSessionAliveTimer=setTimeout(function(){uploaderExtensions._keepSessionAliveTimer=
null;if(!isFileUploadsFinished(false)){var keepSessionAliveURL=contextPath+"/images/space.gif";$.post(keepSessionAliveURL);uploaderExtensions._keepSessionAlive()}},freq)},_initExternalDropZone:function(uploader,dropZoneElement){var externalDropZone=$(dropZoneElement)[0];if(externalDropZone){var highlightDropArea=false;uploader._initDropZone(uploader,externalDropZone,highlightDropArea)}else console.log("External drop zone not found: "+externalDropZoneId+", drop disabled to this")},_uploaderWidgetIdToConversationIds:{},
initUploaderConversation:function(fileUploader,uploaderId,conversationId){uploaderExtensions._uploaderWidgetIdToConversationIds[uploaderId]=conversationId;var url=contextPath+"/dndupload/getPreviouslyUploadedFiles.spr?conversationId="+conversationId;$.ajax({url:url,async:true,dataType:"json",success:function(data){if(data==null||data.length==0)return;var result=new Array;for(var i=0;i<data.length;i++){var fileData=data[i];var formattedSize=fileUploader._formatSize(fileData.size);var formattedName=
fileUploader._formatFileName(fileData.fileName);var li="<li>"+'<span class="qq-upload-file" title="'+fileData.fileName+'" >'+formattedName+"</span>"+'<span class="qq-upload-size">'+formattedSize+"</span>"+'<a class="qq-upload-remove" href="#">'+i18n.message("dndupload.remove")+"</a>"+"</li>";result.push(li)}var html=result.join("\n");var uploaderElement=uploaderExtensions._getUploaderHtmlElement(uploaderId);var uploaderList=$(uploaderElement).find("ul.qq-upload-list")[0];$(uploaderList).html(html).css("display",
"block");uploaderExtensions.scheduleUpdateVisuals(uploaderId)},error:function(xhr,textStatus,errorThrown){console.log("error loading previously uploaded files, conversationId="+conversationId+", error:"+textStatus)}})},_getUploaderHtmlElement:function(uploaderId){if(uploaderId==null)uploaderId="uploadConversationId_dropZone";return $("#"+uploaderId)},getUploadConversationIdForWysiwygEditor:function(editorId){var uploadWidgetId=uploaderExtensions._wysiwygEditorToUpload[editorId];if(uploadWidgetId==
null)return null;var conversationId=uploaderExtensions._uploaderWidgetIdToConversationIds[uploadWidgetId];return conversationId},_wysiwygEditorToUpload:{},integrateWysiwygWithFileUpload:function(editorId,uploaderId,uploader){uploaderExtensions._wysiwygEditorToUpload[editorId]=uploaderId;var uploaderElement=uploaderExtensions._getUploaderHtmlElement(uploaderId);$(uploaderElement).bind("onUploadComplete",function(event,id,fileName,responseJSON){var editorInstance=tinyMCE.get(editorId);var wiki="[!"+
fileName+"!]";var mimeType=responseJSON.mimeType;if(mimeType&&mimeType.indexOf("image/")==0)if(editorInstance!=null){var downURL=responseJSON.url;var htmlInsert="<img src='"+downURL+"' alt='ALT_WIKI:"+escape(wiki)+"'></img>";var editorBody=editorInstance.getBody();$(editorBody).focus();editorInstance.execCommand("mceInsertContent",false,htmlInsert)}else{editor=$("#"+editorId);editor.focus();editor.replaceSelectedText(wiki)}});var editor=$("#"+editorId);fixIECaretLost.fixTextArea(editor);var container=
editor.closest(".ditch-tab-skin-cb-box");container.addClass("wysiwyg-with-upload qq-upload-overlaid");uploaderExtensions.autoHide(uploaderId,uploaderElement,editor);uploaderExtensions._initExternalDropZone(uploader,container);var useWysiwygAsDropZone=function(){$(container).find("iframe").contents().find("html").each(function(){var iframeHtml=this;uploaderExtensions._initExternalDropZone(uploader,iframeHtml)})};useWysiwygAsDropZone.call(this);$("#"+editorId).bind("afterSwitchToWysiwygMode",function(event){useWysiwygAsDropZone.call(this)})},
autoHide:function(uploaderId,uploaderElement,editor){if(uploaderElement){$(uploaderElement).addClass("qq-autohide");$(uploaderElement).hover(function(){$(this).addClass("qq-mouse-hovering");uploaderExtensions.scheduleUpdateVisuals(uploaderId,100)},function(){$(this).removeClass("qq-mouse-hovering");uploaderExtensions.scheduleUpdateVisuals(uploaderId)});var hideUploads=function(){uploaderExtensions.scheduleUpdateVisuals(uploaderId,100,true)};var $editorParent=$(editor).closest(".ditch-tab-pane-wrap");
$editorParent.bind("afterSwitchToWysiwygMode",function(event){var iframeHtml=$editorParent.find("iframe").contents().find("html");iframeHtml.hover(hideUploads);iframeHtml.focus(hideUploads)});$editorParent.hover(hideUploads);$editorParent.focus(hideUploads)}},_scheduledUpdate:{},scheduleUpdateVisuals:function(uploaderId,timeout,forceHideElements){var previousSchedule=uploaderExtensions._scheduledUpdate[uploaderId];if(previousSchedule)window.clearTimeout(previousSchedule);timeout=timeout||1E3;uploaderExtensions._scheduledUpdate[uploaderId]=
window.setTimeout(function(){uploaderExtensions._updateListOnChange(uploaderId,!forceHideElements);uploaderExtensions._hideUploadListIfEmpty(uploaderId)},timeout);uploaderExtensions._hideUploadListIfEmpty(uploaderId)},_hideUploadListIfEmpty:function(uploaderId){var uploaderElement=uploaderExtensions._getUploaderHtmlElement(uploaderId);$(uploaderElement).find(".qq-upload-list").each(function(){var listElems=$(this).find("li");var hasFiles=listElems&&listElems.length>0;$(this).toggleClass("qq-upload-list-has-files",
hasFiles);moveRelativePositionedElementToViewPort(this)})},_hideUploadingFiles:true,_showNumberOfHiddenFiles:function(uploaderElement,show){try{$(uploaderElement).find(".qq-numFiles").remove();if(show){var hiddenElements=$(uploaderElement).find(".qq-upload-list li:hidden");var visibleElements=$(uploaderElement).find(".qq-upload-list li:visible");var numHidden=hiddenElements.size();var numVisible=visibleElements.size();if(numHidden>0){var msg=numVisible==0?i18n.message("dndupload.numfiles.hidden",
numHidden):i18n.message("dndupload.numfiles.more.hidden",numHidden);if(uploaderExtensions._hideUploadingFiles){var uploadingElements=$(uploaderElement).find(".qq-upload-list li .qq-upload-spinner");var numUploading=uploadingElements.size();if(numUploading>0)msg="<img src='"+contextPath+"/images/loading.png' style='vertical-align:top; margin-right: 2px'></img>"+i18n.message("dndupload.some.files.are.uploading.hidden",numUploading,numHidden)}$(uploaderElement).find(".qq-upload-list").append("<li class='qq-numFiles'>"+
msg+"</li>")}}}catch(e){console.log("callback error in showNumberOfFiles()"+e)}},_updateListOnChange:function(uploaderId,mouseHovering){var uploaderElement=uploaderExtensions._getUploaderHtmlElement(uploaderId);if(uploaderElement&&uploaderElement.hasClass("qq-autohide")){var speed="fast";if(typeof mouseHovering==="undefined")mouseHovering=$(uploaderElement).hasClass("qq-mouse-hovering");uploaderExtensions._showNumberOfHiddenFiles(uploaderElement,!mouseHovering);var sel=uploaderExtensions._hideUploadingFiles?
"li":".qq-upload-success";$(uploaderElement).find(".qq-upload-list "+sel).each(function(){if(mouseHovering){$(this).show();uploaderExtensions._showNumberOfHiddenFiles(uploaderElement,false)}else $(this).hide(speed,function(){uploaderExtensions._showNumberOfHiddenFiles(uploaderElement,true)})})}},cancelAllUploads:function(){try{$(".qq-upload-cancel").each().click()}catch(ignored){}}};function versionsFilter(buttonHTMLId,menuHTMLId){this.init(buttonHTMLId,menuHTMLId)}
versionsFilter.prototype={_instances:new Object,init:function(buttonHTMLId,menuHTMLId){this.buttonHTMLId=buttonHTMLId;this.menuHTMLId=menuHTMLId;versionsFilter.prototype._instances[menuHTMLId]=this;var menuButton=new YAHOO.widget.Button(buttonHTMLId,{type:"menu",menu:menuHTMLId});this.menuButton=menuButton;var menu=menuButton.getMenu();this.menu=menu;menu.subscribe("render",function(event,args){this._setAllMenuItemChecked(menu,false);var items=menu.getItems();items[0].cfg.setProperty("checked",true)},
this,true);menu.subscribe("click",function(p_sType,p_aArgs){var oEvent=p_aArgs[0],oMenuItem=p_aArgs[1];if(oMenuItem)this._applyFilterForMenu(oMenuItem)},this,true)},findFilter:function(menuHTMLId){return versionsFilter.prototype._instances[menuHTMLId]},_applyFilterForMenu:function(oMenuItem){this._setAllMenuItemChecked(oMenuItem.parent,false);oMenuItem.cfg.setProperty("checked",true);var cssClass=oMenuItem.value;this._applyFilter(cssClass);var menuLabel=oMenuItem.cfg.getProperty("text");this._setFilterTitle(menuLabel)},
_setFilterTitle:function(filterTitle){var newTitle=i18n.message("cmdb.version.issues.filter.button");if(filterTitle!="All")newTitle+=" : "+filterTitle;this.menuButton.set("label",newTitle)},_applyFilter:function(cssClass){var versionBlock=$("#"+this.buttonHTMLId).parents("div.version");versionBlock.find("table.issuelist tr").each(function(i,el){var hide=false;if(!(cssClass==null||cssClass==""))hide=$(this).hasClass(cssClass)==false;$(this).css("display",hide?"none":"")})},_setAllMenuItemChecked:function(menu,
checked){var items=menu.getItems();for(var i=0;i<items.length;i++){var oMenuItem=items[i];oMenuItem.cfg.setProperty("checked",checked)}},applyFilter:function(){var checkedMenu=null;var items=this.menu.getItems();for(var i=0;i<items.length;i++)if(items[i].cfg.getProperty("checked"))checkedMenu=items[i];if(checkedMenu!=null)this._applyFilterForMenu(checkedMenu)}};var codebeamer=codebeamer||{};codebeamer.trackers=codebeamer.trackers||{};
codebeamer.trackers.cleanUpTinyMCE=function(){for(var i=0;i<tinyMCE.editors.length;i++)try{tinyMCE.remove(tinyMCE.editors[i])}catch(e){}tinyMCE.editors=[]};codebeamer.trackers.markSuspectedNodes=function(){try{var $suspNodes=$(".suspected-node");for(var i=0;i<$suspNodes.length;i++)$($($($suspNodes.get(i)).children("a")).children("ins")).append("<div style=\"margin-top:-16px;width:16px;height:16px;background-image:url('"+contextPath+"/images/suspected.gif');\"/>")}catch(e){}};
codebeamer.trackers.markUncoveredNodes=function(treePaneId){try{var $uncoveredNodes=$("#"+treePaneId+" .uncovered");for(var i=0;i<$uncoveredNodes.length;i++)$($($($uncoveredNodes.get(i)).children("a")).children("ins")).append("<div style=\"margin-top:-10px;margin-left:-2px;width:16px;height:16px;background-image:url('"+contextPath+"/images/uncovered.gif');\"/>")}catch(e){}};
codebeamer.trackers.copyTrackerItem=function(isTracker,trackerId,issueId,o){var rev="-1";if(o&&o.config.revision)rev=o.config.revision;$.ajax({"url":contextPath+"/trackers/ajax/copyToClipboard.spr","type":"POST","data":{"id":issueId,"isTracker":isTracker,"revision":rev,"tracker_id":trackerId},"success":function(data){codebeamer.trackers.clipboardEmpty=false;if(o)if(codebeamer.showAllIssues)o.reload("rightPane",false);else o.reloadSubissues("rightPane",false,null,$.jstree._focused().get_selected().attr("id"),
true)}})};codebeamer.trackers.addPaneOpenerButton=function(l,side){if(l)codebeamer.addOpenerButton(l,side)};
(function(){codebeamer.trackers.clipboardEmpty=true;codebeamer.trackers.Tracker=function(config){this.config=config;if(config.clipboardEmpty===false)codebeamer.trackers.clipboardEmpty=false};codebeamer.trackers.generateTreePopulator=function(projectId,trackerId,revision,onlyTopLevel,listViews){var fn=function(n){return{"project_id":projectId,"nodeId":n.attr?n.attr("id"):"","type":n.attr?n.attr("type"):"","tracker_id":trackerId,"revision":revision,"onlyTopLevel":onlyTopLevel,"listViews":listViews}};
return fn};function pasteBeforeOrAfter(node,where,s){var bs=ajaxBusyIndicator.showBusysign($("body")[0],i18n.message("ajax.loading"),false,{modal:true,context:[$("body")[0],"tl","tl",null,[500,10]]});var data={"id":node.attr("id"),"tracker_id":s.config.id,"isTracker":node.attr("type")==="tracker"};if(where)data["position"]=where;$.ajax({"url":s.config.contextPath+"/trackers/ajax/paste.spr","type":"POST","data":data,"success":function(data){if(data&&data["errorCode"])alert(i18n.message(data["errorCode"]));
else{codebeamer.trackers.clipboardEmpty=true;if(codebeamer.showAllIssues)s.reload("rightPane");else s.reloadSubissues("rightPane",true,null,$.jstree._focused().get_selected().attr("id"),true)}if(bs)bs.hide()}})}codebeamer.trackers.Tracker.prototype={init:function(){var self=this;this.reload=function(divId,refresh,callback,params){var url=self.config.docViewAjaxUrl;if(typeof refresh==="undefined")refresh=true;if(refresh){var leftTree=$.jstree._reference(self.config.treePaneId);leftTree.save_selected();
leftTree.save_opened();leftTree.save_loaded();leftTree.refresh()}var id="#"+divId;var contextPath=self.config.contextPath;$(id).empty();var p=$(id)[0];var busySign=ajaxBusyIndicator.showBusysign(p,i18n.message("ajax.loading"),false,{width:"12em",context:[p,"tl","tl",null,[$(id).width()>0?($(id).width()-12)/2:200,10]]});var urlData={"tracker_id":self.config.id,"view_id":self.config.selectedView,"revision":self.config.revision};if(params)$.extend(urlData,params);$.ajax({"url":contextPath+url,"type":"GET",
"data":urlData,"success":function(data){var p=$(id);if(busySign)busySign.hide();var opener=$("#opener-container");p.html("<div>"+data+"</div>");p.find(".yuimenubar").each(function(){initPopupMenu($(this).attr("id"),{})});setTimeout(initializeJSPWikiScripts,300);var t=$.jstree._reference(self.config.treePaneId);if(t){var sel=t.get_selected();if(sel){t.deselect_all();for(var k=0;k<sel.length;k++){var p=$("li[id="+$(sel[k]).attr("id")+"]");t.select_node(p);if(k==0)tree.config.selected(p,t)}}}opener.prependTo(p);
var l=$("#panes").layout();codebeamer.trackers.addPaneOpenerButton(l,"west");codebeamer.trackers.addPaneOpenerButton(l,"east");$(".requirementTr").click(function(){var idToLoad=$(this).attr("id");trackerObject.showIssueProperties(idToLoad,self.config.id,$("#issuePropertiesPane"),true)});codebeamer.trackers.cleanUpTinyMCE();if(callback)callback()},"error":function(data){if(busySign)busySign.hide()},"cache":false});if(refresh){self._clearSearchBox();var focused=$.jstree._reference(self.config.treePaneId);
focused.save_selected();focused.save_opened();focused.save_loaded();focused.refresh()}};this._clearSearchBox=function(){var $s=$("#searchBox");if($s.size()>0){$s.blur();$s.val("");$s.Watermark(i18n.message("association.search.as.you.type.label"),"#d1d1d1")}};this.reloadSubissues=function(paneId,refreshTree,callback,issueId,forceReload){if(issueId){if(forceReload===true||$("#rightPane #subtreeRoot").val()!==issueId)self.reload(paneId,refreshTree,callback,{"issue_id":issueId})}else if(forceReload===
true||$("#rightPane #subtreeRoot").val()!="")self.reload(paneId,refreshTree)};this.addRequirement=function(oldNode,position,isFolder){var nodeType="tracker_item";if(isFolder)nodeType="folder";if(!oldNode||oldNode.size()==0){alert(i18n.message("tracker.tree.concurrent.modification.alert"));return}var trackerId=oldNode.attr("trackerid");$("#"+self.config.treePaneId).jstree("clear_search");var $s=$("#searchBox");if($s.size()>0){$s.val("");$s.Watermark(i18n.message("association.search.as.you.type.label"),
"#d1d1d1")}var newNodeName=isFolder?i18n.message("tracker.view.layout.document.new.folder"):self.config.newRequirementName;var n=$("#"+self.config.treePaneId).jstree("create",oldNode,position,{"attr":{"id":"0","type":nodeType,"trackerid":self.config.id},"data":newNodeName},function($newNode){var $parentIcon=oldNode.find("a .jstree-icon");if(!isFolder){var r=$($($("[type=tracker] > a > .jstree-icon")[0]));if(r)$parentIcon=r}var $thisIcon=$newNode.find("a .jstree-icon");$thisIcon.attr("style",$parentIcon.attr("style"))},
false);$.jstree._reference(self.config.treePaneId)._fix_scroll(n)};this.addTopLevelRequirement=function(){var t=$.jstree._reference(self.config.treePaneId);var root=$("#"+self.config.treePaneId+" ul:first li:first");var selected=t.get_selected();if(selected.length==1){var s=$(selected[0]);if(s.attr("trackerid")==self.config.id)root=s}self.addRequirement(root,"last")};this.addChildRequirement=function(node){self.addRequirement(node,"last")};this.addRequirementBefore=function(node){self.addRequirement(node,
"before")};this.addRequirementAfter=function(node){self.addRequirement(node,"after")};this.onRequirementAdded=function(e,data_){var $node=$("#"+self.config.treePaneId+" li#0");var trackerId=$node.attr("trackerid");var $p=$node.closest("li[id != '0']");var parentId=$p.attr("type")=="tracker"?"-1":$p.attr("id");var referenceId=data_.args[0].attr("id");var position=data_.args[1];var name=data_.rslt.name;var newNodeName=$node.attr("type")==="folder"?i18n.message("tracker.view.layout.document.new.folder"):
self.config.newRequirementName;if(name==newNodeName){$("#"+self.config.treePaneId).jstree("remove",$node);return}var data={_method:"post","tracker.id":trackerId,"parent.id":parentId,"reference.id":referenceId,"position":position,"name":name,"type":$node.attr("type")};$.ajax({type:"post",url:self.config.contextPath+"/requirement-tracker/"+trackerId+"/create",data:data,dataType:"json",success:function(data){$node.attr("id",data.requirement.id);$node.attr("title",name);self._loadNewRequirement(data);
self.showIssueProperties(data.requirement.id,trackerId,$("#issuePropertiesPane"),true)},error:function(xhr,textStatus,errorThrown){alert("Error: "+textStatus+" - "+errorThrown)}})};this.onNodeRenamed=function(e,d){var data={"name":d.rslt.new_name,"issue_id":d.rslt.obj.attr("id")};$.ajax({type:"post",url:contextPath+"/requirement/"+d.rslt.obj.attr("id")+"/rename",data:data,dataType:"json",success:function(data_){if(self.config.id==d.rslt.obj.attr("trackerid"))self.reload("rightPane",false)},error:function(jqXHR,
textStatus,errorThrown){}})};this._loadNewRequirement=function(data){var id=data.requirement.id;var urlData={"tracker_id":self.config.id,"view_id":self.config.selectedView,"revision":self.config.revision,"issue_id":id};$.ajax({"url":contextPath+self.config.docViewAjaxUrl,"type":"GET","data":urlData,"success":function(d){var $newRequirement=$(d).find("#"+id);var $parent=null;if(data.precedingId==-1)$("#requirements").prepend($newRequirement);else{$parent=$("#"+data.precedingId+".requirementTr");$parent.after($newRequirement)}addEditor($newRequirement.find(".name .editable"),
onNameOpen,onNameSubmit,onNameSubmitted);addEditor($newRequirement.find(".description .editable"),onDescriptionOpen,onDescriptionSubmit,onDescriptionSubmitted);addExpander($newRequirement.find(".expander"));$newRequirement.find(".yuimenubar").each(function(){initPopupMenu($(this).attr("id"),{})});$.each(data.changedParagraphs,function(key,value){$parent=$("#"+key+".requirementTr .releaseid").html(value)});$("#centerDiv").animate({"scrollTop":$newRequirement.offset().top-$("#rightPane").offset().top+
$("#rightPane").scrollTop()});flashChanged($newRequirement);addExpanderHandlerForElements($newRequirement.find(".testStepContainer"));addAttachmentExpanderHandlersForElements($newRequirement.find(".attachmentsContainer"));$("#"+self.config.treePaneId).jstree("deselect_all");$("#"+self.config.treePaneId).jstree("select_node",$("li[id="+id+"]"));$("#"+self.config.treePaneId).jstree("refresh")}})};this.deleteRequirement=function(node){showFancyConfirmDialogWithCallbacks(i18n.message("tracker.delete.item.confirm",
node.attr("title")),function(){var requirementId=node.attr("id");$.ajax({type:"delete",url:self.config.contextPath+"/proj/tracker/deleterequirement.spr?task_id="+requirementId,success:function(){if(codebeamer.showAllIssues)self.reload("rightPane");else{var t=$.jstree._reference(self.config.treePaneId);if(t){t.deselect_node(node);self.reloadSubissues("rightPane",true,null,t.get_selected().attr("id"),true)}}var r=$.jstree._reference("releaseTreepane");if(r)r.refresh()},error:function(xhr,textStatus,
errorThrown){alert("Error: "+textStatus+" - "+errorThrown)}})})};this.removeTestCase=function(node){showFancyConfirmDialogWithCallbacks(i18n.message("tracker.remove.test.case.from.requirement.confirm",node.attr("title")),function(){var p=$.jstree._reference(self.config.treePaneId)._get_parent(node);$.ajax({"url":contextPath+"/trackers/ajax/removeTestCase.spr","type":"POST","data":{"requirementId":p.attr("id"),"testCaseId":node.attr("id"),"tracker_id":self.config.id},"success":function(data){$.jstree._reference(self.config.treePaneId).refresh()}})})};
this.nodeClicked=function(node,tree){var id=node.attr("id");var $documentRow=$("tr[id="+id+"]");if($documentRow.size()==1){self.showIssueProperties(id,self.config.id,$("#issuePropertiesPane"),true);$("#rightPane").animate({"scrollTop":$documentRow.offset().top-$("#rightPane").offset().top+$("#rightPane").scrollTop()});return}if(node.attr("trackerid")===self.config.id)self.showIssueProperties(id,node.attr("trackerid"),$("#issuePropertiesPane"),trackerObject.config.revision.length==0);else $("#issuePropertiesPane").empty();
if(node.attr("trackerid")===self.config.id){if(codebeamer.showAllIssues){if(!codebeamer.treeLoaded){self.reload("rightPane");codebeamer.treeLoaded=true}return}var selectNode=function(){var nodeType=node.attr("type");var selectedNodeCount=tree.get_selected().size();if(selectedNodeCount==1)self.reloadSubissues("rightPane",false,null,nodeType==="tracker_item"||nodeType==="folder"?id:null)};if(self._isEdited()&&$("#rightPane #subtreeRoot").val()!==id&&tree.get_selected().size()==1)showFancyConfirmDialogWithCallbacks(i18n.message("tacker.view.layout.document.navigate.from.subtree.confirm"),
selectNode);else selectNode()}};this.showIssueProperties=function(id,trackerId,$target,editable){if($target.data("showingIssue")==id)return;var p=$target[0];var busySign=ajaxBusyIndicator.showBusysign(p,i18n.message("ajax.loading"),false,{width:"12em",context:[p,"tl","tl",null,[$target.width()>0?($target.width()-12)/2:200,10]]});$.ajax({"url":contextPath+"/trackers/ajax/getIssueProperties.spr","type":"GET","data":{"issue_id":id,"editable":editable},"success":function(data){if(busySign)busySign.hide();
$target.html(data);initializeAutocomplete(id,"docViewChoiceField-31",trackerId,$("#field-31-multiselect").val(),"31","currentVersionIds","currentVersionNames");initializeAutocomplete(id,"docViewChoiceField-13",trackerId,$("#field-13-multiselect").val(),"13","currentTypeIds","currentTypeNames");initYUIMenus($("#issuePropertiesPane"));addSuspectLinkClearers($("#issuePropertiesPane .suspect img"));$target.data("showingIssue",id);self["loadedProperty"]=id;$("#accordion").accordion("resize")},"error":function(data){if(busySign)busySign.hide()},
"cache":false})};this.populateContextMenu=function(node){if(self.config.id==node.attr("trackerid"))if(self.config.editable){var elements={};if((node.attr("type")==="folder"||node.attr("type")==="tracker")&&self.config.canCreateIssue)elements["newFolder"]={"label":i18n.message("tracker.view.layout.document.new.folder"),"action":function(node){self.addRequirement(node,"last",true)}};if(node.attr("type")=="tracker_item"||node.attr("type")=="folder"){if(self.config.canCreateIssue){elements["newChild"]=
{"label":i18n.message("issue.newChild.label"),"action":self.addChildRequirement};if(node.attr("type")!=="folder"){elements["insertBefore"]={"label":i18n.message("tracker.view.layout.document.paragraph.before.label"),"action":self.addRequirementBefore};elements["insertAfter"]={"label":i18n.message("tracker.view.layout.document.paragraph.after.label"),"separator_after":!self.config.isRequirementTracker||!self.config.canCreateTestCase,"action":self.addRequirementAfter}}if(self.config.isRequirementTracker&&
self.config.canCreateTestCase)elements["generateTestCase"]={"label":i18n.message("tracker.view.layout.document.generate.test.case"),"action":function(node){var bs=ajaxBusyIndicator.showBusysign($("body")[0],i18n.message("ajax.loading"),false,{modal:true,context:[$("body")[0],"tl","tl",null,[500,10]]});var ids=[];var selected=$.jstree._reference(self.config.treePaneId).get_selected();if(selected.length>0)for(var i=0;i<selected.length;i++)ids.push(selected[i].id);else ids=[node.attr("id")];$.ajax({"url":contextPath+
"/trackers/ajax/generateTestCase.spr","type":"POST","data":{"issue_id":ids.join(",")},"success":function(data){if(bs)bs.hide();$.jstree._reference(self.config.treePaneId).refresh();$.jstree._reference("testTreePane").refresh();showOverlayMessage(i18n.message("tracker.view.layout.document.generate.test.case.success.message"))},"error":function(data){if(bs)bs.hide()}})},"separator_after":true}}if(self.config.canDeleteIssue)elements["delete"]={"label":i18n.message("action.delete.label"),"separator_after":true,
"action":self.deleteRequirement};if(node.attr("type")==="tracker_item")elements["addAssociation"]={"label":i18n.message("association.add.label"),"action":function(node){showPopupInline(self.config.contextPath+"/proj/tracker/addAssociation.do?inline=true&from_type_id=9&from_id="+node.attr("id")+"&tracker_id="+self.config.id+"&proj_id="+self.config.projectId,{"height":"500px"});return false}};elements["copy"]={}}elements["copy"]={"label":i18n.message("action.copy.label"),"action":function(node){codebeamer.trackers.copyTrackerItem(node.attr("type")===
"tracker",self.config.id,node.attr("id"),self)}};if(!codebeamer.trackers.clipboardEmpty&&self.config.canCreateIssue){elements["paste"]={"label":i18n.message("tracker.view.layout.document.paste.child.label"),"action":function(node){pasteBeforeOrAfter(node,null,self)}};if(node.attr("type")=="tracker_item"){elements["pasteBefore"]={"label":i18n.message("tracker.view.layout.document.paste.before.label"),"action":function(node){pasteBeforeOrAfter(node,"before",self)}};elements["pasteAfter"]={"label":i18n.message("tracker.view.layout.document.paste.after.label"),
"action":function(node){pasteBeforeOrAfter(node,"after",self)}}}}return elements}else{var elements={};if(node.attr("type")==="tracker_item")elements["copy"]={"label":i18n.message("action.copy.label"),"action":function(node){codebeamer.trackers.copyTrackerItem(node.attr("type")==="tracker",self.config.id,node.attr("id"),self)}};return elements}else{var menu={"showDetails":{"label":i18n.message("issue.details.view.label"),"action":function(node){location.href=contextPath+"/tracker/"+node.attr("trackerid")+
"?view_id=-11&mode=edit&issueId="+node.attr("id")}}};if(self.config.canEditTestcases)menu["removeTestCase"]={"label":i18n.message("tracker.view.layout.document.remove.test"),"action":self.removeTestCase};return menu}};this.nodeMoved=function(o,np,position,r,isCopy){var ids=[];for(var i=0;i<o.length;i++)ids.push(o[i].id);var referenceNodeId=r.attr("id");if(r.attr("type")=="tracker")referenceNodeId="";var data={"newParentId":np.attr("type")=="tracker"?-1:np.attr("id"),"trackerItemIds":ids.join(","),
"tracker_id":o.attr("trackerId"),"position":position,"referenceNodeId":referenceNodeId};var url=contextPath+"/trackers/ajax/moveTrackerItem.spr";var bs=null;if(isCopy){bs=ajaxBusyIndicator.showBusysign($("body")[0],i18n.message("ajax.loading"),false,{modal:true,context:[$("body")[0],"tl","tl",null,[500,10]]});url=contextPath+"/trackers/ajax/linkTestCase.spr"}$.ajax({"url":url,"type":"POST","data":data,"success":function(data){if(bs!=null)bs.hide();if(!isCopy)self.reload("rightPane");else $.jstree._reference(self.config.treePaneId).refresh();
if(codebeamer.showAllIssues)self.reload("rightPane");else{$.jstree._focused().refresh();$("#rightPane #subtreeRoot").val("");if(o.size()==1){self._clearSearchBox();$.jstree._focused().select_node(o);var $documentRow=$("tr[id="+o.attr("id")+"]");if($documentRow&&$documentRow.size()>0)self.reloadSubissues("rightPane",false,null,o.attr("id"),true)}else{$.jstree._focused().select_node(o);self.reloadSubissues("rightPane",false,null,o.attr("id"),true)}}}})};this.checkMove=function(np,o,op,oldTree,isCopy){if(!op||
!np||np===-1)return false;if(!isCopy&&o.attr("type")==="folder"&&np.attr("type")=="tracker_item")return false;if(isCopy){if(np.attr("trackerid")===op.attr("trackerid"))return false;if(o.attr("type")=="tracker")return false;if(np==-1||np.attr("type")!=="tracker_item")return false}else if(self.config.id!==o.attr("trackerid"))return false;return true};this.externalDrop=function(node,$target){var ids=[];for(var i=0;i<node.length;i++)ids.push(node[i].id);var targetId=$target.closest("tr.requirementTr").attr("id");
$.ajax({"url":self.config.contextPath+"/trackers/ajax/addReferences.spr","type":"POST","data":{"trackerItemId":targetId,"referringIds":ids.join(",")},"success":function(data){if(codebeamer.showAllIssues)self.reload("rightPane");else self.reloadSubissues("rightPane",false,null,node.attr("id"))}})};this.checkExternalDrop=function(node,$target){if($target.attr("type")=="tracker")return false;var nodeId=node.attr("id");var targetId=$target.closest("tr").attr("id");if(nodeId==targetId)return false;return true};
this._isEdited=function(){return $("#rightPane .edited").size()>0}}}})();var testCaseCheckExternalDrop=function(node,$target){return false};var tectCaseCheckMove=function(){return false};var releaseCheckMove=function(np,o,op,oldTree,isCopy){if(!op||!np||np===-1||np.attr("type")==="tracker"||np===op)return false;if(np.attr("trackerid")!==codebeamer.defaultReleaseTrackerId)return false;return true};
var releaseNodeMoved=function(o,np,position,r,isCopy,rslt){var ids=[];for(var i=0;i<o.length;i++)ids.push(o[i].id);var $parent=rslt.op;if(isCopy||$parent.attr("id")!==np.attr("id"))$.ajax({"url":contextPath+"/trackers/ajax/addToVersion.spr","type":"POST","data":{"targetVersionId":np.attr("id"),"trackerItemIds":ids.join(","),"tracker_id":o.attr("trackerId"),"releasesFor":trackerObject.config.id,"oldRelease":$parent.attr("id")},"success":function(data){$.jstree._reference("releaseTreePane").refresh()}});
else{var referenceNodeId=r.attr("id");if(position==="last"){position="after";referenceNodeId=$parent.children().last().attr("id")}else if(position==="first"){position="first";referenceNodeId=$parent.children().first().attr("id")}var data={"newParentId":np.attr("id"),"trackerItemIds":ids.join(","),"tracker_id":o.attr("trackerId"),"position":position,"referenceNodeId":referenceNodeId,"release":$parent.attr("id"),"releasesFor":trackerObject.config.id};var url=contextPath+"/trackers/ajax/moveWithinRelease.spr";
$.ajax({"url":url,"type":"POST","data":data,"success":function(data){$.jstree._reference("releaseTreePane").refresh()}})}};
var releaseTreeContextMenu=function(node){var elements={};if(node.attr("trackerid")!==codebeamer.defaultReleaseTrackerId){var p=$.jstree._reference("releaseTreePane")._get_parent(node);elements["remove"]={"label":i18n.message("tracker.view.layout.document.remove.from.release"),"action":function(node){$.ajax({"url":contextPath+"/trackers/ajax/removeFromVersion.spr","type":"POST","data":{"targetVersionId":p.attr("id"),"issue_id":node.attr("id"),"tracker_id":node.attr("trackerId"),"releasesFor":trackerObject.config.id},
"success":function(data){$.jstree._reference("releaseTreePane").refresh()}})}}}else{elements["newChild"]={"label":i18n.message("issue.newChild.label"),"action":addNewRelease};if(node.attr("type")!="tracker"){elements["rename"]={"label":i18n.message("action.rename.label"),action:function(n){$.jstree._reference("releaseTreePane").rename(n)}};elements["coverageBrowser"]={"label":i18n.message("tracker.show.in.coverage.browser.label"),"separator_before":true,"action":function(n){location.href=contextPath+
"/trackers/coverage/coverage.spr?tracker_id="+trackerObject.config.id+"&releaseId="+n.attr("id")}}}}return elements};
var addNewRelease=function(node){var trackerId=node.attr("trackerid");$("#releaseTreePane").jstree("create",node,"last",{"attr":{"id":"0","type":"tracker_item","trackerid":trackerId},"data":{"title":i18n.message("tracker.type.Version.create.label"),"icon":contextPath+"/images/issuetypes/version.gif"}},function($newNode){var $parentIcon=$newNode.parent().siblings("a").children(".jstree-icon");var $thisIcon=$newNode.find("a .jstree-icon");$thisIcon.attr("style",$parentIcon.attr("style"))},false)};
var newReleaseAdded=function(e,data_){var $node=$("#releaseTreePane li#0");var trackerId=$node.attr("trackerid");var p=$node.closest("li[id != '0']");var parentType=p.attr("type");var parentId=parentType==="tracker"?"-1":p.attr("id");var referenceId=data_.args[0].attr("id");var position=data_.args[1];var name=data_.rslt.name;if(name==i18n.message("tracker.type.Version.create.label")){$("#releaseTreePane").jstree("remove",$node);return}var data={"tracker.id":trackerId,"parent.id":parentId,"reference.id":referenceId,
"position":position,"name":name,"type":$node.attr("type")};$.ajax({type:"post",url:contextPath+"/release-tracker/"+trackerId+"/create",data:data,dataType:"json",success:function(data){$node.attr("id",data.requirement.id);$node.attr("title",name)},error:function(xhr,textStatus,errorThrown){alert("Error: "+textStatus+" - "+errorThrown)}})};
function initializeAutocomplete(itemId,htmlId,trackerId,multiSelect,labelId,idsField,namesField){try{var referencesForLabel=$("#referencesForLabel_"+htmlId);var oac=ajaxReferenceFieldAutoComplete.init(contextPath,"dynamicChoice_references_autocomplete_editor_"+htmlId,"dynamicChoice_references_autocomplete_container_"+htmlId,"tracker_id="+trackerId+"&labelId="+labelId+"&forceMultiSelect=false&optionNameKey=true&emptyValue=&htmlId="+htmlId+"&fieldName=fieldReferenceData%5B75_31%5D",referencesForLabel,
"dynamicChoice_references_"+htmlId,multiSelect=="true"?true:false,false,"emptyBox-"+htmlId,"--",ajaxReferenceFieldAutoComplete.removeDoNotModifyBox);oac.multiboxPanel.removeAllBoxes();if(namesField){var names=$("#"+namesField).val().split(",");var ids=$("#"+idsField).val().split(",");if(names.length>0)for(var i=0;i<names.length;i++)if(names[i]!==""){var b=oac.multiboxPanel.addBox(names[i]);b.setAttribute("refId",ids[i])}}}catch(e){}}
function initYUIMenus(parentElement){$(parentElement).find(".yuimenubar").each(function(){initPopupMenu($(this).attr("id"),{})})}
function addSuspectLinkClearers($clearer,callback){$clearer.each(function(){$(this).click(function(e){var self=this;showFancyConfirmDialogWithCallbacks(i18n.message("tracker.view.layout.document.reference.clear.confirm"),function(){var $span=$(self).closest("span[id]");var spanId=$span.attr("id");var ids=spanId.split("-");var taskId=ids[1];var targetTaskId=ids[2];if(!callback)self["callback"]=function(data){var outgoingTablets=$("span[name=suspect-"+taskId+"-"+targetTaskId+"]");var incomingTablets=
$("span[name=suspect-"+targetTaskId+"-"+taskId+"]");if(outgoingTablets)outgoingTablets.hide("slow",function(){$(this).remove()});if(incomingTablets)incomingTablets.hide("slow",function(){$(this).remove()});var t=$.jstree._reference("#treePane");if(t)t.refresh()};else self["callback"]=callback;$.ajax({type:"delete",url:contextPath+"/proj/tracker/clearsuspectedlink.spr?task_id="+taskId+"&target_task_id="+targetTaskId,dataType:"html",success:self["callback"],error:function(jqXHR,textStatus,errorThrown){alert("Error: "+
textStatus+" - "+errorThrown)}})})})})}
function showWYSIVYGEditor(formControl){var editorInstance=tinyMCE.get(formControl);if(editorInstance!=null)return;var $control=$("#"+formControl);$control.show();hidePreview(formControl);$control.attr("oldValue",$control.val());var editorWIKIText=$control.val();var editorHTMLText=toHtml(editorWIKIText,formControl);var cbcreaterelatedissuePluginText="cbcreaterelatedissue,";var cbcreaterelatedissueControlText=",mceCodeBeamerCreateRelatedIssue,|";var projectId=$control.first().attr("cbProjectID");if(!projectId||
projectId==""){cbcreaterelatedissuePluginText="";cbcreaterelatedissueControlText=""}var autoresizeplugintext="autoresize,";var useAutoResize=$control.first().attr("useAutoResize");if(useAutoResize&&useAutoResize=="false")autoresizeplugintext="";var cbEntityTypeID=$control.first().attr("cbEntityTypeID");var cbEntityID=$control.first().attr("cbEntityID");var cbimagecontroltext="";if(cbEntityTypeID&&cbEntityID&&cbEntityTypeID=="5")cbimagecontroltext="mceCodeBeamerImage,";var pluginsList="preview,fullscreen,paste,searchreplace,cbmonospaced,cbimage,cbwikitableofcontents,table,"+
autoresizeplugintext+"cbwikihistorylink,"+cbcreaterelatedissuePluginText;var buttons1List="bold,italic,underline,strikethrough,|,formatselect,|,pastetext,pasteword,|"+cbcreaterelatedissueControlText+",table,delete_col,delete_row,col_after,col_before,row_after,row_before";var buttons2List="search,replace,|,cut,copy,paste,|,undo,redo,|,bullist,numlist,|,outdent,indent,|,link,unlink,mceCodeBeamerWikiHistoryLink,mceCodeBeamerWikiTableOfContents,image,"+cbimagecontroltext+"|,forecolor,backcolor,removeformat,|,fullscreen";
var focusedElement="";var shouldFocus=$control.first().attr("shouldFocus");if(shouldFocus&&shouldFocus=="true")focusedElement=formControl;var manualResize=$control.first().attr("manualResize")=="true";tinyMCE.init({mode:"exact",body_class:formControl+"=newskin",elements:formControl,auto_focus:focusedElement,autoresize_bottom_margin:10,gecko_spellcheck:true,plugins:pluginsList,relative_urls:false,remove_script_host:false,theme:"advanced",theme_advanced_buttons1:buttons1List,theme_advanced_buttons2:buttons2List,
theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:manualResize?"bottom":"none",theme_advanced_resizing:manualResize,theme_advanced_resize_horizontal:false,theme_advanced_path:false,theme_advanced_blockformats:"p,pre,h1,h2,h3,h4,h5",width:"100%",fix_table_elements:false,forced_root_block:false,convert_fonts_to_spans:false,convert_newlines_to_brs:true,remove_linebreaks:true,paste_auto_cleanup_on_paste:true,paste_text_linebreaktype:"br",
paste_remove_spans:true,paste_retain_style_properties:"",paste_remove_styles:true,paste_remove_styles_if_webkit:true,paste_strip_class_attributes:"all",paste_convert_middot_lists:true,paste_preprocess:function(pl,o){o.content=o.content.replace(/<(\/?)h[156].*?>/gi,"<$1b>");o.content=o.content.replace(/<(\/?)h([234]).*?>/gi,"<$1h$2>");o.content=o.content.replace(/<\/?u(?!l).*?>/gi,"");o.content=o.content.replace(/<div(.*?)>(.*?)<\/div>/gi,"<p$1>$2</p>");o.content=o.content.replace(/(.*?)<br\s?\/?>/gi,
"<p>$1</p>")},paste_postprocess:function(pl,o){try{var pastedText=o.node.innerHTML;if(!pastedText)return;pastedText=pastedText.trim();var testText=pastedText.replace(/<a([^>]+)>(.+?)<\/a>/,"");if(testText!="")return;var textAtCursor=pl.editor.selection.getNode().innerHTML.trim();if(!textAtCursor||textAtCursor.length==0)return;textAtCursor=textAtCursor.replace(/&nbsp;/g,"");textAtCursor=textAtCursor.trim();var cursorLastChar=textAtCursor.substring(textAtCursor.length-1);if(cursorLastChar!="["&&cursorLastChar!=
"|")return;pastedText=pastedText.substring(pastedText.indexOf('href="')+6);pastedText=pastedText.substring(0,pastedText.indexOf('"'));o.node.innerHTML=pastedText}catch(e){}},extended_valid_elements:"tt,nln,wikicode,pre,table,td,tr,th,h1,h2,h3,h4,h5,p,hr,sup,sub",invalid_elements:"colgroup,col,font,center",entity_encoding:"raw",content_css:contextPath+"/js/wysiwyg/customContent.css,"+contextPath+"/wro/newskin.css",setup:function(editor){editor.onPostRender.add(function(editor,cm){editor.setContent(editorHTMLText);
$control.val(editorHTMLText);$control.trigger("afterSwitchToWysiwygMode",[$control]);fixIECaretLost.fixTinyMCE(editor)})}})}
var fixIECaretLost={fixTinyMCE:function(editor){if(tinyMCE.isIE){var $editorBody=$(editor.getBody());var IE_PREVIOUS_SELECTION="IEpreviousSelection";$editorBody.bind("beforedeactivate",function(){var bookmark=editor.selection.getBookmark();$(editor).data(IE_PREVIOUS_SELECTION,bookmark)});$editorBody.bind("focus",function(){var bookmark=$(editor).data(IE_PREVIOUS_SELECTION);if(bookmark!=null){editor.selection.moveToBookmark(bookmark);$(editor).data(IE_PREVIOUS_SELECTION,null);$(editor.getBody()).find("span[data-mce-type=bookmark]").remove()}})}},
fixTextArea:function(textArea){if(tinyMCE.isIE){var $element=$(textArea);var IE_PREVIOUS_SELECTION="IEpreviousSelection";$element.bind("beforedeactivate",function(){try{var sel=$element.getSelection();$element.data(IE_PREVIOUS_SELECTION,sel)}catch(e){console.log("fixIECaretLostForTextArea() error:"+e)}});$element.bind("focus",function(){var lastSelection=$element.data(IE_PREVIOUS_SELECTION);if(lastSelection){$element.setSelection(lastSelection.start,lastSelection.end);$element.data(IE_PREVIOUS_SELECTION,
null)}});$element.css("display","block")}}};function focusWYSIVYGEditor(formControl){}
function showMarkupEditor(formControl){$("#"+formControl).show();hidePreview(formControl);var editorInstance=tinyMCE.get(formControl);if(editorInstance!=null){var editorWIKIText="";if(editorInstance.isDirty()){editorInstance.save();var editorHTMLText=$("#"+formControl).val();editorWIKIText=toWiki(editorHTMLText)}else editorWIKIText=$("#"+formControl).attr("oldValue");tinyMCE.execCommand("mceRemoveControl",true,formControl);$("#"+formControl).val(editorWIKIText)}$("#"+formControl).trigger("change")}
function focusMarkupEditor(formControl){document.getElementById(formControl).focus()}
var cbwiki=cbwiki||{_editorToEntityRefrences:{},bindEditorToEntity:function(editorId,entityId){cbwiki._editorToEntityRefrences[editorId]=entityId},getEditorsEntityReference:function(editorId){return cbwiki._editorToEntityRefrences[editorId]},convertWikiToHtml:function(wiki,ajaxArgs,entityRef,conversationId,$previewEl){var preview_url=contextPath+"/wysiwyg/wikipreview.spr";preview_url+="?entityRef="+(entityRef||null);if(conversationId)preview_url+="&conversationId="+conversationId;try{var mergedArgs=
$.extend({},{type:"POST",cache:false,url:preview_url,data:{"content":wiki},dataType:"json",error:function(jqXHR,textStatus,errorThrown){if($previewEl){$previewEl.css("height","");$previewEl.html("<div class='error'>"+errorThrown+"</div>")}console.log("Failed to get wiki preview, error: "+errorThrown)}},ajaxArgs);$.ajax(mergedArgs)}catch(e){console.log("Preview failed:"+e)}},showPreview:function(editorId){var formControl=editorId;var entityRef=cbwiki.getEditorsEntityReference(editorId);var editorInstance=
tinyMCE.get(formControl);if(editorInstance!=null)showMarkupEditor(formControl);var $formControl=$("#"+formControl);var content=$formControl.val();var busySignHTML=ajaxBusyIndicator.getBusysignHTML("",false);var $previewEl=$("#"+editorId+"-preview");$previewEl.addClass("editorPreviewContainer");var previewLoadingHeight=$formControl.height();$previewEl.css("height",previewLoadingHeight+"px");$previewEl.html("<div style='text-align: center;'>"+busySignHTML+"</div>");$previewEl.show();$formControl.hide();
if(content&&content!=null&&content!=""){content=$.trim(content);$formControl.val(content);content=accentsToEntities(content);var conversationId=uploaderExtensions.getUploadConversationIdForWysiwygEditor(editorId);cbwiki.convertWikiToHtml(content,{success:function(data_){try{$previewEl.css("height","");$previewEl.html("<div class='editorPreviewContent'>"+data_.content+"</div>")}catch(ex){console.log("Failed to insert preview:"+ex)}$previewEl.show();initializeJSPWikiScripts()}},entityRef,conversationId,
$previewEl)}else $previewEl.empty()},setDefaultEditorMode:function(formControl,callback){var editorInstance=tinyMCE.get(formControl);var mode=editorInstance!=null?"wysiwyg":"markup";var shouldSet=confirm(i18n.message("wiki.wysiwyg.set.default.mode",mode));if(!shouldSet)return;$.ajax({type:"post",url:contextPath+"/wysiwyg/setDefaultEditingMode.spr?mode="+mode,dataType:"json",success:function(data_){if(data_.success==true)console.log("setDefaultEditorMode set to "+mode);else console.log("Failed to set editing mode");
if(callback)callback(mode)},error:function(jqXHR,textStatus,errorThrown){var errmsg=i18n.message("wiki.wysiwyg.failed.to.set.default.mode",textStatus);alert(errmsg);console.log(errmsg)}})},initI18n:function(){if(cbwiki.i18nInitialized)return;cbwiki.i18nInitialized=true;try{var tinyMCE_lang=language;if(country&&country!="")tinyMCE_lang+="_"+country.toLowerCase()}catch(e){console.log("Failed to initialize i18n for wysiwyg editor:"+e)}},getEditorWikiText:function(editorId){var editorWIKIText="";var editorInstance=
tinyMCE.get(editorId);if(editorInstance!=null)if(editorInstance.isDirty()){editorInstance.save();var editorHTMLText=$("#"+editorId).val();editorWIKIText=toWiki(editorHTMLText)}else editorWIKIText=$("#"+editorId).attr("oldValue");else editorWIKIText=$("#"+editorId).val();return editorWIKIText},setEditorWikiText:function(editorId,wikiText){$("#"+editorId).val(wikiText).attr("oldValue",wikiText);var editorInstance=tinyMCE.get(editorId);if(editorInstance!=null){var htmlContent=toHtml(wikiText);editorInstance.setContent(htmlContent)}}};
function hidePreview(formControl){$("#"+formControl+"-preview").html("").hide()}function setContentToWiki(formControl){var editorInstance=tinyMCE.get(formControl);if(editorInstance!=null){editorInstance.save();tinyMCE.execCommand("mceRemoveControl",true,formControl);var editorHTMLText=$("#"+formControl).val();var editorWIKIText=toWiki(editorHTMLText);$("#"+formControl).val(editorWIKIText)}}
function inplaceDefaultWikiTabListener(evt,containerId,formControl){var tab=evt.getTab();if(tab.id==containerId+"-wysiwyg-tab"){showWYSIVYGEditor(formControl);focusWYSIVYGEditor(formControl);showHideLink("wysiwyg")}else if(tab.id==containerId+"-markup-tab"){showHideLink("markup");showMarkupEditor(formControl);focusMarkupEditor(formControl)}else if(tab.id==containerId+"-preview-tab"){cbwiki.showPreview(formControl);$("#editorModeLink").attr("style","visibility:hidden")}}
function showHideLink(mode){if(codebeamer.selectedMode===mode)$("#editorModeLink").attr("style","visibility:hidden");else $("#editorModeLink").attr("style","visibility:visible")}
function checkInputFormat(elem,tabContainerId,formControl){var tabContainer,tabWrap,tabs,selectedIndex;var wysiwygTab=document.getElementById(tabContainerId+"-wysiwyg-tab");var markupTab=document.getElementById(tabContainerId+"-markup-tab");var $previewTab=$("#"+tabContainerId+"-preview-tab");if(wysiwygTab&&markupTab)if(elem.value!="W")with(org.ditchnet){showMarkupEditor(formControl);setTimeout(function(){showMarkupEditor(formControl)},600);dom.DomUtils.hide(wysiwygTab);$(markupTab).addClass("ditch-tab-first");
$previewTab.hide();jsp.TabUtils.findTabElements(markupTab);var selectedIndex;tabContainer=document.getElementById(tabContainerId);tabWrap=dom.DomUtils.getFirstChildByClassName(tabContainer,jsp.TabUtils.TAB_WRAP_CLASS_NAME);tabs=dom.DomUtils.getChildrenByClassName(tabWrap,jsp.TabUtils.TAB_CLASS_NAME);for(var i=0;i<tabs.length;i++)if(dom.DomUtils.hasClassName(tabs[i],dom.DomUtils.FOCUSED_CLASS_NAME)){selectedIndex=i;break}if(selectedIndex==0)jsp.TabUtils.switchTab(markupTab)}else{org.ditchnet.dom.DomUtils.show(wysiwygTab);
$previewTab.show();$(markupTab).removeClass("ditch-tab-first")}}function resizeEditorToFillParent(parentElement){resizeEditorToFillParentOnce(parentElement);$(window).resize(function(){YAHOO.lang.later(400,null,function(){resizeEditorToFillParentOnce(parentElement)})})}
function resizeEditorToFillParentOnce(parentElement){try{var paneWrapHeight=parentElement.height()-50;var editorHeight=parentElement.height()-115;$(".ditch-tab-pane-wrap").height(paneWrapHeight);var editorInstance=tinyMCE.get("editor");if(editorInstance!=null){$(".mceEditor").height(editorHeight);$(".mceLayout").height(editorHeight);$("#editor_tbl").height(editorHeight);$(".mceIframeContainer").height(editorHeight);$("#editor_ifr").height(editorHeight-5)}}catch(e){console.log(e)}}
function toHtml(wiki,editorId){wiki=replaceInTag(wiki,"{{{","}}}",[/&/g,/\[/g,/\]/g,/\{/g,/\}/g,/\\/g,/\_/g,/\!/g,/\'/g,/-/g,/%/g],["&amp;","&#91;","&#93;","&#123;","&#125;","&#92;","&#95;","&#33;","&#39;","&#45;","&#37;"]);for(var i=7;i>0;i--){var re=new RegExp("^>{"+i+"}(.*?)$","mg");wiki=wiki.replace(re,'==TS==span class="bq'+i+'"==TE==$1==TS==/span==TE==\n')}wiki=replaceSymbolsToHtml(wiki);wiki=wiki.replace(/}}} *$/mg,"}}}");var first=0;wiki="\n"+wiki;var last=0;while(true){first=wiki.indexOf("\n{{{",
first);last=wiki.indexOf("}}}",first);if(last==-1||first==-1)break;var pref=wiki.substring(first+4,last);pref=pref.replace(/^ +\n/g,"<br />");pref=pref.replace(/^ *\n/g,"");pref=pref.replace(/\n/g,"<br />");wiki=wiki.substring(0,first)+"\n"+"<wikicode1>"+pref+"</wikicode1>"+wiki.substring(last+3,wiki.length);first=last}wiki=wiki.replace(/\{\{\{([^\}]*)\}\}\}/g,"<wikicode>$1</wikicode>");wiki=replaceInTag(wiki,"<wikicode","</wikicode",[/\n/g],["<br />"]);wiki=wiki.replace(/^<wikicode1>(.*?)<\/wikicode1>(.*?)$/mg,
"<wikicode2><wikicode1>$1</wikicode1>$2</wikicode2>");wiki=wiki.replace(/^!1(.*?)$/mg,"<h1>$1</h1>");wiki=wiki.replace(/^!2(.*?)$/mg,"<h2>$1</h2>");wiki=wiki.replace(/^!3(.*?)$/mg,"<h3>$1</h3>");wiki=wiki.replace(/^!4(.*?)$/mg,"<h4>$1</h4>");wiki=wiki.replace(/^!5(.*?)$/mg,"<h5>$1</h5>");wiki=wiki.replace(/^!!!(.*?)$/mg,"<h2>$1</h2>");wiki=wiki.replace(/^!!(.*?)$/mg,"<h3>$1</h3>");wiki=wiki.replace(/^!(.*?)$/mg,"<h4>$1</h4>");wiki=wiki.replace(/^\|(.*?)$/mg,"<table>\n|$1\n</table>");wiki=wiki.replace(/<\/table>\r?\n<table>/g,
"");wiki=replaceInTag(wiki,"<table","</table>",[/<wikicode>/g,/<\/wikicode>/g],["===wikicode===","==-wikicode-=="]);wiki=replaceInTag(wiki,"<table>","</table>",[/\[([^\]]*)\|([^\]]*)\]/g,/^\|\|(.*?)$/mg,/^\|(.*?)$/mg,/\|\|/g,/\|/g,/<th>([^<]*)</g,/<td>([^<]*)</g,/<<t/g,/&#124;/g,/<td>\s*<\/td>/g],["[$1&#124;$2]","<tr>||$1<</tr>","<tr>|$1<</tr>","<<th>","<<td>","<th>$1</th>","<td>$1</td>","<t","|","<td>&nbsp;</td>"]);wiki=wiki.replace(/\n+(<\/table>|<th>|<td>|<tr>)/g,"$1");wiki=wiki.replace(/<table>/g,
'<table border="1">');wiki=replaceInTag(wiki,"<table","</table>",[/===wikicode===/g,/==-wikicode-==/g],["<wikicode>","</wikicode>"]);wiki=replaceInTag(wiki,"<table","</table>",[/<th><\/th>/g],["<th>&nbsp;</th>"]);wiki=wiki.replace(/\%\%\((.*?)\)\s*\n(?!\n)([^%]*)\%\%/g,'<span style="$1"><br />$2</span><br />');wiki=wiki.replace(/\%\%\((.*?)\)([^%]*)\%\%/g,'<span style="$1">$2</span>');wiki=wiki.replace(/\%\%(?=blue|cyan|gray|green|magenta|orange|pink|red|yellow)(.*?)\s+([^%]*)\%\%/mg,'<span class="$1">$2</span>');
wiki=replaceInTag(wiki,"<span","</span>",[/\n\n/g],["<p></p>"]);wiki=wiki.replace(/\%\%commentbox\s([^%]*)\%\%/g,'<span style="float:right; width: 20%; border-style: inset; background: #f0f0f0; font-size: 80%; padding: 4px; margin-left: 4px;">$1</span>');wiki=wiki.replace(/^;(.*?)$/mg,"<dl><dt>$1</dt></dl>");wiki=wiki.replace(/^<dl><dt>(.*?):(.*?)<\/dt><\/dl>$/mg,"<dl><dt>$1</dt><dd>$2</dd></dl>");var i=0;var regExp=new RegExp("^[\\#\\*]","mg");while(regExp.test(wiki)){wiki=toHtmlLists(wiki);if(i++>=
100){alert("Error in UL-OL algorithm.");break}}wiki=wiki.replace(/\r?\n(<\/?li>|<\/?ol>|<\/?ul>)/g,"$1");wiki=wiki.replace(/<\/li><\/ol>\n<wikicode2>(.*?)<\/wikicode2><ol>/g,"<wikicode2>$1</wikicode2></li>");wiki=wiki.replace(/\n<dl>/g,"<dl>");wiki=wiki.replace(/\n(<h\d>)/g,"$1");wiki=wiki.replace(/\n<table/g,"<table");wiki=wiki.replace(/\[\{\s*Image \s*([^\]]*)\}\]/g,"<img $1/>");wiki=replaceInTag(wiki,"<img ","/>",[/\'/g,/\n/g],['"',""]);wiki=wiki.replace(/<img ([^\>]*)link=\"([^\"]*)\"([^\>]*)\/>/g,
'<a href="$2"><img $1$3/></a>');wiki=wiki.replace(/\[\s*(http|ftp|mailto|https|news)([^\]]*)\s*\|\s*([^\]]*)(gif|jpg|jpeg)\s*\]/g,'<a href="$1$2"><img src="$3$4" alt="$1$2"/></a>');wiki=wiki.replace(/\[([^\!])\s*([^\]]*)(gif|jpg|jpeg|png)\s*\]/g,'<img src="$1$2$3" />');wiki=wiki.replace(/\[\s*\!\s*(.+?)\s*([^\!])\]/g,"[!$1$2!]");var localAttachmentRegexp=/\[\s*\!\s*(.+?)\s*\!\s*\]/g;wiki=wiki.replace(localAttachmentRegexp,function(match,attachmentName,idx,group0){var isImage=attachmentName.match(/(gif|jpg|jpeg|png)$/gi);
if(isImage){var conversationId=uploaderExtensions.getUploadConversationIdForWysiwygEditor(editorId);var url=contextPath+"/wysiwyg/image.spr?conversationId="+(conversationId?encodeURIComponent(conversationId):null);var entityRef=cbwiki.getEditorsEntityReference(editorId);url+="&entityRef="+(entityRef||null);url+="&fileName="+encodeURIComponent(attachmentName);var asImage="<img alt='ALT_WIKI:"+escape(match)+"' src='"+url+"' ></img>";return asImage}return match});wiki=wiki.replace(/\[\s*\!\s*\/(\d+)\s*\!\s*\]/g,
'<img alt="cbwiki_local_attachment_$1" src="'+contextPath+'/displayDocument/$1.jpg?doc_id=$1&amp;history=false&amp;notification=false"/>');wiki=wiki.replace(/\[\s*([^\]]*)\s*\|\s*(http|ftp|mailto|https|news)([^\]]*)\s*\]/g,'<a href="$2$3">$1</a>');wiki=wiki.replace(/\[\s*(http|ftp|mailto|https|news)([^!\]]*)\s*\](\s*)\n/g,'<a href="$1$2">$1$2</a>$3\n');wiki=wiki.replace(/\[\s*(http|ftp|mailto|https|news)([^!\]]*)\s*\]\s*/g,'<a href="$1$2">$1$2</a>');if(wiki.charAt(0)=="\n")wiki=wiki.substring(1);
wiki=wiki.replace(/^\/\/(.*?)$/mg,'<span class="cbcomment">$1</span>');wiki=wiki.replace(/\n/g,"<nln></nln>");wiki=wiki.replace(/\^\^(.*?)\^\^/mg,"<sup>$1</sup>");wiki=wiki.replace(/,,(.*?),,/mg,"<sub>$1</sub>");wiki=wiki.replace(/<nln><\/nln><wikicode1>/g,"<wikicode1>");wiki=wiki.replace(/<wikicode1>/g,"<pre>");wiki=wiki.replace(/<\/wikicode1>/g,"</pre>");wiki=wiki.replace(/<wikicode2>/g,"");wiki=wiki.replace(/<\/wikicode2>/g,"");wiki=wiki.replace(/<wikicode>/g,'<span class="inlinePre">');wiki=wiki.replace(/<\/wikicode>/g,
"</span>");wiki=wiki.replace(/__(.*?)__/g,"<b>$1</b>");wiki=wiki.replace(/\'\'(.*?)\'\'/g,"<i>$1</i>");wiki=wiki.replace(/\{\{(.*?)\}\}/g,"<tt>$1</tt>");wiki=wiki.replace(/<nln><\/nln>----*-/g,"<hr />");wiki=wiki.replace(/\\\\\\/g,'<br clear="all" />');wiki=wiki.replace(/\\\\/g,"<br />");wiki=wiki.replace(/==TS==/g,"<");wiki=wiki.replace(/==TE==/g,">");wiki=formatNLnToParagraph(wiki);wiki=wiki.replace(/(\[|\|)(WIKIPAGE|BUG|ISSUE|TASK|PROJ|DOC|DIR|NOTES|TRACKER|REPORT|TEST|REQ):([0-9]+)\!\]/g,"$1$2:$3]");
return wiki}function formatNLnToParagraph(wiki){wiki=wiki+"#endfile#";wiki=wiki.replace(/<nln><\/nln><nln><\/nln>(?!<nln>|<h[1234]>|<pre>|<table>|<dl>)(.*?)(<nln><\/nln><nln><\/nln>|<h[1234]>|<pre>|<table>|<dl>|\#endfile\#)/g,"<p>$1</p>$2");wiki=wiki.replace(/<nln><\/nln><nln><\/nln>(?!<nln>|<h[1234]>|<pre>|<table>|<dl>|<p>)(.*?)(<nln><\/nln><nln><\/nln>|<h[1234]>|<pre>|<table>|<dl>|<p>|\#endfile\#)/g,"<p>$1</p>$2");wiki=wiki.substring(0,wiki.length-9);return wiki}
function replaceSymbolsToHtml(str){str=str.replace(/</g,"&lt;");str=str.replace(/>/g,"&gt;");str=str.replace(/\r\n/g,"\n");return str}
function toHtmlLists(wiki){wiki=wiki.replace(/^\#(.*?)$(?!\#)/mg,"<ol>\r\n#$1\r\n</ol>");wiki=wiki.replace(/\r?\n<\/ol>\r?\n<ol>/g,"");wiki=wiki.replace(/^\*(.*?)$(?!\*)/mg,"<ul>\r\n*$1\r\n</ul>");wiki=wiki.replace(/\r?\n<\/ul>\r?\n<ul>/g,"");wiki=wiki.replace(/^\#(?![\#\*])(.*?)$/mg,"<li>$1</li>");wiki=wiki.replace(/^\*(?![\#\*])(.*?)$/mg,"<li>$1</li>");wiki=wiki.replace(/^[\*\#](.*?)$/mg,"$1");return wiki}
function toWiki(html){html=replaceInTag(html,"<table","</table>",[/\n/g],[""]);html=replaceInTag(html,"<ol","</ol>",[/\n/g],[""]);html=replaceInTag(html,"<ul","</ul>",[/\n/g],[""]);html=html.replace(/<tbody>/g,"");html=html.replace(/<\/tbody>/g,"");html=replaceInTag(html,"<table","</table>",[/<td><\/td>/g],["<td> </td>"]);html=replaceInTag(html,"<table","</table>",[/<\/p>/g],["</p><br />"]);html=replaceInTag(html,"<table","</table>",[/<\/?p>|<hr [^>]*\/>/g,/<\/?h[234]>/g,/<\/?[uo]l>/g,/<li>/g,/<\/li>/g,
/(<t[hd]>)\\\\/g,/\s?<br \/>/g,/\|/g],["","__","","\\\\","","$1"," \\\\","&#166;"]);html=replaceInTag(html,"<h1>","</h1>",[/<\/?nln>|<hr [^>]*\/>/g,/\s?<br \/>/g],[""," \\\\"]);html=replaceInTag(html,"<h2>","</h2>",[/<\/?nln>|<hr [^>]*\/>/g,/\s?<br \/>/g],[""," \\\\"]);html=replaceInTag(html,"<h3>","</h3>",[/<\/?nln>|<hr [^>]*\/>/g,/\s?<br \/>/g],[""," \\\\"]);html=replaceInTag(html,"<h4>","</h4>",[/<\/?nln>|<hr [^>]*\/>/g,/\s?<br \/>/g],[""," \\\\"]);html=replaceInTag(html,"<h5>","</h5>",[/<\/?nln>|<hr [^>]*\/>/g,
/\s?<br \/>/g],[""," \\\\"]);html=replaceInTag(html,"<dl>","</dl>",[/\s?<br \/>/g],[" \\\\"]);html=replaceInTag(html,"<li>","</li>",[/<br \/>$/g,/<\/?nln>/g,/\s?<br \/>/g],["",""," \\\\"]);html=replaceInTag(html,"<pre>","</pre>",[/\s?<br \/>/g],["<nln></nln>"]);html=html.replace(/&nbsp;/g," ");html=html.replace(/\s*<p>/g,"<nln></nln><nln></nln>");html=html.replace(/<\/p>/g,"");html=html.replace(/<strong>|<\/strong>/g,"__");html=html.replace(/<em>|<\/em>/g,"''");html=html.replace(/<tt>/g,"{{");html=
html.replace(/<\/tt>/g,"}}");html=html.replace(/<hr \/><nln><\/nln>/g,"<nln></nln>----<nln></nln>");html=html.replace(/<hr \/>/g,"<nln></nln>----<nln></nln>");html=html.replace(/<br \/>\s*<br \/>(?!<br \/>)/g," \\\\<nln></nln><nln></nln>");html=html.replace(/\s?<br \/>/g," \\\\");html=html.replace(/<br clear="all" \/>/g," \\\\\\");html=html.replace(/}<\/pre>/g,"} </pre>");html=html.replace(/<pre>(.*?)<\/pre>/g,"<nln></nln>{{{$1}}}");html=html.replace(/<span class=\"inlinePre\">(.*?)<\/span>/g,"{{{$1}}}");
html=replaceInTag(html,"{{{","}}}",[/^\s*<nln><\/nln>/g],["<nln></nln><nln></nln>"]);html=html.replace(/<tr>(.*?)<\/tr>/mg,"<nln></nln>$1");html=html.replace(/<th>(.*?)\\?\\?<\/th>/g,"||$1");html=html.replace(/<td>(.*?)\\?\\?<\/td>/g,"|$1");html=html.replace(/<\/table><nln><\/nln>/g,"<nln></nln>");html=html.replace(/<table>/g,"");html=html.replace(/<table border=\"1\">/g,"");html=html.replace(/<\/table>/g,"<nln></nln>");html=html.replace(/<\/?t[hdr]>/g,"");html=html.replace(/<h5>/g,"!5");html=html.replace(/<h4>/g,
"!4");html=html.replace(/<h3>/g,"!3");html=html.replace(/<h2>/g,"!2");html=html.replace(/<h1>/g,"!1");html=html.replace(/<\/h[12345]>/g,"");html=html.replace(/<\/?h[12345]>/g,"");html=html.replace(/(![12345])(\S)/g,"$1 $2");html=html.replace(/&amp;/g,"&");html=html.replace(/\<img.*?alt=\"cbwiki_local_attachment_(\d+)".*?\/\>/g,"[!/$1!]");html=html.replace(/\<img.*?alt=.*?[\"|\'](.*?)[\"|\'].*?\/\>/g,function(match,alt,idx){var PREFIX="ALT_WIKI:";var idx=alt.indexOf(PREFIX);if(idx!=0)return match;
var altWiki=alt.substr(PREFIX.length);return unescape(altWiki)});html=html.replace(/<a href=\"([^\"]*)\"><img src=\"([^\"]*)(gif|jpg|jpeg)\" alt=\"[^\"]*\"[^\/]*\/><\/a>/g,"[$1|$2$3]");html=html.replace(/<a href=\"([^\"]*)\"><img ([^>]*)\/><\/a>/g,"<img $2 link='$1'/>");html=html.replace(/<a href=\"([^\"]*)\">([^<]*)<\/a>/g,"[$2|$1]");html=html.replace(/<a href=\"([^\"]*)\">[^<]*<\/a>/g,"[$1]");html=replaceInTag(html,"<img ","/>",[/\"/g,/title=\'[^\']*\'/g,/style=\'[^\']*\'/g],["'","",""]);html=html.replace(/<img ([^<]*)\/>/g,
"[{Image $1}]");html=html.replace(/\&amp;/g,"&");html=html.replace(/<\/?a.*?>|<\/?img.*?\/>/g,"");html=html.replace(/<span class="cbcomment">(.*?)<\/span>/mg,"//$1");html=replaceInTag(html,"<span","</span>",[/"<p><\/p>"/g],["\n\n"]);html=html.replace(/<span style=\"(.*?)\">(.*?)<\/span>/g,"%%($1) $2%%");html=html.replace(/<span style=\"(.*?)\">\s*\\\\(.*?)<\/span>\s*\\\\/g,"%%($1)<nln></nln>$2%%");html=html.replace(/\%\%\((.*?)\)\s*\\\\([^%]*)\%\%\s*\\\\/g,"%%($1)<nln></nln>$2%%");html=html.replace(/<span class=\"(blue|cyan|gray|green|magenta|orange|pink|red|yellow)\">(.*?)<\/span>/g,
"%%$1 $2%%");html=html.replace(/\%\%\(font-size\: 80\%\; background\: \#f0f0f0\; float\: right\; margin-left\: 4px\; width\: 20\%\; border\-style\: inset\; padding\: 4px\)\s+(.*?)\%\%/g,"%%commentbox $1%%");html=replaceInTag(html,"<dl>","</dl>",[/<\/dt><dt>/g,/<\/dd><dd>/g,/<dt>(.*?)<\/dt>/g,/<dd>(.*?)<\/dd>/g,/<\/?nln>/g],["\\\\","\\\\",";$1",":$1",""]);html=html.replace(/<dl>(.*?)<\/dl>/g,"<nln></nln>$1");html=html.replace(/<\/?d[ldt]>/g,"");html=html.replace(/<ol>\n+<li>/g,"<ol><li>");html=html.replace(/<\/li>\n+<li>/g,
"</li><li>");html=html.replace(/<\/li>\n+<\/ol>/g,"</li></ol>");html=html.replace(/<\/li>\n+<ol>/g,"</li><ol>");html=html.replace(/<\/ol>\n+<li>/g,"</ol><li>");html=html.replace(/<ul>\n+<li>/g,"<ul><li>");html=html.replace(/<\/li>\n+<li>/g,"</li><li>");html=html.replace(/<\/li>\n+<\/ul>/g,"</li></ul>");html=html.replace(/<\/li>\n+<ul>/g,"</li><ul>");html=html.replace(/<\/ul>\n+<li>/g,"</ul><li>");html=html.replace(/<nln><\/nln>\{\{\{(.*?)\}\}\}<\/li><li>/g,"</li></ol>{{{$1}}}<ol><li>");html=html.replace(/(<\/[uo]l>(?!<))/g,
"$1<nln></nln>");var i=0;while(html.indexOf("<ol>")!=-1||html.indexOf("<ul>")!=-1){if(i++>100){alert("Error in UL-OL ToWiki algorithm.");break}html=toWikiLists(html)}html=html.replace(/<li>(.*?)<\/li>/g,"<nln></nln>$1");html=html.replace(/<\/?[ou]l>|<\/?li>/g,"");html=html.replace(/^<nln><\/nln>\{\{\{(.*?)$/mg,"<nln></nln>{{{<nln></nln>$1");html=html.replace(/\}\}\}$/mg,"\n}}}");html=replaceInTag(html,"{{{","}}}",[/ \\\\ /g],["\n"]);html=replaceInTag(html,"{{{","}}}",[/ \\\\$/mg],["\n"]);html=replaceSymbolsToWiki(html);
html=html.replace(/<\/?blockquote>/g,"");html=html.replace(/<sup>(.*?)<\/sup>/mg,"^^$1^^");html=html.replace(/<sub>(.*?)<\/sub>/mg,",,$1,,");html=html.replace(/<span class="bq1">(.*?)<\/span>/mg,">$1");html=html.replace(/<span class="bq2">(.*?)<\/span>/mg,">>$1");html=html.replace(/<span class="bq3">(.*?)<\/span>/mg,">>>$1");html=html.replace(/<span class="bq4">(.*?)<\/span>/mg,">>>>$1");html=html.replace(/<span class="bq5">(.*?)<\/span>/mg,">>>>>$1");html=html.replace(/<span class="bq6">(.*?)<\/span>/mg,
">>>>>>$1");html=html.replace(/<span class="bq7">(.*?)<\/span>/mg,">>>>>>>$1");html=html.replace(/<\/?span[^>]*>/g,"");html=html.replace(/^\s*/,"");html=html.replace(/\|\s\n\n\n\[\{Html/g,"|\n[{Html");html=html.replace(/\n\n\n\[\{Html/g,"\n[{Html");html=html.replace(/\}\]\s\\\n\n\|/g,"}] \\\n|");html=html.replace(/\}\]\s\n/g,"}] \\\\\n");html=html.replace(/\}\]\n/g,"}] \\\\\n");html=html.replace(/\n{3,}/g,"\n\n");html=html.replace(/\[(ftp|http|https):\/\/(.*?)\|/g,"[");html=html.replace(/<div(.*?)>/g,
"");html=html.replace(/<\/div>/g,"");html=html.replace(/<pre>/g,"{{{");html=html.replace(/<\/pre>/g,"}}}");html=html.replace(/\[(.*?)\&\#166\;(USER|WIKIPAGE|BUG|ISSUE|TASK|PROJ|DOC|DIR|NOTES|TRACKER|REPORT|TEST|REQ):([0-9]+)\]/g,"[$1|$2:$3]");return html}
function replaceSymbolsToWiki(str){str=str.replace(/&lt;/g,"<");str=str.replace(/&gt;/g,">");str=str.replace(/&amp;/g,"&");str=str.replace(/&nbsp;/g," ");str=str.replace(/&quot;/g,'"');str=str.replace(/&#39;/g,"'");str=str.replace(/<nln><\/nln>/g,"\n");return str}
function toWikiLists(html){var firstIndOL=html.lastIndexOf("<ol>");var firstIndUL=html.lastIndexOf("<ul>");var firstInd=Math.max(firstIndOL,firstIndUL);var subStr="";var lastInd=0;if(firstIndOL>firstIndUL){lastInd=html.indexOf("</ol>",firstInd)+5;subStr=html.substring(firstInd,lastInd);subStr=subStr.replace(/<li>([^<]*)<\/li>/g,"<li>#$1</li>");subStr=subStr.replace(/<ol>|<\/ol>/g,"")}else if(firstInd!=-1){lastInd=html.indexOf("</ul>",firstInd)+5;subStr=html.substring(firstInd,lastInd);subStr=subStr.replace(/<li>([^<]*)<\/li>/g,
"<li>*$1</li>");subStr=subStr.replace(/<ul>|<\/ul>/g,"")}if(subStr!="")html=html.substring(0,firstInd)+subStr+html.substring(lastInd,html.length);return html}
function onPrePaste(content){content=content.replace(/(<\/?)TABLE.*?>/gi,"$1table>");content=content.replace(/<\/?u(?!l).*?>/gi,"");content=content.replace(/<(\/?)h[156].*?>/gi,"<$1b>");content=content.replace(/<(\/?)h([234]).*?>/gi,"<$1h$2>");content=content.replace(/[\r\n\t]/g," ");content=replaceInTag(content,"<table","</table>",[/<\/?p>/gi,/\s*<t([rdh]).*?>/gi],["","<t$1>"]);return content}
function replaceInTag(str,tagBegin,tagEnd,oldVal,newVal){var first=0;while(true){first=str.indexOf(tagBegin,first);last=str.indexOf(tagEnd,first);if(last==-1||first==-1)break;first+=tagBegin.length;var tmpstr=str.substring(first,last);if(typeof newVal=="object")for(var i=0;i<newVal.length;i++)tmpstr=tmpstr.replace(oldVal[i],newVal[i]);else tmpstr=tmpstr.replace(oldVal,newVal);str=str.substring(0,first)+tmpstr+str.substring(last,str.length);first=last+tagEnd.length}return str}
var accentsAndEntities={242:"&cent;",243:"&pound;",244:"&euro;",245:"&yen;",260:"&deg;",274:"&frac14;",274:"&OElig;",275:"&frac12;",275:"&oelig;",276:"&frac34;",276:"&Yuml;",241:"&iexcl;",253:"&laquo;",273:"&raquo;",277:"&iquest;",300:"&Agrave;",301:"&Aacute;",302:"&Acirc;",303:"&Atilde;",304:"&Auml;",305:"&Aring;",306:"&AElig;",307:"&Ccedil;",310:"&Egrave;",311:"&Eacute;",312:"&Ecirc;",313:"&Euml;",314:"&Igrave;",315:"&Iacute;",316:"&Icirc;",317:"&Iuml;",320:"&ETH;",321:"&Ntilde;",322:"&Ograve;",
323:"&Oacute;",324:"&Ocirc;",325:"&Otilde;",326:"&Ouml;",330:"&Oslash;",331:"&Ugrave;",332:"&Uacute;",333:"&Ucirc;",334:"&Uuml;",335:"&Yacute;",336:"&THORN;",337:"&szlig;",340:"&agrave;",341:"&aacute;",342:"&acirc;",343:"&atilde;",344:"&auml;",345:"&aring;",346:"&aelig;",347:"&ccedil;",350:"&egrave;",351:"&eacute;",352:"&ecirc;",353:"&euml;",354:"&igrave;",355:"&iacute;",356:"&icirc;",357:"&iuml;",360:"&eth;",361:"&ntilde;",362:"&ograve;",363:"&oacute;",364:"&ocirc;",365:"&otilde;",366:"&ouml;",370:"&oslash;",
371:"&ugrave;",372:"&uacute;",373:"&ucirc;",374:"&uuml;",375:"&yacute;",376:"&thorn;",377:"&yuml;"};function accentsToEntities(text){if(text==null)return"";var accent=null,entity;for(accent in accentsAndEntities){entity=accentsAndEntities[accent];text=text.replace(new RegExp("\\\\"+accent,"g"),entity)}return text}
function wikiModeCallback(mode){codebeamer.selectedMode=mode;$("#editorModeLink").attr("style","visibility:hidden");try{var t=$("#containerIdTemplate-"+mode+"-tab");org.ditchnet.jsp.TabUtils.switchTab(t[0])}catch(e){}}codebeamer=codebeamer||{};codebeamer.TestStepEditor=function(){};codebeamer.TestStepEditor.checkboxHandler=function(){var $t=$(this);$($t.siblings("[name=critical]")[0]).val(!$t.is(":checked"))};
codebeamer.TestStepEditor.prototype={init:function(tableId){var self=this;this.tableId=tableId;$(document).ready(function(){TreeToTableDNDIntegration.init();$("#"+self.tableId+" tbody").sortable({"stop":function(e,ui){TreeToTableDNDIntegration.fixZebraTable($("#"+self.tableId));self.initTabHandler();$("#"+self.tableId).addClass("edited")}});self.initAutoResize();self.initTabHandler();self.initCheckboxHandlers()})},initAutoResize:function(){$("#"+this.tableId+" .inlineInput").each(function(){try{$(this).autoResize({minHeight:"original",
extraSpace:15});$(this).trigger("keyup")}catch(e){}})},initTabHandler:function(){var self=this;var $last=$("#"+this.tableId+" .inlineInput").last();$(".lastInput").removeClass("lastInput");$last.addClass("lastInput");$last.keydown(function(event){if($(this).hasClass("lastInput")&&event.keyCode=="9"&&!event.shiftKey){self.addNewRow(self.tableId);event.preventDefault()}})},initCheckboxHandlers:function(){$("#"+this.tableId+" [type=checkbox]").mousedown(codebeamer.TestStepEditor.checkboxHandler)},addNewRow:function(tableId){var $table=
$("#"+this.tableId+" tbody");var $last=$table.find("tr").last();this.insertRow($last,"after")},insertRow:function($referenceRow,fn){var $row=$("#newRowTemplate");$referenceRow[fn]($row.html().replaceAll("#tableId",this.tableId));try{var $empty=$("#"+this.tableId+" tr.empty");if($empty)$empty.remove()}catch(e){}if($referenceRow.is(".empty"))$row=$($("#"+this.tableId).find("tr")[1]);else if(fn==="after")$row=$referenceRow.next();else $row=$referenceRow.prev();$("#"+this.tableId).addClass("edited");
$row.find(".inlineInput").first().focus();$row.find("[type=checkbox]").mousedown(codebeamer.TestStepEditor.checkboxHandler);this.initAutoResize();this.initTabHandler();TreeToTableDNDIntegration.fixZebraTable($referenceRow.closest("table"))},deleteTestStep:function(b){var $btn=$(b);var $row=$btn.parentsUntil("table","tr");$row.remove();$(".treeToTableDropPlaceHolder").remove();var $t=$("#"+this.tableId);TreeToTableDNDIntegration.handleEmptyTable($t);TreeToTableDNDIntegration.fixZebraTable($t);this.initTabHandler();
$t.addClass("edited")},insertStepBefore:function(b){var $btn=$(b);var $row=$btn.parentsUntil("table","tr");this.insertRow($row,"before")},insertStepAfter:function(b){var $btn=$(b);var $row=$btn.parentsUntil("table","tr");this.insertRow($row,"after")}};
var TreeToTableDNDIntegration={hideTreeNodesAppearInTable:false,init:function(table,tree,emptyTableMessage,idFieldSelector){$(document).bind("drag_stop.vakata",function(event,data){TreeToTableDNDIntegration.drag_stop(data.event,table,emptyTableMessage)});$(document).bind("mousemove",TreeToTableDNDIntegration._indicateWhereRowWillBeDropped);$(table).bind("changed",function(event,changedRows){var $table=$(this);TreeToTableDNDIntegration.handleEmptyTable($table,emptyTableMessage);TreeToTableDNDIntegration.fixZebraTable($table);
TreeToTableDNDIntegration._hideTreeNodesAppearInTable($table,tree,changedRows,idFieldSelector)});$(tree).bind("loaded.jstree",function(event,data){var $rows=$(table).find("tbody tr");TreeToTableDNDIntegration._hideTreeNodesAppearInTable(table,tree,$rows,idFieldSelector);TreeToTableDNDIntegration._fixTreeGraphics(tree)});$(tree).bind("drop_check",function(event,data){TreeToTableDNDIntegration.markElementAsDroppingOver(data.r)})},handleEmptyTable:function($table,emptyRowMessageCode){$table=$table.closest("table");
$table.find("tbody tr.empty").remove();var $rows=$table.find("tbody tr");if($rows.length==0){if(!emptyRowMessageCode)emptyRowMessageCode="table.nothing.found";var emptyRowMessage=i18n.message(emptyRowMessageCode);var $tbody=$table.find("tbody");var colspan=$table.find("thead th").length;$tbody.append("<tr class='empty'><td colspan='"+colspan+"'>"+emptyRowMessage+"</td></tr>")}},fixZebraTable:function(table){$(table).find("tbody tr").each(function(idx){var odd=idx%2==0;$(this).toggleClass("odd",odd).toggleClass("even",
!odd)})},markElementAsDroppingOver:function(element){if(element)$(element).closest("table").addClass("treeDroppingOver");else $(".treeDroppingOver").removeClass("treeDroppingOver")},findRowToDrop:function($target,event){var $rowToDrop=$target.closest("tbody tr");if($rowToDrop.size()==0||$rowToDrop.hasClass("treeToTableDropPlaceHolder"))return{$rowToDrop:null};var middlePoint=$rowToDrop.offset().top+$rowToDrop.height()/2;var mouseY=event.pageY;var before=mouseY<middlePoint;return{$rowToDrop:$rowToDrop,
before:before}},isChildOf:function(parent,element){var parents=$(element).parents().get();for(var i=0;i<parents.length;i++)if($(parents[i]).is(parent))return true;return false},drag_stop:function(event,table,emptyTableMessage){var currentTarget=event.target;var tableBody=$(table).children("tbody").get(0);var isDroppedOverChild=TreeToTableDNDIntegration.isChildOf(tableBody,currentTarget);var droppedOverTable=currentTarget==table||isDroppedOverChild;TreeToTableDNDIntegration.markElementAsDroppingOver(null);
TreeToTableDNDIntegration._removeAllPlaceHolders(droppedOverTable);if(!droppedOverTable)TreeToTableDNDIntegration.handleEmptyTable($(table),emptyTableMessage)},_removeAllPlaceHolders:function(hideOnly){if(hideOnly)$(".treeToTableDropPlaceHolder").hide();else $(".treeToTableDropPlaceHolder").remove()},_indicateWhereRowWillBeDropped:function(event){if(TreeToTableDNDIntegration.updater){clearTimeout(TreeToTableDNDIntegration.updater);TreeToTableDNDIntegration.updater=null}TreeToTableDNDIntegration.updater=
setTimeout(function(){var $rowMouseOver=$(event.target).closest("tr");if($rowMouseOver.size()==null)return;var $table=$rowMouseOver.closest("table");if($table.hasClass("treeDroppingOver")){var dropTarget=TreeToTableDNDIntegration.findRowToDrop($rowMouseOver,event);var $row=dropTarget.$rowToDrop;if($row){var colspan=$table.find("thead th").length;var placeholder="<tr class='treeToTableDropPlaceHolder'><td colspan='"+colspan+"'><div>"+i18n.message("testset.editor.testcases.drop.placeholder")+"</div></td></tr>";
var $emptyRows=$table.find("tbody tr.empty");if($emptyRows.length==$table.find("tbody tr").length){$emptyRows.after(placeholder);$emptyRows.remove()}else if(dropTarget.before)if($row.prev().hasClass("treeToTableDropPlaceHolder"));else{TreeToTableDNDIntegration._removeAllPlaceHolders();$row.before(placeholder)}else if($row.next().hasClass("treeToTableDropPlaceHolder"));else{TreeToTableDNDIntegration._removeAllPlaceHolders();$row.after(placeholder)}}TreeToTableDNDIntegration.updater=null}},20)},_hideTreeNodesAppearInTable:function(table,
tree,changedRows,idFieldSelector){if(!changedRows||!idFieldSelector)return;var removed=$(table).find(changedRows).length==0;$(changedRows).each(function(){var nodeId=$(this).find(idFieldSelector).val();var $treeNode=$(tree).find("#"+nodeId);$treeNode=$treeNode.filter('[typeid="9"]');if(removed){$treeNode.removeClass("treeNodeDisabled");if(TreeToTableDNDIntegration.hideTreeNodesAppearInTable)TreeToTableDNDIntegration.toggleJstreeNode($treeNode,true)}else{$treeNode.addClass("treeNodeDisabled");if(TreeToTableDNDIntegration.hideTreeNodesAppearInTable)if($treeNode.hasClass("jstree-leaf"))TreeToTableDNDIntegration.toggleJstreeNode($treeNode,
false)}})},_fixTreeGraphics:function(tree){if(!TreeToTableDNDIntegration.hideTreeNodesAppearInTable)return;var $visible=$(tree+" li").not(".hidden-node");$visible.each(function(idx,node){TreeToTableDNDIntegration._fixTreeGraphicsOfNode(node)})},_fixTreeGraphicsOfNode:function(treeNode){var $n=$(treeNode);if($n.hasClass("jstree-leaf")){var last=$n.nextAll().not(".hidden-node").last();if(last.length!=0)last.addClass("jstree-last");else $n.addClass("jstree-last")}else{var c=$n.children("li").not(".hidden-node");
if(c.length==0){var next=$n.nextAll().not(".hidden-node");if(next.length==0)$n.addClass("jstree-last")}}},toggleJstreeNode:function($treeNode,visible){if(visible)$treeNode.show();else{$treeNode.hide();$treeNode.children("ul").find("li").hide().removeClass("jstree-last");$treeNode.toggleClass("hidden-node")}$treeNode.siblings().removeClass("jstree-last");var $parentsToCorrect=$treeNode.parentsUntil(".jstree");if(visible)$parentsToCorrect=$parentsToCorrect.andSelf();$parentsToCorrect.filter("ul").each(function(){$(this).children("li:visible").eq(-1).addClass("jstree-last")})}};
(function($){var uid="ar"+ +new Date,defaults=autoResize.defaults={onResize:function(){},onBeforeResize:function(){return 123},onAfterResize:function(){return 555},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500};autoResize.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","paddingTop",
"paddingLeft","paddingBottom","paddingRight","width"];autoResize.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden"};autoResize.resizableFilterSelector=["textarea:not(textarea."+uid+")","input:not(input[type])","input[type=text]","input[type=password]","input[type=email]","input[type=url]"].join(",");autoResize.AutoResizer=AutoResizer;$.fn.autoResize=autoResize;function autoResize(config){this.filter(autoResize.resizableFilterSelector).each(function(){new AutoResizer($(this),
config)});return this}function AutoResizer(el,config){if(el.data("AutoResizer"))el.data("AutoResizer").destroy();config=this.config=$.extend({},autoResize.defaults,config);this.el=el;this.nodeName=el[0].nodeName.toLowerCase();this.originalHeight=el.height();this.previousScrollTop=null;this.value=el.val();if(config.maxWidth==="original")config.maxWidth=el.width();if(config.minWidth==="original")config.minWidth=el.width();if(config.maxHeight==="original")config.maxHeight=el.height();if(config.minHeight===
"original")config.minHeight=el.height();if(this.nodeName==="textarea")el.css({resize:"none",overflowY:"hidden"});el.data("AutoResizer",this);config.animate.complete=function(f){return function(){config.onAfterResize.call(el);return f.apply(this,arguments)}}(config.animate.complete);this.bind()}AutoResizer.prototype={bind:function(){var check=$.proxy(function(){this.check();return true},this);this.unbind();this.el.bind("keyup.autoResize",check).bind("change.autoResize",check).bind("paste.autoResize",
function(){setTimeout(function(){check()},0)});if(!this.el.is(":hidden"))this.check(null,true)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var el=this.el,clone=this.nodeName==="textarea"?el.clone():$("<span/>");this.clone=clone;$.each(autoResize.cloneCSSProperties,function(i,p){clone[0].style[p]=el.css(p)});clone.removeAttr("name").removeAttr("id").addClass(uid).attr("tabIndex",-1).css(autoResize.cloneCSSValues);if(this.nodeName==="textarea")clone.height("auto");else clone.width("auto").css({whiteSpace:"nowrap"})},
check:function(e,immediate){if(!this.clone){this.createClone();this.injectClone()}var config=this.config,clone=this.clone,el=this.el,value=el.val();if(value===this.prevValue)return true;this.prevValue=value;if(this.nodeName==="input"){clone.text(value);var cloneWidth=clone.width(),newWidth=cloneWidth+config.extraSpace>=config.minWidth?cloneWidth+config.extraSpace:config.minWidth,currentWidth=el.width();newWidth=Math.min(newWidth,config.maxWidth);if(newWidth<currentWidth&&newWidth>=config.minWidth||
newWidth>=config.minWidth&&newWidth<=config.maxWidth){config.onBeforeResize.call(el);config.onResize.call(el);el.scrollLeft(0);if(config.animate&&!immediate)el.stop(1,1).animate({width:newWidth},config.animate);else{el.width(newWidth);config.onAfterResize.call(el)}}return}clone.width(el.width()).height(0).val(value).scrollTop(1E4);var scrollTop=clone[0].scrollTop;if(this.previousScrollTop===scrollTop)return;this.previousScrollTop=scrollTop;if(scrollTop+config.extraSpace>=config.maxHeight){el.css("overflowY",
"");scrollTop=config.maxHeight;immediate=true}else if(scrollTop<=config.minHeight)scrollTop=config.minHeight;else{el.css("overflowY","hidden");scrollTop+=config.extraSpace}config.onBeforeResize.call(el);config.onResize.call(el);if(config.animate&&!immediate)el.stop(1,1).animate({height:scrollTop},config.animate);else{el.height(scrollTop);config.onAfterResize.call(el)}},destroy:function(){this.unbind();this.el.removeData("AutoResizer");this.clone.remove();delete this.el;delete this.clone},injectClone:function(){(autoResize.cloneContainer||
(autoResize.cloneContainer=$("<arclones/>").appendTo("body"))).append(this.clone)}}})(jQuery);